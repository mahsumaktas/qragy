var Ti=Object.defineProperty;var Wr=e=>{throw TypeError(e)};var Ci=(e,a,r)=>a in e?Ti(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var Mt=(e,a,r)=>Ci(e,typeof a!="symbol"?a+"":a,r),ir=(e,a,r)=>a.has(e)||Wr("Cannot "+r);var O=(e,a,r)=>(ir(e,a,"read from private field"),r?r.call(e):a.get(e)),Me=(e,a,r)=>a.has(e)?Wr("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(e):a.set(e,r),Ae=(e,a,r,s)=>(ir(e,a,"write to private field"),s?s.call(e,r):a.set(e,r),r),Qe=(e,a,r)=>(ir(e,a,"access private method"),r);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const v of o.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const cr=!1;var Pr=Array.isArray,Mi=Array.prototype.indexOf,Ga=Array.prototype.includes,Ls=Array.from,Ii=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,ml=Object.getOwnPropertyDescriptors,ji=Object.prototype,Di=Array.prototype,Tr=Object.getPrototypeOf,Qr=Object.isExtensible;const Oi=()=>{};function Bi(e){return e()}function ur(e){for(var a=0;a<e.length;a++)e[a]()}function gl(){var e,a,r=new Promise((s,n)=>{e=s,a=n});return{promise:r,resolve:e,reject:a}}function Cr(e,a){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const s of e)if(r.push(s),r.length===a)break;return r}const tt=2,ts=4,Ua=8,yl=1<<24,da=16,Tt=32,Aa=64,fr=128,wt=512,Ze=1024,at=2048,Pt=4096,ht=8192,Gt=16384,as=32768,qa=65536,Jr=1<<17,Ki=1<<18,ss=1<<19,bl=1<<20,Yt=1<<25,za=65536,hr=1<<21,Mr=1<<22,la=1<<23,Ut=Symbol("$state"),Ni=Symbol("legacy props"),Ri=Symbol(""),ha=new class extends Error{constructor(){super(...arguments);Mt(this,"name","StaleReactionError");Mt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var hl;const Hi=!!((hl=globalThis.document)!=null&&hl.contentType)&&globalThis.document.contentType.includes("xml");function wl(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Li(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fi(e,a,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Yi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Gi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ui(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Vi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Wi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ji(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Zi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Xi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const en=1,tn=2,kl=4,an=8,sn=16,rn=1,ln=2,nn=4,on=8,vn=16,dn=1,cn=2,Xe=Symbol(),xl="http://www.w3.org/1999/xhtml",un="http://www.w3.org/2000/svg",fn="http://www.w3.org/1998/Math/MathML";function hn(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function pn(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function $l(e){return e===this.v}function _n(e,a){return e!=e?a==a:e!==a||e!==null&&typeof e=="object"||typeof e=="function"}function ql(e){return!_n(e,this.v)}let rs=!1,mn=!1;function gn(){rs=!0}let Le=null;function Va(e){Le=e}function ze(e,a=!1,r){Le={p:Le,i:!1,c:null,e:null,s:e,x:null,l:rs&&!a?{s:null,u:null,$:[]}:null}}function Ee(e){var a=Le,r=a.e;if(r!==null){a.e=null;for(var s of r)Yl(s)}return a.i=!0,Le=a.p,{}}function xs(){return!rs||Le!==null&&Le.l===null}let pa=[];function zl(){var e=pa;pa=[],ur(e)}function Vt(e){if(pa.length===0&&!fs){var a=pa;queueMicrotask(()=>{a===pa&&zl()})}pa.push(e)}function yn(){for(;pa.length>0;)zl()}function El(e){var a=Ie;if(a===null)return Ce.f|=la,e;if((a.f&as)===0&&(a.f&ts)===0)throw e;ra(e,a)}function ra(e,a){for(;a!==null;){if((a.f&fr)!==0){if((a.f&as)===0)throw e;try{a.b.error(e);return}catch(r){e=r}}a=a.parent}throw e}const bn=-7169;function Ye(e,a){e.f=e.f&bn|a}function Ir(e){(e.f&wt)!==0||e.deps===null?Ye(e,Ze):Ye(e,Pt)}function Sl(e){if(e!==null)for(const a of e)(a.f&tt)===0||(a.f&za)===0||(a.f^=za,Sl(a.deps))}function Al(e,a,r){(e.f&at)!==0?a.add(e):(e.f&Pt)!==0&&r.add(e),Sl(e.deps),Ye(e,Ze)}const Ps=new Set;let qe=null,Bs=null,et=null,nt=[],Fs=null,fs=!1,Wa=null;var ta,Ba,ga,Ka,Na,Ra,aa,It,Ha,dt,pr,_r,mr,gr;const Gr=class Gr{constructor(){Me(this,dt);Mt(this,"current",new Map);Mt(this,"previous",new Map);Me(this,ta,new Set);Me(this,Ba,new Set);Me(this,ga,0);Me(this,Ka,0);Me(this,Na,null);Me(this,Ra,new Set);Me(this,aa,new Set);Me(this,It,new Map);Mt(this,"is_fork",!1);Me(this,Ha,!1)}skip_effect(a){O(this,It).has(a)||O(this,It).set(a,{d:[],m:[]})}unskip_effect(a){var r=O(this,It).get(a);if(r){O(this,It).delete(a);for(var s of r.d)Ye(s,at),St(s);for(s of r.m)Ye(s,Pt),St(s)}}process(a){var n;nt=[],this.apply();var r=Wa=[],s=[];for(const o of a)Qe(this,dt,_r).call(this,o,r,s);if(Wa=null,Qe(this,dt,pr).call(this)){Qe(this,dt,mr).call(this,s),Qe(this,dt,mr).call(this,r);for(const[o,v]of O(this,It))Ml(o,v)}else{Bs=this,qe=null;for(const o of O(this,ta))o(this);O(this,ta).clear(),O(this,ga)===0&&Qe(this,dt,gr).call(this),Zr(s),Zr(r),O(this,Ra).clear(),O(this,aa).clear(),Bs=null,(n=O(this,Na))==null||n.resolve()}et=null}capture(a,r){r!==Xe&&!this.previous.has(a)&&this.previous.set(a,r),(a.f&la)===0&&(this.current.set(a,a.v),et==null||et.set(a,a.v))}activate(){qe=this,this.apply()}deactivate(){qe===this&&(qe=null,et=null)}flush(){var a;if(nt.length>0)qe=this,Pl();else if(O(this,ga)===0&&!this.is_fork){for(const r of O(this,ta))r(this);O(this,ta).clear(),Qe(this,dt,gr).call(this),(a=O(this,Na))==null||a.resolve()}this.deactivate()}discard(){for(const a of O(this,Ba))a(this);O(this,Ba).clear()}increment(a){Ae(this,ga,O(this,ga)+1),a&&Ae(this,Ka,O(this,Ka)+1)}decrement(a){Ae(this,ga,O(this,ga)-1),a&&Ae(this,Ka,O(this,Ka)-1),!O(this,Ha)&&(Ae(this,Ha,!0),Vt(()=>{Ae(this,Ha,!1),Qe(this,dt,pr).call(this)?nt.length>0&&this.flush():this.revive()}))}revive(){for(const a of O(this,Ra))O(this,aa).delete(a),Ye(a,at),St(a);for(const a of O(this,aa))Ye(a,Pt),St(a);this.flush()}oncommit(a){O(this,ta).add(a)}ondiscard(a){O(this,Ba).add(a)}settled(){return(O(this,Na)??Ae(this,Na,gl())).promise}static ensure(){if(qe===null){const a=qe=new Gr;Ps.add(qe),fs||Vt(()=>{qe===a&&a.flush()})}return qe}apply(){}};ta=new WeakMap,Ba=new WeakMap,ga=new WeakMap,Ka=new WeakMap,Na=new WeakMap,Ra=new WeakMap,aa=new WeakMap,It=new WeakMap,Ha=new WeakMap,dt=new WeakSet,pr=function(){return this.is_fork||O(this,Ka)>0},_r=function(a,r,s){a.f^=Ze;for(var n=a.first;n!==null;){var o=n.f,v=(o&(Tt|Aa))!==0,u=v&&(o&Ze)!==0,c=u||(o&ht)!==0||O(this,It).has(n);if(!c&&n.fn!==null){v?n.f^=Ze:(o&ts)!==0?r.push(n):zs(n)&&((o&da)!==0&&O(this,aa).add(n),Ja(n));var d=n.first;if(d!==null){n=d;continue}}for(;n!==null;){var m=n.next;if(m!==null){n=m;break}n=n.parent}}},mr=function(a){for(var r=0;r<a.length;r+=1)Al(a[r],O(this,Ra),O(this,aa))},gr=function(){var o;if(Ps.size>1){this.previous.clear();var a=qe,r=et,s=!0;for(const v of Ps){if(v===this){s=!1;continue}const u=[];for(const[d,m]of this.current){if(v.current.has(d))if(s&&m!==v.current.get(d))v.current.set(d,m);else continue;u.push(d)}if(u.length===0)continue;const c=[...v.current.keys()].filter(d=>!this.current.has(d));if(c.length>0){var n=nt;nt=[];const d=new Set,m=new Map;for(const _ of u)Tl(_,c,d,m);if(nt.length>0){qe=v,v.apply();for(const _ of nt)Qe(o=v,dt,_r).call(o,_,[],[]);v.deactivate()}nt=n}}qe=a,et=r}O(this,It).clear(),Ps.delete(this)};let ia=Gr;function wn(e){var a=fs;fs=!0;try{for(var r;;){if(yn(),nt.length===0&&(qe==null||qe.flush(),nt.length===0))return Fs=null,r;Pl()}}finally{fs=a}}function Pl(){var e=null;try{for(var a=0;nt.length>0;){var r=ia.ensure();if(a++>1e3){var s,n;kn()}r.process(nt),na.clear()}}finally{nt=[],Fs=null,Wa=null}}function kn(){try{Vi()}catch(e){ra(e,Fs)}}let qt=null;function Zr(e){var a=e.length;if(a!==0){for(var r=0;r<a;){var s=e[r++];if((s.f&(Gt|ht))===0&&zs(s)&&(qt=new Set,Ja(s),s.deps===null&&s.first===null&&s.nodes===null&&s.teardown===null&&s.ac===null&&Wl(s),(qt==null?void 0:qt.size)>0)){na.clear();for(const n of qt){if((n.f&(Gt|ht))!==0)continue;const o=[n];let v=n.parent;for(;v!==null;)qt.has(v)&&(qt.delete(v),o.push(v)),v=v.parent;for(let u=o.length-1;u>=0;u--){const c=o[u];(c.f&(Gt|ht))===0&&Ja(c)}}qt.clear()}}qt=null}}function Tl(e,a,r,s){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const n of e.reactions){const o=n.f;(o&tt)!==0?Tl(n,a,r,s):(o&(Mr|da))!==0&&(o&at)===0&&Cl(n,a,s)&&(Ye(n,at),St(n))}}function Cl(e,a,r){const s=r.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(Ga.call(a,n))return!0;if((n.f&tt)!==0&&Cl(n,a,r))return r.set(n,!0),!0}return r.set(e,!1),!1}function St(e){var a=Fs=e,r=a.b;if(r!=null&&r.is_pending&&(e.f&(ts|Ua|yl))!==0&&(e.f&as)===0){r.defer_effect(e);return}for(;a.parent!==null;){a=a.parent;var s=a.f;if(Wa!==null&&a===Ie&&(e.f&Ua)===0)return;if((s&(Aa|Tt))!==0){if((s&Ze)===0)return;a.f^=Ze}}nt.push(a)}function Ml(e,a){if(!((e.f&Tt)!==0&&(e.f&Ze)!==0)){(e.f&at)!==0?a.d.push(e):(e.f&Pt)!==0&&a.m.push(e),Ye(e,Ze);for(var r=e.first;r!==null;)Ml(r,a),r=r.next}}function xn(e){let a=0,r=Ea(0),s;return()=>{Or()&&(t(r),Kr(()=>(a===0&&(s=Pa(()=>e(()=>hs(r)))),a+=1,()=>{Vt(()=>{a-=1,a===0&&(s==null||s(),s=void 0,hs(r))})})))}}var $n=qa|ss;function qn(e,a,r,s){new zn(e,a,r,s)}var gt,Ar,jt,ya,it,Dt,ut,zt,Lt,ba,sa,La,Fa,Ya,Ft,Rs,Je,En,Sn,An,yr,Is,js,br;class zn{constructor(a,r,s,n){Me(this,Je);Mt(this,"parent");Mt(this,"is_pending",!1);Mt(this,"transform_error");Me(this,gt);Me(this,Ar,null);Me(this,jt);Me(this,ya);Me(this,it);Me(this,Dt,null);Me(this,ut,null);Me(this,zt,null);Me(this,Lt,null);Me(this,ba,0);Me(this,sa,0);Me(this,La,!1);Me(this,Fa,new Set);Me(this,Ya,new Set);Me(this,Ft,null);Me(this,Rs,xn(()=>(Ae(this,Ft,Ea(O(this,ba))),()=>{Ae(this,Ft,null)})));var o;Ae(this,gt,a),Ae(this,jt,r),Ae(this,ya,v=>{var u=Ie;u.b=this,u.f|=fr,s(v)}),this.parent=Ie.b,this.transform_error=n??((o=this.parent)==null?void 0:o.transform_error)??(v=>v),Ae(this,it,Gs(()=>{Qe(this,Je,yr).call(this)},$n))}defer_effect(a){Al(a,O(this,Fa),O(this,Ya))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!O(this,jt).pending}update_pending_count(a){Qe(this,Je,br).call(this,a),Ae(this,ba,O(this,ba)+a),!(!O(this,Ft)||O(this,La))&&(Ae(this,La,!0),Vt(()=>{Ae(this,La,!1),O(this,Ft)&&Qa(O(this,Ft),O(this,ba))}))}get_effect_pending(){return O(this,Rs).call(this),t(O(this,Ft))}error(a){var r=O(this,jt).onerror;let s=O(this,jt).failed;if(!r&&!s)throw a;O(this,Dt)&&(vt(O(this,Dt)),Ae(this,Dt,null)),O(this,ut)&&(vt(O(this,ut)),Ae(this,ut,null)),O(this,zt)&&(vt(O(this,zt)),Ae(this,zt,null));var n=!1,o=!1;const v=()=>{if(n){pn();return}n=!0,o&&Xi(),O(this,zt)!==null&&xa(O(this,zt),()=>{Ae(this,zt,null)}),Qe(this,Je,js).call(this,()=>{ia.ensure(),Qe(this,Je,yr).call(this)})},u=c=>{try{o=!0,r==null||r(c,v),o=!1}catch(d){ra(d,O(this,it)&&O(this,it).parent)}s&&Ae(this,zt,Qe(this,Je,js).call(this,()=>{ia.ensure();try{return yt(()=>{var d=Ie;d.b=this,d.f|=fr,s(O(this,gt),()=>c,()=>v)})}catch(d){return ra(d,O(this,it).parent),null}}))};Vt(()=>{var c;try{c=this.transform_error(a)}catch(d){ra(d,O(this,it)&&O(this,it).parent);return}c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(u,d=>ra(d,O(this,it)&&O(this,it).parent)):u(c)})}}gt=new WeakMap,Ar=new WeakMap,jt=new WeakMap,ya=new WeakMap,it=new WeakMap,Dt=new WeakMap,ut=new WeakMap,zt=new WeakMap,Lt=new WeakMap,ba=new WeakMap,sa=new WeakMap,La=new WeakMap,Fa=new WeakMap,Ya=new WeakMap,Ft=new WeakMap,Rs=new WeakMap,Je=new WeakSet,En=function(){try{Ae(this,Dt,yt(()=>O(this,ya).call(this,O(this,gt))))}catch(a){this.error(a)}},Sn=function(a){const r=O(this,jt).failed;r&&Ae(this,zt,yt(()=>{r(O(this,gt),()=>a,()=>()=>{})}))},An=function(){const a=O(this,jt).pending;a&&(this.is_pending=!0,Ae(this,ut,yt(()=>a(O(this,gt)))),Vt(()=>{var r=Ae(this,Lt,document.createDocumentFragment()),s=Wt();r.append(s),Ae(this,Dt,Qe(this,Je,js).call(this,()=>(ia.ensure(),yt(()=>O(this,ya).call(this,s))))),O(this,sa)===0&&(O(this,gt).before(r),Ae(this,Lt,null),xa(O(this,ut),()=>{Ae(this,ut,null)}),Qe(this,Je,Is).call(this))}))},yr=function(){try{if(this.is_pending=this.has_pending_snippet(),Ae(this,sa,0),Ae(this,ba,0),Ae(this,Dt,yt(()=>{O(this,ya).call(this,O(this,gt))})),O(this,sa)>0){var a=Ae(this,Lt,document.createDocumentFragment());Zl(O(this,Dt),a);const r=O(this,jt).pending;Ae(this,ut,yt(()=>r(O(this,gt))))}else Qe(this,Je,Is).call(this)}catch(r){this.error(r)}},Is=function(){this.is_pending=!1;for(const a of O(this,Fa))Ye(a,at),St(a);for(const a of O(this,Ya))Ye(a,Pt),St(a);O(this,Fa).clear(),O(this,Ya).clear()},js=function(a){var r=Ie,s=Ce,n=Le;Bt(O(this,it)),xt(O(this,it)),Va(O(this,it).ctx);try{return a()}catch(o){return El(o),null}finally{Bt(r),xt(s),Va(n)}},br=function(a){var r;if(!this.has_pending_snippet()){this.parent&&Qe(r=this.parent,Je,br).call(r,a);return}Ae(this,sa,O(this,sa)+a),O(this,sa)===0&&(Qe(this,Je,Is).call(this),O(this,ut)&&xa(O(this,ut),()=>{Ae(this,ut,null)}),O(this,Lt)&&(O(this,gt).before(O(this,Lt)),Ae(this,Lt,null)))};function Pn(e,a,r,s){const n=xs()?$s:jr;var o=e.filter(_=>!_.settled);if(r.length===0&&o.length===0){s(a.map(n));return}var v=Ie,u=Tn(),c=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(_=>_.promise)):null;function d(_){u();try{s(_)}catch(x){(v.f&Gt)===0&&ra(x,v)}wr()}if(r.length===0){c.then(()=>d(a.map(n)));return}function m(){u(),Promise.all(r.map(_=>Mn(_))).then(_=>d([...a.map(n),..._])).catch(_=>ra(_,v))}c?c.then(m):m()}function Tn(){var e=Ie,a=Ce,r=Le,s=qe;return function(o=!0){Bt(e),xt(a),Va(r),o&&(s==null||s.activate())}}function wr(e=!0){Bt(null),xt(null),Va(null),e&&(qe==null||qe.deactivate())}function Cn(){var e=Ie.b,a=qe,r=e.is_rendered();return e.update_pending_count(1),a.increment(r),()=>{e.update_pending_count(-1),a.decrement(r)}}function $s(e){var a=tt|at,r=Ce!==null&&(Ce.f&tt)!==0?Ce:null;return Ie!==null&&(Ie.f|=ss),{ctx:Le,deps:null,effects:null,equals:$l,f:a,fn:e,reactions:null,rv:0,v:Xe,wv:0,parent:r??Ie,ac:null}}function Mn(e,a,r){Ie===null&&Li();var n=void 0,o=Ea(Xe),v=!Ce,u=new Map;return Gn(()=>{var x;var c=gl();n=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).finally(wr)}catch(y){c.reject(y),wr()}var d=qe;if(v){var m=Cn();(x=u.get(d))==null||x.reject(ha),u.delete(d),u.set(d,c)}const _=(y,p=void 0)=>{if(d.activate(),p)p!==ha&&(o.f|=la,Qa(o,p));else{(o.f&la)!==0&&(o.f^=la),Qa(o,y);for(const[$,h]of u){if(u.delete($),$===d)break;h.reject(ha)}}m&&m()};c.promise.then(_,y=>_(null,y||"unknown"))}),Br(()=>{for(const c of u.values())c.reject(ha)}),new Promise(c=>{function d(m){function _(){m===n?c(o):d(n)}m.then(_,_)}d(n)})}function ne(e){const a=$s(e);return Xl(a),a}function jr(e){const a=$s(e);return a.equals=ql,a}function In(e){var a=e.effects;if(a!==null){e.effects=null;for(var r=0;r<a.length;r+=1)vt(a[r])}}function jn(e){for(var a=e.parent;a!==null;){if((a.f&tt)===0)return(a.f&Gt)===0?a:null;a=a.parent}return null}function Dr(e){var a,r=Ie;Bt(jn(e));try{e.f&=~za,In(e),a=si(e)}finally{Bt(r)}return a}function Il(e){var a=Dr(e);if(!e.equals(a)&&(e.wv=ti(),(!(qe!=null&&qe.is_fork)||e.deps===null)&&(e.v=a,e.deps===null))){Ye(e,Ze);return}va||(et!==null?(Or()||qe!=null&&qe.is_fork)&&et.set(e,a):Ir(e))}function Dn(e){var a,r;if(e.effects!==null)for(const s of e.effects)(s.teardown||s.ac)&&((a=s.teardown)==null||a.call(s),(r=s.ac)==null||r.abort(ha),s.teardown=Oi,s.ac=null,gs(s,0),Nr(s))}function jl(e){if(e.effects!==null)for(const a of e.effects)a.teardown&&Ja(a)}let kr=new Set;const na=new Map;let Dl=!1;function Ea(e,a){var r={f:0,v:e,reactions:null,equals:$l,rv:0,wv:0};return r}function B(e,a){const r=Ea(e);return Xl(r),r}function On(e,a=!1,r=!0){var n;const s=Ea(e);return a||(s.equals=ql),rs&&r&&Le!==null&&Le.l!==null&&((n=Le.l).s??(n.s=[])).push(s),s}function g(e,a,r=!1){Ce!==null&&(!At||(Ce.f&Jr)!==0)&&xs()&&(Ce.f&(tt|da|Mr|Jr))!==0&&(kt===null||!Ga.call(kt,e))&&Zi();let s=r?$e(a):a;return Qa(e,s)}function Qa(e,a){if(!e.equals(a)){var r=e.v;va?na.set(e,a):na.set(e,r),e.v=a;var s=ia.ensure();if(s.capture(e,r),(e.f&tt)!==0){const n=e;(e.f&at)!==0&&Dr(n),Ir(n)}e.wv=ti(),Ol(e,at),xs()&&Ie!==null&&(Ie.f&Ze)!==0&&(Ie.f&(Tt|Aa))===0&&(mt===null?Vn([e]):mt.push(e)),!s.is_fork&&kr.size>0&&!Dl&&Bn()}return a}function Bn(){Dl=!1;for(const e of kr)(e.f&Ze)!==0&&Ye(e,Pt),zs(e)&&Ja(e);kr.clear()}function hs(e){g(e,e.v+1)}function Ol(e,a){var r=e.reactions;if(r!==null)for(var s=xs(),n=r.length,o=0;o<n;o++){var v=r[o],u=v.f;if(!(!s&&v===Ie)){var c=(u&at)===0;if(c&&Ye(v,a),(u&tt)!==0){var d=v;et==null||et.delete(d),(u&za)===0&&(u&wt&&(v.f|=za),Ol(d,Pt))}else c&&((u&da)!==0&&qt!==null&&qt.add(v),St(v))}}}function $e(e){if(typeof e!="object"||e===null||Ut in e)return e;const a=Tr(e);if(a!==ji&&a!==Di)return e;var r=new Map,s=Pr(e),n=B(0),o=$a,v=u=>{if($a===o)return u();var c=Ce,d=$a;xt(null),al(o);var m=u();return xt(c),al(d),m};return s&&r.set("length",B(e.length)),new Proxy(e,{defineProperty(u,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Qi();var m=r.get(c);return m===void 0?v(()=>{var _=B(d.value);return r.set(c,_),_}):g(m,d.value,!0),!0},deleteProperty(u,c){var d=r.get(c);if(d===void 0){if(c in u){const m=v(()=>B(Xe));r.set(c,m),hs(n)}}else g(d,Xe),hs(n);return!0},get(u,c,d){var y;if(c===Ut)return e;var m=r.get(c),_=c in u;if(m===void 0&&(!_||(y=Da(u,c))!=null&&y.writable)&&(m=v(()=>{var p=$e(_?u[c]:Xe),$=B(p);return $}),r.set(c,m)),m!==void 0){var x=t(m);return x===Xe?void 0:x}return Reflect.get(u,c,d)},getOwnPropertyDescriptor(u,c){var d=Reflect.getOwnPropertyDescriptor(u,c);if(d&&"value"in d){var m=r.get(c);m&&(d.value=t(m))}else if(d===void 0){var _=r.get(c),x=_==null?void 0:_.v;if(_!==void 0&&x!==Xe)return{enumerable:!0,configurable:!0,value:x,writable:!0}}return d},has(u,c){var x;if(c===Ut)return!0;var d=r.get(c),m=d!==void 0&&d.v!==Xe||Reflect.has(u,c);if(d!==void 0||Ie!==null&&(!m||(x=Da(u,c))!=null&&x.writable)){d===void 0&&(d=v(()=>{var y=m?$e(u[c]):Xe,p=B(y);return p}),r.set(c,d));var _=t(d);if(_===Xe)return!1}return m},set(u,c,d,m){var P;var _=r.get(c),x=c in u;if(s&&c==="length")for(var y=d;y<_.v;y+=1){var p=r.get(y+"");p!==void 0?g(p,Xe):y in u&&(p=v(()=>B(Xe)),r.set(y+"",p))}if(_===void 0)(!x||(P=Da(u,c))!=null&&P.writable)&&(_=v(()=>B(void 0)),g(_,$e(d)),r.set(c,_));else{x=_.v!==Xe;var $=v(()=>$e(d));g(_,$)}var h=Reflect.getOwnPropertyDescriptor(u,c);if(h!=null&&h.set&&h.set.call(m,d),!x){if(s&&typeof c=="string"){var b=r.get("length"),E=Number(c);Number.isInteger(E)&&E>=b.v&&g(b,E+1)}hs(n)}return!0},ownKeys(u){t(n);var c=Reflect.ownKeys(u).filter(_=>{var x=r.get(_);return x===void 0||x.v!==Xe});for(var[d,m]of r)m.v!==Xe&&!(d in u)&&c.push(d);return c},setPrototypeOf(){Ji()}})}function Xr(e){try{if(e!==null&&typeof e=="object"&&Ut in e)return e[Ut]}catch{}return e}function Kn(e,a){return Object.is(Xr(e),Xr(a))}var xr,Bl,Kl,Nl;function Nn(){if(xr===void 0){xr=window,Bl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,a=Node.prototype,r=Text.prototype;Kl=Da(a,"firstChild").get,Nl=Da(a,"nextSibling").get,Qr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Qr(r)&&(r.__t=void 0)}}function Wt(e=""){return document.createTextNode(e)}function ka(e){return Kl.call(e)}function qs(e){return Nl.call(e)}function l(e,a){return ka(e)}function de(e,a=!1){{var r=ka(e);return r instanceof Comment&&r.data===""?qs(r):r}}function i(e,a=1,r=!1){let s=e;for(;a--;)s=qs(s);return s}function Rn(e){e.textContent=""}function Rl(){return!1}function Hl(e,a,r){return document.createElementNS(a??xl,e,void 0)}let el=!1;function Hn(){el||(el=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var a;if(!e.defaultPrevented)for(const r of e.target.elements)(a=r.__on_r)==null||a.call(r)})},{capture:!0}))}function Ys(e){var a=Ce,r=Ie;xt(null),Bt(null);try{return e()}finally{xt(a),Bt(r)}}function Ll(e,a,r,s=r){e.addEventListener(a,()=>Ys(r));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),Hn()}function Fl(e){Ie===null&&(Ce===null&&Ui(),Gi()),va&&Yi()}function Ln(e,a){var r=a.last;r===null?a.last=a.first=e:(r.next=e,e.prev=r,a.last=e)}function Kt(e,a){var r=Ie;r!==null&&(r.f&ht)!==0&&(e|=ht);var s={ctx:Le,deps:null,nodes:null,f:e|at|wt,first:null,fn:a,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null},n=s;if((e&ts)!==0)Wa!==null?Wa.push(s):St(s);else if(a!==null){try{Ja(s)}catch(v){throw vt(s),v}n.deps===null&&n.teardown===null&&n.nodes===null&&n.first===n.last&&(n.f&ss)===0&&(n=n.first,(e&da)!==0&&(e&qa)!==0&&n!==null&&(n.f|=qa))}if(n!==null&&(n.parent=r,r!==null&&Ln(n,r),Ce!==null&&(Ce.f&tt)!==0&&(e&Aa)===0)){var o=Ce;(o.effects??(o.effects=[])).push(n)}return s}function Or(){return Ce!==null&&!At}function Br(e){const a=Kt(Ua,null);return Ye(a,Ze),a.teardown=e,a}function ms(e){Fl();var a=Ie.f,r=!Ce&&(a&Tt)!==0&&(a&as)===0;if(r){var s=Le;(s.e??(s.e=[])).push(e)}else return Yl(e)}function Yl(e){return Kt(ts|bl,e)}function Fn(e){return Fl(),Kt(Ua|bl,e)}function Yn(e){ia.ensure();const a=Kt(Aa|ss,e);return(r={})=>new Promise(s=>{r.outro?xa(a,()=>{vt(a),s(void 0)}):(vt(a),s(void 0))})}function Gl(e){return Kt(ts,e)}function Gn(e){return Kt(Mr|ss,e)}function Kr(e,a=0){return Kt(Ua|a,e)}function V(e,a=[],r=[],s=[]){Pn(s,a,r,n=>{Kt(Ua,()=>e(...n.map(t)))})}function Gs(e,a=0){var r=Kt(da|a,e);return r}function yt(e){return Kt(Tt|ss,e)}function Ul(e){var a=e.teardown;if(a!==null){const r=va,s=Ce;tl(!0),xt(null);try{a.call(null)}finally{tl(r),xt(s)}}}function Nr(e,a=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const n=r.ac;n!==null&&Ys(()=>{n.abort(ha)});var s=r.next;(r.f&Aa)!==0?r.parent=null:vt(r,a),r=s}}function Un(e){for(var a=e.first;a!==null;){var r=a.next;(a.f&Tt)===0&&vt(a),a=r}}function vt(e,a=!0){var r=!1;(a||(e.f&Ki)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Vl(e.nodes.start,e.nodes.end),r=!0),Nr(e,a&&!r),gs(e,0),Ye(e,Gt);var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)o.stop();Ul(e);var n=e.parent;n!==null&&n.first!==null&&Wl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Vl(e,a){for(;e!==null;){var r=e===a?null:qs(e);e.remove(),e=r}}function Wl(e){var a=e.parent,r=e.prev,s=e.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),a!==null&&(a.first===e&&(a.first=s),a.last===e&&(a.last=r))}function xa(e,a,r=!0){var s=[];Ql(e,s,!0);var n=()=>{r&&vt(e),a&&a()},o=s.length;if(o>0){var v=()=>--o||n();for(var u of s)u.out(v)}else n()}function Ql(e,a,r){if((e.f&ht)===0){e.f^=ht;var s=e.nodes&&e.nodes.t;if(s!==null)for(const u of s)(u.is_global||r)&&a.push(u);for(var n=e.first;n!==null;){var o=n.next,v=(n.f&qa)!==0||(n.f&Tt)!==0&&(e.f&da)!==0;Ql(n,a,v?r:!1),n=o}}}function Rr(e){Jl(e,!0)}function Jl(e,a){if((e.f&ht)!==0){e.f^=ht,(e.f&Ze)===0&&(Ye(e,at),St(e));for(var r=e.first;r!==null;){var s=r.next,n=(r.f&qa)!==0||(r.f&Tt)!==0;Jl(r,n?a:!1),r=s}var o=e.nodes&&e.nodes.t;if(o!==null)for(const v of o)(v.is_global||a)&&v.in()}}function Zl(e,a){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end;r!==null;){var n=r===s?null:qs(r);a.append(r),r=n}}let Ds=!1,va=!1;function tl(e){va=e}let Ce=null,At=!1;function xt(e){Ce=e}let Ie=null;function Bt(e){Ie=e}let kt=null;function Xl(e){Ce!==null&&(kt===null?kt=[e]:kt.push(e))}let ot=null,ct=0,mt=null;function Vn(e){mt=e}let ei=1,_a=0,$a=_a;function al(e){$a=e}function ti(){return++ei}function zs(e){var a=e.f;if((a&at)!==0)return!0;if(a&tt&&(e.f&=~za),(a&Pt)!==0){for(var r=e.deps,s=r.length,n=0;n<s;n++){var o=r[n];if(zs(o)&&Il(o),o.wv>e.wv)return!0}(a&wt)!==0&&et===null&&Ye(e,Ze)}return!1}function ai(e,a,r=!0){var s=e.reactions;if(s!==null&&!(kt!==null&&Ga.call(kt,e)))for(var n=0;n<s.length;n++){var o=s[n];(o.f&tt)!==0?ai(o,a,!1):a===o&&(r?Ye(o,at):(o.f&Ze)!==0&&Ye(o,Pt),St(o))}}function si(e){var $;var a=ot,r=ct,s=mt,n=Ce,o=kt,v=Le,u=At,c=$a,d=e.f;ot=null,ct=0,mt=null,Ce=(d&(Tt|Aa))===0?e:null,kt=null,Va(e.ctx),At=!1,$a=++_a,e.ac!==null&&(Ys(()=>{e.ac.abort(ha)}),e.ac=null);try{e.f|=hr;var m=e.fn,_=m();e.f|=as;var x=e.deps,y=qe==null?void 0:qe.is_fork;if(ot!==null){var p;if(y||gs(e,ct),x!==null&&ct>0)for(x.length=ct+ot.length,p=0;p<ot.length;p++)x[ct+p]=ot[p];else e.deps=x=ot;if(Or()&&(e.f&wt)!==0)for(p=ct;p<x.length;p++)(($=x[p]).reactions??($.reactions=[])).push(e)}else!y&&x!==null&&ct<x.length&&(gs(e,ct),x.length=ct);if(xs()&&mt!==null&&!At&&x!==null&&(e.f&(tt|Pt|at))===0)for(p=0;p<mt.length;p++)ai(mt[p],e);if(n!==null&&n!==e){if(_a++,n.deps!==null)for(let h=0;h<r;h+=1)n.deps[h].rv=_a;if(a!==null)for(const h of a)h.rv=_a;mt!==null&&(s===null?s=mt:s.push(...mt))}return(e.f&la)!==0&&(e.f^=la),_}catch(h){return El(h)}finally{e.f^=hr,ot=a,ct=r,mt=s,Ce=n,kt=o,Va(v),At=u,$a=c}}function Wn(e,a){let r=a.reactions;if(r!==null){var s=Mi.call(r,e);if(s!==-1){var n=r.length-1;n===0?r=a.reactions=null:(r[s]=r[n],r.pop())}}if(r===null&&(a.f&tt)!==0&&(ot===null||!Ga.call(ot,a))){var o=a;(o.f&wt)!==0&&(o.f^=wt,o.f&=~za),Ir(o),Dn(o),gs(o,0)}}function gs(e,a){var r=e.deps;if(r!==null)for(var s=a;s<r.length;s++)Wn(e,r[s])}function Ja(e){var a=e.f;if((a&Gt)===0){Ye(e,Ze);var r=Ie,s=Ds;Ie=e,Ds=!0;try{(a&(da|yl))!==0?Un(e):Nr(e),Ul(e);var n=si(e);e.teardown=typeof n=="function"?n:null,e.wv=ei;var o;cr&&mn&&(e.f&at)!==0&&e.deps}finally{Ds=s,Ie=r}}}async function Qn(){await Promise.resolve(),wn()}function t(e){var a=e.f,r=(a&tt)!==0;if(Ce!==null&&!At){var s=Ie!==null&&(Ie.f&Gt)!==0;if(!s&&(kt===null||!Ga.call(kt,e))){var n=Ce.deps;if((Ce.f&hr)!==0)e.rv<_a&&(e.rv=_a,ot===null&&n!==null&&n[ct]===e?ct++:ot===null?ot=[e]:ot.push(e));else{(Ce.deps??(Ce.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[Ce]:Ga.call(o,Ce)||o.push(Ce)}}}if(va&&na.has(e))return na.get(e);if(r){var v=e;if(va){var u=v.v;return((v.f&Ze)===0&&v.reactions!==null||li(v))&&(u=Dr(v)),na.set(v,u),u}var c=(v.f&wt)===0&&!At&&Ce!==null&&(Ds||(Ce.f&wt)!==0),d=(v.f&as)===0;zs(v)&&(c&&(v.f|=wt),Il(v)),c&&!d&&(jl(v),ri(v))}if(et!=null&&et.has(e))return et.get(e);if((e.f&la)!==0)throw e.v;return e.v}function ri(e){if(e.f|=wt,e.deps!==null)for(const a of e.deps)(a.reactions??(a.reactions=[])).push(e),(a.f&tt)!==0&&(a.f&wt)===0&&(jl(a),ri(a))}function li(e){if(e.v===Xe)return!0;if(e.deps===null)return!1;for(const a of e.deps)if(na.has(a)||(a.f&tt)!==0&&li(a))return!0;return!1}function Pa(e){var a=At;try{return At=!0,e()}finally{At=a}}function Jn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ut in e)$r(e);else if(!Array.isArray(e))for(let a in e){const r=e[a];typeof r=="object"&&r&&Ut in r&&$r(r)}}}function $r(e,a=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!a.has(e)){a.add(e),e instanceof Date&&e.getTime();for(let s in e)try{$r(e[s],a)}catch{}const r=Tr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=ml(r);for(let n in s){const o=s[n].get;if(o)try{o.call(e)}catch{}}}}}const Zn=["touchstart","touchmove"];function Xn(e){return Zn.includes(e)}const ma=Symbol("events"),ii=new Set,qr=new Set;function eo(e,a,r,s={}){function n(o){if(s.capture||zr.call(a,o),!o.cancelBubble)return Ys(()=>r==null?void 0:r.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Vt(()=>{a.addEventListener(e,n,s)}):a.addEventListener(e,n,s),n}function Os(e,a,r,s,n){var o={capture:s,passive:n},v=eo(e,a,r,o);(a===document.body||a===window||a===document||a instanceof HTMLMediaElement)&&Br(()=>{a.removeEventListener(e,v,o)})}function be(e,a,r){(a[ma]??(a[ma]={}))[e]=r}function Re(e){for(var a=0;a<e.length;a++)ii.add(e[a]);for(var r of qr)r(e)}let sl=null;function zr(e){var h,b;var a=this,r=a.ownerDocument,s=e.type,n=((h=e.composedPath)==null?void 0:h.call(e))||[],o=n[0]||e.target;sl=e;var v=0,u=sl===e&&e[ma];if(u){var c=n.indexOf(u);if(c!==-1&&(a===document||a===window)){e[ma]=a;return}var d=n.indexOf(a);if(d===-1)return;c<=d&&(v=c)}if(o=n[v]||e.target,o!==a){Ii(e,"currentTarget",{configurable:!0,get(){return o||r}});var m=Ce,_=Ie;xt(null),Bt(null);try{for(var x,y=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var $=(b=o[ma])==null?void 0:b[s];$!=null&&(!o.disabled||e.target===o)&&$.call(o,e)}catch(E){x?y.push(E):x=E}if(e.cancelBubble||p===a||p===null)break;o=p}if(x){for(let E of y)queueMicrotask(()=>{throw E});throw x}}finally{e[ma]=a,delete e.currentTarget,xt(m),Bt(_)}}}var pl;const nr=((pl=globalThis==null?void 0:globalThis.window)==null?void 0:pl.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function to(e){return(nr==null?void 0:nr.createHTML(e))??e}function ao(e){var a=Hl("template");return a.innerHTML=to(e.replaceAll("<!>","<!---->")),a.content}function ys(e,a){var r=Ie;r.nodes===null&&(r.nodes={start:e,end:a,a:null,t:null})}function k(e,a){var r=(a&dn)!==0,s=(a&cn)!==0,n,o=!e.startsWith("<!>");return()=>{n===void 0&&(n=ao(o?e:"<!>"+e),r||(n=ka(n)));var v=s||Bl?document.importNode(n,!0):n.cloneNode(!0);if(r){var u=ka(v),c=v.lastChild;ys(u,c)}else ys(v,v);return v}}function U(e=""){{var a=Wt(e+"");return ys(a,a),a}}function ls(){var e=document.createDocumentFragment(),a=document.createComment(""),r=Wt();return e.append(a,r),ys(a,r),e}function f(e,a){e!==null&&e.before(a)}function A(e,a){var r=a==null?"":typeof a=="object"?`${a}`:a;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=`${r}`)}function so(e,a){return ro(e,a)}const Ts=new Map;function ro(e,{target:a,anchor:r,props:s={},events:n,context:o,intro:v=!0,transformError:u}){Nn();var c=void 0,d=Yn(()=>{var m=r??a.appendChild(Wt());qn(m,{pending:()=>{}},y=>{ze({});var p=Le;o&&(p.c=o),n&&(s.$$events=n),c=e(y,s)||{},Ee()},u);var _=new Set,x=y=>{for(var p=0;p<y.length;p++){var $=y[p];if(!_.has($)){_.add($);var h=Xn($);for(const P of[a,document]){var b=Ts.get(P);b===void 0&&(b=new Map,Ts.set(P,b));var E=b.get($);E===void 0?(P.addEventListener($,zr,{passive:h}),b.set($,1)):b.set($,E+1)}}}};return x(Ls(ii)),qr.add(x),()=>{var h;for(var y of _)for(const b of[a,document]){var p=Ts.get(b),$=p.get(y);--$==0?(b.removeEventListener(y,zr),p.delete(y),p.size===0&&Ts.delete(b)):p.set(y,$)}qr.delete(x),m!==r&&((h=m.parentNode)==null||h.removeChild(m))}});return lo.set(c,d),c}let lo=new WeakMap;var Et,Ot,ft,wa,ws,ks,Hs;class ni{constructor(a,r=!0){Mt(this,"anchor");Me(this,Et,new Map);Me(this,Ot,new Map);Me(this,ft,new Map);Me(this,wa,new Set);Me(this,ws,!0);Me(this,ks,a=>{if(O(this,Et).has(a)){var r=O(this,Et).get(a),s=O(this,Ot).get(r);if(s)Rr(s),O(this,wa).delete(r);else{var n=O(this,ft).get(r);n&&(O(this,Ot).set(r,n.effect),O(this,ft).delete(r),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[o,v]of O(this,Et)){if(O(this,Et).delete(o),o===a)break;const u=O(this,ft).get(v);u&&(vt(u.effect),O(this,ft).delete(v))}for(const[o,v]of O(this,Ot)){if(o===r||O(this,wa).has(o))continue;const u=()=>{if(Array.from(O(this,Et).values()).includes(o)){var d=document.createDocumentFragment();Zl(v,d),d.append(Wt()),O(this,ft).set(o,{effect:v,fragment:d})}else vt(v);O(this,wa).delete(o),O(this,Ot).delete(o)};O(this,ws)||!s?(O(this,wa).add(o),xa(v,u,!1)):u()}}});Me(this,Hs,a=>{O(this,Et).delete(a);const r=Array.from(O(this,Et).values());for(const[s,n]of O(this,ft))r.includes(s)||(vt(n.effect),O(this,ft).delete(s))});this.anchor=a,Ae(this,ws,r)}ensure(a,r){var s=qe,n=Rl();if(r&&!O(this,Ot).has(a)&&!O(this,ft).has(a))if(n){var o=document.createDocumentFragment(),v=Wt();o.append(v),O(this,ft).set(a,{effect:yt(()=>r(v)),fragment:o})}else O(this,Ot).set(a,yt(()=>r(this.anchor)));if(O(this,Et).set(s,a),n){for(const[u,c]of O(this,Ot))u===a?s.unskip_effect(c):s.skip_effect(c);for(const[u,c]of O(this,ft))u===a?s.unskip_effect(c.effect):s.skip_effect(c.effect);s.oncommit(O(this,ks)),s.ondiscard(O(this,Hs))}else O(this,ks).call(this,s)}}Et=new WeakMap,Ot=new WeakMap,ft=new WeakMap,wa=new WeakMap,ws=new WeakMap,ks=new WeakMap,Hs=new WeakMap;function ae(e,a,r=!1){var s=new ni(e),n=r?qa:0;function o(v,u){s.ensure(v,u)}Gs(()=>{var v=!1;a((u,c=0)=>{v=!0,o(c,u)}),v||o(!1,null)},n)}function Te(e,a){return a}function io(e,a,r){for(var s=[],n=a.length,o,v=a.length,u=0;u<n;u++){let _=a[u];xa(_,()=>{if(o){if(o.pending.delete(_),o.done.add(_),o.pending.size===0){var x=e.outrogroups;Er(Ls(o.done)),x.delete(o),x.size===0&&(e.outrogroups=null)}}else v-=1},!1)}if(v===0){var c=s.length===0&&r!==null;if(c){var d=r,m=d.parentNode;Rn(m),m.append(d),e.items.clear()}Er(a,!c)}else o={pending:new Set(a),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function Er(e,a=!0){for(var r=0;r<e.length;r++)vt(e[r],a)}var rl;function Se(e,a,r,s,n,o=null){var v=e,u=new Map,c=(a&kl)!==0;if(c){var d=e;v=d.appendChild(Wt())}var m=null,_=jr(()=>{var b=r();return Pr(b)?b:b==null?[]:Ls(b)}),x,y=!0;function p(){h.fallback=m,no(h,x,v,a,s),m!==null&&(x.length===0?(m.f&Yt)===0?Rr(m):(m.f^=Yt,us(m,null,v)):xa(m,()=>{m=null}))}var $=Gs(()=>{x=t(_);for(var b=x.length,E=new Set,P=qe,T=Rl(),M=0;M<b;M+=1){var I=x[M],D=s(I,M),j=y?null:u.get(D);j?(j.v&&Qa(j.v,I),j.i&&Qa(j.i,M),T&&P.unskip_effect(j.e)):(j=oo(u,y?v:rl??(rl=Wt()),I,D,M,n,a,r),y||(j.e.f|=Yt),u.set(D,j)),E.add(D)}if(b===0&&o&&!m&&(y?m=yt(()=>o(v)):(m=yt(()=>o(rl??(rl=Wt()))),m.f|=Yt)),b>E.size&&Fi(),!y)if(T){for(const[K,z]of u)E.has(K)||P.skip_effect(z.e);P.oncommit(p),P.ondiscard(()=>{})}else p();t(_)}),h={effect:$,items:u,outrogroups:null,fallback:m};y=!1}function cs(e){for(;e!==null&&(e.f&Tt)===0;)e=e.next;return e}function no(e,a,r,s,n){var z,S,N,Z,F,W,H,J,Q;var o=(s&an)!==0,v=a.length,u=e.items,c=cs(e.effect.first),d,m=null,_,x=[],y=[],p,$,h,b;if(o)for(b=0;b<v;b+=1)p=a[b],$=n(p,b),h=u.get($).e,(h.f&Yt)===0&&((S=(z=h.nodes)==null?void 0:z.a)==null||S.measure(),(_??(_=new Set)).add(h));for(b=0;b<v;b+=1){if(p=a[b],$=n(p,b),h=u.get($).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(h),C.done.delete(h);if((h.f&Yt)!==0)if(h.f^=Yt,h===c)us(h,null,r);else{var E=m?m.next:c;h===e.effect.last&&(e.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),Zt(e,m,h),Zt(e,h,E),us(h,E,r),m=h,x=[],y=[],c=cs(m.next);continue}if((h.f&ht)!==0&&(Rr(h),o&&((Z=(N=h.nodes)==null?void 0:N.a)==null||Z.unfix(),(_??(_=new Set)).delete(h))),h!==c){if(d!==void 0&&d.has(h)){if(x.length<y.length){var P=y[0],T;m=P.prev;var M=x[0],I=x[x.length-1];for(T=0;T<x.length;T+=1)us(x[T],P,r);for(T=0;T<y.length;T+=1)d.delete(y[T]);Zt(e,M.prev,I.next),Zt(e,m,M),Zt(e,I,P),c=P,m=I,b-=1,x=[],y=[]}else d.delete(h),us(h,c,r),Zt(e,h.prev,h.next),Zt(e,h,m===null?e.effect.first:m.next),Zt(e,m,h),m=h;continue}for(x=[],y=[];c!==null&&c!==h;)(d??(d=new Set)).add(c),y.push(c),c=cs(c.next);if(c===null)continue}(h.f&Yt)===0&&x.push(h),m=h,c=cs(h.next)}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(Er(Ls(C.done)),(F=e.outrogroups)==null||F.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||d!==void 0){var D=[];if(d!==void 0)for(h of d)(h.f&ht)===0&&D.push(h);for(;c!==null;)(c.f&ht)===0&&c!==e.fallback&&D.push(c),c=cs(c.next);var j=D.length;if(j>0){var K=(s&kl)!==0&&v===0?r:null;if(o){for(b=0;b<j;b+=1)(H=(W=D[b].nodes)==null?void 0:W.a)==null||H.measure();for(b=0;b<j;b+=1)(Q=(J=D[b].nodes)==null?void 0:J.a)==null||Q.fix()}io(e,D,K)}}o&&Vt(()=>{var C,w;if(_!==void 0)for(h of _)(w=(C=h.nodes)==null?void 0:C.a)==null||w.apply()})}function oo(e,a,r,s,n,o,v,u){var c=(v&en)!==0?(v&sn)===0?On(r,!1,!1):Ea(r):null,d=(v&tn)!==0?Ea(n):null;return{v:c,i:d,e:yt(()=>(o(a,c??r,d??n,u),()=>{e.delete(s)}))}}function us(e,a,r){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end,o=a&&(a.f&Yt)===0?a.nodes.start:r;s!==null;){var v=qs(s);if(o.before(s),s===n)return;s=v}}function Zt(e,a,r){a===null?e.effect.first=r:a.next=r,r===null?e.effect.last=a:r.prev=a}function oi(e,a,r=!1,s=!1,n=!1){var o=e,v="";V(()=>{var u=Ie;if(v!==(v=a()??"")&&(u.nodes!==null&&(Vl(u.nodes.start,u.nodes.end),u.nodes=null),v!=="")){var c=r?un:s?fn:void 0,d=Hl(r?"svg":s?"math":"template",c);d.innerHTML=v;var m=r||s?d:d.content;if(ys(ka(m),m.lastChild),r||s)for(;ka(m);)o.before(ka(m));else o.before(m)}})}function is(e,a,...r){var s=new ni(e);Gs(()=>{const n=a()??null;s.ensure(n,n&&(o=>n(o,...r)))},qa)}const ll=[...` 	
\r\fÂ \v\uFEFF`];function vo(e,a,r){var s=e==null?"":""+e;if(a&&(s=s?s+" "+a:a),r){for(var n of Object.keys(r))if(r[n])s=s?s+" "+n:n;else if(s.length)for(var o=n.length,v=0;(v=s.indexOf(n,v))>=0;){var u=v+o;(v===0||ll.includes(s[v-1]))&&(u===s.length||ll.includes(s[u]))?s=(v===0?"":s.substring(0,v))+s.substring(u+1):v=u}}return s===""?null:s}function il(e,a=!1){var r=a?" !important;":";",s="";for(var n of Object.keys(e)){var o=e[n];o!=null&&o!==""&&(s+=" "+n+": "+o+r)}return s}function co(e,a){if(a){var r="",s,n;return Array.isArray(a)?(s=a[0],n=a[1]):s=a,s&&(r+=il(s)),n&&(r+=il(n,!0)),r=r.trim(),r===""?null:r}return String(e)}function Fe(e,a,r,s,n,o){var v=e.__className;if(v!==r||v===void 0){var u=vo(r,s,o);u==null?e.removeAttribute("class"):e.className=u,e.__className=r}else if(o&&n!==o)for(var c in o){var d=!!o[c];(n==null||d!==!!n[c])&&e.classList.toggle(c,d)}return o}function or(e,a={},r,s){for(var n in r){var o=r[n];a[n]!==o&&(r[n]==null?e.style.removeProperty(n):e.style.setProperty(n,o,s))}}function Za(e,a,r,s){var n=e.__style;if(n!==a){var o=co(a,s);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=a}else s&&(Array.isArray(s)?(or(e,r==null?void 0:r[0],s[0]),or(e,r==null?void 0:r[1],s[1],"important")):or(e,r,s));return s}function vi(e,a,r=!1){if(e.multiple){if(a==null)return;if(!Pr(a))return hn();for(var s of e.options)s.selected=a.includes(ps(s));return}for(s of e.options){var n=ps(s);if(Kn(n,a)){s.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function uo(e){var a=new MutationObserver(()=>{vi(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Br(()=>{a.disconnect()})}function ja(e,a,r=a){var s=new WeakSet,n=!0;Ll(e,"change",o=>{var v=o?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(v),ps);else{var c=e.querySelector(v)??e.querySelector("option:not([disabled])");u=c&&ps(c)}r(u),qe!==null&&s.add(qe)}),Gl(()=>{var o=a();if(e===document.activeElement){var v=Bs??qe;if(s.has(v))return}if(vi(e,o,n),n&&o===void 0){var u=e.querySelector(":checked");u!==null&&(o=ps(u),r(o))}e.__value=o,n=!1}),uo(e)}function ps(e){return"__value"in e?e.__value:e.value}const fo=Symbol("is custom element"),ho=Symbol("is html"),po=Hi?"progress":"PROGRESS";function Ks(e,a){var r=Hr(e);r.value===(r.value=a??void 0)||e.value===a&&(a!==0||e.nodeName!==po)||(e.value=a??"")}function _o(e,a){var r=Hr(e);r.checked!==(r.checked=a??void 0)&&(e.checked=a)}function ca(e,a,r,s){var n=Hr(e);n[a]!==(n[a]=r)&&(a==="loading"&&(e[Ri]=r),r==null?e.removeAttribute(a):typeof r!="string"&&mo(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function Hr(e){return e.__attributes??(e.__attributes={[fo]:e.nodeName.includes("-"),[ho]:e.namespaceURI===xl})}var nl=new Map;function mo(e){var a=e.getAttribute("is")||e.nodeName,r=nl.get(a);if(r)return r;nl.set(a,r=[]);for(var s,n=e,o=Element.prototype;o!==n;){s=ml(n);for(var v in s)s[v].set&&r.push(v);n=Tr(n)}return r}function oe(e,a,r=a){var s=new WeakSet;Ll(e,"input",async n=>{var o=n?e.defaultValue:e.value;if(o=vr(e)?dr(o):o,r(o),qe!==null&&s.add(qe),await Qn(),o!==(o=a())){var v=e.selectionStart,u=e.selectionEnd,c=e.value.length;if(e.value=o??"",u!==null){var d=e.value.length;v===u&&u===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=v,e.selectionEnd=Math.min(u,d))}}}),Pa(a)==null&&e.value&&(r(vr(e)?dr(e.value):e.value),qe!==null&&s.add(qe)),Kr(()=>{var n=a();if(e===document.activeElement){var o=Bs??qe;if(s.has(o))return}vr(e)&&n===dr(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function vr(e){var a=e.type;return a==="number"||a==="range"}function dr(e){return e===""?null:+e}function ol(e,a){return e===a||(e==null?void 0:e[Ut])===a}function Lr(e={},a,r,s){return Gl(()=>{var n,o;return Kr(()=>{n=o,o=[],Pa(()=>{e!==r(...o)&&(a(e,...o),n&&ol(r(...n),e)&&a(null,...n))})}),()=>{Vt(()=>{o&&ol(r(...o),e)&&a(null,...o)})}}),e}function go(e=!1){const a=Le,r=a.l.u;if(!r)return;let s=()=>Jn(a.s);if(e){let n=0,o={};const v=$s(()=>{let u=!1;const c=a.s;for(const d in c)c[d]!==o[d]&&(o[d]=c[d],u=!0);return u&&n++,n});s=()=>t(v)}r.b.length&&Fn(()=>{vl(a,s),ur(r.b)}),ms(()=>{const n=Pa(()=>r.m.map(Bi));return()=>{for(const o of n)typeof o=="function"&&o()}}),r.a.length&&ms(()=>{vl(a,s),ur(r.a)})}function vl(e,a){if(e.l.s)for(const r of e.l.s)t(r);a()}let Cs=!1;function yo(e){var a=Cs;try{return Cs=!1,[e(),Cs]}finally{Cs=a}}function ke(e,a,r,s){var P;var n=!rs||(r&ln)!==0,o=(r&on)!==0,v=(r&vn)!==0,u=s,c=!0,d=()=>(c&&(c=!1,u=v?Pa(s):s),u),m;if(o){var _=Ut in e||Ni in e;m=((P=Da(e,a))==null?void 0:P.set)??(_&&a in e?T=>e[a]=T:void 0)}var x,y=!1;o?[x,y]=yo(()=>e[a]):x=e[a],x===void 0&&s!==void 0&&(x=d(),m&&(n&&Wi(),m(x)));var p;if(n?p=()=>{var T=e[a];return T===void 0?d():(c=!0,T)}:p=()=>{var T=e[a];return T!==void 0&&(u=void 0),T===void 0?u:T},n&&(r&nn)===0)return p;if(m){var $=e.$$legacy;return(function(T,M){return arguments.length>0?((!n||!M||$||y)&&m(M?p():T),T):p()})}var h=!1,b=((r&rn)!==0?$s:jr)(()=>(h=!1,p()));o&&t(b);var E=Ie;return(function(T,M){if(arguments.length>0){const I=M?t(b):n&&o?$e(T):T;return g(b,I),h=!0,u!==void 0&&(u=I),T}return va&&h||(E.f&Gt)!==0?b.v:t(b)})}function Be(e){Le===null&&wl(),rs&&Le.l!==null?bo(Le).m.push(e):ms(()=>{const a=Pa(e);if(typeof a=="function")return a})}function Us(e){Le===null&&wl(),Be(()=>()=>Pa(e))}function bo(e){var a=e.l;return a.u??(a.u={a:[],b:[],m:[]})}const wo="5";var _l;typeof window<"u"&&((_l=window.__svelte??(window.__svelte={})).v??(_l.v=new Set)).add(wo);const Fr=[{key:"izle",label:"Izle",items:[{id:"dashboard",label:"Dashboard",icon:"dashboard"},{id:"live-chats",label:"Canli Sohbetler",icon:"chat"},{id:"closed-chats",label:"Kapali Sohbetler",icon:"archive"},{id:"search",label:"Arama",icon:"search"}]},{key:"yonet",label:"Yonet",items:[{id:"agent-inbox",label:"Agent Inbox",icon:"inbox"},{id:"knowledge-base",label:"Bilgi Tabani",icon:"book"},{id:"topics",label:"Konular",icon:"tag"},{id:"bot-settings",label:"Bot Ayarlari",icon:"settings"},{id:"bot-test",label:"Bot Test",icon:"test"},{id:"chat-flow",label:"Sohbet Akisi",icon:"flow"}]},{key:"ayarla",label:"Ayarla",items:[{id:"site-settings",label:"Site Ayarlari",icon:"globe"},{id:"zendesk",label:"Zendesk",icon:"zendesk"},{id:"whatsapp",label:"WhatsApp",icon:"whatsapp"},{id:"webhooks",label:"Webhooks",icon:"webhook"},{id:"env-vars",label:"Ortam Degiskenleri",icon:"env"},{id:"agent-files",label:"Agent Dosyalari",icon:"file"},{id:"memory-templates",label:"Bellek Sablonlari",icon:"memory"}]},{key:"analiz",label:"Analiz Et",items:[{id:"analytics",label:"Analytics",icon:"chart"},{id:"eval",label:"Eval Yonetimi",icon:"eval"},{id:"faq-suggestions",label:"FAQ Onerileri",icon:"faq"},{id:"feedback",label:"Feedback Raporu",icon:"feedback"},{id:"content-gaps",label:"Content Gaps",icon:"gap"},{id:"prompt-history",label:"Prompt Gecmisi",icon:"history"},{id:"system-status",label:"Sistem Durumu",icon:"status"}]}],di={};for(const e of Fr)for(const a of e.items)di[a.id]=a.label;const ko="dashboard";let ci=B($e(ui()));function ui(){return window.location.hash.slice(1)||ko}function Yr(){return t(ci)}function fi(e){window.location.hash="#"+e}function dl(){g(ci,ui(),!0)}function xo(){return window.addEventListener("hashchange",dl),()=>window.removeEventListener("hashchange",dl)}var $o=k('<div class="sidebar-overlay svelte-6i9pg1"></div>'),qo=k('<a><span class="nav-icon svelte-6i9pg1"><!></span> <span class="nav-label svelte-6i9pg1"> </span></a>'),zo=k('<div class="nav-group-label svelte-6i9pg1"> </div> <!>',1),Eo=k('<!> <aside><div class="logo svelte-6i9pg1"><span class="logo-icon svelte-6i9pg1">Q</span> <span class="logo-text svelte-6i9pg1">Qragy</span></div> <nav class="nav svelte-6i9pg1"></nav></aside>',1);function So(e,a){ze(a,!0);let r=ke(a,"mobileOpen",15,!1);const s={dashboard:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>',chat:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>',archive:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="21 8 21 21 3 21 3 8"/><rect x="1" y="3" width="22" height="5"/><line x1="10" y1="12" x2="14" y2="12"/></svg>',search:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>',inbox:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"/><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/></svg>',book:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>',tag:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>',settings:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>',test:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>',flow:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>',globe:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>',zendesk:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></svg>',whatsapp:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>',webhook:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',env:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"/><rect x="2" y="14" width="20" height="8" rx="2" ry="2"/><line x1="6" y1="6" x2="6.01" y2="6"/><line x1="6" y1="18" x2="6.01" y2="18"/></svg>',file:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>',memory:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></svg>',chart:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>',eval:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>',faq:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>',feedback:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>',gap:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>',history:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',status:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>'};function n(_,x){_.preventDefault(),fi(x),r(!1)}var o=Eo(),v=de(o);{var u=_=>{var x=$o();be("click",x,()=>r(!1)),be("keydown",x,()=>{}),f(_,x)};ae(v,_=>{r()&&_(u)})}var c=i(v,2);let d;var m=i(l(c),2);Se(m,21,()=>Fr,Te,(_,x)=>{var y=zo(),p=de(y),$=l(p),h=i(p,2);Se(h,17,()=>t(x).items,Te,(b,E)=>{var P=qo();let T;var M=l(P),I=l(M);oi(I,()=>s[t(E).icon]||"");var D=i(M,2),j=l(D);V(K=>{ca(P,"href",`#${t(E).id??""}`),T=Fe(P,1,"nav-item svelte-6i9pg1",null,T,K),A(j,t(E).label)},[()=>({active:Yr()===t(E).id})]),be("click",P,K=>n(K,t(E).id)),f(b,P)}),V(()=>A($,t(x).label)),f(_,y)}),V(()=>d=Fe(c,1,"sidebar svelte-6i9pg1",null,d,{"mobile-open":r()})),f(e,o),Ee()}Re(["click","keydown"]);const Ns="qragy_admin_token";let _s=B($e(localStorage.getItem(Ns)||""));function Sa(){return t(_s)}function cl(e){g(_s,e.trim(),!0),t(_s)?localStorage.setItem(Ns,t(_s)):localStorage.removeItem(Ns)}function hi(){g(_s,""),localStorage.removeItem(Ns)}var Ao=k('<header class="header svelte-xjepwq"><button class="hamburger svelte-xjepwq" aria-label="Menu"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button> <div class="header-title svelte-xjepwq"> </div> <button class="header-search svelte-xjepwq"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> <span class="svelte-xjepwq">Hizli arama...</span> <kbd class="svelte-xjepwq">Cmd+K</kbd></button> <div class="header-actions svelte-xjepwq"><button class="header-btn svelte-xjepwq" title="Bildirimler"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg></button> <div class="avatar svelte-xjepwq" title="Admin">MA</div> <button class="header-btn logout-btn svelte-xjepwq" title="Cikis Yap"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></button></div></header>');function Po(e,a){ze(a,!0);let r=ke(a,"onOpenCommandPalette",3,()=>{}),s=ke(a,"onToggleMobile",3,()=>{}),n=ne(()=>di[Yr()]||"Dashboard");var o=Ao(),v=l(o),u=i(v,2),c=l(u),d=i(u,2),m=i(d,2),_=i(l(m),4);V(()=>A(c,t(n))),be("click",v,function(...x){var y;(y=s())==null||y.apply(this,x)}),be("click",d,function(...x){var y;(y=r())==null||y.apply(this,x)}),be("click",_,()=>{hi(),window.location.reload()}),f(e,o),Ee()}Re(["click"]);var To=k('<div class="cmd-group svelte-estvwp"> </div>'),Co=k("<!>  <div> </div>",1),Mo=k('<div class="cmd-empty svelte-estvwp">Sonuc bulunamadi</div>'),Io=k('<div class="cmd-overlay svelte-estvwp"><div class="cmd-box svelte-estvwp" role="dialog" aria-label="Hizli arama"><input class="cmd-input svelte-estvwp" placeholder="Panel veya islem ara..."/> <div class="cmd-results svelte-estvwp"><!> <!></div></div></div>');function jo(e,a){ze(a,!0);let r=ke(a,"open",15,!1),s=B(""),n,o=B(0),v=Fr.flatMap(p=>p.items.map($=>({...$,group:p.label}))),u=ne(()=>t(s).trim()?v.filter(p=>p.label.toLowerCase().includes(t(s).toLowerCase())||p.id.includes(t(s).toLowerCase())):v);ms(()=>{r()&&n&&(g(s,""),g(o,0),setTimeout(()=>n==null?void 0:n.focus(),10))});function c(p){if(p.key==="Escape"){r(!1);return}p.key==="ArrowDown"&&(p.preventDefault(),g(o,(t(o)+1)%t(u).length)),p.key==="ArrowUp"&&(p.preventDefault(),g(o,(t(o)-1+t(u).length)%t(u).length)),p.key==="Enter"&&t(u)[t(o)]&&(p.preventDefault(),d(t(u)[t(o)]))}function d(p){fi(p.id),r(!1)}function m(p){p.target===p.currentTarget&&r(!1)}var _=ls(),x=de(_);{var y=p=>{var $=Io(),h=l($),b=l(h);Lr(b,I=>n=I,()=>n);var E=i(b,2),P=l(E);Se(P,17,()=>t(u),Te,(I,D,j)=>{var K=Co(),z=de(K);{var S=W=>{var H=To(),J=l(H);V(()=>A(J,t(D).group)),f(W,H)};ae(z,W=>{var H;(j===0||((H=t(u)[j-1])==null?void 0:H.group)!==t(D).group)&&W(S)})}var N=i(z,2);let Z;var F=l(N);V(()=>{Z=Fe(N,1,"cmd-item svelte-estvwp",null,Z,{selected:j===t(o)}),A(F,t(D).label)}),be("click",N,()=>d(t(D))),f(I,K)});var T=i(P,2);{var M=I=>{var D=Mo();f(I,D)};ae(T,I=>{t(u).length===0&&I(M)})}be("click",$,m),be("keydown",b,c),oe(b,()=>t(s),I=>g(s,I)),f(p,$)};ae(x,p=>{r()&&p(y)})}f(e,_),Ee()}Re(["click","keydown"]);var Do=k('<div class="shell svelte-im4zhz"><!> <div class="main svelte-im4zhz"><!> <div class="content svelte-im4zhz"><!></div></div></div> <!>',1);function Oo(e,a){ze(a,!0);let r=B(!1),s=B(!1);function n(y){(y.metaKey||y.ctrlKey)&&y.key==="k"&&(y.preventDefault(),g(r,!t(r))),y.key==="Escape"&&t(r)&&g(r,!1)}Be(()=>{window.addEventListener("keydown",n)}),Us(()=>{window.removeEventListener("keydown",n)});var o=Do(),v=de(o),u=l(v);So(u,{get mobileOpen(){return t(s)},set mobileOpen(y){g(s,y,!0)}});var c=i(u,2),d=l(c);Po(d,{onOpenCommandPalette:()=>g(r,!0),onToggleMobile:()=>g(s,!t(s))});var m=i(d,2),_=l(m);is(_,()=>a.children);var x=i(v,2);jo(x,{get open(){return t(r)},set open(y){g(r,y,!0)}}),f(e,o),Ee()}gn();let ea=B($e([])),Bo=0;function Ko(){return t(ea)}function L(e,a="info",r=3500){const s=++Bo;t(ea).push({id:s,message:e,type:a,removing:!1}),setTimeout(()=>{const n=t(ea).findIndex(o=>o.id===s);n!==-1&&(t(ea)[n].removing=!0,setTimeout(()=>{g(ea,t(ea).filter(o=>o.id!==s),!0)},300))},r)}function No(e){g(ea,t(ea).filter(a=>a.id!==e),!0)}var Ro=k('<div role="alert"><p class="svelte-1i7wnxu"> </p> <button class="toast-close svelte-1i7wnxu">&times;</button></div>'),Ho=k('<div class="toast-container svelte-1i7wnxu"></div>');function Lo(e,a){ze(a,!1),go();var r=Ho();Se(r,5,Ko,s=>s.id,(s,n)=>{var o=Ro();let v;var u=l(o),c=l(u),d=i(u,2);V(()=>{v=Fe(o,1,`toast toast-${t(n).type??""}`,"svelte-1i7wnxu",v,{removing:t(n).removing}),A(c,t(n).message)}),be("click",d,()=>No(t(n).id)),f(s,o)}),f(e,r),Ee()}Re(["click"]);let Sr=B(null);function Fo(){return t(Sr)}function Xa({title:e,message:a,confirmText:r="Onayla",cancelText:s="Iptal",danger:n=!1}){return new Promise(o=>{g(Sr,{title:e,message:a,confirmText:r,cancelText:s,danger:n,resolve(v){g(Sr,null),o(v)}},!0)})}var Yo=k('<div class="confirm-overlay svelte-1h168yz"><div class="confirm-box svelte-1h168yz"><h3 class="svelte-1h168yz"> </h3> <p class="svelte-1h168yz"> </p> <div class="confirm-actions svelte-1h168yz"><button class="btn btn-secondary svelte-1h168yz"> </button> <button> </button></div></div></div>');function Go(e,a){ze(a,!0);let r=ne(Fo);var s=ls(),n=de(s);{var o=v=>{var u=Yo(),c=l(u),d=l(c),m=l(d),_=i(d,2),x=l(_),y=i(_,2),p=l(y),$=l(p),h=i(p,2);let b;var E=l(h);V(()=>{A(m,t(r).title),A(x,t(r).message),A($,t(r).cancelText),b=Fe(h,1,"btn svelte-1h168yz",null,b,{"btn-danger":t(r).danger,"btn-primary":!t(r).danger}),A(E,t(r).confirmText)}),be("click",u,()=>t(r).resolve(!1)),be("click",c,P=>P.stopPropagation()),be("click",p,()=>t(r).resolve(!1)),be("click",h,()=>t(r).resolve(!0)),f(v,u)};ae(n,v=>{t(r)&&v(o)})}f(e,s),Ee()}Re(["click"]);async function Ms(e,a={}){const r={"Content-Type":"application/json","Bypass-Tunnel-Reminder":"true",...a.headers||{}},s=Sa();s&&(r["x-admin-token"]=s);const n=await fetch(e,{...a,headers:r});if(n.status===401)throw hi(),window.location.hash="#login",new Error("Oturum suresi doldu");const o=await n.json().catch(()=>({}));if(!n.ok)throw new Error((o==null?void 0:o.error)||"HTTP "+n.status);return o}function Ia(e){return"../api/"+e}const X={get(e){return Ms(Ia(e))},post(e,a){return Ms(Ia(e),{method:"POST",body:JSON.stringify(a)})},put(e,a){return Ms(Ia(e),{method:"PUT",body:JSON.stringify(a)})},delete(e){return Ms(Ia(e),{method:"DELETE"})},async upload(e,a){const r={"Content-Type":a.type,"Bypass-Tunnel-Reminder":"true"},s=Sa();s&&(r["x-admin-token"]=s);const n=await fetch(Ia(e),{method:"POST",headers:r,body:a}),o=await n.json().catch(()=>({}));if(!n.ok)throw new Error((o==null?void 0:o.error)||"HTTP "+n.status);return o},async uploadForm(e,a){const r={"Bypass-Tunnel-Reminder":"true"},s=Sa();s&&(r["x-admin-token"]=s);const n=await fetch(Ia(e),{method:"POST",headers:r,body:a}),o=await n.json().catch(()=>({}));if(!n.ok)throw new Error((o==null?void 0:o.error)||"HTTP "+n.status);return o}};var Uo=k('<span class="trend up svelte-1sgihyn">â</span>'),Vo=k('<span class="trend down svelte-1sgihyn">â</span>'),Wo=k('<div class="kpi-sub svelte-1sgihyn"><!> </div>'),Qo=k('<div class="kpi-card svelte-1sgihyn"><div class="kpi-label svelte-1sgihyn"> </div> <div class="kpi-value svelte-1sgihyn"> </div> <!></div>');function bt(e,a){let r=ke(a,"label",3,""),s=ke(a,"value",3,0),n=ke(a,"sub",3,""),o=ke(a,"trend",3,""),v=ke(a,"color",3,"var(--text)");var u=Qo(),c=l(u),d=l(c),m=i(c,2);let _;var x=l(m),y=i(m,2);{var p=$=>{var h=Wo(),b=l(h);{var E=M=>{var I=Uo();f(M,I)},P=M=>{var I=Vo();f(M,I)};ae(b,M=>{o()==="up"?M(E):o()==="down"&&M(P,1)})}var T=i(b);V(()=>A(T,` ${n()??""}`)),f($,h)};ae(y,$=>{n()&&$(p)})}V(()=>{A(d,r()),_=Za(m,"",_,{color:v()}),A(x,s())}),f(e,u)}var Jo=k('<div class="bar-row svelte-18m1sg8"><span class="bar-label svelte-18m1sg8"> </span> <div class="bar-track svelte-18m1sg8"><div class="bar-fill svelte-18m1sg8"></div></div> <span class="bar-value svelte-18m1sg8"> </span></div>'),Zo=k('<div class="bar-chart svelte-18m1sg8"></div>');function pi(e,a){ze(a,!0);let r=ke(a,"items",19,()=>[]),s=ke(a,"color",3,"var(--accent)"),n=ne(()=>Math.max(...r().map(v=>v.value),1));var o=Zo();Se(o,21,r,Te,(v,u)=>{var c=Jo(),d=l(c),m=l(d),_=i(d,2),x=l(_);let y;var p=i(_,2),$=l(p);V(()=>{A(m,t(u).label),y=Za(x,"",y,{width:`${t(u).value/t(n)*100}%`,background:t(u).color||s()}),A($,t(u).value)}),f(v,c)}),f(e,o),Ee()}var Xo=k('<p class="svelte-oagnpm"> </p>'),ev=k('<div class="loading svelte-oagnpm"><div class="spinner svelte-oagnpm"></div> <!></div>');function He(e,a){let r=ke(a,"size",3,32),s=ke(a,"message",3,"");var n=ev(),o=l(n);let v;var u=i(o,2);{var c=d=>{var m=Xo(),_=l(m);V(()=>A(_,s())),f(d,m)};ae(u,d=>{s()&&d(c)})}V(()=>v=Za(o,"",v,{width:`${r()??""}px`,height:`${r()??""}px`})),f(e,n)}var tv=k('<div class="error-state svelte-1udy7wi"> </div>'),av=k('<div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi"> </span> <span class="status-val svelte-1udy7wi"> </span></div>'),sv=k('<div class="card svelte-1udy7wi"><h2 class="svelte-1udy7wi">Haftalik Populer Konular</h2> <!></div>'),rv=k('<div class="grid-2 svelte-1udy7wi"><div class="card svelte-1udy7wi"><h2 class="svelte-1udy7wi">Ticket Durumu</h2> <div class="status-grid svelte-1udy7wi"><div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi">Toplam</span> <span class="status-val svelte-1udy7wi"> </span></div> <div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi">Son 24s</span> <span class="status-val svelte-1udy7wi"> </span></div> <!></div></div> <!></div>'),lv=k('<div class="kpi-grid svelte-1udy7wi"><!> <!> <!> <!></div> <!>',1),iv=k('<div class="page-header svelte-1udy7wi"><div><h1 class="svelte-1udy7wi">Dashboard</h1> <p class="svelte-1udy7wi">Sistem genel bakis</p></div></div> <!>',1);function nv(e,a){ze(a,!0);let r=B(!0),s=B(null),n=B(null),o=B(null);Be(async()=>{try{const[y,p]=await Promise.all([X.get("admin/dashboard-stats").catch(()=>null),X.get("admin/summary").catch(()=>null)]);g(s,y,!0),g(n,p,!0)}catch(y){g(o,y.message,!0),L("Dashboard yuklenemedi: "+y.message,"error")}finally{g(r,!1)}});let v=ne(()=>{var y,p;return(((p=(y=t(s))==null?void 0:y.thisWeek)==null?void 0:p.topTopics)||[]).slice(0,8).map($=>({label:$.topicId||$.topic||"?",value:$.count||0}))});function u(y){return y?y>0?"+"+y+"%":y+"%":""}var c=iv(),d=i(de(c),2);{var m=y=>{He(y,{message:"Yukleniyor..."})},_=y=>{var p=tv(),$=l(p);V(()=>A($,`Hata: ${t(o)??""}`)),f(y,p)},x=y=>{var p=lv(),$=de(p),h=l($);{let I=ne(()=>{var j,K;return((K=(j=t(s))==null?void 0:j.today)==null?void 0:K.chats)??0}),D=ne(()=>{var j,K;return((K=(j=t(s))==null?void 0:j.today)==null?void 0:K.resolutionRate)??0});bt(h,{label:"Bugun Sohbet",get value(){return t(I)},get sub(){return`Cozum: %${t(D)??""}`}})}var b=i(h,2);{let I=ne(()=>{var K,z;return((z=(K=t(s))==null?void 0:K.thisWeek)==null?void 0:z.chats)??0}),D=ne(()=>{var K,z;return u((z=(K=t(s))==null?void 0:K.trends)==null?void 0:z.weeklyChats)}),j=ne(()=>{var K,z,S,N;return((z=(K=t(s))==null?void 0:K.trends)==null?void 0:z.weeklyChats)>0?"up":((N=(S=t(s))==null?void 0:S.trends)==null?void 0:N.weeklyChats)<0?"down":""});bt(b,{label:"Haftalik Sohbet",get value(){return t(I)},get sub(){return t(D)},get trend(){return t(j)}})}var E=i(b,2);{let I=ne(()=>{var K,z;return(((z=(K=t(s))==null?void 0:K.thisWeek)==null?void 0:z.csatAvg)??0).toFixed(1)+"/5"}),D=ne(()=>{var K,z;return u((z=(K=t(s))==null?void 0:K.trends)==null?void 0:z.weeklyCsat)}),j=ne(()=>{var K,z,S,N;return((z=(K=t(s))==null?void 0:K.trends)==null?void 0:z.weeklyCsat)>0?"up":((N=(S=t(s))==null?void 0:S.trends)==null?void 0:N.weeklyCsat)<0?"down":""});bt(E,{label:"Haftalik CSAT",get value(){return t(I)},get sub(){return t(D)},get trend(){return t(j)}})}var P=i(E,2);{let I=ne(()=>{var j,K;return((K=(j=t(s))==null?void 0:j.thisMonth)==null?void 0:K.resolutionRate)??0}),D=ne(()=>{var j,K;return u((K=(j=t(s))==null?void 0:j.trends)==null?void 0:K.monthlyChats)});bt(P,{label:"Aylik Cozum",get value(){return`%${t(I)??""}`},get sub(){return t(D)}})}var T=i($,2);{var M=I=>{var D=rv(),j=l(D),K=i(l(j),2),z=l(K),S=i(l(z),2),N=l(S),Z=i(z,2),F=i(l(Z),2),W=l(F),H=i(Z,2);Se(H,17,()=>Object.entries(t(n).summary.byStatus||{}),Te,(C,w)=>{var Y=ne(()=>Cr(t(w),2));let G=()=>t(Y)[0],te=()=>t(Y)[1];var re=av(),q=l(re),le=l(q),ie=i(q,2),ce=l(ie);V(me=>{A(le,me),A(ce,te())},[()=>G().replace(/_/g," ")]),f(C,re)});var J=i(j,2);{var Q=C=>{var w=sv(),Y=i(l(w),2);pi(Y,{get items(){return t(v)}}),f(C,w)};ae(J,C=>{t(v).length&&C(Q)})}V(()=>{A(N,t(n).summary.total??0),A(W,t(n).summary.last24h??0)}),f(I,D)};ae(T,I=>{var D;(D=t(n))!=null&&D.summary&&I(M)})}f(y,p)};ae(d,y=>{t(r)?y(m):t(o)?y(_,1):y(x,!1)})}f(e,c),Ee()}function oa(e){if(!e)return"-";const a=new Date(e);return isNaN(a.getTime())?"-":a.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function es(e){if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const r=Date.now()-a.getTime(),s=Math.floor(r/6e4);if(s<1)return"az once";if(s<60)return s+" dk once";const n=Math.floor(s/60);if(n<24)return n+" saat once";const o=Math.floor(n/24);return o<30?o+" gun once":oa(e)}function bs(e,a=60){return e?e.length>a?e.slice(0,a)+"...":e:""}var ov=k('<div class="bubble-time svelte-uewexn"> </div>'),vv=k("<div><div> </div> <!></div>");function Es(e,a){let r=ke(a,"sender",3,"bot"),s=ke(a,"message",3,""),n=ke(a,"timestamp",3,"");var o=vv();let v;var u=l(o),c=l(u),d=i(u,2);{var m=_=>{var x=ov(),y=l(x);V(()=>A(y,n())),f(_,x)};ae(d,_=>{n()&&_(m)})}V(()=>{v=Fe(o,1,"bubble-wrap svelte-uewexn",null,v,{user:r()==="user"}),Fe(u,1,`bubble bubble-${r()??""}`,"svelte-uewexn"),A(c,s())}),f(e,o)}var dv=k("<span><!></span>");function We(e,a){let r=ke(a,"variant",3,"gray");var s=dv(),n=l(s);is(n,()=>a.children),V(()=>Fe(s,1,`badge badge-${r()??""}`,"svelte-jpiuiy")),f(e,s)}var cv=k("<button><!></button>");function ee(e,a){let r=ke(a,"variant",3,"secondary"),s=ke(a,"size",3,"md"),n=ke(a,"disabled",3,!1),o=ke(a,"type",3,"button"),v=ke(a,"class",3,"");var u=cv(),c=l(u);is(c,()=>a.children),V(()=>{ca(u,"type",o()),Fe(u,1,`btn btn-${r()??""} btn-${s()??""} ${v()??""}`,"svelte-er4ugn"),u.disabled=n()}),be("click",u,function(...d){var m;(m=a.onclick)==null||m.apply(this,d)}),f(e,u)}Re(["click"]);var uv=k('<div><div class="conv-top svelte-tmzvc9"><span class="conv-session svelte-tmzvc9"> </span> <!></div> <div class="conv-msg svelte-tmzvc9"> </div> <div class="conv-meta svelte-tmzvc9"><span> </span> <span> </span></div></div>'),fv=k('<div class="empty-list svelte-tmzvc9">Aktif sohbet yok</div>'),hv=k('<div class="empty-chat svelte-tmzvc9">Mesaj yok</div>'),pv=k('<div class="chat-header svelte-tmzvc9"><strong> </strong> <span class="chat-meta svelte-tmzvc9"> </span></div> <div class="chat-body svelte-tmzvc9"></div>',1),_v=k('<div class="no-selection svelte-tmzvc9">Bir sohbet secin</div>'),mv=k('<div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9"> </span> <span class="detail-val svelte-tmzvc9"> </span></div>'),gv=k('<h4 class="svelte-tmzvc9">Hafiza</h4> <!>',1),yv=k('<h3 class="svelte-tmzvc9">Detaylar</h3> <div class="detail-rows svelte-tmzvc9"><div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Oturum</span> <span class="detail-val mono svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Durum</span> <span class="detail-val svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Kaynak</span> <span class="detail-val svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Olusturma</span> <span class="detail-val svelte-tmzvc9"> </span></div> <!></div>',1),bv=k('<div class="no-selection-ctx svelte-tmzvc9">Detay icin sohbet secin</div>'),wv=k('<div class="live-layout svelte-tmzvc9"><div class="conv-list svelte-tmzvc9"></div> <div class="chat-panel svelte-tmzvc9"><!></div> <div class="context-panel svelte-tmzvc9"><!></div></div>'),kv=k('<div class="page-header svelte-tmzvc9"><div><h1 class="svelte-tmzvc9">Canli Sohbetler <!></h1> <p class="svelte-tmzvc9">Aktif ve ticketed sohbetler</p></div> <div class="header-actions svelte-tmzvc9"><!> <!></div></div> <!>',1);function xv(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(null),o=ne(()=>t(s).find(T=>T.sessionId===t(n)));Be(()=>v());async function v(){g(r,!0);try{const T=await X.get("admin/conversations");g(s,(T.conversations||[]).filter(M=>M.status==="active"||M.status==="ticketed"),!0)}catch(T){L("Sohbetler yuklenemedi: "+T.message,"error")}finally{g(r,!1)}}async function u(){if(await Xa({title:"Tum sohbetleri kapat",message:"Tum aktif sohbetler kapatilacak. Emin misiniz?",confirmText:"Kapat",danger:!0}))try{const M=await X.post("admin/conversations/close-all",{});L(M.closedCount+" sohbet kapatildi","success"),await v(),g(n,null)}catch(M){L("Hata: "+M.message,"error")}}var c=kv(),d=de(c),m=l(d),_=l(m),x=i(l(_));We(x,{variant:"blue",children:(T,M)=>{var I=U();V(()=>A(I,t(s).length)),f(T,I)},$$slots:{default:!0}});var y=i(m,2),p=l(y);ee(p,{onclick:v,variant:"ghost",size:"sm",children:(T,M)=>{var I=U("Yenile");f(T,I)},$$slots:{default:!0}});var $=i(p,2);{var h=T=>{ee(T,{onclick:u,variant:"danger",size:"sm",children:(M,I)=>{var D=U("Tumunu Kapat");f(M,D)},$$slots:{default:!0}})};ae($,T=>{t(s).length&&T(h)})}var b=i(d,2);{var E=T=>{He(T,{message:"Yukleniyor..."})},P=T=>{var M=wv(),I=l(M);Se(I,21,()=>t(s),Te,(W,H)=>{var J=uv();let Q;var C=l(J),w=l(C),Y=l(w),G=i(w,2);{let we=ne(()=>t(H).status==="active"?"green":"yellow");We(G,{get variant(){return t(we)},children:(ue,R)=>{var ve=U();V(()=>A(ve,t(H).status)),f(ue,ve)},$$slots:{default:!0}})}var te=i(C,2),re=l(te),q=i(te,2),le=l(q),ie=l(le),ce=i(le,2),me=l(ce);V((we,ue)=>{Q=Fe(J,1,"conv-item svelte-tmzvc9",null,Q,{active:t(n)===t(H).sessionId}),A(Y,we),A(re,t(H).lastUserMessage||"..."),A(ie,`${(t(H).messageCount||0)??""} mesaj`),A(me,ue)},[()=>{var we;return((we=t(H).sessionId)==null?void 0:we.slice(-8))||"?"},()=>es(t(H).updatedAt)]),be("click",J,()=>g(n,t(H).sessionId,!0)),f(W,J)},W=>{var H=fv();f(W,H)});var D=i(I,2),j=l(D);{var K=W=>{var H=pv(),J=de(H),Q=l(J),C=l(Q),w=i(Q,2),Y=l(w),G=i(J,2);Se(G,21,()=>t(o).chatHistory||[],Te,(te,re)=>{{let q=ne(()=>t(re).role==="user"?"user":"bot"),le=ne(()=>t(re).content||"");Es(te,{get sender(){return t(q)},get message(){return t(le)}})}},te=>{var re=hv();f(te,re)}),V(te=>{A(C,te),A(Y,`${(t(o).source||"web")??""} Â· ${t(o).messageCount??""} mesaj`)},[()=>{var te;return(te=t(o).sessionId)==null?void 0:te.slice(-8)}]),f(W,H)},z=W=>{var H=_v();f(W,H)};ae(j,W=>{t(o)?W(K):W(z,!1)})}var S=i(D,2),N=l(S);{var Z=W=>{var H=yv(),J=i(de(H),2),Q=l(J),C=i(l(Q),2),w=l(C),Y=i(Q,2),G=i(l(Y),2),te=l(G),re=i(Y,2),q=i(l(re),2),le=l(q),ie=i(re,2),ce=i(l(ie),2),me=l(ce),we=i(ie,2);{var ue=R=>{var ve=gv(),se=i(de(ve),2);Se(se,17,()=>Object.entries(t(o).memory),Te,(pe,he)=>{var fe=ne(()=>Cr(t(he),2));let ye=()=>t(fe)[0],xe=()=>t(fe)[1];var _e=ls(),De=de(_e);{var Oe=Pe=>{var je=mv(),Ke=l(je),Ge=l(Ke),Ue=i(Ke,2),pt=l(Ue);V(()=>{A(Ge,ye()),A(pt,xe())}),f(Pe,je)};ae(De,Pe=>{xe()&&Pe(Oe)})}f(pe,_e)}),f(R,ve)};ae(we,R=>{t(o).memory&&R(ue)})}V((R,ve)=>{A(w,R),A(te,t(o).status),A(le,t(o).source||"web"),A(me,ve)},[()=>{var R;return(R=t(o).sessionId)==null?void 0:R.slice(0,16)},()=>es(t(o).createdAt)]),f(W,H)},F=W=>{var H=bv();f(W,H)};ae(N,W=>{t(o)?W(Z):W(F,!1)})}f(T,M)};ae(b,T=>{t(r)?T(E):T(P,!1)})}f(e,c),Ee()}Re(["click"]);var $v=k('<tr class="svelte-14amxqn"><td class="mono svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"><!></td></tr>'),qv=k('<tr class="svelte-14amxqn"><td colspan="6" class="empty-row svelte-14amxqn">Kapali sohbet yok</td></tr>'),zv=k('<div class="card svelte-14amxqn"><table class="svelte-14amxqn"><thead><tr><th class="svelte-14amxqn">Oturum</th><th class="svelte-14amxqn">Mesaj</th><th class="svelte-14amxqn">Kaynak</th><th class="svelte-14amxqn">Son Mesaj</th><th class="svelte-14amxqn">Kapanma</th><th class="svelte-14amxqn"></th></tr></thead><tbody></tbody></table></div>'),Ev=k('<div class="memory-row svelte-14amxqn"><span class="memory-key svelte-14amxqn"> </span> <span> </span></div>'),Sv=k('<div class="memory-card svelte-14amxqn"><h3 class="svelte-14amxqn">Hafiza</h3> <!></div>'),Av=k('<p class="no-msg svelte-14amxqn">Mesaj gecmisi yok</p>'),Pv=k('<div class="detail-view svelte-14amxqn"><!> <div class="detail-header svelte-14amxqn"><h2 class="svelte-14amxqn"> </h2> <!></div> <div class="detail-meta svelte-14amxqn"><span> </span> <span> </span> <span> </span></div> <!> <div class="chat-card svelte-14amxqn"><h3 class="svelte-14amxqn">Mesajlar</h3> <!></div></div>'),Tv=k('<div class="page-header svelte-14amxqn"><div><h1 class="svelte-14amxqn">Kapali Sohbetler <!></h1> <p class="svelte-14amxqn">Kapatilmis sohbet gecmisi</p></div> <!></div> <!>',1);function Cv(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(null),o=ne(()=>t(s).find(b=>b.sessionId===t(n)));Be(()=>v());async function v(){g(r,!0);try{const b=await X.get("admin/conversations");g(s,(b.conversations||[]).filter(E=>E.status==="closed"),!0)}catch(b){L("Kapali sohbetler yuklenemedi: "+b.message,"error")}finally{g(r,!1)}}var u=Tv(),c=de(u),d=l(c),m=l(d),_=i(l(m));We(_,{variant:"gray",children:(b,E)=>{var P=U();V(()=>A(P,t(s).length)),f(b,P)},$$slots:{default:!0}});var x=i(d,2);ee(x,{onclick:v,variant:"ghost",size:"sm",children:(b,E)=>{var P=U("Yenile");f(b,P)},$$slots:{default:!0}});var y=i(c,2);{var p=b=>{He(b,{message:"Yukleniyor..."})},$=b=>{var E=zv(),P=l(E),T=i(l(P));Se(T,21,()=>t(s),Te,(M,I)=>{var D=$v(),j=l(D),K=l(j),z=i(j),S=l(z),N=i(z),Z=l(N),F=i(N),W=l(F),H=i(F),J=l(H),Q=i(H),C=l(Q);ee(C,{onclick:()=>g(n,t(I).sessionId,!0),variant:"ghost",size:"sm",children:(w,Y)=>{var G=U("Ac");f(w,G)},$$slots:{default:!0}}),V((w,Y,G)=>{A(K,w),A(S,t(I).messageCount||0),A(Z,t(I).source||"web"),A(W,Y),A(J,G)},[()=>{var w;return((w=t(I).sessionId)==null?void 0:w.slice(-8))||"?"},()=>bs(t(I).lastUserMessage||"",50),()=>es(t(I).updatedAt)]),f(M,D)},M=>{var I=qv();f(M,I)}),f(b,E)},h=b=>{var E=Pv(),P=l(E);ee(P,{onclick:()=>g(n,null),variant:"ghost",size:"sm",children:(w,Y)=>{var G=U("â Listeye Don");f(w,G)},$$slots:{default:!0}});var T=i(P,2),M=l(T),I=l(M),D=i(M,2);We(D,{variant:"gray",children:(w,Y)=>{var G=U("kapali");f(w,G)},$$slots:{default:!0}});var j=i(T,2),K=l(j),z=l(K),S=i(K,2),N=l(S),Z=i(S,2),F=l(Z),W=i(j,2);{var H=w=>{var Y=Sv(),G=i(l(Y),2);Se(G,17,()=>Object.entries(t(o).memory),Te,(te,re)=>{var q=ne(()=>Cr(t(re),2));let le=()=>t(q)[0],ie=()=>t(q)[1];var ce=ls(),me=de(ce);{var we=ue=>{var R=Ev(),ve=l(R),se=l(ve),pe=i(ve,2),he=l(pe);V(()=>{A(se,le()),A(he,ie())}),f(ue,R)};ae(me,ue=>{ie()&&ue(we)})}f(te,ce)}),f(w,Y)},J=ne(()=>t(o).memory&&Object.keys(t(o).memory).length);ae(W,w=>{t(J)&&w(H)})}var Q=i(W,2),C=i(l(Q),2);Se(C,17,()=>t(o).chatHistory||[],Te,(w,Y)=>{{let G=ne(()=>t(Y).role==="user"?"user":"bot"),te=ne(()=>t(Y).content||"");Es(w,{get sender(){return t(G)},get message(){return t(te)}})}},w=>{var Y=Av();f(w,Y)}),V((w,Y)=>{A(I,w),A(z,`Kaynak: ${(t(o).source||"web")??""}`),A(N,`${t(o).messageCount??""} mesaj`),A(F,Y)},[()=>{var w;return(w=t(o).sessionId)==null?void 0:w.slice(-8)},()=>es(t(o).createdAt)]),f(b,E)};ae(y,b=>{t(r)?b(p):t(o)?b(h,!1):b($,1)})}f(e,u),Ee()}var Mv=k("<option> </option>"),Iv=k('<p class="no-msg svelte-q2mz46">Mesaj yok</p>'),jv=k('<div class="note-item svelte-q2mz46"><span class="note-meta svelte-q2mz46"> </span> <p class="svelte-q2mz46"> </p></div>'),Dv=k('<div class="info-card svelte-q2mz46"><h3 class="svelte-q2mz46">Notlar</h3> <!></div>'),Ov=k('<div class="detail-view svelte-q2mz46"><!> <div class="detail-header svelte-q2mz46"><h2 class="svelte-q2mz46"> </h2> <!></div> <div class="ticket-actions svelte-q2mz46"><div class="action-group svelte-q2mz46"><label class="svelte-q2mz46">Atama</label> <div class="action-row svelte-q2mz46"><input class="input action-input svelte-q2mz46" type="text" placeholder="Temsilci adi"/> <!></div></div> <div class="action-group svelte-q2mz46"><label class="svelte-q2mz46">Oncelik</label> <div class="action-row svelte-q2mz46"><select class="select svelte-q2mz46"><option>Sec...</option><option>Dusuk</option><option>Normal</option><option>Yuksek</option></select> <!></div></div> <div class="action-group svelte-q2mz46"><label class="svelte-q2mz46">Not Ekle</label> <div class="action-row svelte-q2mz46"><textarea class="input action-textarea svelte-q2mz46" placeholder="Dahili not..." rows="2"></textarea> <!></div></div></div> <div class="detail-grid svelte-q2mz46"><div class="info-card svelte-q2mz46"><h3 class="svelte-q2mz46">Bilgiler</h3> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Sube Kodu</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Firma</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Ad Soyad</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Telefon</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Kaynak</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Oncelik</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Atanan</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Olusturma</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Ozet</span><span class="svelte-q2mz46"> </span></div></div> <div class="chat-card svelte-q2mz46"><h3 class="svelte-q2mz46">Sohbet Gecmisi</h3> <!></div></div> <!></div>'),Bv=k('<tr class="svelte-q2mz46"><td class="mono svelte-q2mz46"> </td><td class="svelte-q2mz46"><!></td><td class="svelte-q2mz46"><span> </span></td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"><!></td></tr>'),Kv=k('<tr class="svelte-q2mz46"><td colspan="8" class="empty-row svelte-q2mz46">Sonuc bulunamadi</td></tr>'),Nv=k('<div class="card svelte-q2mz46"><table class="svelte-q2mz46"><thead><tr><th class="svelte-q2mz46">ID</th><th class="svelte-q2mz46">Durum</th><th class="svelte-q2mz46">Oncelik</th><th class="svelte-q2mz46">Sube</th><th class="svelte-q2mz46">Ozet</th><th class="svelte-q2mz46">Kaynak</th><th class="svelte-q2mz46">Tarih</th><th class="svelte-q2mz46"></th></tr></thead><tbody></tbody></table></div>'),Rv=k('<div class="page-header svelte-q2mz46"><div><h1 class="svelte-q2mz46">Arama</h1> <p class="svelte-q2mz46"> </p></div> <div class="header-actions svelte-q2mz46"><!></div></div> <div class="filters svelte-q2mz46"><input class="input search-input svelte-q2mz46" type="text" placeholder="ID, isim, ozet, telefon ara..."/> <select class="select svelte-q2mz46"></select> <select class="select svelte-q2mz46"><option>Tum Kaynaklar</option><option>Web</option><option>WhatsApp</option><option>Zendesk</option></select> <select class="select svelte-q2mz46"><option>50</option><option>100</option><option>200</option><option>500</option></select></div> <!>',1);function Hv(e,a){ze(a,!0);let r=B(!1),s=B($e([])),n=B(0),o=B(""),v=B(""),u=B(""),c=B("100"),d=B(null),m;const _=[{value:"",label:"Tumu"},{value:"handoff_pending",label:"Aktarim Bekleyen"},{value:"queued_after_hours",label:"Mesai Disi"},{value:"handoff_success",label:"Basarili"},{value:"handoff_failed",label:"Basarisiz"},{value:"handoff_parent_posted",label:"Parent Aktarim"},{value:"handoff_opened_no_summary",label:"Ozetsiz"}],x={handoff_pending:"yellow",queued_after_hours:"purple",handoff_success:"green",handoff_failed:"red",handoff_parent_posted:"blue",handoff_opened_no_summary:"gray"};Be(()=>y());async function y(){g(r,!0);try{const R=new URLSearchParams;t(v)&&R.set("status",t(v)),t(c)&&R.set("limit",t(c)),t(o).trim()&&R.set("q",t(o).trim()),t(u)&&R.set("source",t(u));const ve=R.toString(),se=await X.get("admin/tickets"+(ve?"?"+ve:""));g(s,se.tickets||[],!0),g(n,se.total||0,!0)}catch(R){L("Arama hatasi: "+R.message,"error")}finally{g(r,!1)}}function p(){clearTimeout(m),m=setTimeout(y,400)}async function $(R){try{const ve=await X.get("admin/tickets/"+encodeURIComponent(R));g(d,ve.ticket||ve,!0)}catch(ve){L("Ticket yuklenemedi: "+ve.message,"error")}}let h=B(""),b=B(""),E=B("");async function P(R){try{const ve=await X.get("admin/tickets/"+encodeURIComponent(R));g(d,ve.ticket||ve,!0)}catch{}}async function T(){if(t(h).trim())try{await X.put("admin/tickets/"+encodeURIComponent(t(d).id)+"/assign",{assignedTo:t(h).trim()}),L("Atandi: "+t(h).trim(),"success"),g(h,""),await P(t(d).id)}catch(R){L("Atama hatasi: "+R.message,"error")}}async function M(){if(t(b))try{await X.put("admin/tickets/"+encodeURIComponent(t(d).id)+"/priority",{priority:t(b)}),L("Oncelik degistirildi: "+t(b),"success"),g(b,""),await P(t(d).id)}catch(R){L("Oncelik hatasi: "+R.message,"error")}}async function I(){if(t(E).trim())try{await X.post("admin/tickets/"+encodeURIComponent(t(d).id)+"/notes",{note:t(E).trim()}),L("Not eklendi","success"),g(E,""),await P(t(d).id)}catch(R){L("Not hatasi: "+R.message,"error")}}function D(){const R=new URLSearchParams({format:"csv",token:Sa()});t(v)&&R.set("status",t(v)),window.open("../api/admin/tickets/export?"+R.toString(),"_blank")}var j=Rv(),K=de(j),z=l(K),S=i(l(z),2),N=l(S),Z=i(z,2),F=l(Z);ee(F,{onclick:D,variant:"ghost",size:"sm",children:(R,ve)=>{var se=U("CSV Indir");f(R,se)},$$slots:{default:!0}});var W=i(K,2),H=l(W),J=i(H,2);Se(J,21,()=>_,Te,(R,ve)=>{var se=Mv(),pe=l(se),he={};V(()=>{A(pe,t(ve).label),he!==(he=t(ve).value)&&(se.value=(se.__value=t(ve).value)??"")}),f(R,se)});var Q=i(J,2),C=l(Q);C.value=C.__value="";var w=i(C);w.value=w.__value="web";var Y=i(w);Y.value=Y.__value="whatsapp";var G=i(Y);G.value=G.__value="zendesk";var te=i(Q,2),re=l(te);re.value=re.__value="50";var q=i(re);q.value=q.__value="100";var le=i(q);le.value=le.__value="200";var ie=i(le);ie.value=ie.__value="500";var ce=i(W,2);{var me=R=>{He(R,{message:"AranÄ±yor..."})},we=R=>{var ve=Ov(),se=l(ve);ee(se,{onclick:()=>g(d,null),variant:"ghost",size:"sm",children:(Ne,st)=>{var _t=U("â Listeye Don");f(Ne,_t)},$$slots:{default:!0}});var pe=i(se,2),he=l(pe),fe=l(he),ye=i(he,2);{let Ne=ne(()=>x[t(d).status]||"gray");We(ye,{get variant(){return t(Ne)},children:(st,_t)=>{var Ma=U();V(Jt=>A(Ma,Jt),[()=>{var Jt;return(Jt=t(d).status)==null?void 0:Jt.replace(/_/g," ")}]),f(st,Ma)},$$slots:{default:!0}})}var xe=i(pe,2),_e=l(xe),De=i(l(_e),2),Oe=l(De),Pe=i(Oe,2);ee(Pe,{onclick:T,variant:"primary",size:"sm",children:(Ne,st)=>{var _t=U("Ata");f(Ne,_t)},$$slots:{default:!0}});var je=i(_e,2),Ke=i(l(je),2),Ge=l(Ke),Ue=l(Ge);Ue.value=Ue.__value="";var pt=i(Ue);pt.value=pt.__value="low";var lt=i(pt);lt.value=lt.__value="normal";var Ve=i(lt);Ve.value=Ve.__value="high";var $t=i(Ge,2);ee($t,{onclick:M,variant:"primary",size:"sm",children:(Ne,st)=>{var _t=U("Degistir");f(Ne,_t)},$$slots:{default:!0}});var Qt=i(je,2),Nt=i(l(Qt),2),Ta=l(Nt),ns=i(Ta,2);ee(ns,{onclick:I,variant:"primary",size:"sm",children:(Ne,st)=>{var _t=U("Ekle");f(Ne,_t)},$$slots:{default:!0}});var ua=i(xe,2),Ct=l(ua),Rt=i(l(Ct),2),fa=i(l(Rt)),Ca=l(fa),Ht=i(Rt,2),Vs=i(l(Ht)),Ws=l(Vs),Ss=i(Ht,2),Qs=i(l(Ss)),Js=l(Qs),os=i(Ss,2),Zs=i(l(os)),Xs=l(Zs),vs=i(os,2),er=i(l(vs)),tr=l(er),ds=i(vs,2),ar=i(l(ds)),sr=l(ar),As=i(ds,2),rr=i(l(As)),lr=l(rr),ge=i(As,2),gi=i(l(ge)),yi=l(gi),bi=i(ge,2),wi=i(l(bi)),ki=l(wi),xi=i(Ct,2),$i=i(l(xi),2);Se($i,17,()=>t(d).chatHistory||[],Te,(Ne,st)=>{{let _t=ne(()=>t(st).role==="user"?"user":"bot"),Ma=ne(()=>t(st).content||"");Es(Ne,{get sender(){return t(_t)},get message(){return t(Ma)}})}},Ne=>{var st=Iv();f(Ne,st)});var qi=i(ua,2);{var zi=Ne=>{var st=Dv(),_t=i(l(st),2);Se(_t,17,()=>t(d).internalNotes,Te,(Ma,Jt)=>{var Ur=jv(),Vr=l(Ur),Ei=l(Vr),Si=i(Vr,2),Ai=l(Si);V(Pi=>{A(Ei,`${t(Jt).author??""} Â· ${Pi??""}`),A(Ai,t(Jt).note)},[()=>oa(t(Jt).at)]),f(Ma,Ur)}),f(Ne,st)};ae(qi,Ne=>{var st;(st=t(d).internalNotes)!=null&&st.length&&Ne(zi)})}V(Ne=>{A(fe,t(d).id),A(Ca,t(d).branchCode||"-"),A(Ws,t(d).companyName||"-"),A(Js,t(d).fullName||"-"),A(Xs,t(d).phone||"-"),A(tr,t(d).source||"-"),A(sr,t(d).priority||"normal"),A(lr,t(d).assignedTo||"-"),A(yi,Ne),A(ki,t(d).issueSummary||"-")},[()=>oa(t(d).createdAt)]),oe(Oe,()=>t(h),Ne=>g(h,Ne)),ja(Ge,()=>t(b),Ne=>g(b,Ne)),oe(Ta,()=>t(E),Ne=>g(E,Ne)),f(R,ve)},ue=R=>{var ve=Nv(),se=l(ve),pe=i(l(se));Se(pe,21,()=>t(s),Te,(he,fe)=>{var ye=Bv(),xe=l(ye),_e=l(xe),De=i(xe),Oe=l(De);{let Ct=ne(()=>x[t(fe).status]||"gray");We(Oe,{get variant(){return t(Ct)},children:(Rt,fa)=>{var Ca=U();V(Ht=>A(Ca,Ht),[()=>{var Ht;return(Ht=t(fe).status)==null?void 0:Ht.replace(/_/g," ")}]),f(Rt,Ca)},$$slots:{default:!0}})}var Pe=i(De),je=l(Pe);let Ke;var Ge=l(je),Ue=i(Pe),pt=l(Ue),lt=i(Ue),Ve=l(lt),$t=i(lt),Qt=l($t),Nt=i($t),Ta=l(Nt),ns=i(Nt),ua=l(ns);ee(ua,{onclick:()=>$(t(fe).id),variant:"ghost",size:"sm",children:(Ct,Rt)=>{var fa=U("Ac");f(Ct,fa)},$$slots:{default:!0}}),V((Ct,Rt)=>{A(_e,t(fe).id),Ke=Fe(je,1,"priority svelte-q2mz46",null,Ke,{high:t(fe).priority==="high",low:t(fe).priority==="low"}),A(Ge,t(fe).priority||"normal"),A(pt,t(fe).branchCode||"-"),A(Ve,Ct),A(Qt,t(fe).source||"web"),A(Ta,Rt)},[()=>bs(t(fe).issueSummary||"",40),()=>oa(t(fe).createdAt)]),f(he,ye)},he=>{var fe=Kv();f(he,fe)}),f(R,ve)};ae(ce,R=>{t(r)?R(me):t(d)?R(we,1):R(ue,!1)})}V(()=>A(N,`Ticket ara ve filtrele (${t(n)??""} sonuc)`)),be("input",H,p),oe(H,()=>t(o),R=>g(o,R)),be("change",J,y),ja(J,()=>t(v),R=>g(v,R)),be("change",Q,y),ja(Q,()=>t(u),R=>g(u,R)),be("change",te,y),ja(te,()=>t(c),R=>g(c,R)),f(e,j),Ee()}Re(["input","change"]);function _i(e,{onMessage:a,onEvent:r,onError:s}={}){const n=Sa(),o=e.includes("?")?"&":"?",v="../api/"+e+(n?o+"token="+encodeURIComponent(n):""),u=new EventSource(v);if(a&&(u.onmessage=c=>{try{const d=JSON.parse(c.data);a(d)}catch{}}),r)for(const[c,d]of Object.entries(r))u.addEventListener(c,m=>{try{const _=m.data?JSON.parse(m.data):{};d(_)}catch{d({})}});return u.onerror=()=>{s&&s(),u.close()},{close(){u.close()}}}var Lv=k('<div class="chat-input svelte-vqyzz1"><textarea rows="1" class="svelte-vqyzz1"></textarea> <button class="send-btn svelte-vqyzz1" aria-label="Gonder"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></button></div>');function mi(e,a){ze(a,!0);let r=ke(a,"placeholder",3,"Mesaj yazin..."),s=ke(a,"disabled",3,!1),n=B("");function o(){var _;const m=t(n).trim();m&&((_=a.onsend)==null||_.call(a,m),g(n,""))}function v(m){m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),o())}var u=Lv(),c=l(u),d=i(c,2);V(m=>{ca(c,"placeholder",r()),c.disabled=s(),d.disabled=m},[()=>s()||!t(n).trim()]),be("keydown",c,v),oe(c,()=>t(n),m=>g(n,m)),be("click",d,o),f(e,u),Ee()}Re(["keydown","click"]);var Fv=k('<div><div class="qi-top svelte-1krjtqm"><span class="qi-name svelte-1krjtqm"> </span> <!></div> <div class="qi-topic svelte-1krjtqm"> </div> <div class="qi-meta svelte-1krjtqm"> </div> <!></div>'),Yv=k('<div class="queue-group svelte-1krjtqm"> </div> <!>',1),Gv=k('<div><div class="qi-top svelte-1krjtqm"><span class="qi-name svelte-1krjtqm"> </span> <!></div> <div class="qi-topic svelte-1krjtqm"> </div> <div class="qi-meta svelte-1krjtqm"> </div></div>'),Uv=k('<div class="queue-group svelte-1krjtqm"> </div> <!>',1),Vv=k('<div class="queue-empty svelte-1krjtqm">Kuyruk bos</div>'),Wv=k('<div class="empty-chat svelte-1krjtqm">Mesaj yok</div>'),Qv=k('<div class="chat-header svelte-1krjtqm"><div><strong> </strong> <span class="chat-meta svelte-1krjtqm"> </span></div> <!></div> <div class="chat-body svelte-1krjtqm"></div> <!>',1),Jv=k('<div class="no-selection svelte-1krjtqm">Bir talep secin</div>'),Zv=k('<div class="inbox-layout svelte-1krjtqm"><div class="queue-panel svelte-1krjtqm"><!> <!> <!></div> <div class="chat-panel svelte-1krjtqm"><!></div></div>'),Xv=k('<div class="page-header svelte-1krjtqm"><div><h1 class="svelte-1krjtqm">Agent Inbox</h1> <p class="svelte-1krjtqm">Insan temsilci kuyruÄu</p></div> <!></div> <!>',1);function ed(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B($e([])),o=B(null),v=B($e([])),u=null,c=ne(()=>[...t(s),...t(n)].find(M=>M.sessionId===t(o)));Be(()=>{d(),u=_i("admin/inbox/stream",{onEvent:{claimed:()=>d(),released:()=>d(),message:M=>{M.sessionId===t(o)&&m(t(o))}},onError:()=>{}})}),Us(()=>{u==null||u.close()});async function d(){try{const M=await X.get("admin/inbox");g(s,M.pending||[],!0),g(n,M.active||[],!0)}catch(M){L("Inbox yuklenemedi: "+M.message,"error")}finally{g(r,!1)}}async function m(M){try{const D=((await X.get("admin/conversations")).conversations||[]).find(j=>j.sessionId===M);g(v,(D==null?void 0:D.chatHistory)||[],!0)}catch{g(v,[],!0)}}async function _(M){g(o,M,!0),await m(M)}async function x(M){try{await X.post("admin/inbox/"+M+"/claim",{agentName:"admin"}),L("Talep alindi","success"),await d()}catch(I){L("Hata: "+I.message,"error")}}async function y(M){try{await X.post("admin/inbox/"+M+"/release",{}),L("Talep serbest birakildi","success"),g(o,null),await d()}catch(I){L("Hata: "+I.message,"error")}}async function p(M){if(t(c))try{await X.post("admin/inbox/"+t(c).id+"/message",{message:M}),await m(t(o))}catch(I){L("Mesaj gonderilemedi: "+I.message,"error")}}var $=Xv(),h=de($),b=i(l(h),2);ee(b,{onclick:d,variant:"ghost",size:"sm",children:(M,I)=>{var D=U("Yenile");f(M,D)},$$slots:{default:!0}});var E=i(h,2);{var P=M=>{He(M,{message:"Yukleniyor..."})},T=M=>{var I=Zv(),D=l(I),j=l(D);{var K=Q=>{var C=Yv(),w=de(C),Y=l(w),G=i(w,2);Se(G,17,()=>t(s),Te,(te,re)=>{var q=Fv();let le;var ie=l(q),ce=l(ie),me=l(ce),we=i(ce,2);We(we,{variant:"yellow",children:(he,fe)=>{var ye=U("bekliyor");f(he,ye)},$$slots:{default:!0}});var ue=i(ie,2),R=l(ue),ve=i(ue,2),se=l(ve),pe=i(ve,2);ee(pe,{onclick:he=>{he.stopPropagation(),x(t(re).id)},variant:"primary",size:"sm",children:(he,fe)=>{var ye=U("Talep Al");f(he,ye)},$$slots:{default:!0}}),V(he=>{le=Fe(q,1,"queue-item svelte-1krjtqm",null,le,{active:t(o)===t(re).sessionId}),A(me,t(re).customerName||"Misafir"),A(R,t(re).topic||t(re).summary||"..."),A(se,he)},[()=>es(t(re).createdAt)]),be("click",q,()=>_(t(re).sessionId)),f(te,q)}),V(()=>A(Y,`Bekleyen (${t(s).length??""})`)),f(Q,C)};ae(j,Q=>{t(s).length&&Q(K)})}var z=i(j,2);{var S=Q=>{var C=Uv(),w=de(C),Y=l(w),G=i(w,2);Se(G,17,()=>t(n),Te,(te,re)=>{var q=Gv();let le;var ie=l(q),ce=l(ie),me=l(ce),we=i(ce,2);We(we,{variant:"green",children:(pe,he)=>{var fe=U("aktif");f(pe,fe)},$$slots:{default:!0}});var ue=i(ie,2),R=l(ue),ve=i(ue,2),se=l(ve);V(pe=>{le=Fe(q,1,"queue-item svelte-1krjtqm",null,le,{active:t(o)===t(re).sessionId}),A(me,t(re).customerName||"Misafir"),A(R,t(re).topic||t(re).summary||"..."),A(se,`${(t(re).assignedTo||"admin")??""} Â· ${pe??""}`)},[()=>es(t(re).createdAt)]),be("click",q,()=>_(t(re).sessionId)),f(te,q)}),V(()=>A(Y,`Aktif (${t(n).length??""})`)),f(Q,C)};ae(z,Q=>{t(n).length&&Q(S)})}var N=i(z,2);{var Z=Q=>{var C=Vv();f(Q,C)};ae(N,Q=>{!t(s).length&&!t(n).length&&Q(Z)})}var F=i(D,2),W=l(F);{var H=Q=>{var C=Qv(),w=de(C),Y=l(w),G=l(Y),te=l(G),re=i(G,2),q=l(re),le=i(Y,2);{var ie=ue=>{ee(ue,{onclick:()=>y(t(c).id),variant:"ghost",size:"sm",children:(R,ve)=>{var se=U("Serbest Birak");f(R,se)},$$slots:{default:!0}})};ae(le,ue=>{t(c).assignedTo&&ue(ie)})}var ce=i(w,2);Se(ce,21,()=>t(v),Te,(ue,R)=>{{let ve=ne(()=>t(R).role==="user"?"user":"bot"),se=ne(()=>t(R).content||"");Es(ue,{get sender(){return t(ve)},get message(){return t(se)}})}},ue=>{var R=Wv();f(ue,R)});var me=i(ce,2);{var we=ue=>{mi(ue,{onsend:p})};ae(me,ue=>{t(c).assignedTo&&ue(we)})}V(()=>{A(te,t(c).customerName||"Misafir"),A(q,t(c).topic||"")}),f(Q,C)},J=Q=>{var C=Jv();f(Q,C)};ae(W,Q=>{t(c)?Q(H):Q(J,!1)})}f(M,I)};ae(E,M=>{t(r)?M(P):M(T,!1)})}f(e,$),Ee()}Re(["click"]);var td=k('<div class="modal-overlay svelte-13rrew4"><div class="modal-box svelte-13rrew4" role="dialog"><div class="modal-header svelte-13rrew4"><h3 class="svelte-13rrew4"> </h3> <button class="modal-close svelte-13rrew4">&times;</button></div> <div class="modal-body svelte-13rrew4"><!></div></div></div>');function Oa(e,a){ze(a,!0);let r=ke(a,"open",15,!1),s=ke(a,"title",3,""),n=ke(a,"width",3,"520px");function o(m){m.target===m.currentTarget&&r(!1)}function v(m){m.key==="Escape"&&r(!1)}var u=ls();Os("keydown",xr,function(...m){var _;(_=r()?v:void 0)==null||_.apply(this,m)});var c=de(u);{var d=m=>{var _=td(),x=l(_);let y;var p=l(x),$=l(p),h=l($),b=i($,2),E=i(p,2),P=l(E);is(P,()=>a.children),V(()=>{ca(x,"aria-label",s()),y=Za(x,"",y,{width:n()}),A(h,s())}),be("click",_,o),be("click",b,()=>r(!1)),f(m,_)};ae(c,m=>{r()&&m(d)})}f(e,u),Ee()}Re(["click"]);var ad=k('<div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="svelte-1ara9wo"> </p> <input type="file" hidden=""/></div>');function sd(e,a){ze(a,!0);let r=ke(a,"accept",3,""),s=ke(a,"multiple",3,!1),n=ke(a,"label",3,"Dosya sec veya surukle"),o=B(!1),v;function u(p){var h;p.preventDefault(),g(o,!1);const $=Array.from(p.dataTransfer.files);$.length&&((h=a.onfiles)==null||h.call(a,s()?$:[$[0]]))}function c(p){var h;const $=Array.from(p.target.files);$.length&&((h=a.onfiles)==null||h.call(a,s()?$:[$[0]])),p.target.value=""}var d=ad();let m;var _=i(l(d),2),x=l(_),y=i(_,2);Lr(y,p=>v=p,()=>v),V(()=>{m=Fe(d,1,"file-upload svelte-1ara9wo",null,m,{dragging:t(o)}),A(x,n()),ca(y,"accept",r()),y.multiple=s()}),Os("dragover",d,p=>{p.preventDefault(),g(o,!0)}),Os("dragleave",d,()=>g(o,!1)),Os("drop",d,u),be("click",d,()=>v==null?void 0:v.click()),be("change",y,c),f(e,d),Ee()}Re(["click","change"]);var rd=k('<tr class="svelte-1mtjxiy"><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"> </td><td class="actions svelte-1mtjxiy"><!> <!></td></tr>'),ld=k('<tr class="svelte-1mtjxiy"><td colspan="4" class="empty-row svelte-1mtjxiy">Bilgi tabani bos</td></tr>'),id=k('<div class="card svelte-1mtjxiy"><table class="svelte-1mtjxiy"><thead><tr><th class="svelte-1mtjxiy">Soru</th><th class="svelte-1mtjxiy">Cevap</th><th class="svelte-1mtjxiy">Tarih</th><th class="svelte-1mtjxiy"></th></tr></thead><tbody></tbody></table></div>'),nd=k('<div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Soru <input class="input svelte-1mtjxiy" placeholder="Soru..."/></label></div> <div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Cevap <textarea class="textarea svelte-1mtjxiy" rows="4" placeholder="Cevap..."></textarea></label></div> <div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">URL Import <div class="url-row svelte-1mtjxiy"><input class="input svelte-1mtjxiy" placeholder="https://..."/> <!></div></label></div> <div class="modal-actions svelte-1mtjxiy"><!> <!></div>',1),od=k('<div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Soru <input class="input svelte-1mtjxiy" placeholder="Soru..."/></label></div> <div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Cevap <textarea class="textarea svelte-1mtjxiy" rows="4" placeholder="Cevap..."></textarea></label></div> <div class="modal-actions svelte-1mtjxiy"><!> <!></div>',1),vd=k('<div class="page-header svelte-1mtjxiy"><div><h1 class="svelte-1mtjxiy">Bilgi Tabani</h1> <p class="svelte-1mtjxiy"> </p></div> <div class="header-actions svelte-1mtjxiy"><!> <!> <!></div></div> <!> <!> <!> <!>',1);function dd(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(!1),o=B(!1),v=B(!1),u=B(null),c=B(""),d=B(""),m=B(""),_=B(""),x=B("");Be(()=>y());async function y(){var w;g(r,!0);try{const Y=await X.get("admin/knowledge"),G=((w=Y.payload)==null?void 0:w.records)||Y.items||Y.knowledge||Y||[];g(s,Array.isArray(G)?G:[],!0)}catch(Y){L("Bilgi tabani yuklenemedi: "+Y.message,"error")}finally{g(r,!1)}}async function p(){if(!(!t(m).trim()||!t(_).trim()))try{await X.post("admin/knowledge",{question:t(m).trim(),answer:t(_).trim()}),L("Eklendi","success"),g(m,""),g(_,""),g(n,!1),await y()}catch(w){L("Hata: "+w.message,"error")}}function $(w){g(u,w.id||w._id,!0),g(c,w.question||w.title||"",!0),g(d,w.answer||w.content||"",!0),g(v,!0)}async function h(){if(!(!t(c).trim()||!t(d).trim()))try{await X.put("admin/knowledge/"+t(u),{question:t(c).trim(),answer:t(d).trim()}),L("Guncellendi","success"),g(v,!1),g(u,null),g(c,""),g(d,""),await y()}catch(w){L("Hata: "+w.message,"error")}}async function b(w){if(await Xa({title:"Sil",message:"Bu kayit silinecek. Emin misiniz?",confirmText:"Sil",danger:!0}))try{await X.delete("admin/knowledge/"+w),L("Silindi","success"),await y()}catch(G){L("Hata: "+G.message,"error")}}async function E(w){const Y=new FormData;for(const G of w)Y.append("files",G);try{await X.uploadForm("admin/knowledge/upload-batch",Y),L(w.length+" dosya yuklendi","success"),g(o,!1),await y()}catch(G){L("Yukleme hatasi: "+G.message,"error")}}async function P(){if(t(x).trim())try{await X.post("admin/knowledge/import-url",{url:t(x).trim()}),L("URL import edildi","success"),g(x,""),await y()}catch(w){L("Import hatasi: "+w.message,"error")}}async function T(){try{await X.post("admin/knowledge/reingest",{}),L("Reingest basladi","success")}catch(w){L("Hata: "+w.message,"error")}}var M=vd(),I=de(M),D=l(I),j=i(l(D),2),K=l(j),z=i(D,2),S=l(z);ee(S,{onclick:T,variant:"ghost",size:"sm",children:(w,Y)=>{var G=U("Reingest");f(w,G)},$$slots:{default:!0}});var N=i(S,2);ee(N,{onclick:()=>g(o,!0),variant:"secondary",size:"sm",children:(w,Y)=>{var G=U("Dosya Yukle");f(w,G)},$$slots:{default:!0}});var Z=i(N,2);ee(Z,{onclick:()=>g(n,!0),variant:"primary",size:"sm",children:(w,Y)=>{var G=U("+ Ekle");f(w,G)},$$slots:{default:!0}});var F=i(I,2);{var W=w=>{He(w,{message:"Yukleniyor..."})},H=w=>{var Y=id(),G=l(Y),te=i(l(G));Se(te,21,()=>t(s),Te,(re,q)=>{var le=rd(),ie=l(le),ce=l(ie),me=i(ie),we=l(me),ue=i(me),R=l(ue),ve=i(ue),se=l(ve);ee(se,{onclick:()=>$(t(q)),variant:"ghost",size:"sm",children:(he,fe)=>{var ye=U("Duzenle");f(he,ye)},$$slots:{default:!0}});var pe=i(se,2);ee(pe,{onclick:()=>b(t(q).id||t(q)._id),variant:"ghost",size:"sm",children:(he,fe)=>{var ye=U("Sil");f(he,ye)},$$slots:{default:!0}}),V((he,fe,ye)=>{A(ce,he),A(we,fe),A(R,ye)},[()=>bs(t(q).question||t(q).title||"",60),()=>bs(t(q).answer||t(q).content||"",80),()=>oa(t(q).createdAt)]),f(re,le)},re=>{var q=ld();f(re,q)}),f(w,Y)};ae(F,w=>{t(r)?w(W):w(H,!1)})}var J=i(F,2);Oa(J,{title:"Yeni Kayit",get open(){return t(n)},set open(w){g(n,w,!0)},children:(w,Y)=>{var G=nd(),te=de(G),re=l(te),q=i(l(re)),le=i(te,2),ie=l(le),ce=i(l(ie)),me=i(le,2),we=l(me),ue=i(l(we)),R=l(ue),ve=i(R,2);ee(ve,{onclick:P,variant:"secondary",size:"sm",children:(fe,ye)=>{var xe=U("Import");f(fe,xe)},$$slots:{default:!0}});var se=i(me,2),pe=l(se);ee(pe,{onclick:()=>g(n,!1),variant:"secondary",children:(fe,ye)=>{var xe=U("Iptal");f(fe,xe)},$$slots:{default:!0}});var he=i(pe,2);ee(he,{onclick:p,variant:"primary",children:(fe,ye)=>{var xe=U("Kaydet");f(fe,xe)},$$slots:{default:!0}}),oe(q,()=>t(m),fe=>g(m,fe)),oe(ce,()=>t(_),fe=>g(_,fe)),oe(R,()=>t(x),fe=>g(x,fe)),f(w,G)},$$slots:{default:!0}});var Q=i(J,2);Oa(Q,{title:"Kayit Duzenle",get open(){return t(v)},set open(w){g(v,w,!0)},children:(w,Y)=>{var G=od(),te=de(G),re=l(te),q=i(l(re)),le=i(te,2),ie=l(le),ce=i(l(ie)),me=i(le,2),we=l(me);ee(we,{onclick:()=>g(v,!1),variant:"secondary",children:(R,ve)=>{var se=U("Iptal");f(R,se)},$$slots:{default:!0}});var ue=i(we,2);ee(ue,{onclick:h,variant:"primary",children:(R,ve)=>{var se=U("Kaydet");f(R,se)},$$slots:{default:!0}}),oe(q,()=>t(c),R=>g(c,R)),oe(ce,()=>t(d),R=>g(d,R)),f(w,G)},$$slots:{default:!0}});var C=i(Q,2);Oa(C,{title:"Dosya Yukle",get open(){return t(o)},set open(w){g(o,w,!0)},children:(w,Y)=>{sd(w,{accept:".pdf,.docx,.xlsx,.csv,.txt",multiple:!0,onfiles:E,label:"PDF, DOCX, XLSX, CSV veya TXT dosya yukleyin"})},$$slots:{default:!0}}),V(()=>A(K,`${t(s).length??""} kayit`)),f(e,M),Ee()}var cd=k('<button class="tag-remove svelte-1y0aujn">&times;</button>'),ud=k('<span class="tag svelte-1y0aujn"><!> <!></span>');function ul(e,a){let r=ke(a,"removable",3,!1);var s=ud(),n=l(s);is(n,()=>a.children);var o=i(n,2);{var v=u=>{var c=cd();be("click",c,function(...d){var m;(m=a.onremove)==null||m.apply(this,d)}),f(u,c)};ae(o,u=>{r()&&u(v)})}f(e,s)}Re(["click"]);var fd=k('<span role="switch" tabindex="0"></span>');function rt(e,a){ze(a,!0);let r=ke(a,"checked",15),s=ke(a,"disabled",3,!1),n=ne(()=>!!r());function o(){var c;s()||(r(!t(n)),(c=a.onchange)==null||c.call(a,r()))}var v=fd();let u;V(()=>{u=Fe(v,1,"toggle svelte-eylgc7",null,u,{on:t(n),disabled:s()}),ca(v,"aria-checked",t(n))}),be("click",v,o),be("keydown",v,c=>{(c.key===" "||c.key==="Enter")&&(c.preventDefault(),o())}),f(e,v),Ee()}Re(["click","keydown"]);var hd=k('<p class="topic-desc svelte-177izw7"> </p>'),pd=k('<p class="topic-info svelte-177izw7"> </p>'),_d=k('<span class="more svelte-177izw7"> </span>'),md=k('<div class="topic-tags svelte-177izw7"><!> <!></div>'),gd=k('<div class="topic-card svelte-177izw7"><div class="topic-header svelte-177izw7"><h3 class="svelte-177izw7"> </h3> <!></div> <!> <div class="topic-meta svelte-177izw7"><!> <!></div> <!> <!> <div class="topic-actions svelte-177izw7"><!> <!></div></div>'),yd=k('<div class="empty-state svelte-177izw7">Henuz konu yok</div>'),bd=k('<div class="topics-grid svelte-177izw7"></div>'),wd=k('<div class="form-group svelte-177izw7"><label class="svelte-177izw7">Baslik <input class="input svelte-177izw7" placeholder="Konu basligi"/></label></div> <div class="form-group svelte-177izw7"><label class="svelte-177izw7">Aciklama <textarea class="textarea svelte-177izw7" rows="3" placeholder="Konu aciklamasi..."></textarea></label></div> <div class="form-group svelte-177izw7"><label class="svelte-177izw7">Anahtar Kelimeler <div class="kw-input-row svelte-177izw7"><input class="input svelte-177izw7" placeholder="Kelime ekle..."/> <!> <!></div></label> <div class="kw-tags svelte-177izw7"></div></div> <div class="form-group svelte-177izw7"><label class="svelte-177izw7">Gerekli Bilgiler (virgul ile ayirin) <input class="input svelte-177izw7" placeholder="ad soyad, telefon, siparis no..."/></label></div> <div class="form-row svelte-177izw7"><label class="svelte-177izw7">Eskalasyon Gerektirir <!></label></div> <div class="form-row svelte-177izw7"><label class="svelte-177izw7">Dogrudan Cozulebilir <!></label></div> <div class="modal-actions svelte-177izw7"><!> <!></div>',1),kd=k(`<div class="page-header svelte-177izw7"><div><h1 class="svelte-177izw7">Konular <!></h1> <p class="svelte-177izw7">Bot'un bilgi konulari</p></div> <!></div> <!> <!>`,1);function xd(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(!1),o=B($e({title:"",description:"",keywords:[],enabled:!0,requiresEscalation:!1,canResolveDirectly:!0,requiredInfo:[]})),v=B(null),u=B(""),c=B("");Be(()=>d());async function d(){g(r,!0);try{const S=await X.get("admin/agent/topics");g(s,S.topics||S||[],!0)}catch(S){L("Konular yuklenemedi: "+S.message,"error")}finally{g(r,!1)}}function m(){g(v,null),g(o,{title:"",description:"",keywords:[],enabled:!0,requiresEscalation:!1,canResolveDirectly:!0,requiredInfo:[]},!0),g(c,""),g(n,!0)}function _(S){g(v,S.id||S._id,!0),g(o,{title:S.title,description:S.description||"",keywords:[...S.keywords||[]],enabled:S.enabled!==!1,requiresEscalation:S.requiresEscalation||!1,canResolveDirectly:S.canResolveDirectly!==!1,requiredInfo:[...S.requiredInfo||[]]},!0),g(c,(S.requiredInfo||[]).join(", "),!0),g(n,!0)}async function x(){if(t(o).title.trim()){t(o).requiredInfo=t(c).split(",").map(S=>S.trim()).filter(Boolean);try{t(v)?(await X.put("admin/agent/topics/"+t(v),t(o)),L("Guncellendi","success")):(await X.post("admin/agent/topics",t(o)),L("Olusturuldu","success")),g(n,!1),await d()}catch(S){L("Hata: "+S.message,"error")}}}async function y(S){if(await Xa({title:"Konuyu Sil",message:"Bu konu silinecek. Emin misiniz?",confirmText:"Sil",danger:!0}))try{await X.delete("admin/agent/topics/"+S),L("Silindi","success"),await d()}catch(Z){L("Hata: "+Z.message,"error")}}function p(){const S=t(u).trim();S&&!t(o).keywords.includes(S)&&(t(o).keywords=[...t(o).keywords,S]),g(u,"")}function $(S){t(o).keywords=t(o).keywords.filter(N=>N!==S)}async function h(){if(t(o).title.trim())try{const N=(await X.post("admin/topics/suggest-keywords",{title:t(o).title})).keywords||[],Z=[...new Set([...t(o).keywords,...N])];t(o).keywords=Z,L(N.length+" keyword onerildi","info")}catch(S){L("Oneri hatasi: "+S.message,"error")}}var b=kd(),E=de(b),P=l(E),T=l(P),M=i(l(T));We(M,{variant:"blue",children:(S,N)=>{var Z=U();V(()=>A(Z,t(s).length)),f(S,Z)},$$slots:{default:!0}});var I=i(P,2);ee(I,{onclick:m,variant:"primary",size:"sm",children:(S,N)=>{var Z=U("+ Yeni Konu");f(S,Z)},$$slots:{default:!0}});var D=i(E,2);{var j=S=>{He(S,{message:"Yukleniyor..."})},K=S=>{var N=bd();Se(N,21,()=>t(s),Te,(Z,F)=>{var W=gd(),H=l(W),J=l(H),Q=l(J),C=i(J,2);{let se=ne(()=>t(F).enabled!==!1?"green":"gray");We(C,{get variant(){return t(se)},children:(pe,he)=>{var fe=U();V(()=>A(fe,t(F).enabled!==!1?"aktif":"pasif")),f(pe,fe)},$$slots:{default:!0}})}var w=i(H,2);{var Y=se=>{var pe=hd(),he=l(pe);V(()=>A(he,t(F).description)),f(se,pe)};ae(w,se=>{t(F).description&&se(Y)})}var G=i(w,2),te=l(G);{var re=se=>{We(se,{variant:"orange",children:(pe,he)=>{var fe=U("Eskalasyon");f(pe,fe)},$$slots:{default:!0}})};ae(te,se=>{t(F).requiresEscalation&&se(re)})}var q=i(te,2);{var le=se=>{We(se,{variant:"blue",children:(pe,he)=>{var fe=U("Dogrudan cozum");f(pe,fe)},$$slots:{default:!0}})};ae(q,se=>{t(F).canResolveDirectly!==!1&&se(le)})}var ie=i(G,2);{var ce=se=>{var pe=pd(),he=l(pe);V(fe=>A(he,`Gerekli: ${fe??""}`),[()=>t(F).requiredInfo.join(", ")]),f(se,pe)};ae(ie,se=>{var pe;(pe=t(F).requiredInfo)!=null&&pe.length&&se(ce)})}var me=i(ie,2);{var we=se=>{var pe=md(),he=l(pe);Se(he,17,()=>t(F).keywords.slice(0,5),Te,(xe,_e)=>{ul(xe,{children:(De,Oe)=>{var Pe=U();V(()=>A(Pe,t(_e))),f(De,Pe)},$$slots:{default:!0}})});var fe=i(he,2);{var ye=xe=>{var _e=_d(),De=l(_e);V(()=>A(De,`+${t(F).keywords.length-5}`)),f(xe,_e)};ae(fe,xe=>{t(F).keywords.length>5&&xe(ye)})}f(se,pe)};ae(me,se=>{var pe;(pe=t(F).keywords)!=null&&pe.length&&se(we)})}var ue=i(me,2),R=l(ue);ee(R,{onclick:()=>_(t(F)),variant:"ghost",size:"sm",children:(se,pe)=>{var he=U("Duzenle");f(se,he)},$$slots:{default:!0}});var ve=i(R,2);ee(ve,{onclick:()=>y(t(F).id||t(F)._id),variant:"ghost",size:"sm",children:(se,pe)=>{var he=U("Sil");f(se,he)},$$slots:{default:!0}}),V(()=>A(Q,t(F).title)),f(Z,W)},Z=>{var F=yd();f(Z,F)}),f(S,N)};ae(D,S=>{t(r)?S(j):S(K,!1)})}var z=i(D,2);{let S=ne(()=>t(v)?"Konu Duzenle":"Yeni Konu");Oa(z,{get title(){return t(S)},get open(){return t(n)},set open(N){g(n,N,!0)},children:(N,Z)=>{var F=wd(),W=de(F),H=l(W),J=i(l(H)),Q=i(W,2),C=l(Q),w=i(l(C)),Y=i(Q,2),G=l(Y),te=i(l(G)),re=l(te),q=i(re,2);ee(q,{onclick:p,variant:"secondary",size:"sm",children:(_e,De)=>{var Oe=U("Ekle");f(_e,Oe)},$$slots:{default:!0}});var le=i(q,2);ee(le,{onclick:h,variant:"ghost",size:"sm",children:(_e,De)=>{var Oe=U("AI Oner");f(_e,Oe)},$$slots:{default:!0}});var ie=i(G,2);Se(ie,21,()=>t(o).keywords,Te,(_e,De)=>{ul(_e,{removable:!0,onremove:()=>$(t(De)),children:(Oe,Pe)=>{var je=U();V(()=>A(je,t(De))),f(Oe,je)},$$slots:{default:!0}})});var ce=i(Y,2),me=l(ce),we=i(l(me)),ue=i(ce,2),R=l(ue),ve=i(l(R));rt(ve,{get checked(){return t(o).requiresEscalation},set checked(_e){t(o).requiresEscalation=_e}});var se=i(ue,2),pe=l(se),he=i(l(pe));rt(he,{get checked(){return t(o).canResolveDirectly},set checked(_e){t(o).canResolveDirectly=_e}});var fe=i(se,2),ye=l(fe);ee(ye,{onclick:()=>g(n,!1),variant:"secondary",children:(_e,De)=>{var Oe=U("Iptal");f(_e,Oe)},$$slots:{default:!0}});var xe=i(ye,2);ee(xe,{onclick:x,variant:"primary",children:(_e,De)=>{var Oe=U("Kaydet");f(_e,Oe)},$$slots:{default:!0}}),oe(J,()=>t(o).title,_e=>t(o).title=_e),oe(w,()=>t(o).description,_e=>t(o).description=_e),be("keydown",re,_e=>{_e.key==="Enter"&&(_e.preventDefault(),p())}),oe(re,()=>t(u),_e=>g(u,_e)),oe(we,()=>t(c),_e=>g(c,_e)),f(N,F)},$$slots:{default:!0}})}f(e,b),Ee()}Re(["keydown"]);var $d=k('<span class="expand-icon svelte-1bxmv6d"><!></span>'),qd=k('<div class="expand-body svelte-1bxmv6d"><!></div>'),zd=k('<div><div class="expand-header svelte-1bxmv6d"><h3 class="svelte-1bxmv6d"><!> </h3> <svg class="expand-chevron svelte-1bxmv6d" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></div> <!></div>');function Xt(e,a){ze(a,!0);let r=ke(a,"title",3,""),s=ke(a,"open",15,!1),n=ke(a,"icon",3,"");var o=zd();let v;var u=l(o),c=l(u),d=l(c);{var m=p=>{var $=$d(),h=l($);oi(h,n),f(p,$)};ae(d,p=>{n()&&p(m)})}var _=i(d),x=i(u,2);{var y=p=>{var $=qd(),h=l($);is(h,()=>a.children),f(p,$)};ae(x,p=>{s()&&p(y)})}V(()=>{v=Fe(o,1,"expand-card svelte-1bxmv6d",null,v,{open:s()}),A(_,` ${r()??""}`)}),be("click",u,()=>s(!s())),f(e,o),Ee()}Re(["click"]);var Ed=k('<textarea class="mono-editor svelte-1hhzm9b" rows="12"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),Sd=k('<textarea class="mono-editor svelte-1hhzm9b" rows="12"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),Ad=k('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),Pd=k('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),Td=k('<textarea class="mono-editor svelte-1hhzm9b" rows="8"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),Cd=k('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),Md=k('<div class="flow-grid svelte-1hhzm9b"><div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Karsilama Mesaji <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Mesai Disi Mesaji <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Otomatik Kapanis (dk) <input class="input svelte-1hhzm9b" type="number"/></label></div> <div class="form-row svelte-1hhzm9b"><label class="svelte-1hhzm9b">Karsilama Aktif <!></label></div></div> <div class="card-actions svelte-1hhzm9b"><!></div>',1),Id=k('<div class="flow-grid svelte-1hhzm9b"><div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Bot Adi <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Sirket Adi <input class="input svelte-1hhzm9b"/></label></div></div>'),jd=k("<!> <!> <!> <!> <!> <!> <!> <!>",1),Dd=k('<div class="page-header svelte-1hhzm9b"><div><h1 class="svelte-1hhzm9b">Bot Ayarlari</h1> <p class="svelte-1hhzm9b">Bot davranisi ve yapilandirmasi</p></div> <!></div> <!>',1);function Od(e,a){ze(a,!0);let r=B(!0),s=B(""),n=B(""),o=B(""),v=B(""),u=B(""),c=B(""),d=B($e({})),m=B($e({}));Be(async()=>{try{const[T,M,I,D,j,K,z,S]=await Promise.all([X.get("admin/agent/files/soul.md").catch(()=>({content:""})),X.get("admin/agent/files/persona.md").catch(()=>({content:""})),X.get("admin/agent/files/domain.md").catch(()=>({content:""})),X.get("admin/agent/files/skills.md").catch(()=>({content:""})),X.get("admin/agent/files/hard-bans.md").catch(()=>({content:""})),X.get("admin/agent/files/escalation-matrix.md").catch(()=>({content:""})),X.get("admin/chat-flow").catch(()=>({})),X.get("admin/site-config").catch(()=>({}))]);g(s,T.content||"",!0),g(n,M.content||"",!0),g(o,I.content||"",!0),g(v,D.content||"",!0),g(u,j.content||"",!0),g(c,K.content||"",!0),g(d,z.config||z||{},!0),g(m,S.config||S||{},!0)}catch(T){L("Bot ayarlari yuklenemedi: "+T.message,"error")}finally{g(r,!1)}});async function _(T,M){try{await X.put("admin/agent/files/"+T,{content:M}),L(T+" kaydedildi","success")}catch(I){L("Hata: "+I.message,"error")}}async function x(){try{await X.put("admin/chat-flow",{config:t(d)}),L("Sohbet akisi kaydedildi","success")}catch(T){L("Hata: "+T.message,"error")}}async function y(){try{await X.post("admin/agent/reload",{}),L("Agent dosyalari yeniden yuklendi","success")}catch(T){L("Hata: "+T.message,"error")}}var p=Dd(),$=de(p),h=i(l($),2);ee(h,{onclick:y,variant:"secondary",size:"sm",children:(T,M)=>{var I=U("Agent'i Yenile");f(T,I)},$$slots:{default:!0}});var b=i($,2);{var E=T=>{He(T,{message:"Yukleniyor..."})},P=T=>{var M=jd(),I=de(M);Xt(I,{title:"Kimlik (soul.md)",children:(F,W)=>{var H=Ed(),J=de(H),Q=i(J,2),C=l(Q);ee(C,{onclick:()=>_("soul.md",t(s)),variant:"primary",size:"sm",children:(w,Y)=>{var G=U("Kaydet");f(w,G)},$$slots:{default:!0}}),oe(J,()=>t(s),w=>g(s,w)),f(F,H)},$$slots:{default:!0}});var D=i(I,2);Xt(D,{title:"Persona (persona.md)",children:(F,W)=>{var H=Sd(),J=de(H),Q=i(J,2),C=l(Q);ee(C,{onclick:()=>_("persona.md",t(n)),variant:"primary",size:"sm",children:(w,Y)=>{var G=U("Kaydet");f(w,G)},$$slots:{default:!0}}),oe(J,()=>t(n),w=>g(n,w)),f(F,H)},$$slots:{default:!0}});var j=i(D,2);Xt(j,{title:"Domain (domain.md)",children:(F,W)=>{var H=Ad(),J=de(H),Q=i(J,2),C=l(Q);ee(C,{onclick:()=>_("domain.md",t(o)),variant:"primary",size:"sm",children:(w,Y)=>{var G=U("Kaydet");f(w,G)},$$slots:{default:!0}}),oe(J,()=>t(o),w=>g(o,w)),f(F,H)},$$slots:{default:!0}});var K=i(j,2);Xt(K,{title:"Beceriler (skills.md)",children:(F,W)=>{var H=Pd(),J=de(H),Q=i(J,2),C=l(Q);ee(C,{onclick:()=>_("skills.md",t(v)),variant:"primary",size:"sm",children:(w,Y)=>{var G=U("Kaydet");f(w,G)},$$slots:{default:!0}}),oe(J,()=>t(v),w=>g(v,w)),f(F,H)},$$slots:{default:!0}});var z=i(K,2);Xt(z,{title:"Yasaklar (hard-bans.md)",children:(F,W)=>{var H=Td(),J=de(H),Q=i(J,2),C=l(Q);ee(C,{onclick:()=>_("hard-bans.md",t(u)),variant:"primary",size:"sm",children:(w,Y)=>{var G=U("Kaydet");f(w,G)},$$slots:{default:!0}}),oe(J,()=>t(u),w=>g(u,w)),f(F,H)},$$slots:{default:!0}});var S=i(z,2);Xt(S,{title:"Eskalasyon Matrisi",children:(F,W)=>{var H=Cd(),J=de(H),Q=i(J,2),C=l(Q);ee(C,{onclick:()=>_("escalation-matrix.md",t(c)),variant:"primary",size:"sm",children:(w,Y)=>{var G=U("Kaydet");f(w,G)},$$slots:{default:!0}}),oe(J,()=>t(c),w=>g(c,w)),f(F,H)},$$slots:{default:!0}});var N=i(S,2);Xt(N,{title:"Sohbet Akisi",children:(F,W)=>{var H=Md(),J=de(H),Q=l(J),C=l(Q),w=i(l(C)),Y=i(Q,2),G=l(Y),te=i(l(G)),re=i(Y,2),q=l(re),le=i(l(q)),ie=i(re,2),ce=l(ie),me=i(l(ce));rt(me,{get checked(){return t(d).greetingEnabled},set checked(R){t(d).greetingEnabled=R}});var we=i(J,2),ue=l(we);ee(ue,{onclick:x,variant:"primary",size:"sm",children:(R,ve)=>{var se=U("Kaydet");f(R,se)},$$slots:{default:!0}}),oe(w,()=>t(d).greetingMessage,R=>t(d).greetingMessage=R),oe(te,()=>t(d).offHoursMessage,R=>t(d).offHoursMessage=R),oe(le,()=>t(d).autoCloseMinutes,R=>t(d).autoCloseMinutes=R),f(F,H)},$$slots:{default:!0}});var Z=i(N,2);Xt(Z,{title:"Genel Ayarlar",children:(F,W)=>{var H=Id(),J=l(H),Q=l(J),C=i(l(Q)),w=i(J,2),Y=l(w),G=i(l(Y));oe(C,()=>t(m).botName,te=>t(m).botName=te),oe(G,()=>t(m).companyName,te=>t(m).companyName=te),f(F,H)},$$slots:{default:!0}}),f(T,M)};ae(b,T=>{t(r)?T(E):T(P,!1)})}f(e,p),Ee()}var Bd=k('<div class="empty-chat svelte-cy08up">Henuz mesaj yok</div>'),Kd=k('<div class="chat-thread svelte-cy08up"></div>');function Nd(e,a){ze(a,!0);let r=ke(a,"messages",19,()=>[]),s;function n(){s&&(s.scrollTop=s.scrollHeight)}Be(n),ms(()=>{r().length,setTimeout(n,50)});var o=Kd();Se(o,21,r,Te,(v,u)=>{{let c=ne(()=>t(u).sender||t(u).role),d=ne(()=>t(u).text||t(u).content||t(u).message),m=ne(()=>t(u).timestamp||"");Es(v,{get sender(){return t(c)},get message(){return t(d)},get timestamp(){return t(m)}})}},v=>{var u=Bd();f(v,u)}),Lr(o,v=>s=v,()=>s),f(e,o),Ee()}var Rd=k('<div class="test-card svelte-3882be"><div class="test-header svelte-3882be"><span class="test-label svelte-3882be"> </span> <div class="test-actions svelte-3882be"><!> <!></div></div> <!> <!></div>'),Hd=k('<div class="page-header svelte-3882be"><div><h1 class="svelte-3882be">Bot Test</h1> <p class="svelte-3882be">Canli bot testi â multi-session</p></div> <!></div> <div></div>',1);function Ld(e){let a=B($e([{id:1,messages:[],sessionId:crypto.randomUUID()}])),r=2,s=$e({});function n(){t(a).length>=4||g(a,[...t(a),{id:r++,messages:[],sessionId:crypto.randomUUID()}],!0)}function o(y){g(a,t(a).filter(p=>p.id!==y),!0)}async function v(y,p){if(s[y.id])return;s[y.id]=!0,y.messages=[...y.messages,{role:"user",content:p,sender:"user"}];const $=y.messages.map(h=>({role:h.sender==="user"?"user":"assistant",content:h.text||h.content}));try{const b=await(await fetch("../api/chat",{method:"POST",headers:{"Content-Type":"application/json","Bypass-Tunnel-Reminder":"true"},body:JSON.stringify({messages:$,sessionId:y.sessionId})})).json();y.messages=[...y.messages,{role:"assistant",content:b.reply||b.message||"...",sender:"bot"}]}catch{y.messages=[...y.messages,{role:"assistant",content:"Hata olustu",sender:"system"}]}finally{s[y.id]=!1}}function u(y){y.messages=[],y.sessionId=crypto.randomUUID()}var c=Hd(),d=de(c),m=i(l(d),2);{let y=ne(()=>t(a).length>=4);ee(m,{onclick:n,variant:"primary",size:"sm",get disabled(){return t(y)},children:(p,$)=>{var h=U("+ Oturum Ekle");f(p,h)},$$slots:{default:!0}})}var _=i(d,2);let x;Se(_,21,()=>t(a),y=>y.id,(y,p)=>{var $=Rd(),h=l($),b=l(h),E=l(b),P=i(b,2),T=l(P);ee(T,{onclick:()=>u(t(p)),variant:"ghost",size:"sm",children:(K,z)=>{var S=U("Temizle");f(K,S)},$$slots:{default:!0}});var M=i(T,2);{var I=K=>{ee(K,{onclick:()=>o(t(p).id),variant:"ghost",size:"sm",children:(z,S)=>{var N=U("Kapat");f(z,N)},$$slots:{default:!0}})};ae(M,K=>{t(a).length>1&&K(I)})}var D=i(h,2);Nd(D,{get messages(){return t(p).messages}});var j=i(D,2);mi(j,{onsend:K=>v(t(p),K),get disabled(){return s[t(p).id]}}),V(()=>A(E,`Oturum #${t(p).id??""}`)),f(y,$)}),V(()=>x=Fe(_,1,"test-grid svelte-3882be",null,x,{single:t(a).length===1,double:t(a).length===2})),f(e,c)}var Fd=k('<div class="flow-sections svelte-16lqas5"><div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Karsilama</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Aktif <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Mesaji <textarea class="textarea svelte-16lqas5" rows="3"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Gecikmesi (ms) <input class="input svelte-16lqas5" type="number"/></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Zamanlama</h2> <div class="form-grid svelte-16lqas5"><div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Mesai Disi Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Otomatik Kapanis (dk) <input class="input svelte-16lqas5" type="number"/></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Inaktiflik Uyarisi (dk) <input class="input svelte-16lqas5" type="number"/></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Mesaj Biriktirme Penceresi (ms) <input class="input svelte-16lqas5" type="number"/></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Bot Yanit Gecikmesi (ms) <input class="input svelte-16lqas5" type="number"/></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Yazma Gostergesi <!></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Algilama</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Konu Algilama Aktif <!></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Duygu Analizi <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Maks Klarifikasyon <input class="input svelte-16lqas5" type="number"/></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Gibberish Algilama <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Gibberish Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Kapanis</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Kapanis Akisi Aktif <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Kapanis Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Baska Bir Sey Var Mi? Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Veda Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">CSAT Anketi <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">CSAT Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Nudge</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Nudge Aktif <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">%75 Nudge Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">%90 Nudge Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Inaktiflik Kapanis Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div></div></div></div>'),Yd=k('<div class="page-header svelte-16lqas5"><div><h1 class="svelte-16lqas5">Sohbet Akisi</h1> <p class="svelte-16lqas5">Karsilama, zamanlama, algilama, kapanis ayarlari</p></div> <!></div> <!>',1);function Gd(e,a){ze(a,!0);let r=B(!0),s=B($e({}));Be(async()=>{try{const _=await X.get("admin/chat-flow");g(s,_.config||_||{},!0)}catch(_){L("Sohbet akisi yuklenemedi: "+_.message,"error")}finally{g(r,!1)}});async function n(){try{await X.put("admin/chat-flow",{config:t(s)}),L("Kaydedildi","success")}catch(_){L("Hata: "+_.message,"error")}}var o=Yd(),v=de(o),u=i(l(v),2);ee(u,{onclick:n,variant:"primary",size:"sm",children:(_,x)=>{var y=U("Kaydet");f(_,y)},$$slots:{default:!0}});var c=i(v,2);{var d=_=>{He(_,{message:"Yukleniyor..."})},m=_=>{var x=Fd(),y=l(x),p=i(l(y),2),$=l(p),h=l($),b=i(l(h));rt(b,{get checked(){return t(s).greetingEnabled},set checked(ge){t(s).greetingEnabled=ge}});var E=i($,2),P=l(E),T=i(l(P)),M=i(E,2),I=l(M),D=i(l(I)),j=i(y,2),K=i(l(j),2),z=l(K),S=l(z),N=i(l(S)),Z=i(z,2),F=l(Z),W=i(l(F)),H=i(Z,2),J=l(H),Q=i(l(J)),C=i(H,2),w=l(C),Y=i(l(w)),G=i(C,2),te=l(G),re=i(l(te)),q=i(G,2),le=l(q),ie=i(l(le));rt(ie,{get checked(){return t(s).typingIndicatorEnabled},set checked(ge){t(s).typingIndicatorEnabled=ge}});var ce=i(j,2),me=i(l(ce),2),we=l(me),ue=l(we),R=i(l(ue));rt(R,{get checked(){return t(s).topicDetectionEnabled},set checked(ge){t(s).topicDetectionEnabled=ge}});var ve=i(we,2),se=l(ve),pe=i(l(se));rt(pe,{get checked(){return t(s).sentimentEnabled},set checked(ge){t(s).sentimentEnabled=ge}});var he=i(ve,2),fe=l(he),ye=i(l(fe)),xe=i(he,2),_e=l(xe),De=i(l(_e));rt(De,{get checked(){return t(s).gibberishDetectionEnabled},set checked(ge){t(s).gibberishDetectionEnabled=ge}});var Oe=i(xe,2),Pe=l(Oe),je=i(l(Pe)),Ke=i(ce,2),Ge=i(l(Ke),2),Ue=l(Ge),pt=l(Ue),lt=i(l(pt));rt(lt,{get checked(){return t(s).closingFlowEnabled},set checked(ge){t(s).closingFlowEnabled=ge}});var Ve=i(Ue,2),$t=l(Ve),Qt=i(l($t)),Nt=i(Ve,2),Ta=l(Nt),ns=i(l(Ta)),ua=i(Nt,2),Ct=l(ua),Rt=i(l(Ct)),fa=i(ua,2),Ca=l(fa),Ht=i(l(Ca));rt(Ht,{get checked(){return t(s).csatEnabled},set checked(ge){t(s).csatEnabled=ge}});var Vs=i(fa,2),Ws=l(Vs),Ss=i(l(Ws)),Qs=i(Ke,2),Js=i(l(Qs),2),os=l(Js),Zs=l(os),Xs=i(l(Zs));rt(Xs,{get checked(){return t(s).nudgeEnabled},set checked(ge){t(s).nudgeEnabled=ge}});var vs=i(os,2),er=l(vs),tr=i(l(er)),ds=i(vs,2),ar=l(ds),sr=i(l(ar)),As=i(ds,2),rr=l(As),lr=i(l(rr));oe(T,()=>t(s).greetingMessage,ge=>t(s).greetingMessage=ge),oe(D,()=>t(s).greetingDelay,ge=>t(s).greetingDelay=ge),oe(N,()=>t(s).offHoursMessage,ge=>t(s).offHoursMessage=ge),oe(W,()=>t(s).autoCloseMinutes,ge=>t(s).autoCloseMinutes=ge),oe(Q,()=>t(s).inactivityWarningMinutes,ge=>t(s).inactivityWarningMinutes=ge),oe(Y,()=>t(s).messageAggregationWindowMs,ge=>t(s).messageAggregationWindowMs=ge),oe(re,()=>t(s).botResponseDelayMs,ge=>t(s).botResponseDelayMs=ge),oe(ye,()=>t(s).maxClarifications,ge=>t(s).maxClarifications=ge),oe(je,()=>t(s).gibberishMessage,ge=>t(s).gibberishMessage=ge),oe(Qt,()=>t(s).closingMessage,ge=>t(s).closingMessage=ge),oe(ns,()=>t(s).anythingElseMessage,ge=>t(s).anythingElseMessage=ge),oe(Rt,()=>t(s).farewellMessage,ge=>t(s).farewellMessage=ge),oe(Ss,()=>t(s).csatMessage,ge=>t(s).csatMessage=ge),oe(tr,()=>t(s).nudgeAt75Message,ge=>t(s).nudgeAt75Message=ge),oe(sr,()=>t(s).nudgeAt90Message,ge=>t(s).nudgeAt90Message=ge),oe(lr,()=>t(s).inactivityCloseMessage,ge=>t(s).inactivityCloseMessage=ge),f(_,x)};ae(c,_=>{t(r)?_(d):_(m,!1)})}f(e,o),Ee()}var Ud=k('<label class="color-label svelte-2a5p8g"> <div class="color-row svelte-2a5p8g"><input type="color" class="color-input svelte-2a5p8g"/> <input type="text" class="color-text svelte-2a5p8g" maxlength="7"/></div></label>'),Vd=k('<div class="color-row svelte-2a5p8g"><input type="color" class="color-input svelte-2a5p8g"/> <input type="text" class="color-text svelte-2a5p8g" maxlength="7"/></div>'),Wd=k('<div class="color-picker svelte-2a5p8g"><!></div>');function fl(e,a){ze(a,!0);let r=ke(a,"value",15,"#2563eb"),s=ke(a,"label",3,"");var n=Wd(),o=l(n);{var v=c=>{var d=Ud(),m=l(d),_=i(m),x=l(_),y=i(x,2);V(()=>A(m,`${s()??""} `)),oe(x,r),oe(y,r),f(c,d)},u=c=>{var d=Vd(),m=l(d),_=i(m,2);oe(m,r),oe(_,r),f(c,d)};ae(o,c=>{s()?c(v):c(u,!1)})}f(e,n),Ee()}var Qd=k('<div class="settings-grid svelte-m0wld2"><div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Widget Ayarlari</h2> <div class="form-grid svelte-m0wld2"><div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Bot Adi</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Karsilama Mesaji</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Placeholder</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Pozisyon</span> <select class="select svelte-m0wld2"><option>Sag</option><option>Sol</option></select></div> <div class="form-row svelte-m0wld2"><span class="label svelte-m0wld2">Widget Aktif</span><!></div> <div class="form-row svelte-m0wld2"><span class="label svelte-m0wld2">Ses Efekti</span><!></div></div></div> <div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Gorunum</h2> <div class="form-grid svelte-m0wld2"><!> <!> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Border Radius</span><input class="input svelte-m0wld2" type="number"/></div></div></div> <div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Logo</h2> <div class="logo-upload svelte-m0wld2"><input type="file" accept="image/*"/> <!></div></div></div>'),Jd=k('<div class="page-header svelte-m0wld2"><div><h1 class="svelte-m0wld2">Site Ayarlari</h1><p class="svelte-m0wld2">Widget gorunumu ve yapilandirmasi</p></div> <!></div> <!>',1);function Zd(e,a){ze(a,!0);let r=B(!0),s=B($e({})),n=B(null);Be(async()=>{try{const y=await X.get("admin/site-config");g(s,y.config||y||{},!0)}catch(y){L("Site ayarlari yuklenemedi: "+y.message,"error")}finally{g(r,!1)}});async function o(){try{await X.put("admin/site-config",{config:t(s)}),L("Kaydedildi","success")}catch(y){L("Hata: "+y.message,"error")}}async function v(){if(t(n))try{await X.upload("admin/site-logo",t(n)),L("Logo yuklendi","success")}catch(y){L("Hata: "+y.message,"error")}}var u=Jd(),c=de(u),d=i(l(c),2);ee(d,{onclick:o,variant:"primary",size:"sm",children:(y,p)=>{var $=U("Kaydet");f(y,$)},$$slots:{default:!0}});var m=i(c,2);{var _=y=>{He(y,{message:"Yukleniyor..."})},x=y=>{var p=Qd(),$=l(p),h=i(l($),2),b=l(h),E=i(l(b)),P=i(b,2),T=i(l(P)),M=i(P,2),I=i(l(M)),D=i(M,2),j=i(l(D),2),K=l(j);K.value=K.__value="right";var z=i(K);z.value=z.__value="left";var S=i(D,2),N=i(l(S));rt(N,{get checked(){return t(s).enabled},set checked(q){t(s).enabled=q}});var Z=i(S,2),F=i(l(Z));rt(F,{get checked(){return t(s).soundEnabled},set checked(q){t(s).soundEnabled=q}});var W=i($,2),H=i(l(W),2),J=l(H);fl(J,{label:"Ana Renk",get value(){return t(s).primaryColor},set value(q){t(s).primaryColor=q}});var Q=i(J,2);fl(Q,{label:"Metin Rengi",get value(){return t(s).textColor},set value(q){t(s).textColor=q}});var C=i(Q,2),w=i(l(C)),Y=i(W,2),G=i(l(Y),2),te=l(G),re=i(te,2);{let q=ne(()=>!t(n));ee(re,{onclick:v,variant:"secondary",size:"sm",get disabled(){return t(q)},children:(le,ie)=>{var ce=U("Yukle");f(le,ce)},$$slots:{default:!0}})}oe(E,()=>t(s).botName,q=>t(s).botName=q),oe(T,()=>t(s).welcomeMessage,q=>t(s).welcomeMessage=q),oe(I,()=>t(s).inputPlaceholder,q=>t(s).inputPlaceholder=q),ja(j,()=>t(s).position,q=>t(s).position=q),oe(w,()=>t(s).borderRadius,q=>t(s).borderRadius=q),be("change",te,q=>{g(n,q.target.files[0],!0)}),f(y,p)};ae(m,y=>{t(r)?y(_):y(x,!1)})}f(e,u),Ee()}Re(["change"]);var Xd=k('<div class="card svelte-13nqmxo"><div class="form-grid svelte-13nqmxo"><div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">App ID</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Key ID</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Secret</span><input class="input svelte-13nqmxo" type="password"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Subdomain</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Webhook URL</span><input class="input svelte-13nqmxo" readonly=""/></div> <div class="form-row svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Aktif</span><!></div></div></div>'),ec=k('<div class="page-header svelte-13nqmxo"><div><h1 class="svelte-13nqmxo">Zendesk</h1><p class="svelte-13nqmxo">Zendesk Sunshine entegrasyonu</p></div> <div class="actions svelte-13nqmxo"><!> <!></div></div> <!>',1);function tc(e,a){ze(a,!0);let r=B(!0),s=B($e({})),n=B(!1);Be(async()=>{try{const $=await X.get("admin/sunshine-config");g(s,$.config||$||{},!0)}catch($){L("Zendesk config yuklenemedi: "+$.message,"error")}finally{g(r,!1)}});async function o(){try{await X.put("admin/sunshine-config",{config:t(s)}),L("Kaydedildi","success")}catch($){L("Hata: "+$.message,"error")}}async function v(){g(n,!0);try{await X.post("admin/sunshine-config/test",{}),L("Baglanti basarili","success")}catch($){L("Test basarisiz: "+$.message,"error")}finally{g(n,!1)}}var u=ec(),c=de(u),d=i(l(c),2),m=l(d);ee(m,{onclick:v,variant:"secondary",size:"sm",get disabled(){return t(n)},children:($,h)=>{var b=U();V(()=>A(b,t(n)?"Test ediliyor...":"Baglanti Test")),f($,b)},$$slots:{default:!0}});var _=i(m,2);ee(_,{onclick:o,variant:"primary",size:"sm",children:($,h)=>{var b=U("Kaydet");f($,b)},$$slots:{default:!0}});var x=i(c,2);{var y=$=>{He($,{message:"Yukleniyor..."})},p=$=>{var h=Xd(),b=l(h),E=l(b),P=i(l(E)),T=i(E,2),M=i(l(T)),I=i(T,2),D=i(l(I)),j=i(I,2),K=i(l(j)),z=i(j,2),S=i(l(z)),N=i(z,2),Z=i(l(N));rt(Z,{get checked(){return t(s).enabled},set checked(F){t(s).enabled=F}}),oe(P,()=>t(s).appId,F=>t(s).appId=F),oe(M,()=>t(s).keyId,F=>t(s).keyId=F),oe(D,()=>t(s).secret,F=>t(s).secret=F),oe(K,()=>t(s).subdomain,F=>t(s).subdomain=F),oe(S,()=>t(s).webhookUrl,F=>t(s).webhookUrl=F),f($,h)};ae(x,$=>{t(r)?$(y):$(p,!1)})}f(e,u),Ee()}var ac=k('<div class="card svelte-1i3ct0m"><div class="form-grid svelte-1i3ct0m"><div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">API Token</span><input class="input svelte-1i3ct0m" type="password"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Telefon ID</span><input class="input svelte-1i3ct0m"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Verify Token</span><input class="input svelte-1i3ct0m"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Business Account ID</span><input class="input svelte-1i3ct0m"/></div> <div class="form-row svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Aktif</span><!></div></div></div>'),sc=k('<div class="page-header svelte-1i3ct0m"><div><h1 class="svelte-1i3ct0m">WhatsApp</h1><p class="svelte-1i3ct0m">WhatsApp Business entegrasyonu</p></div> <!></div> <!>',1);function rc(e,a){ze(a,!0);let r=B(!0),s=B($e({}));Be(async()=>{try{const _=await X.get("admin/whatsapp");g(s,_.config||_||{},!0)}catch(_){L("WhatsApp config yuklenemedi: "+_.message,"error")}finally{g(r,!1)}});async function n(){try{await X.put("admin/whatsapp",t(s)),L("Kaydedildi","success")}catch(_){L("Hata: "+_.message,"error")}}var o=sc(),v=de(o),u=i(l(v),2);ee(u,{onclick:n,variant:"primary",size:"sm",children:(_,x)=>{var y=U("Kaydet");f(_,y)},$$slots:{default:!0}});var c=i(v,2);{var d=_=>{He(_,{message:"Yukleniyor..."})},m=_=>{var x=ac(),y=l(x),p=l(y),$=i(l(p)),h=i(p,2),b=i(l(h)),E=i(h,2),P=i(l(E)),T=i(E,2),M=i(l(T)),I=i(T,2),D=i(l(I));rt(D,{get checked(){return t(s).enabled},set checked(j){t(s).enabled=j}}),oe($,()=>t(s).accessToken,j=>t(s).accessToken=j),oe(b,()=>t(s).phoneNumberId,j=>t(s).phoneNumberId=j),oe(P,()=>t(s).verifyToken,j=>t(s).verifyToken=j),oe(M,()=>t(s).businessAccountId,j=>t(s).businessAccountId=j),f(_,x)};ae(c,_=>{t(r)?_(d):_(m,!1)})}f(e,o),Ee()}var lc=k('<tr><td class="mono svelte-13cdipi"> </td><td class="svelte-13cdipi"> </td><td class="svelte-13cdipi"><button><!></button></td><td class="actions svelte-13cdipi"><!> <!> <!></td></tr>'),ic=k('<tr><td colspan="4" class="empty-row svelte-13cdipi">Webhook yok</td></tr>'),nc=k('<div class="card svelte-13cdipi"><table class="svelte-13cdipi"><thead><tr><th class="svelte-13cdipi">URL</th><th class="svelte-13cdipi">Eventler</th><th class="svelte-13cdipi">Durum</th><th class="svelte-13cdipi"></th></tr></thead><tbody></tbody></table></div>'),oc=k('<label class="check-item svelte-13cdipi"><input type="checkbox"/> </label>'),vc=k('<div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">URL</span><input class="input svelte-13cdipi" placeholder="https://..."/></div> <div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">Secret</span><input class="input svelte-13cdipi" placeholder="Opsiyonel"/></div> <div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">Eventler</span> <div class="event-checks svelte-13cdipi"></div></div> <div class="modal-actions svelte-13cdipi"><!> <!></div>',1),dc=k('<div class="page-header svelte-13cdipi"><div><h1 class="svelte-13cdipi">Webhooks</h1><p class="svelte-13cdipi"> </p></div> <!></div> <!> <!>',1);function cc(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(!1),o=B($e({url:"",events:[],secret:""})),v=B(null);const u=["ticket.created","ticket.updated","ticket.closed","conversation.started","conversation.closed","escalation.requested"];Be(()=>c());async function c(){g(r,!0);try{const z=await X.get("admin/webhooks");g(s,z.webhooks||z||[],!0)}catch(z){L("Webhooks yuklenemedi: "+z.message,"error")}finally{g(r,!1)}}function d(){g(v,null),g(o,{url:"",events:[],secret:""},!0),g(n,!0)}function m(z){g(v,z.id||z._id,!0),g(o,{url:z.url,events:[...z.events||[]],secret:z.secret||""},!0),g(n,!0)}async function _(){if(t(o).url.trim())try{t(v)?await X.put("admin/webhooks/"+t(v),t(o)):await X.post("admin/webhooks",t(o)),L("Kaydedildi","success"),g(n,!1),await c()}catch(z){L("Hata: "+z.message,"error")}}async function x(z){if(await Xa({title:"Sil",message:"Bu webhook silinecek.",confirmText:"Sil",danger:!0}))try{await X.delete("admin/webhooks/"+z),L("Silindi","success"),await c()}catch(N){L("Hata: "+N.message,"error")}}async function y(z){try{await X.post("admin/webhooks/"+z+"/test",{}),L("Test gonderildi","success")}catch(S){L("Test hatasi: "+S.message,"error")}}async function p(z){try{await X.put("admin/webhooks/"+(z.id||z._id),{active:!z.active}),await c()}catch(S){L("Hata: "+S.message,"error")}}function $(z){t(o).events.includes(z)?t(o).events=t(o).events.filter(S=>S!==z):t(o).events=[...t(o).events,z]}var h=dc(),b=de(h),E=l(b),P=i(l(E)),T=l(P),M=i(E,2);ee(M,{onclick:d,variant:"primary",size:"sm",children:(z,S)=>{var N=U("+ Yeni Webhook");f(z,N)},$$slots:{default:!0}});var I=i(b,2);{var D=z=>{He(z,{message:"Yukleniyor..."})},j=z=>{var S=nc(),N=l(S),Z=i(l(N));Se(Z,21,()=>t(s),Te,(F,W)=>{var H=lc(),J=l(H),Q=l(J),C=i(J),w=l(C),Y=i(C),G=l(Y);let te;var re=l(G);{let me=ne(()=>t(W).active!==!1?"green":"gray");We(re,{get variant(){return t(me)},children:(we,ue)=>{var R=U();V(()=>A(R,t(W).active!==!1?"aktif":"pasif")),f(we,R)},$$slots:{default:!0}})}var q=i(Y),le=l(q);ee(le,{onclick:()=>y(t(W).id||t(W)._id),variant:"ghost",size:"sm",children:(me,we)=>{var ue=U("Test");f(me,ue)},$$slots:{default:!0}});var ie=i(le,2);ee(ie,{onclick:()=>m(t(W)),variant:"ghost",size:"sm",children:(me,we)=>{var ue=U("Duzenle");f(me,ue)},$$slots:{default:!0}});var ce=i(ie,2);ee(ce,{onclick:()=>x(t(W).id||t(W)._id),variant:"ghost",size:"sm",children:(me,we)=>{var ue=U("Sil");f(me,ue)},$$slots:{default:!0}}),V(me=>{A(Q,t(W).url),A(w,me),te=Fe(G,1,"status-toggle svelte-13cdipi",null,te,{active:t(W).active!==!1}),ca(G,"title",t(W).active!==!1?"Devre disi birak":"Etkinlestir")},[()=>(t(W).events||[]).join(", ")]),be("click",G,()=>p(t(W))),f(F,H)},F=>{var W=ic();f(F,W)}),f(z,S)};ae(I,z=>{t(r)?z(D):z(j,!1)})}var K=i(I,2);{let z=ne(()=>t(v)?"Webhook Duzenle":"Yeni Webhook");Oa(K,{get title(){return t(z)},get open(){return t(n)},set open(S){g(n,S,!0)},children:(S,N)=>{var Z=vc(),F=de(Z),W=i(l(F)),H=i(F,2),J=i(l(H)),Q=i(H,2),C=i(l(Q),2);Se(C,21,()=>u,Te,(te,re)=>{var q=oc(),le=l(q),ie=i(le);V(ce=>{_o(le,ce),A(ie,` ${t(re)??""}`)},[()=>t(o).events.includes(t(re))]),be("change",le,()=>$(t(re))),f(te,q)});var w=i(Q,2),Y=l(w);ee(Y,{onclick:()=>g(n,!1),variant:"secondary",children:(te,re)=>{var q=U("Iptal");f(te,q)},$$slots:{default:!0}});var G=i(Y,2);ee(G,{onclick:_,variant:"primary",children:(te,re)=>{var q=U("Kaydet");f(te,q)},$$slots:{default:!0}}),oe(W,()=>t(o).url,te=>t(o).url=te),oe(J,()=>t(o).secret,te=>t(o).secret=te),f(S,Z)},$$slots:{default:!0}})}V(()=>A(T,`${t(s).length??""} webhook`)),f(e,h),Ee()}Re(["click","change"]);var uc=k('<input class="input svelte-gwq0tz" type="password"/>'),fc=k('<input class="input svelte-gwq0tz"/>'),hc=k('<tr><td class="mono key-col svelte-gwq0tz"> </td><td class="svelte-gwq0tz"><!></td></tr>'),pc=k('<tr><td colspan="2" class="empty-row svelte-gwq0tz">Degisken yok</td></tr>'),_c=k('<div class="card svelte-gwq0tz"><table class="svelte-gwq0tz"><thead><tr><th class="svelte-gwq0tz">Anahtar</th><th class="svelte-gwq0tz">Deger</th></tr></thead><tbody></tbody></table></div>'),mc=k('<div class="page-header svelte-gwq0tz"><div><h1 class="svelte-gwq0tz">Ortam Degiskenleri</h1><p class="svelte-gwq0tz">Sunucu .env degerleri</p></div> <!></div> <!>',1);function gc(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B($e({}));const o=["ADMIN_TOKEN","GOOGLE_API_KEY","ANTHROPIC_API_KEY","OPENAI_API_KEY","GROQ_API_KEY","LLM_API_KEY","EMBEDDING_API_KEY","MISTRAL_API_KEY","DEEPSEEK_API_KEY"];Be(async()=>{try{const p=await X.get("admin/env"),$=p.env||p.config||p||{};g(s,Object.entries($).map(([h,b])=>({key:h,value:String(b),masked:o.includes(h)})),!0)}catch(p){L("Ortam degiskenleri yuklenemedi: "+p.message,"error")}finally{g(r,!1)}});function v(p,$){t(n)[p]=$}async function u(){if(Object.keys(t(n)).length)try{await X.put("admin/env",{updates:t(n)}),L("Kaydedildi â yeniden baslama gerekebilir","success"),g(n,{},!0)}catch(p){L("Hata: "+p.message,"error")}}var c=mc(),d=de(c),m=i(l(d),2);{let p=ne(()=>!Object.keys(t(n)).length);ee(m,{onclick:u,variant:"primary",size:"sm",get disabled(){return t(p)},children:($,h)=>{var b=U("Kaydet");f($,b)},$$slots:{default:!0}})}var _=i(d,2);{var x=p=>{He(p,{message:"Yukleniyor..."})},y=p=>{var $=_c(),h=l($),b=i(l(h));Se(b,21,()=>t(s),Te,(E,P)=>{var T=hc(),M=l(T),I=l(M),D=i(M),j=l(D);{var K=S=>{var N=uc();V(()=>Ks(N,t(P).value)),be("input",N,Z=>v(t(P).key,Z.target.value)),f(S,N)},z=S=>{var N=fc();V(()=>Ks(N,t(P).value)),be("input",N,Z=>v(t(P).key,Z.target.value)),f(S,N)};ae(j,S=>{t(P).masked?S(K):S(z,!1)})}V(()=>A(I,t(P).key)),f(E,T)},E=>{var P=pc();f(E,P)}),f(p,$)};ae(_,p=>{t(r)?p(x):p(y,!1)})}f(e,c),Ee()}Re(["input"]);var yc=k('<div><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg> <span> </span></div>'),bc=k('<div class="empty-list svelte-sdohvc">Dosya yok</div>'),wc=k('<div class="editor-header svelte-sdohvc"><span class="mono svelte-sdohvc"> </span></div> <textarea class="mono-editor svelte-sdohvc" spellcheck="false"></textarea>',1),kc=k('<div class="no-file svelte-sdohvc">Bir dosya secin</div>'),xc=k('<div class="split-layout svelte-sdohvc"><div class="file-list svelte-sdohvc"></div> <div class="editor-panel svelte-sdohvc"><!></div></div>'),$c=k('<div class="page-header svelte-sdohvc"><div><h1 class="svelte-sdohvc">Agent Dosyalari</h1><p class="svelte-sdohvc">Bot yapilndirma dosyalari</p></div> <div class="actions svelte-sdohvc"><!> <!></div></div> <!>',1);function qc(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(null),o=B(""),v=B(!1);Be(async()=>{try{const E=await X.get("admin/agent/files");g(s,E.files||E||[],!0)}catch(E){L("Agent dosyalari yuklenemedi: "+E.message,"error")}finally{g(r,!1)}});async function u(E){g(n,E,!0);try{const P=await X.get("admin/agent/files/"+encodeURIComponent(E));g(o,P.content||"",!0)}catch(P){L("Dosya okunamadi: "+P.message,"error"),g(o,"")}}async function c(){if(t(n)){g(v,!0);try{await X.put("admin/agent/files/"+encodeURIComponent(t(n)),{content:t(o)}),L(t(n)+" kaydedildi","success")}catch(E){L("Hata: "+E.message,"error")}finally{g(v,!1)}}}async function d(){try{await X.post("admin/agent/reload",{}),L("Agent dosyalari yeniden yuklendi","success")}catch(E){L("Hata: "+E.message,"error")}}var m=$c(),_=de(m),x=i(l(_),2),y=l(x);ee(y,{onclick:d,variant:"secondary",size:"sm",children:(E,P)=>{var T=U("Agent'i Yenile");f(E,T)},$$slots:{default:!0}});var p=i(y,2);{let E=ne(()=>!t(n)||t(v));ee(p,{onclick:c,variant:"primary",size:"sm",get disabled(){return t(E)},children:(P,T)=>{var M=U();V(()=>A(M,t(v)?"Kaydediliyor...":"Kaydet")),f(P,M)},$$slots:{default:!0}})}var $=i(_,2);{var h=E=>{He(E,{message:"Yukleniyor..."})},b=E=>{var P=xc(),T=l(P);Se(T,21,()=>t(s),Te,(K,z)=>{var S=yc();let N;var Z=i(l(S),2),F=l(Z);V(()=>{N=Fe(S,1,"file-item svelte-sdohvc",null,N,{active:t(n)===(t(z).name||t(z))}),A(F,t(z).name||t(z))}),be("click",S,()=>u(t(z).name||t(z))),f(K,S)},K=>{var z=bc();f(K,z)});var M=i(T,2),I=l(M);{var D=K=>{var z=wc(),S=de(z),N=l(S),Z=l(N),F=i(S,2);V(()=>A(Z,t(n))),oe(F,()=>t(o),W=>g(o,W)),f(K,z)},j=K=>{var z=kc();f(K,z)};ae(I,K=>{t(n)?K(D):K(j,!1)})}f(E,P)};ae($,E=>{t(r)?E(h):E(b,!1)})}f(e,m),Ee()}Re(["click"]);var zc=k("<div> </div>"),Ec=k('<div class="empty-list svelte-1tzwowi">Dosya yok</div>'),Sc=k('<span class="json-badge valid svelte-1tzwowi">JSON Gecerli</span>'),Ac=k('<span class="json-badge invalid svelte-1tzwowi">JSON Hatali</span>'),Pc=k('<div class="editor-toolbar svelte-1tzwowi"><span class="editor-filename svelte-1tzwowi"> </span> <!></div> <textarea class="mono-editor svelte-1tzwowi" spellcheck="false"></textarea>',1),Tc=k('<div class="no-file svelte-1tzwowi">Bir sablon secin</div>'),Cc=k('<div class="split-layout svelte-1tzwowi"><div class="file-list svelte-1tzwowi"></div> <div class="editor-panel svelte-1tzwowi"><!></div></div>'),Mc=k('<div class="page-header svelte-1tzwowi"><div><h1 class="svelte-1tzwowi">Bellek Sablonlari</h1><p class="svelte-1tzwowi">Hafiza dosya sablonlari</p></div> <!></div> <!>',1);function Ic(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(null),o=B(""),v=B(null);function u(h){if(!h.trim()){g(v,null);return}try{JSON.parse(h),g(v,!0)}catch{g(v,!1)}}Be(async()=>{try{const h=await X.get("admin/agent/memory"),b=h.files||h||[];Array.isArray(b)?g(s,b,!0):typeof b=="object"&&b!==null?g(s,Object.entries(b).map(([E,P])=>({name:E,data:P})),!0):g(s,[],!0)}catch(h){L("Bellek sablonlari yuklenemedi: "+h.message,"error")}finally{g(r,!1)}});async function c(h){const b=h.name||h;if(g(n,b,!0),h.data!==void 0){g(o,typeof h.data=="string"?h.data:JSON.stringify(h.data,null,2),!0),u(t(o));return}try{const E=await X.get("admin/agent/memory/"+encodeURIComponent(b));g(o,typeof E.content=="string"?E.content:JSON.stringify(E.content||E,null,2),!0),u(t(o))}catch(E){L("Dosya okunamadi: "+E.message,"error"),g(o,""),g(v,null)}}async function d(){if(t(n))try{await X.put("admin/agent/memory/"+encodeURIComponent(t(n)),{content:t(o)}),L(t(n)+" kaydedildi","success")}catch(h){L("Hata: "+h.message,"error")}}var m=Mc(),_=de(m),x=i(l(_),2);{let h=ne(()=>!t(n));ee(x,{onclick:d,variant:"primary",size:"sm",get disabled(){return t(h)},children:(b,E)=>{var P=U("Kaydet");f(b,P)},$$slots:{default:!0}})}var y=i(_,2);{var p=h=>{He(h,{message:"Yukleniyor..."})},$=h=>{var b=Cc(),E=l(b);Se(E,21,()=>t(s),Te,(D,j)=>{var K=zc();let z;var S=l(K);V(()=>{z=Fe(K,1,"file-item svelte-1tzwowi",null,z,{active:t(n)===(t(j).name||t(j))}),A(S,t(j).name||t(j))}),be("click",K,()=>c(t(j))),f(D,K)},D=>{var j=Ec();f(D,j)});var P=i(E,2),T=l(P);{var M=D=>{var j=Pc(),K=de(j),z=l(K),S=l(z),N=i(z,2);{var Z=H=>{var J=Sc();f(H,J)},F=H=>{var J=Ac();f(H,J)};ae(N,H=>{t(v)===!0?H(Z):t(v)===!1&&H(F,1)})}var W=i(K,2);V(()=>A(S,t(n))),be("input",W,()=>u(t(o))),oe(W,()=>t(o),H=>g(o,H)),f(D,j)},I=D=>{var j=Tc();f(D,j)};ae(T,D=>{t(n)?D(M):D(I,!1)})}f(h,b)};ae(y,h=>{t(r)?h(p):h($,!1)})}f(e,m),Ee()}Re(["click","input"]);var jc=k('<button role="tab"> </button>'),Dc=k('<div class="tabs svelte-stk7vv" role="tablist"></div>');function Oc(e,a){ze(a,!0);let r=ke(a,"tabs",19,()=>[]),s=ke(a,"active",15,"");function n(v){var u;s(v),(u=a.onchange)==null||u.call(a,v)}var o=Dc();Se(o,21,r,Te,(v,u)=>{var c=jc();let d;var m=l(c);V(()=>{d=Fe(c,1,"tab svelte-stk7vv",null,d,{active:s()===t(u).id}),ca(c,"aria-selected",s()===t(u).id),A(m,t(u).label)}),be("click",c,()=>n(t(u).id)),f(v,c)}),f(e,o),Ee()}Re(["click"]);var Bc=k('<div class="card svelte-j1tc6l"><h2 class="svelte-j1tc6l">Populer Konular</h2> <!></div>'),Kc=k('<div class="kpi-grid svelte-j1tc6l"><!> <!> <!> <!></div> <!>',1),Nc=k('<div class="page-header svelte-j1tc6l"><div><h1 class="svelte-j1tc6l">Analytics</h1><p class="svelte-j1tc6l">Performans analizi</p></div> <!></div> <!> <!>',1);function Rc(e,a){ze(a,!0);let r=B(!0),s=B("7"),n=B(null);const o=[{id:"7",label:"7 Gun"},{id:"30",label:"30 Gun"},{id:"90",label:"90 Gun"}];Be(()=>v());async function v(){g(r,!0);try{g(n,await X.get("admin/analytics?range="+t(s)),!0)}catch(b){L("Analytics yuklenemedi: "+b.message,"error")}finally{g(r,!1)}}function u(b){g(s,b,!0),v()}function c(){window.open("../api/admin/analytics/export?range="+t(s)+"&token="+encodeURIComponent(Sa()),"_blank")}let d=ne(()=>{var b,E;return(((b=t(n))==null?void 0:b.topTopics)||((E=t(n))==null?void 0:E.topics)||[]).slice(0,10).map(P=>({label:P.topicId||P.topic||P.name||"?",value:P.count||P.total||0}))});var m=Nc(),_=de(m),x=i(l(_),2);ee(x,{onclick:c,variant:"ghost",size:"sm",children:(b,E)=>{var P=U("Export");f(b,P)},$$slots:{default:!0}});var y=i(_,2);Oc(y,{get tabs(){return o},onchange:u,get active(){return t(s)},set active(b){g(s,b,!0)}});var p=i(y,2);{var $=b=>{He(b,{message:"Yukleniyor..."})},h=b=>{var E=Kc(),P=de(E),T=l(P);{let z=ne(()=>t(n).totalChats??t(n).chats??0);bt(T,{label:"Toplam Sohbet",get value(){return t(z)}})}var M=i(T,2);{let z=ne(()=>t(n).totalEscalations??t(n).escalations??0);bt(M,{label:"Eskalasyon",get value(){return t(z)}})}var I=i(M,2);{let z=ne(()=>(t(n).avgCsat??t(n).csatAvg??0).toFixed(1)+"/5");bt(I,{label:"Ort. CSAT",get value(){return t(z)}})}var D=i(I,2);{let z=ne(()=>"%"+(t(n).resolutionRate??0));bt(D,{label:"Cozum Orani",get value(){return t(z)}})}var j=i(P,2);{var K=z=>{var S=Bc(),N=i(l(S),2);pi(N,{get items(){return t(d)}}),f(z,S)};ae(j,z=>{t(d).length&&z(K)})}f(b,E)};ae(p,b=>{t(r)?b($):t(n)&&b(h,1)})}f(e,m),Ee()}var Hc=k('<div class="progress svelte-1untuf7"><div class="progress-bar svelte-1untuf7"></div></div>');function Lc(e,a){let r=ke(a,"value",3,0),s=ke(a,"max",3,100),n=ke(a,"color",3,"var(--accent)"),o=ke(a,"height",3,"6px"),v=ne(()=>Math.min(100,Math.max(0,r()/s()*100)));var u=Hc();let c;var d=l(u);let m;V(()=>{c=Za(u,"",c,{height:o()}),m=Za(d,"",m,{width:`${t(v)??""}%`,background:n()})}),f(e,u)}var Fc=k('<div class="progress-card svelte-11979gn"><!> <p class="progress-text svelte-11979gn"> </p></div>'),Yc=k('<span class="muted svelte-11979gn">-</span>'),Gc=k('<tr><td class="mono svelte-11979gn"> </td><td class="svelte-11979gn"> </td><td class="muted svelte-11979gn"> </td><td class="svelte-11979gn"><!></td><td class="row-actions svelte-11979gn"><!> <!> <!></td></tr>'),Uc=k('<tr><td colspan="5" class="empty-row svelte-11979gn">Senaryo yok</td></tr>'),Vc=k('<tr><td class="svelte-11979gn"> </td><td class="svelte-11979gn"> </td><td class="pass-cell svelte-11979gn"> </td><td class="fail-cell svelte-11979gn"> </td><td class="svelte-11979gn"><!></td><td class="muted svelte-11979gn"> </td></tr>'),Wc=k('<div class="history-section svelte-11979gn"><h2 class="svelte-11979gn">Gecmis</h2> <div class="card svelte-11979gn"><table class="svelte-11979gn"><thead><tr><th class="svelte-11979gn">Tarih</th><th class="svelte-11979gn">Toplam</th><th class="svelte-11979gn">Gecti</th><th class="svelte-11979gn">Kaldi</th><th class="svelte-11979gn">Oran</th><th class="svelte-11979gn">Sure</th></tr></thead><tbody></tbody></table></div></div>'),Qc=k('<div class="card svelte-11979gn"><table class="svelte-11979gn"><thead><tr><th class="svelte-11979gn">ID</th><th class="svelte-11979gn">Baslik</th><th class="svelte-11979gn">Turn</th><th class="svelte-11979gn">Son Sonuc</th><th class="svelte-11979gn"></th></tr></thead><tbody></tbody></table></div> <!>',1),Jc=k('<div class="turn-card svelte-11979gn"><div class="turn-top svelte-11979gn"><span class="turn-num svelte-11979gn"></span> <!></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Kullanici Mesaji</span><textarea class="textarea svelte-11979gn" rows="2" placeholder="Kullanicinin mesaji..."></textarea></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Beklenen (shouldContainAny, virgul ile)</span><input class="input svelte-11979gn"/></div></div>'),Zc=k('<div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">ID</span><input class="input mono svelte-11979gn" placeholder="S01"/></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Baslik</span><input class="input svelte-11979gn" placeholder="Senaryo aciklamasi..."/></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Etiketler (virgul ile)</span><input class="input svelte-11979gn"/></div> <div class="turns-section svelte-11979gn"><div class="turns-header svelte-11979gn"><span class="lbl svelte-11979gn"> </span> <!></div> <!></div> <div class="modal-actions svelte-11979gn"><!> <!></div>',1),Xc=k('<div class="page-header svelte-11979gn"><div><h1 class="svelte-11979gn">Eval Yonetimi</h1><p class="svelte-11979gn"> </p></div> <div class="actions svelte-11979gn"><!> <!> <!></div></div> <!> <!> <!>',1);function eu(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B($e([])),o=B(!1),v=B($e({completed:0,total:0,text:""})),u=B($e({})),c=B(!1),d=B($e({id:"",title:"",tags:[],turns:[{user:"",expect:{}}]})),m=B(null),_=null;Be(()=>x()),Us(()=>_==null?void 0:_.close());async function x(){g(r,!0);try{const[C,w]=await Promise.all([X.get("admin/eval/scenarios"),X.get("admin/eval/history").catch(()=>({history:[]}))]);g(s,C.scenarios||C||[],!0),g(n,Array.isArray(w)?w:w.history||[],!0)}catch(C){L("Eval yuklenemedi: "+C.message,"error")}finally{g(r,!1)}}function y(){g(o,!0),g(v,{completed:0,total:t(s).length,text:"Baslatiliyor..."},!0),g(u,{},!0),_=_i("admin/eval/run-all?runs=3",{onMessage(C){if(C.type==="progress"&&(t(v).completed++,t(v).text=C.scenarioId+": "+(C.pass?"GECTI":"KALDI"),t(u)[C.scenarioId]=C),C.type==="done"){g(o,!1),_==null||_.close();const w=C.summary||C;t(v).text="Tamamlandi â "+w.passed+"/"+w.total+" gecti (%"+w.passRate+")",L("Eval tamamlandi: "+w.passed+"/"+w.total,w.passed===w.total?"success":"warning"),x()}C.type==="error"&&(g(o,!1),_==null||_.close(),t(v).text="Hata: "+C.message,L("Eval hatasi: "+C.message,"error"))},onError(){g(o,!1),t(v).text="Baglanti hatasi"}})}async function p(C){try{const w=await X.post("admin/eval/run/"+C+"?runs=3",{});t(u)[C]=w,L(C+": "+(w.pass?"GECTI":"KALDI"),w.pass?"success":"warning")}catch(w){L("Hata: "+w.message,"error")}}function $(){g(m,null),g(d,{id:"",title:"",tags:[],turns:[{user:"",expect:{}}]},!0),g(c,!0)}function h(C){g(m,C.id,!0),g(d,{id:C.id,title:C.title||"",tags:[...C.tags||[]],turns:(C.turns||[]).map(w=>({...w,expect:{...w.expect}}))},!0),g(c,!0)}async function b(){var C,w;if(!(!t(d).id||!((C=t(d).turns)!=null&&C.length)||!((w=t(d).turns[0])!=null&&w.user)))try{t(m)?await X.put("admin/eval/scenarios/"+t(m),t(d)):await X.post("admin/eval/scenarios",t(d)),L("Kaydedildi","success"),g(c,!1),await x()}catch(Y){L("Hata: "+Y.message,"error")}}async function E(C){if(await Xa({title:"Sil",message:"Senaryo silinecek.",confirmText:"Sil",danger:!0}))try{await X.delete("admin/eval/scenarios/"+C),L("Silindi","success"),await x()}catch(Y){L("Hata: "+Y.message,"error")}}async function P(){if(await Xa({title:"Gecmisi Temizle",message:"Tum eval gecmisi silinecek.",confirmText:"Temizle",danger:!0}))try{await X.delete("admin/eval/history"),g(n,[],!0),L("Gecmis temizlendi","success")}catch(w){L("Hata: "+w.message,"error")}}var T=Xc(),M=de(T),I=l(M),D=i(l(I)),j=l(D),K=i(I,2),z=l(K);ee(z,{onclick:P,variant:"ghost",size:"sm",children:(C,w)=>{var Y=U("Gecmisi Temizle");f(C,Y)},$$slots:{default:!0}});var S=i(z,2);ee(S,{onclick:$,variant:"secondary",size:"sm",children:(C,w)=>{var Y=U("+ Senaryo");f(C,Y)},$$slots:{default:!0}});var N=i(S,2);{let C=ne(()=>t(o)||!t(s).length);ee(N,{onclick:y,variant:"primary",size:"sm",get disabled(){return t(C)},children:(w,Y)=>{var G=U();V(()=>A(G,t(o)?"Calisiyor...":"Tumu Calistir")),f(w,G)},$$slots:{default:!0}})}var Z=i(M,2);{var F=C=>{var w=Fc(),Y=l(w);Lc(Y,{get value(){return t(v).completed},get max(){return t(v).total}});var G=i(Y,2),te=l(G);V(()=>A(te,`${t(v).completed??""}/${t(v).total??""} â ${t(v).text??""}`)),f(C,w)};ae(Z,C=>{t(o)&&C(F)})}var W=i(Z,2);{var H=C=>{He(C,{message:"Yukleniyor..."})},J=C=>{var w=Qc(),Y=de(w),G=l(Y),te=i(l(G));Se(te,21,()=>t(s),Te,(le,ie)=>{var ce=Gc(),me=l(ce),we=l(me),ue=i(me),R=l(ue),ve=i(ue),se=l(ve),pe=i(ve),he=l(pe);{var fe=Pe=>{{let je=ne(()=>t(u)[t(ie).id].pass?"green":"red");We(Pe,{get variant(){return t(je)},children:(Ke,Ge)=>{var Ue=U();V(()=>A(Ue,t(u)[t(ie).id].pass?"GECTI":"KALDI")),f(Ke,Ue)},$$slots:{default:!0}})}},ye=Pe=>{var je=Yc();f(Pe,je)};ae(he,Pe=>{t(u)[t(ie).id]?Pe(fe):Pe(ye,!1)})}var xe=i(pe),_e=l(xe);ee(_e,{onclick:()=>p(t(ie).id),variant:"ghost",size:"sm",children:(Pe,je)=>{var Ke=U("Calistir");f(Pe,Ke)},$$slots:{default:!0}});var De=i(_e,2);ee(De,{onclick:()=>h(t(ie)),variant:"ghost",size:"sm",children:(Pe,je)=>{var Ke=U("Duzenle");f(Pe,Ke)},$$slots:{default:!0}});var Oe=i(De,2);ee(Oe,{onclick:()=>E(t(ie).id),variant:"ghost",size:"sm",children:(Pe,je)=>{var Ke=U("Sil");f(Pe,Ke)},$$slots:{default:!0}}),V(Pe=>{var je;A(we,t(ie).id),A(R,Pe),A(se,((je=t(ie).turns)==null?void 0:je.length)||0)},[()=>{var Pe,je,Ke,Ge;return((Pe=t(ie).title)==null?void 0:Pe.slice(0,60))||((Ge=(Ke=(je=t(ie).turns)==null?void 0:je[0])==null?void 0:Ke.user)==null?void 0:Ge.slice(0,60))||"-"}]),f(le,ce)},le=>{var ie=Uc();f(le,ie)});var re=i(Y,2);{var q=le=>{var ie=Wc(),ce=i(l(ie),2),me=l(ce),we=i(l(me));Se(we,21,()=>t(n),Te,(ue,R)=>{var ve=Vc(),se=l(ve),pe=l(se),he=i(se),fe=l(he),ye=i(he),xe=l(ye),_e=i(ye),De=l(_e),Oe=i(_e),Pe=l(Oe);{let Ge=ne(()=>t(R).green?"green":"red");We(Pe,{get variant(){return t(Ge)},children:(Ue,pt)=>{var lt=U();V(()=>A(lt,`%${t(R).passRate??""}`)),f(Ue,lt)},$$slots:{default:!0}})}var je=i(Oe),Ke=l(je);V((Ge,Ue)=>{A(pe,Ge),A(fe,t(R).total),A(xe,t(R).passed),A(De,t(R).failed),A(Ke,Ue)},[()=>new Date(t(R).timestamp).toLocaleString("tr-TR"),()=>t(R).durationMs?(t(R).durationMs/1e3).toFixed(1)+"s":"-"]),f(ue,ve)}),f(le,ie)};ae(re,le=>{t(n).length>0&&le(q)})}f(C,w)};ae(W,C=>{t(r)?C(H):C(J,!1)})}var Q=i(W,2);{let C=ne(()=>t(m)?"Senaryo Duzenle":"Yeni Senaryo");Oa(Q,{get title(){return t(C)},width:"640px",get open(){return t(c)},set open(w){g(c,w,!0)},children:(w,Y)=>{var G=Zc(),te=de(G),re=i(l(te)),q=i(te,2),le=i(l(q)),ie=i(q,2),ce=i(l(ie)),me=i(ie,2),we=l(me),ue=l(we),R=l(ue),ve=i(ue,2);ee(ve,{onclick:()=>{t(d).turns=[...t(d).turns||[],{user:"",expect:{}}]},variant:"ghost",size:"sm",children:(ye,xe)=>{var _e=U("+ Turn");f(ye,_e)},$$slots:{default:!0}});var se=i(we,2);Se(se,17,()=>t(d).turns||[],Te,(ye,xe,_e)=>{var De=Jc(),Oe=l(De),Pe=l(Oe);Pe.textContent=`#${_e+1}`;var je=i(Pe,2);{var Ke=Ve=>{ee(Ve,{onclick:()=>{t(d).turns=t(d).turns.filter(($t,Qt)=>Qt!==_e)},variant:"ghost",size:"sm",children:($t,Qt)=>{var Nt=U("Sil");f($t,Nt)},$$slots:{default:!0}})};ae(je,Ve=>{(t(d).turns||[]).length>1&&Ve(Ke)})}var Ge=i(Oe,2),Ue=i(l(Ge)),pt=i(Ge,2),lt=i(l(pt));V(Ve=>Ks(lt,Ve),[()=>{var Ve;return(((Ve=t(xe).expect)==null?void 0:Ve.shouldContainAny)||[]).join(", ")}]),oe(Ue,()=>t(xe).user,Ve=>t(xe).user=Ve),be("input",lt,Ve=>{t(xe).expect={...t(xe).expect,shouldContainAny:Ve.target.value.split(",").map($t=>$t.trim()).filter(Boolean)}}),f(ye,De)});var pe=i(me,2),he=l(pe);ee(he,{onclick:()=>g(c,!1),variant:"secondary",children:(ye,xe)=>{var _e=U("Iptal");f(ye,_e)},$$slots:{default:!0}});var fe=i(he,2);ee(fe,{onclick:b,variant:"primary",children:(ye,xe)=>{var _e=U("Kaydet");f(ye,_e)},$$slots:{default:!0}}),V(ye=>{var xe;re.disabled=!!t(m),Ks(ce,ye),A(R,`Turn'lar (${(((xe=t(d).turns)==null?void 0:xe.length)||0)??""})`)},[()=>(t(d).tags||[]).join(", ")]),oe(re,()=>t(d).id,ye=>t(d).id=ye),oe(le,()=>t(d).title,ye=>t(d).title=ye),be("input",ce,ye=>{t(d).tags=ye.target.value.split(",").map(xe=>xe.trim()).filter(Boolean)}),f(w,G)},$$slots:{default:!0}})}V(()=>A(j,`${t(s).length??""} senaryo`)),f(e,T),Ee()}Re(["input"]);var tu=k('<div class="faq-actions svelte-16g8l1g"><!> <!></div>'),au=k('<div class="faq-card svelte-16g8l1g"><div class="faq-q svelte-16g8l1g"><strong>S:</strong> </div> <div class="faq-a svelte-16g8l1g"><strong>C:</strong> </div> <div class="faq-footer svelte-16g8l1g"><!> <!></div></div>'),su=k('<div class="empty svelte-16g8l1g">FAQ onerisi yok</div>'),ru=k('<div class="faq-list svelte-16g8l1g"></div>'),lu=k('<div class="page-header svelte-16g8l1g"><div><h1 class="svelte-16g8l1g">FAQ Onerileri</h1><p class="svelte-16g8l1g">Otomatik uretilen SSS onerileri</p></div> <div class="actions svelte-16g8l1g"><!> <!></div></div> <!>',1);function iu(e,a){ze(a,!0);let r=B(!0),s=B($e([]));Be(()=>n());async function n(){g(r,!0);try{const h=await X.get("admin/auto-faq");g(s,h.items||h.faqs||h||[],!0)}catch(h){L("FAQ yuklenemedi: "+h.message,"error")}finally{g(r,!1)}}async function o(h){try{await X.post("admin/auto-faq/"+h+"/approve"),L("Onaylandi","success"),await n()}catch(b){L("Hata: "+b.message,"error")}}async function v(h){try{await X.post("admin/auto-faq/"+h+"/reject"),L("Reddedildi","info"),await n()}catch(b){L("Hata: "+b.message,"error")}}async function u(){try{await X.post("admin/auto-faq/generate"),L("FAQ uretimi basladi","info"),setTimeout(n,3e3)}catch(h){L("Hata: "+h.message,"error")}}var c=lu(),d=de(c),m=i(l(d),2),_=l(m);ee(_,{onclick:u,variant:"secondary",size:"sm",children:(h,b)=>{var E=U("Yeni Uret");f(h,E)},$$slots:{default:!0}});var x=i(_,2);ee(x,{onclick:n,variant:"ghost",size:"sm",children:(h,b)=>{var E=U("Yenile");f(h,E)},$$slots:{default:!0}});var y=i(d,2);{var p=h=>{He(h,{message:"Yukleniyor..."})},$=h=>{var b=ru();Se(b,21,()=>t(s),Te,(E,P)=>{var T=au(),M=l(T),I=i(l(M)),D=i(M,2),j=i(l(D)),K=i(D,2),z=l(K);{let Z=ne(()=>t(P).status==="approved"?"green":t(P).status==="rejected"?"red":"yellow");We(z,{get variant(){return t(Z)},children:(F,W)=>{var H=U();V(()=>A(H,t(P).status||"bekliyor")),f(F,H)},$$slots:{default:!0}})}var S=i(z,2);{var N=Z=>{var F=tu(),W=l(F);ee(W,{onclick:()=>o(t(P).id||t(P)._id),variant:"primary",size:"sm",children:(J,Q)=>{var C=U("Onayla");f(J,C)},$$slots:{default:!0}});var H=i(W,2);ee(H,{onclick:()=>v(t(P).id||t(P)._id),variant:"ghost",size:"sm",children:(J,Q)=>{var C=U("Reddet");f(J,C)},$$slots:{default:!0}}),f(Z,F)};ae(S,Z=>{(!t(P).status||t(P).status==="pending")&&Z(N)})}V(()=>{A(I,` ${t(P).question??""}`),A(j,` ${t(P).answer??""}`)}),f(E,T)},E=>{var P=su();f(E,P)}),f(h,b)};ae(y,h=>{t(r)?h(p):h($,!1)})}f(e,c),Ee()}var nu=k('<div class="kpi-grid svelte-vlvkti"><!> <!> <!> <!></div>'),ou=k('<tr><td class="svelte-vlvkti"><span> </span></td><td class="svelte-vlvkti"> </td><td class="mono svelte-vlvkti"> </td></tr>'),vu=k('<div class="card svelte-vlvkti"><h2 class="svelte-vlvkti">Son Geri Bildirimler</h2> <table class="svelte-vlvkti"><thead><tr><th class="svelte-vlvkti">Puan</th><th class="svelte-vlvkti">Yorum</th><th class="svelte-vlvkti">Oturum</th></tr></thead><tbody></tbody></table></div>'),du=k("<!> <!>",1),cu=k('<div class="page-header svelte-vlvkti"><div><h1 class="svelte-vlvkti">Feedback Raporu</h1><p class="svelte-vlvkti">Kullanici geri bildirimleri</p></div> <select class="select svelte-vlvkti"><option>7 Gun</option><option>30 Gun</option><option>90 Gun</option></select></div> <!>',1);function uu(e,a){ze(a,!0);let r=B(!0),s=B(null),n=B($e([])),o=B(30);Be(()=>v());async function v(){g(r,!0);try{const[h,b]=await Promise.all([X.get("admin/feedback-report?days="+t(o)),X.get("admin/feedback").catch(()=>({feedbacks:[]}))]);g(s,h,!0),g(n,b.feedbacks||b||[],!0)}catch(h){L("Feedback yuklenemedi: "+h.message,"error")}finally{g(r,!1)}}var u=cu(),c=de(u),d=i(l(c),2),m=l(d);m.value=m.__value=7;var _=i(m);_.value=_.__value=30;var x=i(_);x.value=x.__value=90;var y=i(c,2);{var p=h=>{He(h,{message:"Yukleniyor..."})},$=h=>{var b=du(),E=de(b);{var P=I=>{var D=nu(),j=l(D);{let N=ne(()=>t(s).totalFeedbacks??t(s).total??0);bt(j,{label:"Toplam Feedback",get value(){return t(N)}})}var K=i(j,2);{let N=ne(()=>(t(s).avgCsat??0).toFixed(1)+"/5");bt(K,{label:"Ort. CSAT",get value(){return t(N)}})}var z=i(K,2);{let N=ne(()=>t(s).positive??0);bt(z,{label:"Pozitif",get value(){return t(N)},color:"var(--success)"})}var S=i(z,2);{let N=ne(()=>t(s).negative??0);bt(S,{label:"Negatif",get value(){return t(N)},color:"var(--error)"})}f(I,D)};ae(E,I=>{t(s)&&I(P)})}var T=i(E,2);{var M=I=>{var D=vu(),j=i(l(D),2),K=i(l(j));Se(K,21,()=>t(n).slice(0,20),Te,(z,S)=>{var N=ou(),Z=l(N),F=l(Z);let W;var H=l(F),J=i(Z),Q=l(J),C=i(J),w=l(C);V(Y=>{W=Fe(F,1,"rating svelte-vlvkti",null,W,{good:t(S).rating>=4,bad:t(S).rating<=2}),A(H,`${t(S).rating??""}/5`),A(Q,t(S).comment||"-"),A(w,Y)},[()=>{var Y;return((Y=t(S).sessionId)==null?void 0:Y.slice(-8))||"-"}]),f(z,N)}),f(I,D)};ae(T,I=>{t(n).length&&I(M)})}f(h,b)};ae(y,h=>{t(r)?h(p):h($,!1)})}be("change",d,v),ja(d,()=>t(o),h=>g(o,h)),f(e,u),Ee()}Re(["change"]);var fu=k('<tr><td class="svelte-1vhi8r1"> </td><td class="svelte-1vhi8r1"> </td><td class="svelte-1vhi8r1"> </td></tr>'),hu=k('<tr><td colspan="3" class="empty-row svelte-1vhi8r1">Content gap yok</td></tr>'),pu=k('<div class="card svelte-1vhi8r1"><table class="svelte-1vhi8r1"><thead><tr><th class="svelte-1vhi8r1">Soru</th><th class="svelte-1vhi8r1">Sayi</th><th class="svelte-1vhi8r1">Son Gorulme</th></tr></thead><tbody></tbody></table></div>'),_u=k('<div class="page-header svelte-1vhi8r1"><div><h1 class="svelte-1vhi8r1">Content Gaps</h1><p class="svelte-1vhi8r1">Cevaplanamayan sorular</p></div> <!></div> <!>',1);function mu(e,a){ze(a,!0);let r=B(!0),s=B($e([]));Be(()=>n());async function n(){g(r,!0);try{const _=await X.get("admin/content-gaps");g(s,_.gaps||_||[],!0)}catch(_){L("Content gaps yuklenemedi: "+_.message,"error")}finally{g(r,!1)}}var o=_u(),v=de(o),u=i(l(v),2);ee(u,{onclick:n,variant:"ghost",size:"sm",children:(_,x)=>{var y=U("Yenile");f(_,y)},$$slots:{default:!0}});var c=i(v,2);{var d=_=>{He(_,{message:"Yukleniyor..."})},m=_=>{var x=pu(),y=l(x),p=i(l(y));Se(p,21,()=>t(s),Te,($,h)=>{var b=fu(),E=l(b),P=l(E),T=i(E),M=l(T),I=i(T),D=l(I);V(j=>{A(P,j),A(M,t(h).count||t(h).frequency||0),A(D,t(h).lastSeen||"-")},[()=>bs(t(h).question||t(h).query||"",80)]),f($,b)},$=>{var h=hu();f($,h)}),f(_,x)};ae(c,_=>{t(r)?_(d):_(m,!1)})}f(e,o),Ee()}var gu=k('<div class="detail svelte-heq1fv"><!> <div class="version-card svelte-heq1fv"><div class="version-header svelte-heq1fv"><div><h2 class="svelte-heq1fv"> </h2> <p class="meta svelte-heq1fv"> </p></div> <!></div> <pre class="content-pre svelte-heq1fv"> </pre></div></div>'),yu=k('<tr><td class="svelte-heq1fv"> </td><td class="svelte-heq1fv"> </td><td class="action-col svelte-heq1fv"><!> <!></td></tr>'),bu=k('<tr><td colspan="3" class="empty-row svelte-heq1fv">Versiyon yok</td></tr>'),wu=k('<div class="card svelte-heq1fv"><table class="svelte-heq1fv"><thead><tr><th class="svelte-heq1fv">Dosya</th><th class="svelte-heq1fv">Tarih</th><th class="svelte-heq1fv"></th></tr></thead><tbody></tbody></table></div>'),ku=k('<div class="page-header svelte-heq1fv"><div><h1 class="svelte-heq1fv">Prompt Gecmisi</h1><p class="svelte-heq1fv">Prompt versiyon gecmisi</p></div> <!></div> <!>',1);function xu(e,a){ze(a,!0);let r=B(!0),s=B($e([])),n=B(null);Be(()=>o());async function o(){g(r,!0);try{const p=await X.get("admin/prompt-versions");g(s,p.versions||p||[],!0)}catch(p){L("Prompt versiyonlari yuklenemedi: "+p.message,"error")}finally{g(r,!1)}}async function v(p){if(confirm(`"${p.filename||p.file}" dosyasini bu versiyona geri almak istediginize emin misiniz?`))try{await X.post("admin/prompt-versions/"+(p.id||p._id)+"/rollback"),L("Geri alindi: "+(p.filename||p.file),"success"),g(n,null),await o()}catch($){L("Geri alma hatasi: "+$.message,"error")}}var u=ku(),c=de(u),d=i(l(c),2);ee(d,{onclick:o,variant:"ghost",size:"sm",children:(p,$)=>{var h=U("Yenile");f(p,h)},$$slots:{default:!0}});var m=i(c,2);{var _=p=>{He(p,{message:"Yukleniyor..."})},x=p=>{var $=gu(),h=l($);ee(h,{onclick:()=>g(n,null),variant:"ghost",size:"sm",children:(S,N)=>{var Z=U("â Geri");f(S,Z)},$$slots:{default:!0}});var b=i(h,2),E=l(b),P=l(E),T=l(P),M=l(T),I=i(T,2),D=l(I),j=i(P,2);ee(j,{onclick:()=>v(t(n)),variant:"danger",size:"sm",children:(S,N)=>{var Z=U("Geri Al");f(S,Z)},$$slots:{default:!0}});var K=i(E,2),z=l(K);V(S=>{A(M,t(n).filename||t(n).file),A(D,S),A(z,t(n).content||"")},[()=>oa(t(n).savedAt||t(n).createdAt)]),f(p,$)},y=p=>{var $=wu(),h=l($),b=i(l(h));Se(b,21,()=>t(s),Te,(E,P)=>{var T=yu(),M=l(T),I=l(M),D=i(M),j=l(D),K=i(D),z=l(K);ee(z,{onclick:()=>g(n,t(P),!0),variant:"ghost",size:"sm",children:(N,Z)=>{var F=U("Goruntule");f(N,F)},$$slots:{default:!0}});var S=i(z,2);ee(S,{onclick:()=>v(t(P)),variant:"danger",size:"sm",children:(N,Z)=>{var F=U("Geri Al");f(N,F)},$$slots:{default:!0}}),V(N=>{A(I,t(P).filename||t(P).file),A(j,N)},[()=>oa(t(P).savedAt||t(P).createdAt)]),f(E,T)},E=>{var P=bu();f(E,P)}),f(p,$)};ae(m,p=>{t(r)?p(_):t(n)?p(x,1):p(y,!1)})}f(e,u),Ee()}var $u=k('<div class="card svelte-r56qw2"><h2 class="svelte-r56qw2">Sistem</h2> <div class="info-rows svelte-r56qw2"><div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Durum</span><!></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Uptime</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Node</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Bellek</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">LLM</span><!></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Embedding</span><!></div></div></div>'),qu=k('<div class="card svelte-r56qw2"><h2 class="svelte-r56qw2">SLA</h2> <div class="info-rows svelte-r56qw2"><div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Ort. Yanit Suresi</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Uptime</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Basari Orani</span><span class="svelte-r56qw2"> </span></div></div></div>'),zu=k('<tr><td class="svelte-r56qw2"> </td><td class="svelte-r56qw2"><!></td><td class="svelte-r56qw2"> </td></tr>'),Eu=k('<div class="card audit-card svelte-r56qw2"><h2 class="svelte-r56qw2">Denetim Kaydi</h2> <table class="svelte-r56qw2"><thead><tr><th class="svelte-r56qw2">Zaman</th><th class="svelte-r56qw2">Islem</th><th class="svelte-r56qw2">Detay</th></tr></thead><tbody></tbody></table></div>'),Su=k('<div class="status-grid svelte-r56qw2"><!> <!></div> <!>',1),Au=k('<div class="page-header svelte-r56qw2"><div><h1 class="svelte-r56qw2">Sistem Durumu</h1><p class="svelte-r56qw2">Sistem sagligi ve denetim</p></div> <!></div> <!>',1);function Pu(e,a){ze(a,!0);let r=B(!0),s=B(null),n=B(null),o=B($e([]));Be(()=>v());async function v(){g(r,!0);try{const[p,$,h]=await Promise.all([X.get("admin/system"),X.get("admin/sla").catch(()=>null),X.get("admin/audit-log").catch(()=>({log:[]}))]);g(s,p,!0),g(n,$,!0),g(o,h.log||h||[],!0)}catch(p){L("Sistem durumu yuklenemedi: "+p.message,"error")}finally{g(r,!1)}}async function u(){try{g(s,await X.get("admin/system?forceCheck=1"),!0),L("Kontrol tamamlandi","success")}catch(p){L("Hata: "+p.message,"error")}}var c=Au(),d=de(c),m=i(l(d),2);ee(m,{onclick:u,variant:"secondary",size:"sm",children:(p,$)=>{var h=U("Kontrol Et");f(p,h)},$$slots:{default:!0}});var _=i(d,2);{var x=p=>{He(p,{message:"Yukleniyor..."})},y=p=>{var $=Su(),h=de($),b=l(h);{var E=D=>{var j=$u(),K=i(l(j),2),z=l(K),S=i(l(z));{let q=ne(()=>t(s).status==="ok"||t(s).healthy?"green":"red");We(S,{get variant(){return t(q)},children:(le,ie)=>{var ce=U();V(()=>A(ce,t(s).status||(t(s).healthy?"saglikli":"sorunlu"))),f(le,ce)},$$slots:{default:!0}})}var N=i(z,2),Z=i(l(N)),F=l(Z),W=i(N,2),H=i(l(W)),J=l(H),Q=i(W,2),C=i(l(Q)),w=l(C),Y=i(Q,2),G=i(l(Y));{let q=ne(()=>t(s).llmStatus==="ok"?"green":"yellow");We(G,{get variant(){return t(q)},children:(le,ie)=>{var ce=U();V(()=>A(ce,t(s).llmStatus||t(s).llm||"-")),f(le,ce)},$$slots:{default:!0}})}var te=i(Y,2),re=i(l(te));{let q=ne(()=>t(s).embeddingStatus==="ok"?"green":"yellow");We(re,{get variant(){return t(q)},children:(le,ie)=>{var ce=U();V(()=>A(ce,t(s).embeddingStatus||"-")),f(le,ce)},$$slots:{default:!0}})}V(()=>{A(F,t(s).uptime||"-"),A(J,t(s).nodeVersion||"-"),A(w,t(s).memoryUsage||"-")}),f(D,j)};ae(b,D=>{t(s)&&D(E)})}var P=i(b,2);{var T=D=>{var j=qu(),K=i(l(j),2),z=l(K),S=i(l(z)),N=l(S),Z=i(z,2),F=i(l(Z)),W=l(F),H=i(Z,2),J=i(l(H)),Q=l(J);V(C=>{A(N,C),A(W,t(n).uptimePercent?t(n).uptimePercent+"%":"-"),A(Q,t(n).successRate?t(n).successRate+"%":"-")},[()=>t(n).avgResponseMs?(t(n).avgResponseMs/1e3).toFixed(1)+"s":"-"]),f(D,j)};ae(P,D=>{t(n)&&D(T)})}var M=i(h,2);{var I=D=>{var j=Eu(),K=i(l(j),2),z=i(l(K));Se(z,21,()=>t(o).slice(0,50),Te,(S,N)=>{var Z=zu(),F=l(Z),W=l(F),H=i(F),J=l(H);We(J,{variant:"blue",children:(w,Y)=>{var G=U();V(()=>A(G,t(N).action||t(N).type)),f(w,G)},$$slots:{default:!0}});var Q=i(H),C=l(Q);V(w=>{A(W,w),A(C,t(N).detail||t(N).message||"-")},[()=>oa(t(N).at||t(N).timestamp)]),f(S,Z)}),f(D,j)};ae(M,D=>{t(o).length&&D(I)})}f(p,$)};ae(_,p=>{t(r)?p(x):p(y,!1)})}f(e,c),Ee()}var Tu=k('<div class="login-page svelte-1n46o8q"><div class="login-card svelte-1n46o8q"><div class="login-logo svelte-1n46o8q">Q</div> <h2 class="svelte-1n46o8q">Qragy Admin</h2> <p class="svelte-1n46o8q">Devam etmek icin admin token girin.</p> <input type="password" class="login-input svelte-1n46o8q" placeholder="Admin Token"/> <button class="login-btn svelte-1n46o8q">Giris Yap</button></div></div>'),Cu=k('<div class="coming-soon svelte-1n46o8q"><div class="coming-soon-icon svelte-1n46o8q"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></svg></div> <h2 class="svelte-1n46o8q">Yapilandiriliyor</h2> <p class="svelte-1n46o8q"><strong> </strong> paneli henuz hazir degil.</p></div>'),Mu=k("<!> <!> <!>",1);function Iu(e,a){ze(a,!0);let r;Be(()=>{r=xo()}),Us(()=>{r==null||r()});let s=ne(Yr);var n=Mu(),o=de(n);{var v=_=>{var x=Tu(),y=l(x),p=i(l(y),6),$=i(p,2);be("keydown",p,h=>{h.key==="Enter"&&h.target.value.trim()&&(cl(h.target.value),window.location.reload())}),be("click",$,()=>{const h=document.querySelector(".login-input");h!=null&&h.value.trim()&&(cl(h.value),window.location.reload())}),f(_,x)},u=ne(()=>!Sa()),c=_=>{Oo(_,{children:(x,y)=>{var p=ls(),$=de(p);{var h=q=>{nv(q,{})},b=q=>{xv(q,{})},E=q=>{Cv(q,{})},P=q=>{Hv(q,{})},T=q=>{ed(q,{})},M=q=>{dd(q,{})},I=q=>{xd(q,{})},D=q=>{Od(q,{})},j=q=>{Ld(q)},K=q=>{Gd(q,{})},z=q=>{Zd(q,{})},S=q=>{tc(q,{})},N=q=>{rc(q,{})},Z=q=>{cc(q,{})},F=q=>{gc(q,{})},W=q=>{qc(q,{})},H=q=>{Ic(q,{})},J=q=>{Rc(q,{})},Q=q=>{eu(q,{})},C=q=>{iu(q,{})},w=q=>{uu(q,{})},Y=q=>{mu(q,{})},G=q=>{xu(q,{})},te=q=>{Pu(q,{})},re=q=>{var le=Cu(),ie=i(l(le),4),ce=l(ie),me=l(ce);V(()=>A(me,t(s))),f(q,le)};ae($,q=>{t(s)==="dashboard"?q(h):t(s)==="live-chats"?q(b,1):t(s)==="closed-chats"?q(E,2):t(s)==="search"?q(P,3):t(s)==="agent-inbox"?q(T,4):t(s)==="knowledge-base"?q(M,5):t(s)==="topics"?q(I,6):t(s)==="bot-settings"?q(D,7):t(s)==="bot-test"?q(j,8):t(s)==="chat-flow"?q(K,9):t(s)==="site-settings"?q(z,10):t(s)==="zendesk"?q(S,11):t(s)==="whatsapp"?q(N,12):t(s)==="webhooks"?q(Z,13):t(s)==="env-vars"?q(F,14):t(s)==="agent-files"?q(W,15):t(s)==="memory-templates"?q(H,16):t(s)==="analytics"?q(J,17):t(s)==="eval"?q(Q,18):t(s)==="faq-suggestions"?q(C,19):t(s)==="feedback"?q(w,20):t(s)==="content-gaps"?q(Y,21):t(s)==="prompt-history"?q(G,22):t(s)==="system-status"?q(te,23):q(re,!1)})}f(x,p)},$$slots:{default:!0}})};ae(o,_=>{t(u)?_(v):_(c,!1)})}var d=i(o,2);Lo(d,{});var m=i(d,2);Go(m,{}),f(e,n),Ee()}Re(["keydown","click"]);so(Iu,{target:document.getElementById("app")});window.__ADMIN_V2__="2.1";
