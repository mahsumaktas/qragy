var li=Object.defineProperty;var qr=e=>{throw TypeError(e)};var ii=(e,t,s)=>t in e?li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var gt=(e,t,s)=>ii(e,typeof t!="symbol"?t+"":t,s),Ms=(e,t,s)=>t.has(e)||qr("Cannot "+s);var O=(e,t,s)=>(Ms(e,t,"read from private field"),s?s.call(e):t.get(e)),$e=(e,t,s)=>t.has(e)?qr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),we=(e,t,s,r)=>(Ms(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),Oe=(e,t,s)=>(Ms(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const v of i.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&r(v)}).observe(document,{childList:!0,subtree:!0});function s(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=s(l);fetch(l.href,i)}})();const Bs=!1;var lr=Array.isArray,ni=Array.prototype.indexOf,Ca=Array.prototype.includes,Ts=Array.from,oi=Object.defineProperty,xa=Object.getOwnPropertyDescriptor,Ur=Object.getOwnPropertyDescriptors,vi=Object.prototype,di=Array.prototype,ir=Object.getPrototypeOf,zr=Object.isExtensible;const ci=()=>{};function ui(e){return e()}function Ns(e){for(var t=0;t<e.length;t++)e[t]()}function Gr(){var e,t,s=new Promise((r,l)=>{e=r,t=l});return{promise:s,resolve:e,reject:t}}function nr(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const s=[];for(const r of e)if(s.push(r),s.length===t)break;return s}const He=2,Ra=4,ja=8,Vr=1<<24,Vt=16,mt=32,fa=64,Rs=128,ot=512,Be=1024,Le=2048,_t=4096,st=8192,At=16384,Ha=32768,va=65536,Sr=1<<17,fi=1<<18,La=1<<19,Wr=1<<20,Et=1<<25,da=65536,Hs=1<<21,or=1<<22,Lt=1<<23,Pt=Symbol("$state"),hi=Symbol("legacy props"),pi=Symbol(""),Jt=new class extends Error{constructor(){super(...arguments);gt(this,"name","StaleReactionError");gt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var Lr;const _i=!!((Lr=globalThis.document)!=null&&Lr.contentType)&&globalThis.document.contentType.includes("xml");function Qr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function mi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function gi(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function yi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function wi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function bi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ki(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function $i(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Si(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ei=1,Ti=2,Zr=4,Ai=8,Pi=16,Ci=1,ji=2,Mi=4,Ii=8,Oi=16,Di=1,Ki=2,Ne=Symbol(),Jr="http://www.w3.org/1999/xhtml",Bi="http://www.w3.org/2000/svg",Ni="http://www.w3.org/1998/Math/MathML";function Ri(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Hi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Xr(e){return e===this.v}function Li(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function el(e){return!Li(e,this.v)}let Fa=!1,Fi=!1;function Yi(){Fa=!0}let Ce=null;function Ma(e){Ce=e}function ge(e,t=!1,s){Ce={p:Ce,i:!1,c:null,e:null,s:e,x:null,l:Fa&&!t?{s:null,u:null,$:[]}:null}}function ye(e){var t=Ce,s=t.e;if(s!==null){t.e=null;for(var r of s)wl(r)}return t.i=!0,Ce=t.p,{}}function ds(){return!Fa||Ce!==null&&Ce.l===null}let Xt=[];function tl(){var e=Xt;Xt=[],Ns(e)}function Ct(e){if(Xt.length===0&&!Ja){var t=Xt;queueMicrotask(()=>{t===Xt&&tl()})}Xt.push(e)}function Ui(){for(;Xt.length>0;)tl()}function al(e){var t=ze;if(t===null)return xe.f|=Lt,e;if((t.f&Ha)===0&&(t.f&Ra)===0)throw e;Ht(e,t)}function Ht(e,t){for(;t!==null;){if((t.f&Rs)!==0){if((t.f&Ha)===0)throw e;try{t.b.error(e);return}catch(s){e=s}}t=t.parent}throw e}const Gi=-7169;function Me(e,t){e.f=e.f&Gi|t}function vr(e){(e.f&ot)!==0||e.deps===null?Me(e,Be):Me(e,_t)}function sl(e){if(e!==null)for(const t of e)(t.f&He)===0||(t.f&da)===0||(t.f^=da,sl(t.deps))}function rl(e,t,s){(e.f&Le)!==0?t.add(e):(e.f&_t)!==0&&s.add(e),sl(e.deps),Me(e,Be)}const ms=new Set;let _e=null,qs=null,Re=null,Ge=[],As=null,Ja=!1,Ia=null;var Bt,$a,aa,qa,za,Sa,Nt,yt,Ea,Qe,Ls,Fs,Ys,Us;const br=class br{constructor(){$e(this,Qe);gt(this,"current",new Map);gt(this,"previous",new Map);$e(this,Bt,new Set);$e(this,$a,new Set);$e(this,aa,0);$e(this,qa,0);$e(this,za,null);$e(this,Sa,new Set);$e(this,Nt,new Set);$e(this,yt,new Map);gt(this,"is_fork",!1);$e(this,Ea,!1)}skip_effect(t){O(this,yt).has(t)||O(this,yt).set(t,{d:[],m:[]})}unskip_effect(t){var s=O(this,yt).get(t);if(s){O(this,yt).delete(t);for(var r of s.d)Me(r,Le),ht(r);for(r of s.m)Me(r,_t),ht(r)}}process(t){var l;Ge=[],this.apply();var s=Ia=[],r=[];for(const i of t)Oe(this,Qe,Fs).call(this,i,s,r);if(Ia=null,Oe(this,Qe,Ls).call(this)){Oe(this,Qe,Ys).call(this,r),Oe(this,Qe,Ys).call(this,s);for(const[i,v]of O(this,yt))ol(i,v)}else{qs=this,_e=null;for(const i of O(this,Bt))i(this);O(this,Bt).clear(),O(this,aa)===0&&Oe(this,Qe,Us).call(this),Er(r),Er(s),O(this,Sa).clear(),O(this,Nt).clear(),qs=null,(l=O(this,za))==null||l.resolve()}Re=null}capture(t,s){s!==Ne&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&Lt)===0&&(this.current.set(t,t.v),Re==null||Re.set(t,t.v))}activate(){_e=this,this.apply()}deactivate(){_e===this&&(_e=null,Re=null)}flush(){var t;if(Ge.length>0)_e=this,ll();else if(O(this,aa)===0&&!this.is_fork){for(const s of O(this,Bt))s(this);O(this,Bt).clear(),Oe(this,Qe,Us).call(this),(t=O(this,za))==null||t.resolve()}this.deactivate()}discard(){for(const t of O(this,$a))t(this);O(this,$a).clear()}increment(t){we(this,aa,O(this,aa)+1),t&&we(this,qa,O(this,qa)+1)}decrement(t){we(this,aa,O(this,aa)-1),t&&we(this,qa,O(this,qa)-1),!O(this,Ea)&&(we(this,Ea,!0),Ct(()=>{we(this,Ea,!1),Oe(this,Qe,Ls).call(this)?Ge.length>0&&this.flush():this.revive()}))}revive(){for(const t of O(this,Sa))O(this,Nt).delete(t),Me(t,Le),ht(t);for(const t of O(this,Nt))Me(t,_t),ht(t);this.flush()}oncommit(t){O(this,Bt).add(t)}ondiscard(t){O(this,$a).add(t)}settled(){return(O(this,za)??we(this,za,Gr())).promise}static ensure(){if(_e===null){const t=_e=new br;ms.add(_e),Ja||Ct(()=>{_e===t&&t.flush()})}return _e}apply(){}};Bt=new WeakMap,$a=new WeakMap,aa=new WeakMap,qa=new WeakMap,za=new WeakMap,Sa=new WeakMap,Nt=new WeakMap,yt=new WeakMap,Ea=new WeakMap,Qe=new WeakSet,Ls=function(){return this.is_fork||O(this,qa)>0},Fs=function(t,s,r){t.f^=Be;for(var l=t.first;l!==null;){var i=l.f,v=(i&(mt|fa))!==0,d=v&&(i&Be)!==0,c=d||(i&st)!==0||O(this,yt).has(l);if(!c&&l.fn!==null){v?l.f^=Be:(i&Ra)!==0?s.push(l):fs(l)&&((i&Vt)!==0&&O(this,Nt).add(l),Da(l));var u=l.first;if(u!==null){l=u;continue}}for(;l!==null;){var h=l.next;if(h!==null){l=h;break}l=l.parent}}},Ys=function(t){for(var s=0;s<t.length;s+=1)rl(t[s],O(this,Sa),O(this,Nt))},Us=function(){var i;if(ms.size>1){this.previous.clear();var t=_e,s=Re,r=!0;for(const v of ms){if(v===this){r=!1;continue}const d=[];for(const[u,h]of this.current){if(v.current.has(u))if(r&&h!==v.current.get(u))v.current.set(u,h);else continue;d.push(u)}if(d.length===0)continue;const c=[...v.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var l=Ge;Ge=[];const u=new Set,h=new Map;for(const p of d)il(p,c,u,h);if(Ge.length>0){_e=v,v.apply();for(const p of Ge)Oe(i=v,Qe,Fs).call(i,p,[],[]);v.deactivate()}Ge=l}}_e=t,Re=s}O(this,yt).clear(),ms.delete(this)};let Ft=br;function Vi(e){var t=Ja;Ja=!0;try{for(var s;;){if(Ui(),Ge.length===0&&(_e==null||_e.flush(),Ge.length===0))return As=null,s;ll()}}finally{Ja=t}}function ll(){var e=null;try{for(var t=0;Ge.length>0;){var s=Ft.ensure();if(t++>1e3){var r,l;Wi()}s.process(Ge),Yt.clear()}}finally{Ge=[],As=null,Ia=null}}function Wi(){try{ki()}catch(e){Ht(e,As)}}let ct=null;function Er(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var r=e[s++];if((r.f&(At|st))===0&&fs(r)&&(ct=new Set,Da(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&$l(r),(ct==null?void 0:ct.size)>0)){Yt.clear();for(const l of ct){if((l.f&(At|st))!==0)continue;const i=[l];let v=l.parent;for(;v!==null;)ct.has(v)&&(ct.delete(v),i.push(v)),v=v.parent;for(let d=i.length-1;d>=0;d--){const c=i[d];(c.f&(At|st))===0&&Da(c)}}ct.clear()}}ct=null}}function il(e,t,s,r){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const l of e.reactions){const i=l.f;(i&He)!==0?il(l,t,s,r):(i&(or|Vt))!==0&&(i&Le)===0&&nl(l,t,r)&&(Me(l,Le),ht(l))}}function nl(e,t,s){const r=s.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const l of e.deps){if(Ca.call(t,l))return!0;if((l.f&He)!==0&&nl(l,t,s))return s.set(l,!0),!0}return s.set(e,!1),!1}function ht(e){var t=As=e,s=t.b;if(s!=null&&s.is_pending&&(e.f&(Ra|ja|Vr))!==0&&(e.f&Ha)===0){s.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var r=t.f;if(Ia!==null&&t===ze&&(e.f&ja)===0)return;if((r&(fa|mt))!==0){if((r&Be)===0)return;t.f^=Be}}Ge.push(t)}function ol(e,t){if(!((e.f&mt)!==0&&(e.f&Be)!==0)){(e.f&Le)!==0?t.d.push(e):(e.f&_t)!==0&&t.m.push(e),Me(e,Be);for(var s=e.first;s!==null;)ol(s,t),s=s.next}}function Qi(e){let t=0,s=ca(0),r;return()=>{ur()&&(a(s),hr(()=>(t===0&&(r=ha(()=>e(()=>Xa(s)))),t+=1,()=>{Ct(()=>{t-=1,t===0&&(r==null||r(),r=void 0,Xa(s))})})))}}var Zi=va|La;function Ji(e,t,s,r){new Xi(e,t,s,r)}var lt,rr,wt,sa,Ue,bt,tt,ut,zt,ra,Rt,Ta,Aa,Pa,St,Ss,De,en,tn,an,Gs,bs,ks,Vs;class Xi{constructor(t,s,r,l){$e(this,De);gt(this,"parent");gt(this,"is_pending",!1);gt(this,"transform_error");$e(this,lt);$e(this,rr,null);$e(this,wt);$e(this,sa);$e(this,Ue);$e(this,bt,null);$e(this,tt,null);$e(this,ut,null);$e(this,zt,null);$e(this,ra,0);$e(this,Rt,0);$e(this,Ta,!1);$e(this,Aa,new Set);$e(this,Pa,new Set);$e(this,St,null);$e(this,Ss,Qi(()=>(we(this,St,ca(O(this,ra))),()=>{we(this,St,null)})));var i;we(this,lt,t),we(this,wt,s),we(this,sa,v=>{var d=ze;d.b=this,d.f|=Rs,r(v)}),this.parent=ze.b,this.transform_error=l??((i=this.parent)==null?void 0:i.transform_error)??(v=>v),we(this,Ue,Cs(()=>{Oe(this,De,Gs).call(this)},Zi))}defer_effect(t){rl(t,O(this,Aa),O(this,Pa))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!O(this,wt).pending}update_pending_count(t){Oe(this,De,Vs).call(this,t),we(this,ra,O(this,ra)+t),!(!O(this,St)||O(this,Ta))&&(we(this,Ta,!0),Ct(()=>{we(this,Ta,!1),O(this,St)&&Oa(O(this,St),O(this,ra))}))}get_effect_pending(){return O(this,Ss).call(this),a(O(this,St))}error(t){var s=O(this,wt).onerror;let r=O(this,wt).failed;if(!s&&!r)throw t;O(this,bt)&&(We(O(this,bt)),we(this,bt,null)),O(this,tt)&&(We(O(this,tt)),we(this,tt,null)),O(this,ut)&&(We(O(this,ut)),we(this,ut,null));var l=!1,i=!1;const v=()=>{if(l){Hi();return}l=!0,i&&Si(),O(this,ut)!==null&&na(O(this,ut),()=>{we(this,ut,null)}),Oe(this,De,ks).call(this,()=>{Ft.ensure(),Oe(this,De,Gs).call(this)})},d=c=>{try{i=!0,s==null||s(c,v),i=!1}catch(u){Ht(u,O(this,Ue)&&O(this,Ue).parent)}r&&we(this,ut,Oe(this,De,ks).call(this,()=>{Ft.ensure();try{return it(()=>{var u=ze;u.b=this,u.f|=Rs,r(O(this,lt),()=>c,()=>v)})}catch(u){return Ht(u,O(this,Ue).parent),null}}))};Ct(()=>{var c;try{c=this.transform_error(t)}catch(u){Ht(u,O(this,Ue)&&O(this,Ue).parent);return}c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(d,u=>Ht(u,O(this,Ue)&&O(this,Ue).parent)):d(c)})}}lt=new WeakMap,rr=new WeakMap,wt=new WeakMap,sa=new WeakMap,Ue=new WeakMap,bt=new WeakMap,tt=new WeakMap,ut=new WeakMap,zt=new WeakMap,ra=new WeakMap,Rt=new WeakMap,Ta=new WeakMap,Aa=new WeakMap,Pa=new WeakMap,St=new WeakMap,Ss=new WeakMap,De=new WeakSet,en=function(){try{we(this,bt,it(()=>O(this,sa).call(this,O(this,lt))))}catch(t){this.error(t)}},tn=function(t){const s=O(this,wt).failed;s&&we(this,ut,it(()=>{s(O(this,lt),()=>t,()=>()=>{})}))},an=function(){const t=O(this,wt).pending;t&&(this.is_pending=!0,we(this,tt,it(()=>t(O(this,lt)))),Ct(()=>{var s=we(this,zt,document.createDocumentFragment()),r=jt();s.append(r),we(this,bt,Oe(this,De,ks).call(this,()=>(Ft.ensure(),it(()=>O(this,sa).call(this,r))))),O(this,Rt)===0&&(O(this,lt).before(s),we(this,zt,null),na(O(this,tt),()=>{we(this,tt,null)}),Oe(this,De,bs).call(this))}))},Gs=function(){try{if(this.is_pending=this.has_pending_snippet(),we(this,Rt,0),we(this,ra,0),we(this,bt,it(()=>{O(this,sa).call(this,O(this,lt))})),O(this,Rt)>0){var t=we(this,zt,document.createDocumentFragment());Sl(O(this,bt),t);const s=O(this,wt).pending;we(this,tt,it(()=>s(O(this,lt))))}else Oe(this,De,bs).call(this)}catch(s){this.error(s)}},bs=function(){this.is_pending=!1;for(const t of O(this,Aa))Me(t,Le),ht(t);for(const t of O(this,Pa))Me(t,_t),ht(t);O(this,Aa).clear(),O(this,Pa).clear()},ks=function(t){var s=ze,r=xe,l=Ce;xt(O(this,Ue)),dt(O(this,Ue)),Ma(O(this,Ue).ctx);try{return t()}catch(i){return al(i),null}finally{xt(s),dt(r),Ma(l)}},Vs=function(t){var s;if(!this.has_pending_snippet()){this.parent&&Oe(s=this.parent,De,Vs).call(s,t);return}we(this,Rt,O(this,Rt)+t),O(this,Rt)===0&&(Oe(this,De,bs).call(this),O(this,tt)&&na(O(this,tt),()=>{we(this,tt,null)}),O(this,zt)&&(O(this,lt).before(O(this,zt)),we(this,zt,null)))};function sn(e,t,s,r){const l=ds()?cs:dr;var i=e.filter(p=>!p.settled);if(s.length===0&&i.length===0){r(t.map(l));return}var v=ze,d=rn(),c=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(p=>p.promise)):null;function u(p){d();try{r(p)}catch(x){(v.f&At)===0&&Ht(x,v)}Ws()}if(s.length===0){c.then(()=>u(t.map(l)));return}function h(){d(),Promise.all(s.map(p=>nn(p))).then(p=>u([...t.map(l),...p])).catch(p=>Ht(p,v))}c?c.then(h):h()}function rn(){var e=ze,t=xe,s=Ce,r=_e;return function(i=!0){xt(e),dt(t),Ma(s),i&&(r==null||r.activate())}}function Ws(e=!0){xt(null),dt(null),Ma(null),e&&(_e==null||_e.deactivate())}function ln(){var e=ze.b,t=_e,s=e.is_rendered();return e.update_pending_count(1),t.increment(s),()=>{e.update_pending_count(-1),t.decrement(s)}}function cs(e){var t=He|Le,s=xe!==null&&(xe.f&He)!==0?xe:null;return ze!==null&&(ze.f|=La),{ctx:Ce,deps:null,effects:null,equals:Xr,f:t,fn:e,reactions:null,rv:0,v:Ne,wv:0,parent:s??ze,ac:null}}function nn(e,t,s){ze===null&&mi();var l=void 0,i=ca(Ne),v=!xe,d=new Map;return wn(()=>{var x;var c=Gr();l=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).finally(Ws)}catch(m){c.reject(m),Ws()}var u=_e;if(v){var h=ln();(x=d.get(u))==null||x.reject(Jt),d.delete(u),d.set(u,c)}const p=(m,_=void 0)=>{if(u.activate(),_)_!==Jt&&(i.f|=Lt,Oa(i,_));else{(i.f&Lt)!==0&&(i.f^=Lt),Oa(i,m);for(const[b,g]of d){if(d.delete(b),b===u)break;g.reject(Jt)}}h&&h()};c.promise.then(p,m=>p(null,m||"unknown"))}),fr(()=>{for(const c of d.values())c.reject(Jt)}),new Promise(c=>{function u(h){function p(){h===l?c(i):u(l)}h.then(p,p)}u(l)})}function oe(e){const t=cs(e);return El(t),t}function dr(e){const t=cs(e);return t.equals=el,t}function on(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)We(t[s])}}function vn(e){for(var t=e.parent;t!==null;){if((t.f&He)===0)return(t.f&At)===0?t:null;t=t.parent}return null}function cr(e){var t,s=ze;xt(vn(e));try{e.f&=~da,on(e),t=Cl(e)}finally{xt(s)}return t}function vl(e){var t=cr(e);if(!e.equals(t)&&(e.wv=Al(),(!(_e!=null&&_e.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Me(e,Be);return}Gt||(Re!==null?(ur()||_e!=null&&_e.is_fork)&&Re.set(e,t):vr(e))}function dn(e){var t,s;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(s=r.ac)==null||s.abort(Jt),r.teardown=ci,r.ac=null,rs(r,0),pr(r))}function dl(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&Da(t)}let Qs=new Set;const Yt=new Map;let cl=!1;function ca(e,t){var s={f:0,v:e,reactions:null,equals:Xr,rv:0,wv:0};return s}function B(e,t){const s=ca(e);return El(s),s}function cn(e,t=!1,s=!0){var l;const r=ca(e);return t||(r.equals=el),Fa&&s&&Ce!==null&&Ce.l!==null&&((l=Ce.l).s??(l.s=[])).push(r),r}function y(e,t,s=!1){xe!==null&&(!pt||(xe.f&Sr)!==0)&&ds()&&(xe.f&(He|Vt|or|Sr))!==0&&(vt===null||!Ca.call(vt,e))&&zi();let r=s?me(t):t;return Oa(e,r)}function Oa(e,t){if(!e.equals(t)){var s=e.v;Gt?Yt.set(e,t):Yt.set(e,s),e.v=t;var r=Ft.ensure();if(r.capture(e,s),(e.f&He)!==0){const l=e;(e.f&Le)!==0&&cr(l),vr(l)}e.wv=Al(),ul(e,Le),ds()&&ze!==null&&(ze.f&Be)!==0&&(ze.f&(mt|fa))===0&&(rt===null?kn([e]):rt.push(e)),!r.is_fork&&Qs.size>0&&!cl&&un()}return t}function un(){cl=!1;for(const e of Qs)(e.f&Be)!==0&&Me(e,_t),fs(e)&&Da(e);Qs.clear()}function Xa(e){y(e,e.v+1)}function ul(e,t){var s=e.reactions;if(s!==null)for(var r=ds(),l=s.length,i=0;i<l;i++){var v=s[i],d=v.f;if(!(!r&&v===ze)){var c=(d&Le)===0;if(c&&Me(v,t),(d&He)!==0){var u=v;Re==null||Re.delete(u),(d&da)===0&&(d&ot&&(v.f|=da),ul(u,_t))}else c&&((d&Vt)!==0&&ct!==null&&ct.add(v),ht(v))}}}function me(e){if(typeof e!="object"||e===null||Pt in e)return e;const t=ir(e);if(t!==vi&&t!==di)return e;var s=new Map,r=lr(e),l=B(0),i=oa,v=d=>{if(oa===i)return d();var c=xe,u=oa;dt(null),Cr(i);var h=d();return dt(c),Cr(u),h};return r&&s.set("length",B(e.length)),new Proxy(e,{defineProperty(d,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&$i();var h=s.get(c);return h===void 0?v(()=>{var p=B(u.value);return s.set(c,p),p}):y(h,u.value,!0),!0},deleteProperty(d,c){var u=s.get(c);if(u===void 0){if(c in d){const h=v(()=>B(Ne));s.set(c,h),Xa(l)}}else y(u,Ne),Xa(l);return!0},get(d,c,u){var m;if(c===Pt)return e;var h=s.get(c),p=c in d;if(h===void 0&&(!p||(m=xa(d,c))!=null&&m.writable)&&(h=v(()=>{var _=me(p?d[c]:Ne),b=B(_);return b}),s.set(c,h)),h!==void 0){var x=a(h);return x===Ne?void 0:x}return Reflect.get(d,c,u)},getOwnPropertyDescriptor(d,c){var u=Reflect.getOwnPropertyDescriptor(d,c);if(u&&"value"in u){var h=s.get(c);h&&(u.value=a(h))}else if(u===void 0){var p=s.get(c),x=p==null?void 0:p.v;if(p!==void 0&&x!==Ne)return{enumerable:!0,configurable:!0,value:x,writable:!0}}return u},has(d,c){var x;if(c===Pt)return!0;var u=s.get(c),h=u!==void 0&&u.v!==Ne||Reflect.has(d,c);if(u!==void 0||ze!==null&&(!h||(x=xa(d,c))!=null&&x.writable)){u===void 0&&(u=v(()=>{var m=h?me(d[c]):Ne,_=B(m);return _}),s.set(c,u));var p=a(u);if(p===Ne)return!1}return h},set(d,c,u,h){var j;var p=s.get(c),x=c in d;if(r&&c==="length")for(var m=u;m<p.v;m+=1){var _=s.get(m+"");_!==void 0?y(_,Ne):m in d&&(_=v(()=>B(Ne)),s.set(m+"",_))}if(p===void 0)(!x||(j=xa(d,c))!=null&&j.writable)&&(p=v(()=>B(void 0)),y(p,me(u)),s.set(c,p));else{x=p.v!==Ne;var b=v(()=>me(u));y(p,b)}var g=Reflect.getOwnPropertyDescriptor(d,c);if(g!=null&&g.set&&g.set.call(h,u),!x){if(r&&typeof c=="string"){var w=s.get("length"),P=Number(c);Number.isInteger(P)&&P>=w.v&&y(w,P+1)}Xa(l)}return!0},ownKeys(d){a(l);var c=Reflect.ownKeys(d).filter(p=>{var x=s.get(p);return x===void 0||x.v!==Ne});for(var[u,h]of s)h.v!==Ne&&!(u in d)&&c.push(u);return c},setPrototypeOf(){qi()}})}function Tr(e){try{if(e!==null&&typeof e=="object"&&Pt in e)return e[Pt]}catch{}return e}function fn(e,t){return Object.is(Tr(e),Tr(t))}var Zs,fl,hl,pl;function hn(){if(Zs===void 0){Zs=window,fl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;hl=xa(t,"firstChild").get,pl=xa(t,"nextSibling").get,zr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),zr(s)&&(s.__t=void 0)}}function jt(e=""){return document.createTextNode(e)}function ia(e){return hl.call(e)}function us(e){return pl.call(e)}function n(e,t){return ia(e)}function ve(e,t=!1){{var s=ia(e);return s instanceof Comment&&s.data===""?us(s):s}}function o(e,t=1,s=!1){let r=e;for(;t--;)r=us(r);return r}function pn(e){e.textContent=""}function _l(){return!1}function ml(e,t,s){return document.createElementNS(t??Jr,e,void 0)}let Ar=!1;function _n(){Ar||(Ar=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function Ps(e){var t=xe,s=ze;dt(null),xt(null);try{return e()}finally{dt(t),xt(s)}}function gl(e,t,s,r=s){e.addEventListener(t,()=>Ps(s));const l=e.__on_r;l?e.__on_r=()=>{l(),r(!0)}:e.__on_r=()=>r(!0),_n()}function yl(e){ze===null&&(xe===null&&bi(),wi()),Gt&&yi()}function mn(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function $t(e,t){var s=ze;s!==null&&(s.f&st)!==0&&(e|=st);var r={ctx:Ce,deps:null,nodes:null,f:e|Le|ot,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null},l=r;if((e&Ra)!==0)Ia!==null?Ia.push(r):ht(r);else if(t!==null){try{Da(r)}catch(v){throw We(r),v}l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&La)===0&&(l=l.first,(e&Vt)!==0&&(e&va)!==0&&l!==null&&(l.f|=va))}if(l!==null&&(l.parent=s,s!==null&&mn(l,s),xe!==null&&(xe.f&He)!==0&&(e&fa)===0)){var i=xe;(i.effects??(i.effects=[])).push(l)}return r}function ur(){return xe!==null&&!pt}function fr(e){const t=$t(ja,null);return Me(t,Be),t.teardown=e,t}function ss(e){yl();var t=ze.f,s=!xe&&(t&mt)!==0&&(t&Ha)===0;if(s){var r=Ce;(r.e??(r.e=[])).push(e)}else return wl(e)}function wl(e){return $t(Ra|Wr,e)}function gn(e){return yl(),$t(ja|Wr,e)}function yn(e){Ft.ensure();const t=$t(fa|La,e);return(s={})=>new Promise(r=>{s.outro?na(t,()=>{We(t),r(void 0)}):(We(t),r(void 0))})}function bl(e){return $t(Ra,e)}function wn(e){return $t(or|La,e)}function hr(e,t=0){return $t(ja|t,e)}function V(e,t=[],s=[],r=[]){sn(r,t,s,l=>{$t(ja,()=>e(...l.map(a)))})}function Cs(e,t=0){var s=$t(Vt|t,e);return s}function it(e){return $t(mt|La,e)}function kl(e){var t=e.teardown;if(t!==null){const s=Gt,r=xe;Pr(!0),dt(null);try{t.call(null)}finally{Pr(s),dt(r)}}}function pr(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const l=s.ac;l!==null&&Ps(()=>{l.abort(Jt)});var r=s.next;(s.f&fa)!==0?s.parent=null:We(s,t),s=r}}function bn(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&mt)===0&&We(t),t=s}}function We(e,t=!0){var s=!1;(t||(e.f&fi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(xl(e.nodes.start,e.nodes.end),s=!0),pr(e,t&&!s),rs(e,0),Me(e,At);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();kl(e);var l=e.parent;l!==null&&l.first!==null&&$l(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function xl(e,t){for(;e!==null;){var s=e===t?null:us(e);e.remove(),e=s}}function $l(e){var t=e.parent,s=e.prev,r=e.next;s!==null&&(s.next=r),r!==null&&(r.prev=s),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=s))}function na(e,t,s=!0){var r=[];ql(e,r,!0);var l=()=>{s&&We(e),t&&t()},i=r.length;if(i>0){var v=()=>--i||l();for(var d of r)d.out(v)}else l()}function ql(e,t,s){if((e.f&st)===0){e.f^=st;var r=e.nodes&&e.nodes.t;if(r!==null)for(const d of r)(d.is_global||s)&&t.push(d);for(var l=e.first;l!==null;){var i=l.next,v=(l.f&va)!==0||(l.f&mt)!==0&&(e.f&Vt)!==0;ql(l,t,v?s:!1),l=i}}}function _r(e){zl(e,!0)}function zl(e,t){if((e.f&st)!==0){e.f^=st,(e.f&Be)===0&&(Me(e,Le),ht(e));for(var s=e.first;s!==null;){var r=s.next,l=(s.f&va)!==0||(s.f&mt)!==0;zl(s,l?t:!1),s=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const v of i)(v.is_global||t)&&v.in()}}function Sl(e,t){if(e.nodes)for(var s=e.nodes.start,r=e.nodes.end;s!==null;){var l=s===r?null:us(s);t.append(s),s=l}}let xs=!1,Gt=!1;function Pr(e){Gt=e}let xe=null,pt=!1;function dt(e){xe=e}let ze=null;function xt(e){ze=e}let vt=null;function El(e){xe!==null&&(vt===null?vt=[e]:vt.push(e))}let Ve=null,et=0,rt=null;function kn(e){rt=e}let Tl=1,ea=0,oa=ea;function Cr(e){oa=e}function Al(){return++Tl}function fs(e){var t=e.f;if((t&Le)!==0)return!0;if(t&He&&(e.f&=~da),(t&_t)!==0){for(var s=e.deps,r=s.length,l=0;l<r;l++){var i=s[l];if(fs(i)&&vl(i),i.wv>e.wv)return!0}(t&ot)!==0&&Re===null&&Me(e,Be)}return!1}function Pl(e,t,s=!0){var r=e.reactions;if(r!==null&&!(vt!==null&&Ca.call(vt,e)))for(var l=0;l<r.length;l++){var i=r[l];(i.f&He)!==0?Pl(i,t,!1):t===i&&(s?Me(i,Le):(i.f&Be)!==0&&Me(i,_t),ht(i))}}function Cl(e){var b;var t=Ve,s=et,r=rt,l=xe,i=vt,v=Ce,d=pt,c=oa,u=e.f;Ve=null,et=0,rt=null,xe=(u&(mt|fa))===0?e:null,vt=null,Ma(e.ctx),pt=!1,oa=++ea,e.ac!==null&&(Ps(()=>{e.ac.abort(Jt)}),e.ac=null);try{e.f|=Hs;var h=e.fn,p=h();e.f|=Ha;var x=e.deps,m=_e==null?void 0:_e.is_fork;if(Ve!==null){var _;if(m||rs(e,et),x!==null&&et>0)for(x.length=et+Ve.length,_=0;_<Ve.length;_++)x[et+_]=Ve[_];else e.deps=x=Ve;if(ur()&&(e.f&ot)!==0)for(_=et;_<x.length;_++)((b=x[_]).reactions??(b.reactions=[])).push(e)}else!m&&x!==null&&et<x.length&&(rs(e,et),x.length=et);if(ds()&&rt!==null&&!pt&&x!==null&&(e.f&(He|_t|Le))===0)for(_=0;_<rt.length;_++)Pl(rt[_],e);if(l!==null&&l!==e){if(ea++,l.deps!==null)for(let g=0;g<s;g+=1)l.deps[g].rv=ea;if(t!==null)for(const g of t)g.rv=ea;rt!==null&&(r===null?r=rt:r.push(...rt))}return(e.f&Lt)!==0&&(e.f^=Lt),p}catch(g){return al(g)}finally{e.f^=Hs,Ve=t,et=s,rt=r,xe=l,vt=i,Ma(v),pt=d,oa=c}}function xn(e,t){let s=t.reactions;if(s!==null){var r=ni.call(s,e);if(r!==-1){var l=s.length-1;l===0?s=t.reactions=null:(s[r]=s[l],s.pop())}}if(s===null&&(t.f&He)!==0&&(Ve===null||!Ca.call(Ve,t))){var i=t;(i.f&ot)!==0&&(i.f^=ot,i.f&=~da),vr(i),dn(i),rs(i,0)}}function rs(e,t){var s=e.deps;if(s!==null)for(var r=t;r<s.length;r++)xn(e,s[r])}function Da(e){var t=e.f;if((t&At)===0){Me(e,Be);var s=ze,r=xs;ze=e,xs=!0;try{(t&(Vt|Vr))!==0?bn(e):pr(e),kl(e);var l=Cl(e);e.teardown=typeof l=="function"?l:null,e.wv=Tl;var i;Bs&&Fi&&(e.f&Le)!==0&&e.deps}finally{xs=r,ze=s}}}async function $n(){await Promise.resolve(),Vi()}function a(e){var t=e.f,s=(t&He)!==0;if(xe!==null&&!pt){var r=ze!==null&&(ze.f&At)!==0;if(!r&&(vt===null||!Ca.call(vt,e))){var l=xe.deps;if((xe.f&Hs)!==0)e.rv<ea&&(e.rv=ea,Ve===null&&l!==null&&l[et]===e?et++:Ve===null?Ve=[e]:Ve.push(e));else{(xe.deps??(xe.deps=[])).push(e);var i=e.reactions;i===null?e.reactions=[xe]:Ca.call(i,xe)||i.push(xe)}}}if(Gt&&Yt.has(e))return Yt.get(e);if(s){var v=e;if(Gt){var d=v.v;return((v.f&Be)===0&&v.reactions!==null||Ml(v))&&(d=cr(v)),Yt.set(v,d),d}var c=(v.f&ot)===0&&!pt&&xe!==null&&(xs||(xe.f&ot)!==0),u=(v.f&Ha)===0;fs(v)&&(c&&(v.f|=ot),vl(v)),c&&!u&&(dl(v),jl(v))}if(Re!=null&&Re.has(e))return Re.get(e);if((e.f&Lt)!==0)throw e.v;return e.v}function jl(e){if(e.f|=ot,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&He)!==0&&(t.f&ot)===0&&(dl(t),jl(t))}function Ml(e){if(e.v===Ne)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Yt.has(t)||(t.f&He)!==0&&Ml(t))return!0;return!1}function ha(e){var t=pt;try{return pt=!0,e()}finally{pt=t}}function qn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Pt in e)Js(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&Pt in s&&Js(s)}}}function Js(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Js(e[r],t)}catch{}const s=ir(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const r=Ur(s);for(let l in r){const i=r[l].get;if(i)try{i.call(e)}catch{}}}}}const zn=["touchstart","touchmove"];function Sn(e){return zn.includes(e)}const ta=Symbol("events"),Il=new Set,Xs=new Set;function En(e,t,s,r={}){function l(i){if(r.capture||er.call(t,i),!i.cancelBubble)return Ps(()=>s==null?void 0:s.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ct(()=>{t.addEventListener(e,l,r)}):t.addEventListener(e,l,r),l}function $s(e,t,s,r,l){var i={capture:r,passive:l},v=En(e,t,s,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&fr(()=>{t.removeEventListener(e,v,i)})}function pe(e,t,s){(t[ta]??(t[ta]={}))[e]=s}function Te(e){for(var t=0;t<e.length;t++)Il.add(e[t]);for(var s of Xs)s(e)}let jr=null;function er(e){var g,w;var t=this,s=t.ownerDocument,r=e.type,l=((g=e.composedPath)==null?void 0:g.call(e))||[],i=l[0]||e.target;jr=e;var v=0,d=jr===e&&e[ta];if(d){var c=l.indexOf(d);if(c!==-1&&(t===document||t===window)){e[ta]=t;return}var u=l.indexOf(t);if(u===-1)return;c<=u&&(v=c)}if(i=l[v]||e.target,i!==t){oi(e,"currentTarget",{configurable:!0,get(){return i||s}});var h=xe,p=ze;dt(null),xt(null);try{for(var x,m=[];i!==null;){var _=i.assignedSlot||i.parentNode||i.host||null;try{var b=(w=i[ta])==null?void 0:w[r];b!=null&&(!i.disabled||e.target===i)&&b.call(i,e)}catch(P){x?m.push(P):x=P}if(e.cancelBubble||_===t||_===null)break;i=_}if(x){for(let P of m)queueMicrotask(()=>{throw P});throw x}}finally{e[ta]=t,delete e.currentTarget,dt(h),xt(p)}}}var Fr;const Is=((Fr=globalThis==null?void 0:globalThis.window)==null?void 0:Fr.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Tn(e){return(Is==null?void 0:Is.createHTML(e))??e}function An(e){var t=ml("template");return t.innerHTML=Tn(e.replaceAll("<!>","<!---->")),t.content}function ls(e,t){var s=ze;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function k(e,t){var s=(t&Di)!==0,r=(t&Ki)!==0,l,i=!e.startsWith("<!>");return()=>{l===void 0&&(l=An(i?e:"<!>"+e),s||(l=ia(l)));var v=r||fl?document.importNode(l,!0):l.cloneNode(!0);if(s){var d=ia(v),c=v.lastChild;ls(d,c)}else ls(v,v);return v}}function Q(e=""){{var t=jt(e+"");return ls(t,t),t}}function Ya(){var e=document.createDocumentFragment(),t=document.createComment(""),s=jt();return e.append(t,s),ls(t,s),e}function f(e,t){e!==null&&e.before(t)}function A(e,t){var s=t==null?"":typeof t=="object"?`${t}`:t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=`${s}`)}function Pn(e,t){return Cn(e,t)}const gs=new Map;function Cn(e,{target:t,anchor:s,props:r={},events:l,context:i,intro:v=!0,transformError:d}){hn();var c=void 0,u=yn(()=>{var h=s??t.appendChild(jt());Ji(h,{pending:()=>{}},m=>{ge({});var _=Ce;i&&(_.c=i),l&&(r.$$events=l),c=e(m,r)||{},ye()},d);var p=new Set,x=m=>{for(var _=0;_<m.length;_++){var b=m[_];if(!p.has(b)){p.add(b);var g=Sn(b);for(const j of[t,document]){var w=gs.get(j);w===void 0&&(w=new Map,gs.set(j,w));var P=w.get(b);P===void 0?(j.addEventListener(b,er,{passive:g}),w.set(b,1)):w.set(b,P+1)}}}};return x(Ts(Il)),Xs.add(x),()=>{var g;for(var m of p)for(const w of[t,document]){var _=gs.get(w),b=_.get(m);--b==0?(w.removeEventListener(m,er),_.delete(m),_.size===0&&gs.delete(w)):_.set(m,b)}Xs.delete(x),h!==s&&((g=h.parentNode)==null||g.removeChild(h))}});return jn.set(c,u),c}let jn=new WeakMap;var ft,kt,at,la,os,vs,Es;class Ol{constructor(t,s=!0){gt(this,"anchor");$e(this,ft,new Map);$e(this,kt,new Map);$e(this,at,new Map);$e(this,la,new Set);$e(this,os,!0);$e(this,vs,t=>{if(O(this,ft).has(t)){var s=O(this,ft).get(t),r=O(this,kt).get(s);if(r)_r(r),O(this,la).delete(s);else{var l=O(this,at).get(s);l&&(O(this,kt).set(s,l.effect),O(this,at).delete(s),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),r=l.effect)}for(const[i,v]of O(this,ft)){if(O(this,ft).delete(i),i===t)break;const d=O(this,at).get(v);d&&(We(d.effect),O(this,at).delete(v))}for(const[i,v]of O(this,kt)){if(i===s||O(this,la).has(i))continue;const d=()=>{if(Array.from(O(this,ft).values()).includes(i)){var u=document.createDocumentFragment();Sl(v,u),u.append(jt()),O(this,at).set(i,{effect:v,fragment:u})}else We(v);O(this,la).delete(i),O(this,kt).delete(i)};O(this,os)||!r?(O(this,la).add(i),na(v,d,!1)):d()}}});$e(this,Es,t=>{O(this,ft).delete(t);const s=Array.from(O(this,ft).values());for(const[r,l]of O(this,at))s.includes(r)||(We(l.effect),O(this,at).delete(r))});this.anchor=t,we(this,os,s)}ensure(t,s){var r=_e,l=_l();if(s&&!O(this,kt).has(t)&&!O(this,at).has(t))if(l){var i=document.createDocumentFragment(),v=jt();i.append(v),O(this,at).set(t,{effect:it(()=>s(v)),fragment:i})}else O(this,kt).set(t,it(()=>s(this.anchor)));if(O(this,ft).set(r,t),l){for(const[d,c]of O(this,kt))d===t?r.unskip_effect(c):r.skip_effect(c);for(const[d,c]of O(this,at))d===t?r.unskip_effect(c.effect):r.skip_effect(c.effect);r.oncommit(O(this,vs)),r.ondiscard(O(this,Es))}else O(this,vs).call(this,r)}}ft=new WeakMap,kt=new WeakMap,at=new WeakMap,la=new WeakMap,os=new WeakMap,vs=new WeakMap,Es=new WeakMap;function ne(e,t,s=!1){var r=new Ol(e),l=s?va:0;function i(v,d){r.ensure(v,d)}Cs(()=>{var v=!1;t((d,c=0)=>{v=!0,i(c,d)}),v||i(!1,null)},l)}function qe(e,t){return t}function Mn(e,t,s){for(var r=[],l=t.length,i,v=t.length,d=0;d<l;d++){let p=t[d];na(p,()=>{if(i){if(i.pending.delete(p),i.done.add(p),i.pending.size===0){var x=e.outrogroups;tr(Ts(i.done)),x.delete(i),x.size===0&&(e.outrogroups=null)}}else v-=1},!1)}if(v===0){var c=r.length===0&&s!==null;if(c){var u=s,h=u.parentNode;pn(h),h.append(u),e.items.clear()}tr(t,!c)}else i={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(i)}function tr(e,t=!0){for(var s=0;s<e.length;s++)We(e[s],t)}var Mr;function ke(e,t,s,r,l,i=null){var v=e,d=new Map,c=(t&Zr)!==0;if(c){var u=e;v=u.appendChild(jt())}var h=null,p=dr(()=>{var w=s();return lr(w)?w:w==null?[]:Ts(w)}),x,m=!0;function _(){g.fallback=h,In(g,x,v,t,r),h!==null&&(x.length===0?(h.f&Et)===0?_r(h):(h.f^=Et,Za(h,null,v)):na(h,()=>{h=null}))}var b=Cs(()=>{x=a(p);for(var w=x.length,P=new Set,j=_e,C=_l(),q=0;q<w;q+=1){var E=x[q],K=r(E,q),I=m?null:d.get(K);I?(I.v&&Oa(I.v,E),I.i&&Oa(I.i,q),C&&j.unskip_effect(I.e)):(I=On(d,m?v:Mr??(Mr=jt()),E,K,q,l,t,s),m||(I.e.f|=Et),d.set(K,I)),P.add(K)}if(w===0&&i&&!h&&(m?h=it(()=>i(v)):(h=it(()=>i(Mr??(Mr=jt()))),h.f|=Et)),w>P.size&&gi(),!m)if(C){for(const[T,$]of d)P.has(T)||j.skip_effect($.e);j.oncommit(_),j.ondiscard(()=>{})}else _();a(p)}),g={effect:b,items:d,outrogroups:null,fallback:h};m=!1}function Qa(e){for(;e!==null&&(e.f&mt)===0;)e=e.next;return e}function In(e,t,s,r,l){var $,H,L,D,R,U,F,J,G;var i=(r&Ai)!==0,v=t.length,d=e.items,c=Qa(e.effect.first),u,h=null,p,x=[],m=[],_,b,g,w;if(i)for(w=0;w<v;w+=1)_=t[w],b=l(_,w),g=d.get(b).e,(g.f&Et)===0&&((H=($=g.nodes)==null?void 0:$.a)==null||H.measure(),(p??(p=new Set)).add(g));for(w=0;w<v;w+=1){if(_=t[w],b=l(_,w),g=d.get(b).e,e.outrogroups!==null)for(const z of e.outrogroups)z.pending.delete(g),z.done.delete(g);if((g.f&Et)!==0)if(g.f^=Et,g===c)Za(g,null,s);else{var P=h?h.next:c;g===e.effect.last&&(e.effect.last=g.prev),g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),Ot(e,h,g),Ot(e,g,P),Za(g,P,s),h=g,x=[],m=[],c=Qa(h.next);continue}if((g.f&st)!==0&&(_r(g),i&&((D=(L=g.nodes)==null?void 0:L.a)==null||D.unfix(),(p??(p=new Set)).delete(g))),g!==c){if(u!==void 0&&u.has(g)){if(x.length<m.length){var j=m[0],C;h=j.prev;var q=x[0],E=x[x.length-1];for(C=0;C<x.length;C+=1)Za(x[C],j,s);for(C=0;C<m.length;C+=1)u.delete(m[C]);Ot(e,q.prev,E.next),Ot(e,h,q),Ot(e,E,j),c=j,h=E,w-=1,x=[],m=[]}else u.delete(g),Za(g,c,s),Ot(e,g.prev,g.next),Ot(e,g,h===null?e.effect.first:h.next),Ot(e,h,g),h=g;continue}for(x=[],m=[];c!==null&&c!==g;)(u??(u=new Set)).add(c),m.push(c),c=Qa(c.next);if(c===null)continue}(g.f&Et)===0&&x.push(g),h=g,c=Qa(g.next)}if(e.outrogroups!==null){for(const z of e.outrogroups)z.pending.size===0&&(tr(Ts(z.done)),(R=e.outrogroups)==null||R.delete(z));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var K=[];if(u!==void 0)for(g of u)(g.f&st)===0&&K.push(g);for(;c!==null;)(c.f&st)===0&&c!==e.fallback&&K.push(c),c=Qa(c.next);var I=K.length;if(I>0){var T=(r&Zr)!==0&&v===0?s:null;if(i){for(w=0;w<I;w+=1)(F=(U=K[w].nodes)==null?void 0:U.a)==null||F.measure();for(w=0;w<I;w+=1)(G=(J=K[w].nodes)==null?void 0:J.a)==null||G.fix()}Mn(e,K,T)}}i&&Ct(()=>{var z,M;if(p!==void 0)for(g of p)(M=(z=g.nodes)==null?void 0:z.a)==null||M.apply()})}function On(e,t,s,r,l,i,v,d){var c=(v&Ei)!==0?(v&Pi)===0?cn(s,!1,!1):ca(s):null,u=(v&Ti)!==0?ca(l):null;return{v:c,i:u,e:it(()=>(i(t,c??s,u??l,d),()=>{e.delete(r)}))}}function Za(e,t,s){if(e.nodes)for(var r=e.nodes.start,l=e.nodes.end,i=t&&(t.f&Et)===0?t.nodes.start:s;r!==null;){var v=us(r);if(i.before(r),r===l)return;r=v}}function Ot(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function Dl(e,t,s=!1,r=!1,l=!1){var i=e,v="";V(()=>{var d=ze;if(v!==(v=t()??"")&&(d.nodes!==null&&(xl(d.nodes.start,d.nodes.end),d.nodes=null),v!=="")){var c=s?Bi:r?Ni:void 0,u=ml(s?"svg":r?"math":"template",c);u.innerHTML=v;var h=s||r?u:u.content;if(ls(ia(h),h.lastChild),s||r)for(;ia(h);)i.before(ia(h));else i.before(h)}})}function Ua(e,t,...s){var r=new Ol(e);Cs(()=>{const l=t()??null;r.ensure(l,l&&(i=>l(i,...s)))},va)}const Ir=[...` 	
\r\fÂ \v\uFEFF`];function Dn(e,t,s){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),s){for(var l of Object.keys(s))if(s[l])r=r?r+" "+l:l;else if(r.length)for(var i=l.length,v=0;(v=r.indexOf(l,v))>=0;){var d=v+i;(v===0||Ir.includes(r[v-1]))&&(d===r.length||Ir.includes(r[d]))?r=(v===0?"":r.substring(0,v))+r.substring(d+1):v=d}}return r===""?null:r}function Or(e,t=!1){var s=t?" !important;":";",r="";for(var l of Object.keys(e)){var i=e[l];i!=null&&i!==""&&(r+=" "+l+": "+i+s)}return r}function Kn(e,t){if(t){var s="",r,l;return Array.isArray(t)?(r=t[0],l=t[1]):r=t,r&&(s+=Or(r)),l&&(s+=Or(l,!0)),s=s.trim(),s===""?null:s}return String(e)}function Ie(e,t,s,r,l,i){var v=e.__className;if(v!==s||v===void 0){var d=Dn(s,r,i);d==null?e.removeAttribute("class"):e.className=d,e.__className=s}else if(i&&l!==i)for(var c in i){var u=!!i[c];(l==null||u!==!!l[c])&&e.classList.toggle(c,u)}return i}function Os(e,t={},s,r){for(var l in s){var i=s[l];t[l]!==i&&(s[l]==null?e.style.removeProperty(l):e.style.setProperty(l,i,r))}}function Ka(e,t,s,r){var l=e.__style;if(l!==t){var i=Kn(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(Os(e,s==null?void 0:s[0],r[0]),Os(e,s==null?void 0:s[1],r[1],"important")):Os(e,s,r));return r}function Kl(e,t,s=!1){if(e.multiple){if(t==null)return;if(!lr(t))return Ri();for(var r of e.options)r.selected=t.includes(ts(r));return}for(r of e.options){var l=ts(r);if(fn(l,t)){r.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function Bn(e){var t=new MutationObserver(()=>{Kl(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fr(()=>{t.disconnect()})}function es(e,t,s=t){var r=new WeakSet,l=!0;gl(e,"change",i=>{var v=i?"[selected]":":checked",d;if(e.multiple)d=[].map.call(e.querySelectorAll(v),ts);else{var c=e.querySelector(v)??e.querySelector("option:not([disabled])");d=c&&ts(c)}s(d),_e!==null&&r.add(_e)}),bl(()=>{var i=t();if(e===document.activeElement){var v=qs??_e;if(r.has(v))return}if(Kl(e,i,l),l&&i===void 0){var d=e.querySelector(":checked");d!==null&&(i=ts(d),s(i))}e.__value=i,l=!1}),Bn(e)}function ts(e){return"__value"in e?e.__value:e.value}const Nn=Symbol("is custom element"),Rn=Symbol("is html"),Hn=_i?"progress":"PROGRESS";function ar(e,t){var s=mr(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!==Hn)||(e.value=t??"")}function Ln(e,t){var s=mr(e);s.checked!==(s.checked=t??void 0)&&(e.checked=t)}function pa(e,t,s,r){var l=mr(e);l[t]!==(l[t]=s)&&(t==="loading"&&(e[pi]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Fn(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function mr(e){return e.__attributes??(e.__attributes={[Nn]:e.nodeName.includes("-"),[Rn]:e.namespaceURI===Jr})}var Dr=new Map;function Fn(e){var t=e.getAttribute("is")||e.nodeName,s=Dr.get(t);if(s)return s;Dr.set(t,s=[]);for(var r,l=e,i=Element.prototype;i!==l;){r=Ur(l);for(var v in r)r[v].set&&s.push(v);l=ir(l)}return s}function ue(e,t,s=t){var r=new WeakSet;gl(e,"input",async l=>{var i=l?e.defaultValue:e.value;if(i=Ds(e)?Ks(i):i,s(i),_e!==null&&r.add(_e),await $n(),i!==(i=t())){var v=e.selectionStart,d=e.selectionEnd,c=e.value.length;if(e.value=i??"",d!==null){var u=e.value.length;v===d&&d===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=v,e.selectionEnd=Math.min(d,u))}}}),ha(t)==null&&e.value&&(s(Ds(e)?Ks(e.value):e.value),_e!==null&&r.add(_e)),hr(()=>{var l=t();if(e===document.activeElement){var i=qs??_e;if(r.has(i))return}Ds(e)&&l===Ks(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function Ds(e){var t=e.type;return t==="number"||t==="range"}function Ks(e){return e===""?null:+e}function Kr(e,t){return e===t||(e==null?void 0:e[Pt])===t}function gr(e={},t,s,r){return bl(()=>{var l,i;return hr(()=>{l=i,i=[],ha(()=>{e!==s(...i)&&(t(e,...i),l&&Kr(s(...l),e)&&t(null,...l))})}),()=>{Ct(()=>{i&&Kr(s(...i),e)&&t(null,...i)})}}),e}function Yn(e=!1){const t=Ce,s=t.l.u;if(!s)return;let r=()=>qn(t.s);if(e){let l=0,i={};const v=cs(()=>{let d=!1;const c=t.s;for(const u in c)c[u]!==i[u]&&(i[u]=c[u],d=!0);return d&&l++,l});r=()=>a(v)}s.b.length&&gn(()=>{Br(t,r),Ns(s.b)}),ss(()=>{const l=ha(()=>s.m.map(ui));return()=>{for(const i of l)typeof i=="function"&&i()}}),s.a.length&&ss(()=>{Br(t,r),Ns(s.a)})}function Br(e,t){if(e.l.s)for(const s of e.l.s)a(s);t()}let ys=!1;function Un(e){var t=ys;try{return ys=!1,[e(),ys]}finally{ys=t}}function he(e,t,s,r){var j;var l=!Fa||(s&ji)!==0,i=(s&Ii)!==0,v=(s&Oi)!==0,d=r,c=!0,u=()=>(c&&(c=!1,d=v?ha(r):r),d),h;if(i){var p=Pt in e||hi in e;h=((j=xa(e,t))==null?void 0:j.set)??(p&&t in e?C=>e[t]=C:void 0)}var x,m=!1;i?[x,m]=Un(()=>e[t]):x=e[t],x===void 0&&r!==void 0&&(x=u(),h&&(l&&xi(),h(x)));var _;if(l?_=()=>{var C=e[t];return C===void 0?u():(c=!0,C)}:_=()=>{var C=e[t];return C!==void 0&&(d=void 0),C===void 0?d:C},l&&(s&Mi)===0)return _;if(h){var b=e.$$legacy;return(function(C,q){return arguments.length>0?((!l||!q||b||m)&&h(q?_():C),C):_()})}var g=!1,w=((s&Ci)!==0?cs:dr)(()=>(g=!1,_()));i&&a(w);var P=ze;return(function(C,q){if(arguments.length>0){const E=q?a(w):l&&i?me(C):C;return y(w,E),g=!0,d!==void 0&&(d=E),C}return Gt&&g||(P.f&At)!==0?w.v:a(w)})}function Ee(e){Ce===null&&Qr(),Fa&&Ce.l!==null?Gn(Ce).m.push(e):ss(()=>{const t=ha(e);if(typeof t=="function")return t})}function js(e){Ce===null&&Qr(),Ee(()=>()=>ha(e))}function Gn(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Vn="5";var Yr;typeof window<"u"&&((Yr=window.__svelte??(window.__svelte={})).v??(Yr.v=new Set)).add(Vn);const yr=[{key:"izle",label:"Izle",items:[{id:"dashboard",label:"Dashboard",icon:"dashboard"},{id:"live-chats",label:"Canli Sohbetler",icon:"chat"},{id:"closed-chats",label:"Kapali Sohbetler",icon:"archive"},{id:"search",label:"Arama",icon:"search"}]},{key:"yonet",label:"Yonet",items:[{id:"agent-inbox",label:"Agent Inbox",icon:"inbox"},{id:"knowledge-base",label:"Bilgi Tabani",icon:"book"},{id:"topics",label:"Konular",icon:"tag"},{id:"bot-settings",label:"Bot Ayarlari",icon:"settings"},{id:"bot-test",label:"Bot Test",icon:"test"},{id:"chat-flow",label:"Sohbet Akisi",icon:"flow"}]},{key:"ayarla",label:"Ayarla",items:[{id:"site-settings",label:"Site Ayarlari",icon:"globe"},{id:"zendesk",label:"Zendesk",icon:"zendesk"},{id:"whatsapp",label:"WhatsApp",icon:"whatsapp"},{id:"webhooks",label:"Webhooks",icon:"webhook"},{id:"env-vars",label:"Ortam Degiskenleri",icon:"env"},{id:"agent-files",label:"Agent Dosyalari",icon:"file"},{id:"memory-templates",label:"Bellek Sablonlari",icon:"memory"}]},{key:"analiz",label:"Analiz Et",items:[{id:"analytics",label:"Analytics",icon:"chart"},{id:"eval",label:"Eval Yonetimi",icon:"eval"},{id:"faq-suggestions",label:"FAQ Onerileri",icon:"faq"},{id:"feedback",label:"Feedback Raporu",icon:"feedback"},{id:"content-gaps",label:"Content Gaps",icon:"gap"},{id:"prompt-history",label:"Prompt Gecmisi",icon:"history"},{id:"system-status",label:"Sistem Durumu",icon:"status"}]}],Bl={};for(const e of yr)for(const t of e.items)Bl[t.id]=t.label;const Wn="dashboard";let Nl=B(me(Rl()));function Rl(){return window.location.hash.slice(1)||Wn}function wr(){return a(Nl)}function Hl(e){window.location.hash="#"+e}function Nr(){y(Nl,Rl(),!0)}function Qn(){return window.addEventListener("hashchange",Nr),()=>window.removeEventListener("hashchange",Nr)}var Zn=k('<div class="sidebar-overlay svelte-6i9pg1"></div>'),Jn=k('<a><span class="nav-icon svelte-6i9pg1"><!></span> <span class="nav-label svelte-6i9pg1"> </span></a>'),Xn=k('<div class="nav-group-label svelte-6i9pg1"> </div> <!>',1),eo=k('<!> <aside><div class="logo svelte-6i9pg1"><span class="logo-icon svelte-6i9pg1">Q</span> <span class="logo-text svelte-6i9pg1">Qragy</span></div> <nav class="nav svelte-6i9pg1"></nav></aside>',1);function to(e,t){ge(t,!0);let s=he(t,"mobileOpen",15,!1);const r={dashboard:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>',chat:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>',archive:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="21 8 21 21 3 21 3 8"/><rect x="1" y="3" width="22" height="5"/><line x1="10" y1="12" x2="14" y2="12"/></svg>',search:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>',inbox:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"/><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/></svg>',book:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>',tag:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>',settings:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>',test:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>',flow:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>',globe:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>',zendesk:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></svg>',whatsapp:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>',webhook:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',env:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"/><rect x="2" y="14" width="20" height="8" rx="2" ry="2"/><line x1="6" y1="6" x2="6.01" y2="6"/><line x1="6" y1="18" x2="6.01" y2="18"/></svg>',file:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>',memory:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></svg>',chart:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>',eval:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>',faq:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>',feedback:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>',gap:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>',history:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',status:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>'};function l(p,x){p.preventDefault(),Hl(x),s(!1)}var i=eo(),v=ve(i);{var d=p=>{var x=Zn();pe("click",x,()=>s(!1)),pe("keydown",x,()=>{}),f(p,x)};ne(v,p=>{s()&&p(d)})}var c=o(v,2);let u;var h=o(n(c),2);ke(h,21,()=>yr,qe,(p,x)=>{var m=Xn(),_=ve(m),b=n(_),g=o(_,2);ke(g,17,()=>a(x).items,qe,(w,P)=>{var j=Jn();let C;var q=n(j),E=n(q);Dl(E,()=>r[a(P).icon]||"");var K=o(q,2),I=n(K);V(T=>{pa(j,"href",`#${a(P).id??""}`),C=Ie(j,1,"nav-item svelte-6i9pg1",null,C,T),A(I,a(P).label)},[()=>({active:wr()===a(P).id})]),pe("click",j,T=>l(T,a(P).id)),f(w,j)}),V(()=>A(b,a(x).label)),f(p,m)}),V(()=>u=Ie(c,1,"sidebar svelte-6i9pg1",null,u,{"mobile-open":s()})),f(e,i),ye()}Te(["click","keydown"]);var ao=k('<header class="header svelte-xjepwq"><button class="hamburger svelte-xjepwq" aria-label="Menu"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button> <div class="header-title svelte-xjepwq"> </div> <button class="header-search svelte-xjepwq"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> <span class="svelte-xjepwq">Hizli arama...</span> <kbd class="svelte-xjepwq">Cmd+K</kbd></button> <div class="header-actions svelte-xjepwq"><button class="header-btn svelte-xjepwq" title="Bildirimler"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg></button> <div class="avatar svelte-xjepwq" title="Admin">MA</div></div></header>');function so(e,t){ge(t,!0);let s=he(t,"onOpenCommandPalette",3,()=>{}),r=he(t,"onToggleMobile",3,()=>{}),l=oe(()=>Bl[wr()]||"Dashboard");var i=ao(),v=n(i),d=o(v,2),c=n(d),u=o(d,2);V(()=>A(c,a(l))),pe("click",v,function(...h){var p;(p=r())==null||p.apply(this,h)}),pe("click",u,function(...h){var p;(p=s())==null||p.apply(this,h)}),f(e,i),ye()}Te(["click"]);var ro=k('<div class="cmd-group svelte-estvwp"> </div>'),lo=k("<!>  <div> </div>",1),io=k('<div class="cmd-empty svelte-estvwp">Sonuc bulunamadi</div>'),no=k('<div class="cmd-overlay svelte-estvwp"><div class="cmd-box svelte-estvwp" role="dialog" aria-label="Hizli arama"><input class="cmd-input svelte-estvwp" placeholder="Panel veya islem ara..."/> <div class="cmd-results svelte-estvwp"><!> <!></div></div></div>');function oo(e,t){ge(t,!0);let s=he(t,"open",15,!1),r=B(""),l,i=B(0),v=yr.flatMap(_=>_.items.map(b=>({...b,group:_.label}))),d=oe(()=>a(r).trim()?v.filter(_=>_.label.toLowerCase().includes(a(r).toLowerCase())||_.id.includes(a(r).toLowerCase())):v);ss(()=>{s()&&l&&(y(r,""),y(i,0),setTimeout(()=>l==null?void 0:l.focus(),10))});function c(_){if(_.key==="Escape"){s(!1);return}_.key==="ArrowDown"&&(_.preventDefault(),y(i,(a(i)+1)%a(d).length)),_.key==="ArrowUp"&&(_.preventDefault(),y(i,(a(i)-1+a(d).length)%a(d).length)),_.key==="Enter"&&a(d)[a(i)]&&(_.preventDefault(),u(a(d)[a(i)]))}function u(_){Hl(_.id),s(!1)}function h(_){_.target===_.currentTarget&&s(!1)}var p=Ya(),x=ve(p);{var m=_=>{var b=no(),g=n(b),w=n(g);gr(w,E=>l=E,()=>l);var P=o(w,2),j=n(P);ke(j,17,()=>a(d),qe,(E,K,I)=>{var T=lo(),$=ve(T);{var H=U=>{var F=ro(),J=n(F);V(()=>A(J,a(K).group)),f(U,F)};ne($,U=>{var F;(I===0||((F=a(d)[I-1])==null?void 0:F.group)!==a(K).group)&&U(H)})}var L=o($,2);let D;var R=n(L);V(()=>{D=Ie(L,1,"cmd-item svelte-estvwp",null,D,{selected:I===a(i)}),A(R,a(K).label)}),pe("click",L,()=>u(a(K))),f(E,T)});var C=o(j,2);{var q=E=>{var K=io();f(E,K)};ne(C,E=>{a(d).length===0&&E(q)})}pe("click",b,h),pe("keydown",w,c),ue(w,()=>a(r),E=>y(r,E)),f(_,b)};ne(x,_=>{s()&&_(m)})}f(e,p),ye()}Te(["click","keydown"]);var vo=k('<div class="shell svelte-im4zhz"><!> <div class="main svelte-im4zhz"><!> <div class="content svelte-im4zhz"><!></div></div></div> <!>',1);function co(e,t){ge(t,!0);let s=B(!1),r=B(!1);function l(m){(m.metaKey||m.ctrlKey)&&m.key==="k"&&(m.preventDefault(),y(s,!a(s))),m.key==="Escape"&&a(s)&&y(s,!1)}Ee(()=>{window.addEventListener("keydown",l)}),js(()=>{window.removeEventListener("keydown",l)});var i=vo(),v=ve(i),d=n(v);to(d,{get mobileOpen(){return a(r)},set mobileOpen(m){y(r,m,!0)}});var c=o(d,2),u=n(c);so(u,{onOpenCommandPalette:()=>y(s,!0),onToggleMobile:()=>y(r,!a(r))});var h=o(u,2),p=n(h);Ua(p,()=>t.children);var x=o(v,2);oo(x,{get open(){return a(s)},set open(m){y(s,m,!0)}}),f(e,i),ye()}Yi();let Kt=B(me([])),uo=0;function fo(){return a(Kt)}function Y(e,t="info",s=3500){const r=++uo;a(Kt).push({id:r,message:e,type:t,removing:!1}),setTimeout(()=>{const l=a(Kt).findIndex(i=>i.id===r);l!==-1&&(a(Kt)[l].removing=!0,setTimeout(()=>{y(Kt,a(Kt).filter(i=>i.id!==r),!0)},300))},s)}function ho(e){y(Kt,a(Kt).filter(t=>t.id!==e),!0)}var po=k('<div role="alert"><p class="svelte-1i7wnxu"> </p> <button class="toast-close svelte-1i7wnxu">&times;</button></div>'),_o=k('<div class="toast-container svelte-1i7wnxu"></div>');function mo(e,t){ge(t,!1),Yn();var s=_o();ke(s,5,fo,r=>r.id,(r,l)=>{var i=po();let v;var d=n(i),c=n(d),u=o(d,2);V(()=>{v=Ie(i,1,`toast toast-${a(l).type??""}`,"svelte-1i7wnxu",v,{removing:a(l).removing}),A(c,a(l).message)}),pe("click",u,()=>ho(a(l).id)),f(r,i)}),f(e,s),ye()}Te(["click"]);let sr=B(null);function go(){return a(sr)}function Ba({title:e,message:t,confirmText:s="Onayla",cancelText:r="Iptal",danger:l=!1}){return new Promise(i=>{y(sr,{title:e,message:t,confirmText:s,cancelText:r,danger:l,resolve(v){y(sr,null),i(v)}},!0)})}var yo=k('<div class="confirm-overlay svelte-1h168yz"><div class="confirm-box svelte-1h168yz"><h3 class="svelte-1h168yz"> </h3> <p class="svelte-1h168yz"> </p> <div class="confirm-actions svelte-1h168yz"><button class="btn btn-secondary svelte-1h168yz"> </button> <button> </button></div></div></div>');function wo(e,t){ge(t,!0);let s=oe(go);var r=Ya(),l=ve(r);{var i=v=>{var d=yo(),c=n(d),u=n(c),h=n(u),p=o(u,2),x=n(p),m=o(p,2),_=n(m),b=n(_),g=o(_,2);let w;var P=n(g);V(()=>{A(h,a(s).title),A(x,a(s).message),A(b,a(s).cancelText),w=Ie(g,1,"btn svelte-1h168yz",null,w,{"btn-danger":a(s).danger,"btn-primary":!a(s).danger}),A(P,a(s).confirmText)}),pe("click",d,()=>a(s).resolve(!1)),pe("click",c,j=>j.stopPropagation()),pe("click",_,()=>a(s).resolve(!1)),pe("click",g,()=>a(s).resolve(!0)),f(v,d)};ne(l,v=>{a(s)&&v(i)})}f(e,r),ye()}Te(["click"]);const zs="qragy_admin_token";let as=B(me(localStorage.getItem(zs)||""));function ua(){return a(as)}function bo(e){y(as,e.trim(),!0),a(as)?localStorage.setItem(zs,a(as)):localStorage.removeItem(zs)}function ko(){y(as,""),localStorage.removeItem(zs)}async function ws(e,t={}){const s={"Content-Type":"application/json","Bypass-Tunnel-Reminder":"true",...t.headers||{}},r=ua();r&&(s["x-admin-token"]=r);const l=await fetch(e,{...t,headers:s});if(l.status===401)throw ko(),window.location.hash="#login",new Error("Oturum suresi doldu");const i=await l.json().catch(()=>({}));if(!l.ok)throw new Error((i==null?void 0:i.error)||"HTTP "+l.status);return i}function ka(e){return"api/"+e}const ae={get(e){return ws(ka(e))},post(e,t){return ws(ka(e),{method:"POST",body:JSON.stringify(t)})},put(e,t){return ws(ka(e),{method:"PUT",body:JSON.stringify(t)})},delete(e){return ws(ka(e),{method:"DELETE"})},async upload(e,t){const s={"Content-Type":t.type,"Bypass-Tunnel-Reminder":"true"},r=ua();r&&(s["x-admin-token"]=r);const l=await fetch(ka(e),{method:"POST",headers:s,body:t}),i=await l.json().catch(()=>({}));if(!l.ok)throw new Error((i==null?void 0:i.error)||"HTTP "+l.status);return i},async uploadForm(e,t){const s={"Bypass-Tunnel-Reminder":"true"},r=ua();r&&(s["x-admin-token"]=r);const l=await fetch(ka(e),{method:"POST",headers:s,body:t}),i=await l.json().catch(()=>({}));if(!l.ok)throw new Error((i==null?void 0:i.error)||"HTTP "+l.status);return i}};var xo=k('<span class="trend up svelte-1sgihyn">â</span>'),$o=k('<span class="trend down svelte-1sgihyn">â</span>'),qo=k('<div class="kpi-sub svelte-1sgihyn"><!> </div>'),zo=k('<div class="kpi-card svelte-1sgihyn"><div class="kpi-label svelte-1sgihyn"> </div> <div class="kpi-value svelte-1sgihyn"> </div> <!></div>');function nt(e,t){let s=he(t,"label",3,""),r=he(t,"value",3,0),l=he(t,"sub",3,""),i=he(t,"trend",3,""),v=he(t,"color",3,"var(--text)");var d=zo(),c=n(d),u=n(c),h=o(c,2);let p;var x=n(h),m=o(h,2);{var _=b=>{var g=qo(),w=n(g);{var P=q=>{var E=xo();f(q,E)},j=q=>{var E=$o();f(q,E)};ne(w,q=>{i()==="up"?q(P):i()==="down"&&q(j,1)})}var C=o(w);V(()=>A(C,` ${l()??""}`)),f(b,g)};ne(m,b=>{l()&&b(_)})}V(()=>{A(u,s()),p=Ka(h,"",p,{color:v()}),A(x,r())}),f(e,d)}var So=k('<div class="bar-row svelte-18m1sg8"><span class="bar-label svelte-18m1sg8"> </span> <div class="bar-track svelte-18m1sg8"><div class="bar-fill svelte-18m1sg8"></div></div> <span class="bar-value svelte-18m1sg8"> </span></div>'),Eo=k('<div class="bar-chart svelte-18m1sg8"></div>');function Ll(e,t){ge(t,!0);let s=he(t,"items",19,()=>[]),r=he(t,"color",3,"var(--accent)"),l=oe(()=>Math.max(...s().map(v=>v.value),1));var i=Eo();ke(i,21,s,qe,(v,d)=>{var c=So(),u=n(c),h=n(u),p=o(u,2),x=n(p);let m;var _=o(p,2),b=n(_);V(()=>{A(h,a(d).label),m=Ka(x,"",m,{width:`${a(d).value/a(l)*100}%`,background:a(d).color||r()}),A(b,a(d).value)}),f(v,c)}),f(e,i),ye()}var To=k('<p class="svelte-oagnpm"> </p>'),Ao=k('<div class="loading svelte-oagnpm"><div class="spinner svelte-oagnpm"></div> <!></div>');function Ae(e,t){let s=he(t,"size",3,32),r=he(t,"message",3,"");var l=Ao(),i=n(l);let v;var d=o(i,2);{var c=u=>{var h=To(),p=n(h);V(()=>A(p,r())),f(u,h)};ne(d,u=>{r()&&u(c)})}V(()=>v=Ka(i,"",v,{width:`${s()??""}px`,height:`${s()??""}px`})),f(e,l)}var Po=k('<div class="error-state svelte-1udy7wi"> </div>'),Co=k('<div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi"> </span> <span class="status-val svelte-1udy7wi"> </span></div>'),jo=k('<div class="card svelte-1udy7wi"><h2 class="svelte-1udy7wi">Haftalik Populer Konular</h2> <!></div>'),Mo=k('<div class="grid-2 svelte-1udy7wi"><div class="card svelte-1udy7wi"><h2 class="svelte-1udy7wi">Ticket Durumu</h2> <div class="status-grid svelte-1udy7wi"><div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi">Toplam</span> <span class="status-val svelte-1udy7wi"> </span></div> <div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi">Son 24s</span> <span class="status-val svelte-1udy7wi"> </span></div> <!></div></div> <!></div>'),Io=k('<div class="kpi-grid svelte-1udy7wi"><!> <!> <!> <!></div> <!>',1),Oo=k('<div class="page-header svelte-1udy7wi"><div><h1 class="svelte-1udy7wi">Dashboard</h1> <p class="svelte-1udy7wi">Sistem genel bakis</p></div></div> <!>',1);function Do(e,t){ge(t,!0);let s=B(!0),r=B(null),l=B(null),i=B(null);Ee(async()=>{try{const[m,_]=await Promise.all([ae.get("admin/dashboard-stats").catch(()=>null),ae.get("admin/summary").catch(()=>null)]);y(r,m,!0),y(l,_,!0)}catch(m){y(i,m.message,!0),Y("Dashboard yuklenemedi: "+m.message,"error")}finally{y(s,!1)}});let v=oe(()=>{var m,_;return(((_=(m=a(r))==null?void 0:m.thisWeek)==null?void 0:_.topTopics)||[]).slice(0,8).map(b=>({label:b.topicId||b.topic||"?",value:b.count||0}))});function d(m){return m?m>0?"+"+m+"%":m+"%":""}var c=Oo(),u=o(ve(c),2);{var h=m=>{Ae(m,{message:"Yukleniyor..."})},p=m=>{var _=Po(),b=n(_);V(()=>A(b,`Hata: ${a(i)??""}`)),f(m,_)},x=m=>{var _=Io(),b=ve(_),g=n(b);{let E=oe(()=>{var I,T;return((T=(I=a(r))==null?void 0:I.today)==null?void 0:T.chats)??0}),K=oe(()=>{var I,T;return((T=(I=a(r))==null?void 0:I.today)==null?void 0:T.resolutionRate)??0});nt(g,{label:"Bugun Sohbet",get value(){return a(E)},get sub(){return`Cozum: %${a(K)??""}`}})}var w=o(g,2);{let E=oe(()=>{var T,$;return(($=(T=a(r))==null?void 0:T.thisWeek)==null?void 0:$.chats)??0}),K=oe(()=>{var T,$;return d(($=(T=a(r))==null?void 0:T.trends)==null?void 0:$.weeklyChats)}),I=oe(()=>{var T,$,H,L;return(($=(T=a(r))==null?void 0:T.trends)==null?void 0:$.weeklyChats)>0?"up":((L=(H=a(r))==null?void 0:H.trends)==null?void 0:L.weeklyChats)<0?"down":""});nt(w,{label:"Haftalik Sohbet",get value(){return a(E)},get sub(){return a(K)},get trend(){return a(I)}})}var P=o(w,2);{let E=oe(()=>{var T,$;return((($=(T=a(r))==null?void 0:T.thisWeek)==null?void 0:$.csatAvg)??0).toFixed(1)+"/5"}),K=oe(()=>{var T,$;return d(($=(T=a(r))==null?void 0:T.trends)==null?void 0:$.weeklyCsat)}),I=oe(()=>{var T,$,H,L;return(($=(T=a(r))==null?void 0:T.trends)==null?void 0:$.weeklyCsat)>0?"up":((L=(H=a(r))==null?void 0:H.trends)==null?void 0:L.weeklyCsat)<0?"down":""});nt(P,{label:"Haftalik CSAT",get value(){return a(E)},get sub(){return a(K)},get trend(){return a(I)}})}var j=o(P,2);{let E=oe(()=>{var I,T;return((T=(I=a(r))==null?void 0:I.thisMonth)==null?void 0:T.resolutionRate)??0}),K=oe(()=>{var I,T;return d((T=(I=a(r))==null?void 0:I.trends)==null?void 0:T.monthlyChats)});nt(j,{label:"Aylik Cozum",get value(){return`%${a(E)??""}`},get sub(){return a(K)}})}var C=o(b,2);{var q=E=>{var K=Mo(),I=n(K),T=o(n(I),2),$=n(T),H=o(n($),2),L=n(H),D=o($,2),R=o(n(D),2),U=n(R),F=o(D,2);ke(F,17,()=>Object.entries(a(l).summary.byStatus||{}),qe,(z,M)=>{var Z=oe(()=>nr(a(M),2));let X=()=>a(Z)[0],S=()=>a(Z)[1];var ee=Co(),N=n(ee),W=n(N),re=o(N,2),le=n(re);V(fe=>{A(W,fe),A(le,S())},[()=>X().replace(/_/g," ")]),f(z,ee)});var J=o(I,2);{var G=z=>{var M=jo(),Z=o(n(M),2);Ll(Z,{get items(){return a(v)}}),f(z,M)};ne(J,z=>{a(v).length&&z(G)})}V(()=>{A(L,a(l).summary.total??0),A(U,a(l).summary.last24h??0)}),f(E,K)};ne(C,E=>{var K;(K=a(l))!=null&&K.summary&&E(q)})}f(m,_)};ne(u,m=>{a(s)?m(h):a(i)?m(p,1):m(x,!1)})}f(e,c),ye()}function Ut(e){if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Na(e){if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const s=Date.now()-t.getTime(),r=Math.floor(s/6e4);if(r<1)return"az once";if(r<60)return r+" dk once";const l=Math.floor(r/60);if(l<24)return l+" saat once";const i=Math.floor(l/24);return i<30?i+" gun once":Ut(e)}function is(e,t=60){return e?e.length>t?e.slice(0,t)+"...":e:""}var Ko=k('<div class="bubble-time svelte-uewexn"> </div>'),Bo=k("<div><div> </div> <!></div>");function hs(e,t){let s=he(t,"sender",3,"bot"),r=he(t,"message",3,""),l=he(t,"timestamp",3,"");var i=Bo();let v;var d=n(i),c=n(d),u=o(d,2);{var h=p=>{var x=Ko(),m=n(x);V(()=>A(m,l())),f(p,x)};ne(u,p=>{l()&&p(h)})}V(()=>{v=Ie(i,1,"bubble-wrap svelte-uewexn",null,v,{user:s()==="user"}),Ie(d,1,`bubble bubble-${s()??""}`,"svelte-uewexn"),A(c,r())}),f(e,i)}var No=k("<span><!></span>");function Ke(e,t){let s=he(t,"variant",3,"gray");var r=No(),l=n(r);Ua(l,()=>t.children),V(()=>Ie(r,1,`badge badge-${s()??""}`,"svelte-jpiuiy")),f(e,r)}var Ro=k("<button><!></button>");function ie(e,t){let s=he(t,"variant",3,"secondary"),r=he(t,"size",3,"md"),l=he(t,"disabled",3,!1),i=he(t,"type",3,"button"),v=he(t,"class",3,"");var d=Ro(),c=n(d);Ua(c,()=>t.children),V(()=>{pa(d,"type",i()),Ie(d,1,`btn btn-${s()??""} btn-${r()??""} ${v()??""}`,"svelte-er4ugn"),d.disabled=l()}),pe("click",d,function(...u){var h;(h=t.onclick)==null||h.apply(this,u)}),f(e,d)}Te(["click"]);var Ho=k('<div><div class="conv-top svelte-tmzvc9"><span class="conv-session svelte-tmzvc9"> </span> <!></div> <div class="conv-msg svelte-tmzvc9"> </div> <div class="conv-meta svelte-tmzvc9"><span> </span> <span> </span></div></div>'),Lo=k('<div class="empty-list svelte-tmzvc9">Aktif sohbet yok</div>'),Fo=k('<div class="empty-chat svelte-tmzvc9">Mesaj yok</div>'),Yo=k('<div class="chat-header svelte-tmzvc9"><strong> </strong> <span class="chat-meta svelte-tmzvc9"> </span></div> <div class="chat-body svelte-tmzvc9"></div>',1),Uo=k('<div class="no-selection svelte-tmzvc9">Bir sohbet secin</div>'),Go=k('<div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9"> </span> <span class="detail-val svelte-tmzvc9"> </span></div>'),Vo=k('<h4 class="svelte-tmzvc9">Hafiza</h4> <!>',1),Wo=k('<h3 class="svelte-tmzvc9">Detaylar</h3> <div class="detail-rows svelte-tmzvc9"><div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Oturum</span> <span class="detail-val mono svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Durum</span> <span class="detail-val svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Kaynak</span> <span class="detail-val svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Olusturma</span> <span class="detail-val svelte-tmzvc9"> </span></div> <!></div>',1),Qo=k('<div class="no-selection-ctx svelte-tmzvc9">Detay icin sohbet secin</div>'),Zo=k('<div class="live-layout svelte-tmzvc9"><div class="conv-list svelte-tmzvc9"></div> <div class="chat-panel svelte-tmzvc9"><!></div> <div class="context-panel svelte-tmzvc9"><!></div></div>'),Jo=k('<div class="page-header svelte-tmzvc9"><div><h1 class="svelte-tmzvc9">Canli Sohbetler <!></h1> <p class="svelte-tmzvc9">Aktif ve ticketed sohbetler</p></div> <div class="header-actions svelte-tmzvc9"><!> <!></div></div> <!>',1);function Xo(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=oe(()=>a(r).find(C=>C.sessionId===a(l)));Ee(()=>v());async function v(){y(s,!0);try{const C=await ae.get("admin/conversations");y(r,(C.conversations||[]).filter(q=>q.status==="active"||q.status==="ticketed"),!0)}catch(C){Y("Sohbetler yuklenemedi: "+C.message,"error")}finally{y(s,!1)}}async function d(){if(await Ba({title:"Tum sohbetleri kapat",message:"Tum aktif sohbetler kapatilacak. Emin misiniz?",confirmText:"Kapat",danger:!0}))try{const q=await ae.post("admin/conversations/close-all",{});Y(q.closedCount+" sohbet kapatildi","success"),await v(),y(l,null)}catch(q){Y("Hata: "+q.message,"error")}}var c=Jo(),u=ve(c),h=n(u),p=n(h),x=o(n(p));Ke(x,{variant:"blue",children:(C,q)=>{var E=Q();V(()=>A(E,a(r).length)),f(C,E)},$$slots:{default:!0}});var m=o(h,2),_=n(m);ie(_,{onclick:v,variant:"ghost",size:"sm",children:(C,q)=>{var E=Q("Yenile");f(C,E)},$$slots:{default:!0}});var b=o(_,2);{var g=C=>{ie(C,{onclick:d,variant:"danger",size:"sm",children:(q,E)=>{var K=Q("Tumunu Kapat");f(q,K)},$$slots:{default:!0}})};ne(b,C=>{a(r).length&&C(g)})}var w=o(u,2);{var P=C=>{Ae(C,{message:"Yukleniyor..."})},j=C=>{var q=Zo(),E=n(q);ke(E,21,()=>a(r),qe,(U,F)=>{var J=Ho();let G;var z=n(J),M=n(z),Z=n(M),X=o(M,2);{let te=oe(()=>a(F).status==="active"?"green":"yellow");Ke(X,{get variant(){return a(te)},children:(de,se)=>{var be=Q();V(()=>A(be,a(F).status)),f(de,be)},$$slots:{default:!0}})}var S=o(z,2),ee=n(S),N=o(S,2),W=n(N),re=n(W),le=o(W,2),fe=n(le);V((te,de)=>{G=Ie(J,1,"conv-item svelte-tmzvc9",null,G,{active:a(l)===a(F).sessionId}),A(Z,te),A(ee,a(F).lastUserMessage||"..."),A(re,`${(a(F).messageCount||0)??""} mesaj`),A(fe,de)},[()=>{var te;return((te=a(F).sessionId)==null?void 0:te.slice(-8))||"?"},()=>Na(a(F).updatedAt)]),pe("click",J,()=>y(l,a(F).sessionId,!0)),f(U,J)},U=>{var F=Lo();f(U,F)});var K=o(E,2),I=n(K);{var T=U=>{var F=Yo(),J=ve(F),G=n(J),z=n(G),M=o(G,2),Z=n(M),X=o(J,2);ke(X,21,()=>a(i).chatHistory||[],qe,(S,ee)=>{{let N=oe(()=>a(ee).role==="user"?"user":"bot"),W=oe(()=>a(ee).content||"");hs(S,{get sender(){return a(N)},get message(){return a(W)}})}},S=>{var ee=Fo();f(S,ee)}),V(S=>{A(z,S),A(Z,`${(a(i).source||"web")??""} Â· ${a(i).messageCount??""} mesaj`)},[()=>{var S;return(S=a(i).sessionId)==null?void 0:S.slice(-8)}]),f(U,F)},$=U=>{var F=Uo();f(U,F)};ne(I,U=>{a(i)?U(T):U($,!1)})}var H=o(K,2),L=n(H);{var D=U=>{var F=Wo(),J=o(ve(F),2),G=n(J),z=o(n(G),2),M=n(z),Z=o(G,2),X=o(n(Z),2),S=n(X),ee=o(Z,2),N=o(n(ee),2),W=n(N),re=o(ee,2),le=o(n(re),2),fe=n(le),te=o(re,2);{var de=se=>{var be=Vo(),Se=o(ve(be),2);ke(Se,17,()=>Object.entries(a(i).memory),qe,(je,Pe)=>{var Fe=oe(()=>nr(a(Pe),2));let ce=()=>a(Fe)[0],Ze=()=>a(Fe)[1];var Ye=Ya(),_a=ve(Ye);{var qt=Mt=>{var Wt=Go(),ma=n(Wt),Qt=n(ma),Ga=o(ma,2),Va=n(Ga);V(()=>{A(Qt,ce()),A(Va,Ze())}),f(Mt,Wt)};ne(_a,Mt=>{Ze()&&Mt(qt)})}f(je,Ye)}),f(se,be)};ne(te,se=>{a(i).memory&&se(de)})}V((se,be)=>{A(M,se),A(S,a(i).status),A(W,a(i).source||"web"),A(fe,be)},[()=>{var se;return(se=a(i).sessionId)==null?void 0:se.slice(0,16)},()=>Na(a(i).createdAt)]),f(U,F)},R=U=>{var F=Qo();f(U,F)};ne(L,U=>{a(i)?U(D):U(R,!1)})}f(C,q)};ne(w,C=>{a(s)?C(P):C(j,!1)})}f(e,c),ye()}Te(["click"]);var ev=k('<tr class="svelte-14amxqn"><td class="mono svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"><!></td></tr>'),tv=k('<tr class="svelte-14amxqn"><td colspan="6" class="empty-row svelte-14amxqn">Kapali sohbet yok</td></tr>'),av=k('<div class="card svelte-14amxqn"><table class="svelte-14amxqn"><thead><tr><th class="svelte-14amxqn">Oturum</th><th class="svelte-14amxqn">Mesaj</th><th class="svelte-14amxqn">Kaynak</th><th class="svelte-14amxqn">Son Mesaj</th><th class="svelte-14amxqn">Kapanma</th><th class="svelte-14amxqn"></th></tr></thead><tbody></tbody></table></div>'),sv=k('<div class="memory-row svelte-14amxqn"><span class="memory-key svelte-14amxqn"> </span> <span> </span></div>'),rv=k('<div class="memory-card svelte-14amxqn"><h3 class="svelte-14amxqn">Hafiza</h3> <!></div>'),lv=k('<p class="no-msg svelte-14amxqn">Mesaj gecmisi yok</p>'),iv=k('<div class="detail-view svelte-14amxqn"><!> <div class="detail-header svelte-14amxqn"><h2 class="svelte-14amxqn"> </h2> <!></div> <div class="detail-meta svelte-14amxqn"><span> </span> <span> </span> <span> </span></div> <!> <div class="chat-card svelte-14amxqn"><h3 class="svelte-14amxqn">Mesajlar</h3> <!></div></div>'),nv=k('<div class="page-header svelte-14amxqn"><div><h1 class="svelte-14amxqn">Kapali Sohbetler <!></h1> <p class="svelte-14amxqn">Kapatilmis sohbet gecmisi</p></div> <!></div> <!>',1);function ov(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=oe(()=>a(r).find(w=>w.sessionId===a(l)));Ee(()=>v());async function v(){y(s,!0);try{const w=await ae.get("admin/conversations");y(r,(w.conversations||[]).filter(P=>P.status==="closed"),!0)}catch(w){Y("Kapali sohbetler yuklenemedi: "+w.message,"error")}finally{y(s,!1)}}var d=nv(),c=ve(d),u=n(c),h=n(u),p=o(n(h));Ke(p,{variant:"gray",children:(w,P)=>{var j=Q();V(()=>A(j,a(r).length)),f(w,j)},$$slots:{default:!0}});var x=o(u,2);ie(x,{onclick:v,variant:"ghost",size:"sm",children:(w,P)=>{var j=Q("Yenile");f(w,j)},$$slots:{default:!0}});var m=o(c,2);{var _=w=>{Ae(w,{message:"Yukleniyor..."})},b=w=>{var P=av(),j=n(P),C=o(n(j));ke(C,21,()=>a(r),qe,(q,E)=>{var K=ev(),I=n(K),T=n(I),$=o(I),H=n($),L=o($),D=n(L),R=o(L),U=n(R),F=o(R),J=n(F),G=o(F),z=n(G);ie(z,{onclick:()=>y(l,a(E).sessionId,!0),variant:"ghost",size:"sm",children:(M,Z)=>{var X=Q("Ac");f(M,X)},$$slots:{default:!0}}),V((M,Z,X)=>{A(T,M),A(H,a(E).messageCount||0),A(D,a(E).source||"web"),A(U,Z),A(J,X)},[()=>{var M;return((M=a(E).sessionId)==null?void 0:M.slice(-8))||"?"},()=>is(a(E).lastUserMessage||"",50),()=>Na(a(E).updatedAt)]),f(q,K)},q=>{var E=tv();f(q,E)}),f(w,P)},g=w=>{var P=iv(),j=n(P);ie(j,{onclick:()=>y(l,null),variant:"ghost",size:"sm",children:(M,Z)=>{var X=Q("â Listeye Don");f(M,X)},$$slots:{default:!0}});var C=o(j,2),q=n(C),E=n(q),K=o(q,2);Ke(K,{variant:"gray",children:(M,Z)=>{var X=Q("kapali");f(M,X)},$$slots:{default:!0}});var I=o(C,2),T=n(I),$=n(T),H=o(T,2),L=n(H),D=o(H,2),R=n(D),U=o(I,2);{var F=M=>{var Z=rv(),X=o(n(Z),2);ke(X,17,()=>Object.entries(a(i).memory),qe,(S,ee)=>{var N=oe(()=>nr(a(ee),2));let W=()=>a(N)[0],re=()=>a(N)[1];var le=Ya(),fe=ve(le);{var te=de=>{var se=sv(),be=n(se),Se=n(be),je=o(be,2),Pe=n(je);V(()=>{A(Se,W()),A(Pe,re())}),f(de,se)};ne(fe,de=>{re()&&de(te)})}f(S,le)}),f(M,Z)},J=oe(()=>a(i).memory&&Object.keys(a(i).memory).length);ne(U,M=>{a(J)&&M(F)})}var G=o(U,2),z=o(n(G),2);ke(z,17,()=>a(i).chatHistory||[],qe,(M,Z)=>{{let X=oe(()=>a(Z).role==="user"?"user":"bot"),S=oe(()=>a(Z).content||"");hs(M,{get sender(){return a(X)},get message(){return a(S)}})}},M=>{var Z=lv();f(M,Z)}),V((M,Z)=>{A(E,M),A($,`Kaynak: ${(a(i).source||"web")??""}`),A(L,`${a(i).messageCount??""} mesaj`),A(R,Z)},[()=>{var M;return(M=a(i).sessionId)==null?void 0:M.slice(-8)},()=>Na(a(i).createdAt)]),f(w,P)};ne(m,w=>{a(s)?w(_):a(i)?w(g,!1):w(b,1)})}f(e,d),ye()}var vv=k("<option> </option>"),dv=k('<p class="no-msg svelte-q2mz46">Mesaj yok</p>'),cv=k('<div class="note-item svelte-q2mz46"><span class="note-meta svelte-q2mz46"> </span> <p class="svelte-q2mz46"> </p></div>'),uv=k('<div class="info-card svelte-q2mz46"><h3 class="svelte-q2mz46">Notlar</h3> <!></div>'),fv=k('<div class="detail-view svelte-q2mz46"><!> <div class="detail-header svelte-q2mz46"><h2 class="svelte-q2mz46"> </h2> <!></div> <div class="detail-grid svelte-q2mz46"><div class="info-card svelte-q2mz46"><h3 class="svelte-q2mz46">Bilgiler</h3> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Sube Kodu</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Firma</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Ad Soyad</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Telefon</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Kaynak</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Oncelik</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Atanan</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Olusturma</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Ozet</span><span class="svelte-q2mz46"> </span></div></div> <div class="chat-card svelte-q2mz46"><h3 class="svelte-q2mz46">Sohbet Gecmisi</h3> <!></div></div> <!></div>'),hv=k('<tr class="svelte-q2mz46"><td class="mono svelte-q2mz46"> </td><td class="svelte-q2mz46"><!></td><td class="svelte-q2mz46"><span> </span></td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"><!></td></tr>'),pv=k('<tr class="svelte-q2mz46"><td colspan="8" class="empty-row svelte-q2mz46">Sonuc bulunamadi</td></tr>'),_v=k('<div class="card svelte-q2mz46"><table class="svelte-q2mz46"><thead><tr><th class="svelte-q2mz46">ID</th><th class="svelte-q2mz46">Durum</th><th class="svelte-q2mz46">Oncelik</th><th class="svelte-q2mz46">Sube</th><th class="svelte-q2mz46">Ozet</th><th class="svelte-q2mz46">Kaynak</th><th class="svelte-q2mz46">Tarih</th><th class="svelte-q2mz46"></th></tr></thead><tbody></tbody></table></div>'),mv=k('<div class="page-header svelte-q2mz46"><div><h1 class="svelte-q2mz46">Arama</h1> <p class="svelte-q2mz46"> </p></div> <div class="header-actions svelte-q2mz46"><!></div></div> <div class="filters svelte-q2mz46"><input class="input search-input svelte-q2mz46" type="text" placeholder="ID, isim, ozet, telefon ara..."/> <select class="select svelte-q2mz46"></select> <select class="select svelte-q2mz46"><option>Tum Kaynaklar</option><option>Web</option><option>WhatsApp</option><option>Zendesk</option></select> <select class="select svelte-q2mz46"><option>50</option><option>100</option><option>200</option><option>500</option></select></div> <!>',1);function gv(e,t){ge(t,!0);let s=B(!1),r=B(me([])),l=B(0),i=B(""),v=B(""),d=B(""),c=B("100"),u=B(null),h;const p=[{value:"",label:"Tumu"},{value:"handoff_pending",label:"Aktarim Bekleyen"},{value:"queued_after_hours",label:"Mesai Disi"},{value:"handoff_success",label:"Basarili"},{value:"handoff_failed",label:"Basarisiz"},{value:"handoff_parent_posted",label:"Parent Aktarim"},{value:"handoff_opened_no_summary",label:"Ozetsiz"}],x={handoff_pending:"yellow",queued_after_hours:"purple",handoff_success:"green",handoff_failed:"red",handoff_parent_posted:"blue",handoff_opened_no_summary:"gray"};Ee(()=>m());async function m(){y(s,!0);try{const N=new URLSearchParams;a(v)&&N.set("status",a(v)),a(c)&&N.set("limit",a(c)),a(i).trim()&&N.set("q",a(i).trim()),a(d)&&N.set("source",a(d));const W=N.toString(),re=await ae.get("admin/tickets"+(W?"?"+W:""));y(r,re.tickets||[],!0),y(l,re.total||0,!0)}catch(N){Y("Arama hatasi: "+N.message,"error")}finally{y(s,!1)}}function _(){clearTimeout(h),h=setTimeout(m,400)}async function b(N){try{const W=await ae.get("admin/tickets/"+encodeURIComponent(N));y(u,W.ticket||W,!0)}catch(W){Y("Ticket yuklenemedi: "+W.message,"error")}}function g(){const N=new URLSearchParams({format:"csv",token:ua()});a(v)&&N.set("status",a(v)),window.open("api/admin/tickets/export?"+N.toString(),"_blank")}var w=mv(),P=ve(w),j=n(P),C=o(n(j),2),q=n(C),E=o(j,2),K=n(E);ie(K,{onclick:g,variant:"ghost",size:"sm",children:(N,W)=>{var re=Q("CSV Indir");f(N,re)},$$slots:{default:!0}});var I=o(P,2),T=n(I),$=o(T,2);ke($,21,()=>p,qe,(N,W)=>{var re=vv(),le=n(re),fe={};V(()=>{A(le,a(W).label),fe!==(fe=a(W).value)&&(re.value=(re.__value=a(W).value)??"")}),f(N,re)});var H=o($,2),L=n(H);L.value=L.__value="";var D=o(L);D.value=D.__value="web";var R=o(D);R.value=R.__value="whatsapp";var U=o(R);U.value=U.__value="zendesk";var F=o(H,2),J=n(F);J.value=J.__value="50";var G=o(J);G.value=G.__value="100";var z=o(G);z.value=z.__value="200";var M=o(z);M.value=M.__value="500";var Z=o(I,2);{var X=N=>{Ae(N,{message:"AranÄ±yor..."})},S=N=>{var W=fv(),re=n(W);ie(re,{onclick:()=>y(u,null),variant:"ghost",size:"sm",children:(Je,Xe)=>{var wa=Q("â Listeye Don");f(Je,wa)},$$slots:{default:!0}});var le=o(re,2),fe=n(le),te=n(fe),de=o(fe,2);{let Je=oe(()=>x[a(u).status]||"gray");Ke(de,{get variant(){return a(Je)},children:(Xe,wa)=>{var ba=Q();V(It=>A(ba,It),[()=>{var It;return(It=a(u).status)==null?void 0:It.replace(/_/g," ")}]),f(Xe,ba)},$$slots:{default:!0}})}var se=o(le,2),be=n(se),Se=o(n(be),2),je=o(n(Se)),Pe=n(je),Fe=o(Se,2),ce=o(n(Fe)),Ze=n(ce),Ye=o(Fe,2),_a=o(n(Ye)),qt=n(_a),Mt=o(Ye,2),Wt=o(n(Mt)),ma=n(Wt),Qt=o(Mt,2),Ga=o(n(Qt)),Va=n(Ga),ps=o(Qt,2),Zt=o(n(ps)),ga=n(Zt),Wa=o(ps,2),_s=o(n(Wa)),ya=n(_s),kr=o(Wa,2),Ul=o(n(kr)),Gl=n(Ul),Vl=o(kr,2),Wl=o(n(Vl)),Ql=n(Wl),Zl=o(be,2),Jl=o(n(Zl),2);ke(Jl,17,()=>a(u).chatHistory||[],qe,(Je,Xe)=>{{let wa=oe(()=>a(Xe).role==="user"?"user":"bot"),ba=oe(()=>a(Xe).content||"");hs(Je,{get sender(){return a(wa)},get message(){return a(ba)}})}},Je=>{var Xe=dv();f(Je,Xe)});var Xl=o(se,2);{var ei=Je=>{var Xe=uv(),wa=o(n(Xe),2);ke(wa,17,()=>a(u).internalNotes,qe,(ba,It)=>{var xr=cv(),$r=n(xr),ti=n($r),ai=o($r,2),si=n(ai);V(ri=>{A(ti,`${a(It).author??""} Â· ${ri??""}`),A(si,a(It).note)},[()=>Ut(a(It).at)]),f(ba,xr)}),f(Je,Xe)};ne(Xl,Je=>{var Xe;(Xe=a(u).internalNotes)!=null&&Xe.length&&Je(ei)})}V(Je=>{A(te,a(u).id),A(Pe,a(u).branchCode||"-"),A(Ze,a(u).companyName||"-"),A(qt,a(u).fullName||"-"),A(ma,a(u).phone||"-"),A(Va,a(u).source||"-"),A(ga,a(u).priority||"normal"),A(ya,a(u).assignedTo||"-"),A(Gl,Je),A(Ql,a(u).issueSummary||"-")},[()=>Ut(a(u).createdAt)]),f(N,W)},ee=N=>{var W=_v(),re=n(W),le=o(n(re));ke(le,21,()=>a(r),qe,(fe,te)=>{var de=hv(),se=n(de),be=n(se),Se=o(se),je=n(Se);{let Zt=oe(()=>x[a(te).status]||"gray");Ke(je,{get variant(){return a(Zt)},children:(ga,Wa)=>{var _s=Q();V(ya=>A(_s,ya),[()=>{var ya;return(ya=a(te).status)==null?void 0:ya.replace(/_/g," ")}]),f(ga,_s)},$$slots:{default:!0}})}var Pe=o(Se),Fe=n(Pe);let ce;var Ze=n(Fe),Ye=o(Pe),_a=n(Ye),qt=o(Ye),Mt=n(qt),Wt=o(qt),ma=n(Wt),Qt=o(Wt),Ga=n(Qt),Va=o(Qt),ps=n(Va);ie(ps,{onclick:()=>b(a(te).id),variant:"ghost",size:"sm",children:(Zt,ga)=>{var Wa=Q("Ac");f(Zt,Wa)},$$slots:{default:!0}}),V((Zt,ga)=>{A(be,a(te).id),ce=Ie(Fe,1,"priority svelte-q2mz46",null,ce,{high:a(te).priority==="high",low:a(te).priority==="low"}),A(Ze,a(te).priority||"normal"),A(_a,a(te).branchCode||"-"),A(Mt,Zt),A(ma,a(te).source||"web"),A(Ga,ga)},[()=>is(a(te).issueSummary||"",40),()=>Ut(a(te).createdAt)]),f(fe,de)},fe=>{var te=pv();f(fe,te)}),f(N,W)};ne(Z,N=>{a(s)?N(X):a(u)?N(S,1):N(ee,!1)})}V(()=>A(q,`Ticket ara ve filtrele (${a(l)??""} sonuc)`)),pe("input",T,_),ue(T,()=>a(i),N=>y(i,N)),pe("change",$,m),es($,()=>a(v),N=>y(v,N)),pe("change",H,m),es(H,()=>a(d),N=>y(d,N)),pe("change",F,m),es(F,()=>a(c),N=>y(c,N)),f(e,w),ye()}Te(["input","change"]);function Fl(e,{onMessage:t,onEvent:s,onError:r}={}){const l=ua(),i=e.includes("?")?"&":"?",v="api/"+e+(l?i+"token="+encodeURIComponent(l):""),d=new EventSource(v);if(t&&(d.onmessage=c=>{try{const u=JSON.parse(c.data);t(u)}catch{}}),s)for(const[c,u]of Object.entries(s))d.addEventListener(c,h=>{try{const p=h.data?JSON.parse(h.data):{};u(p)}catch{u({})}});return d.onerror=()=>{r&&r(),d.close()},{close(){d.close()}}}var yv=k('<div class="chat-input svelte-vqyzz1"><textarea rows="1" class="svelte-vqyzz1"></textarea> <button class="send-btn svelte-vqyzz1" aria-label="Gonder"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></button></div>');function Yl(e,t){ge(t,!0);let s=he(t,"placeholder",3,"Mesaj yazin..."),r=he(t,"disabled",3,!1),l=B("");function i(){var p;const h=a(l).trim();h&&((p=t.onsend)==null||p.call(t,h),y(l,""))}function v(h){h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),i())}var d=yv(),c=n(d),u=o(c,2);V(h=>{pa(c,"placeholder",s()),c.disabled=r(),u.disabled=h},[()=>r()||!a(l).trim()]),pe("keydown",c,v),ue(c,()=>a(l),h=>y(l,h)),pe("click",u,i),f(e,d),ye()}Te(["keydown","click"]);var wv=k('<div><div class="qi-top svelte-1krjtqm"><span class="qi-name svelte-1krjtqm"> </span> <!></div> <div class="qi-topic svelte-1krjtqm"> </div> <div class="qi-meta svelte-1krjtqm"> </div> <!></div>'),bv=k('<div class="queue-group svelte-1krjtqm"> </div> <!>',1),kv=k('<div><div class="qi-top svelte-1krjtqm"><span class="qi-name svelte-1krjtqm"> </span> <!></div> <div class="qi-topic svelte-1krjtqm"> </div> <div class="qi-meta svelte-1krjtqm"> </div></div>'),xv=k('<div class="queue-group svelte-1krjtqm"> </div> <!>',1),$v=k('<div class="queue-empty svelte-1krjtqm">Kuyruk bos</div>'),qv=k('<div class="empty-chat svelte-1krjtqm">Mesaj yok</div>'),zv=k('<div class="chat-header svelte-1krjtqm"><div><strong> </strong> <span class="chat-meta svelte-1krjtqm"> </span></div> <!></div> <div class="chat-body svelte-1krjtqm"></div> <!>',1),Sv=k('<div class="no-selection svelte-1krjtqm">Bir talep secin</div>'),Ev=k('<div class="inbox-layout svelte-1krjtqm"><div class="queue-panel svelte-1krjtqm"><!> <!> <!></div> <div class="chat-panel svelte-1krjtqm"><!></div></div>'),Tv=k('<div class="page-header svelte-1krjtqm"><div><h1 class="svelte-1krjtqm">Agent Inbox</h1> <p class="svelte-1krjtqm">Insan temsilci kuyruÄu</p></div> <!></div> <!>',1);function Av(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(me([])),i=B(null),v=B(me([])),d=null,c=oe(()=>[...a(r),...a(l)].find(q=>q.sessionId===a(i)));Ee(()=>{u(),d=Fl("admin/inbox/stream",{onEvent:{claimed:()=>u(),released:()=>u(),message:q=>{q.sessionId===a(i)&&h(a(i))}},onError:()=>{}})}),js(()=>{d==null||d.close()});async function u(){try{const q=await ae.get("admin/inbox");y(r,q.pending||[],!0),y(l,q.active||[],!0)}catch(q){Y("Inbox yuklenemedi: "+q.message,"error")}finally{y(s,!1)}}async function h(q){try{const K=((await ae.get("admin/conversations")).conversations||[]).find(I=>I.sessionId===q);y(v,(K==null?void 0:K.chatHistory)||[],!0)}catch{y(v,[],!0)}}async function p(q){y(i,q,!0),await h(q)}async function x(q){try{await ae.post("admin/inbox/"+q+"/claim",{agentName:"admin"}),Y("Talep alindi","success"),await u()}catch(E){Y("Hata: "+E.message,"error")}}async function m(q){try{await ae.post("admin/inbox/"+q+"/release",{}),Y("Talep serbest birakildi","success"),y(i,null),await u()}catch(E){Y("Hata: "+E.message,"error")}}async function _(q){if(a(c))try{await ae.post("admin/inbox/"+a(c).id+"/message",{message:q}),await h(a(i))}catch(E){Y("Mesaj gonderilemedi: "+E.message,"error")}}var b=Tv(),g=ve(b),w=o(n(g),2);ie(w,{onclick:u,variant:"ghost",size:"sm",children:(q,E)=>{var K=Q("Yenile");f(q,K)},$$slots:{default:!0}});var P=o(g,2);{var j=q=>{Ae(q,{message:"Yukleniyor..."})},C=q=>{var E=Ev(),K=n(E),I=n(K);{var T=G=>{var z=bv(),M=ve(z),Z=n(M),X=o(M,2);ke(X,17,()=>a(r),qe,(S,ee)=>{var N=wv();let W;var re=n(N),le=n(re),fe=n(le),te=o(le,2);Ke(te,{variant:"yellow",children:(Pe,Fe)=>{var ce=Q("bekliyor");f(Pe,ce)},$$slots:{default:!0}});var de=o(re,2),se=n(de),be=o(de,2),Se=n(be),je=o(be,2);ie(je,{onclick:Pe=>{Pe.stopPropagation(),x(a(ee).id)},variant:"primary",size:"sm",children:(Pe,Fe)=>{var ce=Q("Talep Al");f(Pe,ce)},$$slots:{default:!0}}),V(Pe=>{W=Ie(N,1,"queue-item svelte-1krjtqm",null,W,{active:a(i)===a(ee).sessionId}),A(fe,a(ee).customerName||"Misafir"),A(se,a(ee).topic||a(ee).summary||"..."),A(Se,Pe)},[()=>Na(a(ee).createdAt)]),pe("click",N,()=>p(a(ee).sessionId)),f(S,N)}),V(()=>A(Z,`Bekleyen (${a(r).length??""})`)),f(G,z)};ne(I,G=>{a(r).length&&G(T)})}var $=o(I,2);{var H=G=>{var z=xv(),M=ve(z),Z=n(M),X=o(M,2);ke(X,17,()=>a(l),qe,(S,ee)=>{var N=kv();let W;var re=n(N),le=n(re),fe=n(le),te=o(le,2);Ke(te,{variant:"green",children:(je,Pe)=>{var Fe=Q("aktif");f(je,Fe)},$$slots:{default:!0}});var de=o(re,2),se=n(de),be=o(de,2),Se=n(be);V(je=>{W=Ie(N,1,"queue-item svelte-1krjtqm",null,W,{active:a(i)===a(ee).sessionId}),A(fe,a(ee).customerName||"Misafir"),A(se,a(ee).topic||a(ee).summary||"..."),A(Se,`${(a(ee).assignedTo||"admin")??""} Â· ${je??""}`)},[()=>Na(a(ee).createdAt)]),pe("click",N,()=>p(a(ee).sessionId)),f(S,N)}),V(()=>A(Z,`Aktif (${a(l).length??""})`)),f(G,z)};ne($,G=>{a(l).length&&G(H)})}var L=o($,2);{var D=G=>{var z=$v();f(G,z)};ne(L,G=>{!a(r).length&&!a(l).length&&G(D)})}var R=o(K,2),U=n(R);{var F=G=>{var z=zv(),M=ve(z),Z=n(M),X=n(Z),S=n(X),ee=o(X,2),N=n(ee),W=o(Z,2);{var re=de=>{ie(de,{onclick:()=>m(a(c).id),variant:"ghost",size:"sm",children:(se,be)=>{var Se=Q("Serbest Birak");f(se,Se)},$$slots:{default:!0}})};ne(W,de=>{a(c).assignedTo&&de(re)})}var le=o(M,2);ke(le,21,()=>a(v),qe,(de,se)=>{{let be=oe(()=>a(se).role==="user"?"user":"bot"),Se=oe(()=>a(se).content||"");hs(de,{get sender(){return a(be)},get message(){return a(Se)}})}},de=>{var se=qv();f(de,se)});var fe=o(le,2);{var te=de=>{Yl(de,{onsend:_})};ne(fe,de=>{a(c).assignedTo&&de(te)})}V(()=>{A(S,a(c).customerName||"Misafir"),A(N,a(c).topic||"")}),f(G,z)},J=G=>{var z=Sv();f(G,z)};ne(U,G=>{a(c)?G(F):G(J,!1)})}f(q,E)};ne(P,q=>{a(s)?q(j):q(C,!1)})}f(e,b),ye()}Te(["click"]);var Pv=k('<div class="modal-overlay svelte-13rrew4"><div class="modal-box svelte-13rrew4" role="dialog"><div class="modal-header svelte-13rrew4"><h3 class="svelte-13rrew4"> </h3> <button class="modal-close svelte-13rrew4">&times;</button></div> <div class="modal-body svelte-13rrew4"><!></div></div></div>');function ns(e,t){ge(t,!0);let s=he(t,"open",15,!1),r=he(t,"title",3,""),l=he(t,"width",3,"520px");function i(h){h.target===h.currentTarget&&s(!1)}function v(h){h.key==="Escape"&&s(!1)}var d=Ya();$s("keydown",Zs,function(...h){var p;(p=s()?v:void 0)==null||p.apply(this,h)});var c=ve(d);{var u=h=>{var p=Pv(),x=n(p);let m;var _=n(x),b=n(_),g=n(b),w=o(b,2),P=o(_,2),j=n(P);Ua(j,()=>t.children),V(()=>{pa(x,"aria-label",r()),m=Ka(x,"",m,{width:l()}),A(g,r())}),pe("click",p,i),pe("click",w,()=>s(!1)),f(h,p)};ne(c,h=>{s()&&h(u)})}f(e,d),ye()}Te(["click"]);var Cv=k('<div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="svelte-1ara9wo"> </p> <input type="file" hidden=""/></div>');function jv(e,t){ge(t,!0);let s=he(t,"accept",3,""),r=he(t,"multiple",3,!1),l=he(t,"label",3,"Dosya sec veya surukle"),i=B(!1),v;function d(_){var g;_.preventDefault(),y(i,!1);const b=Array.from(_.dataTransfer.files);b.length&&((g=t.onfiles)==null||g.call(t,r()?b:[b[0]]))}function c(_){var g;const b=Array.from(_.target.files);b.length&&((g=t.onfiles)==null||g.call(t,r()?b:[b[0]])),_.target.value=""}var u=Cv();let h;var p=o(n(u),2),x=n(p),m=o(p,2);gr(m,_=>v=_,()=>v),V(()=>{h=Ie(u,1,"file-upload svelte-1ara9wo",null,h,{dragging:a(i)}),A(x,l()),pa(m,"accept",s()),m.multiple=r()}),$s("dragover",u,_=>{_.preventDefault(),y(i,!0)}),$s("dragleave",u,()=>y(i,!1)),$s("drop",u,d),pe("click",u,()=>v==null?void 0:v.click()),pe("change",m,c),f(e,u),ye()}Te(["click","change"]);var Mv=k('<tr class="svelte-1mtjxiy"><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"><!></td></tr>'),Iv=k('<tr class="svelte-1mtjxiy"><td colspan="4" class="empty-row svelte-1mtjxiy">Bilgi tabani bos</td></tr>'),Ov=k('<div class="card svelte-1mtjxiy"><table class="svelte-1mtjxiy"><thead><tr><th class="svelte-1mtjxiy">Soru</th><th class="svelte-1mtjxiy">Cevap</th><th class="svelte-1mtjxiy">Tarih</th><th class="svelte-1mtjxiy"></th></tr></thead><tbody></tbody></table></div>'),Dv=k('<div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Soru <input class="input svelte-1mtjxiy" placeholder="Soru..."/></label></div> <div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Cevap <textarea class="textarea svelte-1mtjxiy" rows="4" placeholder="Cevap..."></textarea></label></div> <div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">URL Import <div class="url-row svelte-1mtjxiy"><input class="input svelte-1mtjxiy" placeholder="https://..."/> <!></div></label></div> <div class="modal-actions svelte-1mtjxiy"><!> <!></div>',1),Kv=k('<div class="page-header svelte-1mtjxiy"><div><h1 class="svelte-1mtjxiy">Bilgi Tabani</h1> <p class="svelte-1mtjxiy"> </p></div> <div class="header-actions svelte-1mtjxiy"><!> <!> <!></div></div> <!> <!> <!>',1);function Bv(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(!1),i=B(!1),v=B(""),d=B(""),c=B("");Ee(()=>u());async function u(){y(s,!0);try{const D=await ae.get("admin/knowledge");y(r,D.items||D.knowledge||D||[],!0),Array.isArray(a(r))||y(r,[],!0)}catch(D){Y("Bilgi tabani yuklenemedi: "+D.message,"error")}finally{y(s,!1)}}async function h(){if(!(!a(v).trim()||!a(d).trim()))try{await ae.post("admin/knowledge",{question:a(v).trim(),answer:a(d).trim()}),Y("Eklendi","success"),y(v,""),y(d,""),y(l,!1),await u()}catch(D){Y("Hata: "+D.message,"error")}}async function p(D){if(await Ba({title:"Sil",message:"Bu kayit silinecek. Emin misiniz?",confirmText:"Sil",danger:!0}))try{await ae.delete("admin/knowledge/"+D),Y("Silindi","success"),await u()}catch(U){Y("Hata: "+U.message,"error")}}async function x(D){const R=new FormData;for(const U of D)R.append("files",U);try{await ae.uploadForm("admin/knowledge/upload-batch",R),Y(D.length+" dosya yuklendi","success"),y(i,!1),await u()}catch(U){Y("Yukleme hatasi: "+U.message,"error")}}async function m(){if(a(c).trim())try{await ae.post("admin/knowledge/import-url",{url:a(c).trim()}),Y("URL import edildi","success"),y(c,""),await u()}catch(D){Y("Import hatasi: "+D.message,"error")}}async function _(){try{await ae.post("admin/knowledge/reingest",{}),Y("Reingest basladi","success")}catch(D){Y("Hata: "+D.message,"error")}}var b=Kv(),g=ve(b),w=n(g),P=o(n(w),2),j=n(P),C=o(w,2),q=n(C);ie(q,{onclick:_,variant:"ghost",size:"sm",children:(D,R)=>{var U=Q("Reingest");f(D,U)},$$slots:{default:!0}});var E=o(q,2);ie(E,{onclick:()=>y(i,!0),variant:"secondary",size:"sm",children:(D,R)=>{var U=Q("Dosya Yukle");f(D,U)},$$slots:{default:!0}});var K=o(E,2);ie(K,{onclick:()=>y(l,!0),variant:"primary",size:"sm",children:(D,R)=>{var U=Q("+ Ekle");f(D,U)},$$slots:{default:!0}});var I=o(g,2);{var T=D=>{Ae(D,{message:"Yukleniyor..."})},$=D=>{var R=Ov(),U=n(R),F=o(n(U));ke(F,21,()=>a(r),qe,(J,G)=>{var z=Mv(),M=n(z),Z=n(M),X=o(M),S=n(X),ee=o(X),N=n(ee),W=o(ee),re=n(W);ie(re,{onclick:()=>p(a(G).id||a(G)._id),variant:"ghost",size:"sm",children:(le,fe)=>{var te=Q("Sil");f(le,te)},$$slots:{default:!0}}),V((le,fe,te)=>{A(Z,le),A(S,fe),A(N,te)},[()=>is(a(G).question||a(G).title||"",60),()=>is(a(G).answer||a(G).content||"",80),()=>Ut(a(G).createdAt)]),f(J,z)},J=>{var G=Iv();f(J,G)}),f(D,R)};ne(I,D=>{a(s)?D(T):D($,!1)})}var H=o(I,2);ns(H,{title:"Yeni Kayit",get open(){return a(l)},set open(D){y(l,D,!0)},children:(D,R)=>{var U=Dv(),F=ve(U),J=n(F),G=o(n(J)),z=o(F,2),M=n(z),Z=o(n(M)),X=o(z,2),S=n(X),ee=o(n(S)),N=n(ee),W=o(N,2);ie(W,{onclick:m,variant:"secondary",size:"sm",children:(te,de)=>{var se=Q("Import");f(te,se)},$$slots:{default:!0}});var re=o(X,2),le=n(re);ie(le,{onclick:()=>y(l,!1),variant:"secondary",children:(te,de)=>{var se=Q("Iptal");f(te,se)},$$slots:{default:!0}});var fe=o(le,2);ie(fe,{onclick:h,variant:"primary",children:(te,de)=>{var se=Q("Kaydet");f(te,se)},$$slots:{default:!0}}),ue(G,()=>a(v),te=>y(v,te)),ue(Z,()=>a(d),te=>y(d,te)),ue(N,()=>a(c),te=>y(c,te)),f(D,U)},$$slots:{default:!0}});var L=o(H,2);ns(L,{title:"Dosya Yukle",get open(){return a(i)},set open(D){y(i,D,!0)},children:(D,R)=>{jv(D,{accept:".pdf,.docx,.xlsx,.csv,.txt",multiple:!0,onfiles:x,label:"PDF, DOCX, XLSX, CSV veya TXT dosya yukleyin"})},$$slots:{default:!0}}),V(()=>A(j,`${a(r).length??""} kayit`)),f(e,b),ye()}var Nv=k('<button class="tag-remove svelte-1y0aujn">&times;</button>'),Rv=k('<span class="tag svelte-1y0aujn"><!> <!></span>');function Rr(e,t){let s=he(t,"removable",3,!1);var r=Rv(),l=n(r);Ua(l,()=>t.children);var i=o(l,2);{var v=d=>{var c=Nv();pe("click",c,function(...u){var h;(h=t.onremove)==null||h.apply(this,u)}),f(d,c)};ne(i,d=>{s()&&d(v)})}f(e,r)}Te(["click"]);var Hv=k('<p class="topic-desc svelte-177izw7"> </p>'),Lv=k('<span class="more svelte-177izw7"> </span>'),Fv=k('<div class="topic-tags svelte-177izw7"><!> <!></div>'),Yv=k('<div class="topic-card svelte-177izw7"><div class="topic-header svelte-177izw7"><h3 class="svelte-177izw7"> </h3> <!></div> <!> <!> <div class="topic-actions svelte-177izw7"><!> <!></div></div>'),Uv=k('<div class="empty-state svelte-177izw7">Henuz konu yok</div>'),Gv=k('<div class="topics-grid svelte-177izw7"></div>'),Vv=k('<div class="form-group svelte-177izw7"><label class="svelte-177izw7">Baslik <input class="input svelte-177izw7" placeholder="Konu basligi"/></label></div> <div class="form-group svelte-177izw7"><label class="svelte-177izw7">Aciklama <textarea class="textarea svelte-177izw7" rows="3" placeholder="Konu aciklamasi..."></textarea></label></div> <div class="form-group svelte-177izw7"><label class="svelte-177izw7">Anahtar Kelimeler <div class="kw-input-row svelte-177izw7"><input class="input svelte-177izw7" placeholder="Kelime ekle..."/> <!> <!></div></label> <div class="kw-tags svelte-177izw7"></div></div> <div class="modal-actions svelte-177izw7"><!> <!></div>',1),Wv=k(`<div class="page-header svelte-177izw7"><div><h1 class="svelte-177izw7">Konular <!></h1> <p class="svelte-177izw7">Bot'un bilgi konulari</p></div> <!></div> <!> <!>`,1);function Qv(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(!1),i=B(me({title:"",description:"",keywords:[],enabled:!0})),v=B(null),d=B("");Ee(()=>c());async function c(){y(s,!0);try{const $=await ae.get("admin/agent/topics");y(r,$.topics||$||[],!0)}catch($){Y("Konular yuklenemedi: "+$.message,"error")}finally{y(s,!1)}}function u(){y(v,null),y(i,{title:"",description:"",keywords:[],enabled:!0},!0),y(l,!0)}function h($){y(v,$.id||$._id,!0),y(i,{title:$.title,description:$.description||"",keywords:[...$.keywords||[]],enabled:$.enabled!==!1},!0),y(l,!0)}async function p(){if(a(i).title.trim())try{a(v)?(await ae.put("admin/agent/topics/"+a(v),a(i)),Y("Guncellendi","success")):(await ae.post("admin/agent/topics",a(i)),Y("Olusturuldu","success")),y(l,!1),await c()}catch($){Y("Hata: "+$.message,"error")}}async function x($){if(await Ba({title:"Konuyu Sil",message:"Bu konu silinecek. Emin misiniz?",confirmText:"Sil",danger:!0}))try{await ae.delete("admin/agent/topics/"+$),Y("Silindi","success"),await c()}catch(L){Y("Hata: "+L.message,"error")}}function m(){const $=a(d).trim();$&&!a(i).keywords.includes($)&&(a(i).keywords=[...a(i).keywords,$]),y(d,"")}function _($){a(i).keywords=a(i).keywords.filter(H=>H!==$)}async function b(){if(a(i).title.trim())try{const H=(await ae.post("admin/topics/suggest-keywords",{title:a(i).title})).keywords||[],L=[...new Set([...a(i).keywords,...H])];a(i).keywords=L,Y(H.length+" keyword onerildi","info")}catch($){Y("Oneri hatasi: "+$.message,"error")}}var g=Wv(),w=ve(g),P=n(w),j=n(P),C=o(n(j));Ke(C,{variant:"blue",children:($,H)=>{var L=Q();V(()=>A(L,a(r).length)),f($,L)},$$slots:{default:!0}});var q=o(P,2);ie(q,{onclick:u,variant:"primary",size:"sm",children:($,H)=>{var L=Q("+ Yeni Konu");f($,L)},$$slots:{default:!0}});var E=o(w,2);{var K=$=>{Ae($,{message:"Yukleniyor..."})},I=$=>{var H=Gv();ke(H,21,()=>a(r),qe,(L,D)=>{var R=Yv(),U=n(R),F=n(U),J=n(F),G=o(F,2);{let W=oe(()=>a(D).enabled!==!1?"green":"gray");Ke(G,{get variant(){return a(W)},children:(re,le)=>{var fe=Q();V(()=>A(fe,a(D).enabled!==!1?"aktif":"pasif")),f(re,fe)},$$slots:{default:!0}})}var z=o(U,2);{var M=W=>{var re=Hv(),le=n(re);V(()=>A(le,a(D).description)),f(W,re)};ne(z,W=>{a(D).description&&W(M)})}var Z=o(z,2);{var X=W=>{var re=Fv(),le=n(re);ke(le,17,()=>a(D).keywords.slice(0,5),qe,(de,se)=>{Rr(de,{children:(be,Se)=>{var je=Q();V(()=>A(je,a(se))),f(be,je)},$$slots:{default:!0}})});var fe=o(le,2);{var te=de=>{var se=Lv(),be=n(se);V(()=>A(be,`+${a(D).keywords.length-5}`)),f(de,se)};ne(fe,de=>{a(D).keywords.length>5&&de(te)})}f(W,re)};ne(Z,W=>{var re;(re=a(D).keywords)!=null&&re.length&&W(X)})}var S=o(Z,2),ee=n(S);ie(ee,{onclick:()=>h(a(D)),variant:"ghost",size:"sm",children:(W,re)=>{var le=Q("Duzenle");f(W,le)},$$slots:{default:!0}});var N=o(ee,2);ie(N,{onclick:()=>x(a(D).id||a(D)._id),variant:"ghost",size:"sm",children:(W,re)=>{var le=Q("Sil");f(W,le)},$$slots:{default:!0}}),V(()=>A(J,a(D).title)),f(L,R)},L=>{var D=Uv();f(L,D)}),f($,H)};ne(E,$=>{a(s)?$(K):$(I,!1)})}var T=o(E,2);{let $=oe(()=>a(v)?"Konu Duzenle":"Yeni Konu");ns(T,{get title(){return a($)},get open(){return a(l)},set open(H){y(l,H,!0)},children:(H,L)=>{var D=Vv(),R=ve(D),U=n(R),F=o(n(U)),J=o(R,2),G=n(J),z=o(n(G)),M=o(J,2),Z=n(M),X=o(n(Z)),S=n(X),ee=o(S,2);ie(ee,{onclick:m,variant:"secondary",size:"sm",children:(te,de)=>{var se=Q("Ekle");f(te,se)},$$slots:{default:!0}});var N=o(ee,2);ie(N,{onclick:b,variant:"ghost",size:"sm",children:(te,de)=>{var se=Q("AI Oner");f(te,se)},$$slots:{default:!0}});var W=o(Z,2);ke(W,21,()=>a(i).keywords,qe,(te,de)=>{Rr(te,{removable:!0,onremove:()=>_(a(de)),children:(se,be)=>{var Se=Q();V(()=>A(Se,a(de))),f(se,Se)},$$slots:{default:!0}})});var re=o(M,2),le=n(re);ie(le,{onclick:()=>y(l,!1),variant:"secondary",children:(te,de)=>{var se=Q("Iptal");f(te,se)},$$slots:{default:!0}});var fe=o(le,2);ie(fe,{onclick:p,variant:"primary",children:(te,de)=>{var se=Q("Kaydet");f(te,se)},$$slots:{default:!0}}),ue(F,()=>a(i).title,te=>a(i).title=te),ue(z,()=>a(i).description,te=>a(i).description=te),pe("keydown",S,te=>{te.key==="Enter"&&(te.preventDefault(),m())}),ue(S,()=>a(d),te=>y(d,te)),f(H,D)},$$slots:{default:!0}})}f(e,g),ye()}Te(["keydown"]);var Zv=k('<span class="expand-icon svelte-1bxmv6d"><!></span>'),Jv=k('<div class="expand-body svelte-1bxmv6d"><!></div>'),Xv=k('<div><div class="expand-header svelte-1bxmv6d"><h3 class="svelte-1bxmv6d"><!> </h3> <svg class="expand-chevron svelte-1bxmv6d" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></div> <!></div>');function Dt(e,t){ge(t,!0);let s=he(t,"title",3,""),r=he(t,"open",15,!1),l=he(t,"icon",3,"");var i=Xv();let v;var d=n(i),c=n(d),u=n(c);{var h=_=>{var b=Zv(),g=n(b);Dl(g,l),f(_,b)};ne(u,_=>{l()&&_(h)})}var p=o(u),x=o(d,2);{var m=_=>{var b=Jv(),g=n(b);Ua(g,()=>t.children),f(_,b)};ne(x,_=>{r()&&_(m)})}V(()=>{v=Ie(i,1,"expand-card svelte-1bxmv6d",null,v,{open:r()}),A(p,` ${s()??""}`)}),pe("click",d,()=>r(!r())),f(e,i),ye()}Te(["click"]);var ed=k('<span role="switch" tabindex="0"></span>');function Tt(e,t){ge(t,!0);let s=he(t,"checked",15),r=he(t,"disabled",3,!1),l=oe(()=>!!s());function i(){var c;r()||(s(!a(l)),(c=t.onchange)==null||c.call(t,s()))}var v=ed();let d;V(()=>{d=Ie(v,1,"toggle svelte-eylgc7",null,d,{on:a(l),disabled:r()}),pa(v,"aria-checked",a(l))}),pe("click",v,i),pe("keydown",v,c=>{(c.key===" "||c.key==="Enter")&&(c.preventDefault(),i())}),f(e,v),ye()}Te(["click","keydown"]);var td=k('<textarea class="mono-editor svelte-1hhzm9b" rows="12"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),ad=k('<textarea class="mono-editor svelte-1hhzm9b" rows="12"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),sd=k('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),rd=k('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),ld=k('<textarea class="mono-editor svelte-1hhzm9b" rows="8"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),id=k('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),nd=k('<div class="flow-grid svelte-1hhzm9b"><div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Karsilama Mesaji <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Mesai Disi Mesaji <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Otomatik Kapanis (dk) <input class="input svelte-1hhzm9b" type="number"/></label></div> <div class="form-row svelte-1hhzm9b"><label class="svelte-1hhzm9b">Karsilama Aktif <!></label></div></div> <div class="card-actions svelte-1hhzm9b"><!></div>',1),od=k('<div class="flow-grid svelte-1hhzm9b"><div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Bot Adi <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Sirket Adi <input class="input svelte-1hhzm9b"/></label></div></div>'),vd=k("<!> <!> <!> <!> <!> <!> <!> <!>",1),dd=k('<div class="page-header svelte-1hhzm9b"><div><h1 class="svelte-1hhzm9b">Bot Ayarlari</h1> <p class="svelte-1hhzm9b">Bot davranisi ve yapilandirmasi</p></div> <!></div> <!>',1);function cd(e,t){ge(t,!0);let s=B(!0),r=B(""),l=B(""),i=B(""),v=B(""),d=B(""),c=B(""),u=B(me({})),h=B(me({}));Ee(async()=>{try{const[C,q,E,K,I,T,$,H]=await Promise.all([ae.get("admin/agent/files/soul.md").catch(()=>({content:""})),ae.get("admin/agent/files/persona.md").catch(()=>({content:""})),ae.get("admin/agent/files/domain.md").catch(()=>({content:""})),ae.get("admin/agent/files/skills.md").catch(()=>({content:""})),ae.get("admin/agent/files/hard-bans.md").catch(()=>({content:""})),ae.get("admin/agent/files/escalation-matrix.md").catch(()=>({content:""})),ae.get("admin/chat-flow").catch(()=>({})),ae.get("admin/site-config").catch(()=>({}))]);y(r,C.content||"",!0),y(l,q.content||"",!0),y(i,E.content||"",!0),y(v,K.content||"",!0),y(d,I.content||"",!0),y(c,T.content||"",!0),y(u,$.config||$||{},!0),y(h,H.config||H||{},!0)}catch(C){Y("Bot ayarlari yuklenemedi: "+C.message,"error")}finally{y(s,!1)}});async function p(C,q){try{await ae.put("admin/agent/files/"+C,{content:q}),Y(C+" kaydedildi","success")}catch(E){Y("Hata: "+E.message,"error")}}async function x(){try{await ae.put("admin/chat-flow",{config:a(u)}),Y("Sohbet akisi kaydedildi","success")}catch(C){Y("Hata: "+C.message,"error")}}async function m(){try{await ae.post("admin/agent/reload",{}),Y("Agent dosyalari yeniden yuklendi","success")}catch(C){Y("Hata: "+C.message,"error")}}var _=dd(),b=ve(_),g=o(n(b),2);ie(g,{onclick:m,variant:"secondary",size:"sm",children:(C,q)=>{var E=Q("Agent'i Yenile");f(C,E)},$$slots:{default:!0}});var w=o(b,2);{var P=C=>{Ae(C,{message:"Yukleniyor..."})},j=C=>{var q=vd(),E=ve(q);Dt(E,{title:"Kimlik (soul.md)",children:(R,U)=>{var F=td(),J=ve(F),G=o(J,2),z=n(G);ie(z,{onclick:()=>p("soul.md",a(r)),variant:"primary",size:"sm",children:(M,Z)=>{var X=Q("Kaydet");f(M,X)},$$slots:{default:!0}}),ue(J,()=>a(r),M=>y(r,M)),f(R,F)},$$slots:{default:!0}});var K=o(E,2);Dt(K,{title:"Persona (persona.md)",children:(R,U)=>{var F=ad(),J=ve(F),G=o(J,2),z=n(G);ie(z,{onclick:()=>p("persona.md",a(l)),variant:"primary",size:"sm",children:(M,Z)=>{var X=Q("Kaydet");f(M,X)},$$slots:{default:!0}}),ue(J,()=>a(l),M=>y(l,M)),f(R,F)},$$slots:{default:!0}});var I=o(K,2);Dt(I,{title:"Domain (domain.md)",children:(R,U)=>{var F=sd(),J=ve(F),G=o(J,2),z=n(G);ie(z,{onclick:()=>p("domain.md",a(i)),variant:"primary",size:"sm",children:(M,Z)=>{var X=Q("Kaydet");f(M,X)},$$slots:{default:!0}}),ue(J,()=>a(i),M=>y(i,M)),f(R,F)},$$slots:{default:!0}});var T=o(I,2);Dt(T,{title:"Beceriler (skills.md)",children:(R,U)=>{var F=rd(),J=ve(F),G=o(J,2),z=n(G);ie(z,{onclick:()=>p("skills.md",a(v)),variant:"primary",size:"sm",children:(M,Z)=>{var X=Q("Kaydet");f(M,X)},$$slots:{default:!0}}),ue(J,()=>a(v),M=>y(v,M)),f(R,F)},$$slots:{default:!0}});var $=o(T,2);Dt($,{title:"Yasaklar (hard-bans.md)",children:(R,U)=>{var F=ld(),J=ve(F),G=o(J,2),z=n(G);ie(z,{onclick:()=>p("hard-bans.md",a(d)),variant:"primary",size:"sm",children:(M,Z)=>{var X=Q("Kaydet");f(M,X)},$$slots:{default:!0}}),ue(J,()=>a(d),M=>y(d,M)),f(R,F)},$$slots:{default:!0}});var H=o($,2);Dt(H,{title:"Eskalasyon Matrisi",children:(R,U)=>{var F=id(),J=ve(F),G=o(J,2),z=n(G);ie(z,{onclick:()=>p("escalation-matrix.md",a(c)),variant:"primary",size:"sm",children:(M,Z)=>{var X=Q("Kaydet");f(M,X)},$$slots:{default:!0}}),ue(J,()=>a(c),M=>y(c,M)),f(R,F)},$$slots:{default:!0}});var L=o(H,2);Dt(L,{title:"Sohbet Akisi",children:(R,U)=>{var F=nd(),J=ve(F),G=n(J),z=n(G),M=o(n(z)),Z=o(G,2),X=n(Z),S=o(n(X)),ee=o(Z,2),N=n(ee),W=o(n(N)),re=o(ee,2),le=n(re),fe=o(n(le));Tt(fe,{get checked(){return a(u).greetingEnabled},set checked(se){a(u).greetingEnabled=se}});var te=o(J,2),de=n(te);ie(de,{onclick:x,variant:"primary",size:"sm",children:(se,be)=>{var Se=Q("Kaydet");f(se,Se)},$$slots:{default:!0}}),ue(M,()=>a(u).greetingMessage,se=>a(u).greetingMessage=se),ue(S,()=>a(u).offHoursMessage,se=>a(u).offHoursMessage=se),ue(W,()=>a(u).autoCloseMinutes,se=>a(u).autoCloseMinutes=se),f(R,F)},$$slots:{default:!0}});var D=o(L,2);Dt(D,{title:"Genel Ayarlar",children:(R,U)=>{var F=od(),J=n(F),G=n(J),z=o(n(G)),M=o(J,2),Z=n(M),X=o(n(Z));ue(z,()=>a(h).botName,S=>a(h).botName=S),ue(X,()=>a(h).companyName,S=>a(h).companyName=S),f(R,F)},$$slots:{default:!0}}),f(C,q)};ne(w,C=>{a(s)?C(P):C(j,!1)})}f(e,_),ye()}var ud=k('<div class="empty-chat svelte-cy08up">Henuz mesaj yok</div>'),fd=k('<div class="chat-thread svelte-cy08up"></div>');function hd(e,t){ge(t,!0);let s=he(t,"messages",19,()=>[]),r;function l(){r&&(r.scrollTop=r.scrollHeight)}Ee(l),ss(()=>{s().length,setTimeout(l,50)});var i=fd();ke(i,21,s,qe,(v,d)=>{{let c=oe(()=>a(d).sender||a(d).role),u=oe(()=>a(d).text||a(d).content||a(d).message),h=oe(()=>a(d).timestamp||"");hs(v,{get sender(){return a(c)},get message(){return a(u)},get timestamp(){return a(h)}})}},v=>{var d=ud();f(v,d)}),gr(i,v=>r=v,()=>r),f(e,i),ye()}var pd=k('<div class="test-card svelte-3882be"><div class="test-header svelte-3882be"><span class="test-label svelte-3882be"> </span> <div class="test-actions svelte-3882be"><!> <!></div></div> <!> <!></div>'),_d=k('<div class="page-header svelte-3882be"><div><h1 class="svelte-3882be">Bot Test</h1> <p class="svelte-3882be">Canli bot testi â multi-session</p></div> <!></div> <div></div>',1);function md(e){let t=B(me([{id:1,messages:[],sessionId:crypto.randomUUID()}])),s=2;function r(){a(t).length>=4||y(t,[...a(t),{id:s++,messages:[],sessionId:crypto.randomUUID()}],!0)}function l(x){y(t,a(t).filter(m=>m.id!==x),!0)}async function i(x,m){x.messages=[...x.messages,{role:"user",content:m,sender:"user"}];try{const b=await(await fetch("api/chat",{method:"POST",headers:{"Content-Type":"application/json","Bypass-Tunnel-Reminder":"true"},body:JSON.stringify({message:m,sessionId:x.sessionId})})).json();x.messages=[...x.messages,{role:"assistant",content:b.reply||b.message||"...",sender:"bot"}]}catch{x.messages=[...x.messages,{role:"assistant",content:"Hata olustu",sender:"system"}]}}function v(x){x.messages=[],x.sessionId=crypto.randomUUID()}var d=_d(),c=ve(d),u=o(n(c),2);{let x=oe(()=>a(t).length>=4);ie(u,{onclick:r,variant:"primary",size:"sm",get disabled(){return a(x)},children:(m,_)=>{var b=Q("+ Oturum Ekle");f(m,b)},$$slots:{default:!0}})}var h=o(c,2);let p;ke(h,21,()=>a(t),x=>x.id,(x,m)=>{var _=pd(),b=n(_),g=n(b),w=n(g),P=o(g,2),j=n(P);ie(j,{onclick:()=>v(a(m)),variant:"ghost",size:"sm",children:(I,T)=>{var $=Q("Temizle");f(I,$)},$$slots:{default:!0}});var C=o(j,2);{var q=I=>{ie(I,{onclick:()=>l(a(m).id),variant:"ghost",size:"sm",children:(T,$)=>{var H=Q("Kapat");f(T,H)},$$slots:{default:!0}})};ne(C,I=>{a(t).length>1&&I(q)})}var E=o(b,2);hd(E,{get messages(){return a(m).messages}});var K=o(E,2);Yl(K,{onsend:I=>i(a(m),I)}),V(()=>A(w,`Oturum #${a(m).id??""}`)),f(x,_)}),V(()=>p=Ie(h,1,"test-grid svelte-3882be",null,p,{single:a(t).length===1,double:a(t).length===2})),f(e,d)}var gd=k('<div class="flow-sections svelte-16lqas5"><div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Karsilama</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Aktif <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Mesaji <textarea class="textarea svelte-16lqas5" rows="3"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Gecikmesi (ms) <input class="input svelte-16lqas5" type="number"/></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Zamanlama</h2> <div class="form-grid svelte-16lqas5"><div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Mesai Disi Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Otomatik Kapanis (dk) <input class="input svelte-16lqas5" type="number"/></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Inaktiflik Uyarisi (dk) <input class="input svelte-16lqas5" type="number"/></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Algilama</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Konu Algilama Aktif <!></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Duygu Analizi <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Maks Klarifikasyon <input class="input svelte-16lqas5" type="number"/></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Kapanis</h2> <div class="form-grid svelte-16lqas5"><div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Kapanis Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">CSAT Anketi <!></label></div></div></div></div>'),yd=k('<div class="page-header svelte-16lqas5"><div><h1 class="svelte-16lqas5">Sohbet Akisi</h1> <p class="svelte-16lqas5">Karsilama, zamanlama, algilama, kapanis ayarlari</p></div> <!></div> <!>',1);function wd(e,t){ge(t,!0);let s=B(!0),r=B(me({}));Ee(async()=>{try{const p=await ae.get("admin/chat-flow");y(r,p.config||p||{},!0)}catch(p){Y("Sohbet akisi yuklenemedi: "+p.message,"error")}finally{y(s,!1)}});async function l(){try{await ae.put("admin/chat-flow",{config:a(r)}),Y("Kaydedildi","success")}catch(p){Y("Hata: "+p.message,"error")}}var i=yd(),v=ve(i),d=o(n(v),2);ie(d,{onclick:l,variant:"primary",size:"sm",children:(p,x)=>{var m=Q("Kaydet");f(p,m)},$$slots:{default:!0}});var c=o(v,2);{var u=p=>{Ae(p,{message:"Yukleniyor..."})},h=p=>{var x=gd(),m=n(x),_=o(n(m),2),b=n(_),g=n(b),w=o(n(g));Tt(w,{get checked(){return a(r).greetingEnabled},set checked(ce){a(r).greetingEnabled=ce}});var P=o(b,2),j=n(P),C=o(n(j)),q=o(P,2),E=n(q),K=o(n(E)),I=o(m,2),T=o(n(I),2),$=n(T),H=n($),L=o(n(H)),D=o($,2),R=n(D),U=o(n(R)),F=o(D,2),J=n(F),G=o(n(J)),z=o(I,2),M=o(n(z),2),Z=n(M),X=n(Z),S=o(n(X));Tt(S,{get checked(){return a(r).topicDetectionEnabled},set checked(ce){a(r).topicDetectionEnabled=ce}});var ee=o(Z,2),N=n(ee),W=o(n(N));Tt(W,{get checked(){return a(r).sentimentEnabled},set checked(ce){a(r).sentimentEnabled=ce}});var re=o(ee,2),le=n(re),fe=o(n(le)),te=o(z,2),de=o(n(te),2),se=n(de),be=n(se),Se=o(n(be)),je=o(se,2),Pe=n(je),Fe=o(n(Pe));Tt(Fe,{get checked(){return a(r).csatEnabled},set checked(ce){a(r).csatEnabled=ce}}),ue(C,()=>a(r).greetingMessage,ce=>a(r).greetingMessage=ce),ue(K,()=>a(r).greetingDelay,ce=>a(r).greetingDelay=ce),ue(L,()=>a(r).offHoursMessage,ce=>a(r).offHoursMessage=ce),ue(U,()=>a(r).autoCloseMinutes,ce=>a(r).autoCloseMinutes=ce),ue(G,()=>a(r).inactivityWarningMinutes,ce=>a(r).inactivityWarningMinutes=ce),ue(fe,()=>a(r).maxClarifications,ce=>a(r).maxClarifications=ce),ue(Se,()=>a(r).closingMessage,ce=>a(r).closingMessage=ce),f(p,x)};ne(c,p=>{a(s)?p(u):p(h,!1)})}f(e,i),ye()}var bd=k('<label class="color-label svelte-2a5p8g"> <div class="color-row svelte-2a5p8g"><input type="color" class="color-input svelte-2a5p8g"/> <input type="text" class="color-text svelte-2a5p8g" maxlength="7"/></div></label>'),kd=k('<div class="color-row svelte-2a5p8g"><input type="color" class="color-input svelte-2a5p8g"/> <input type="text" class="color-text svelte-2a5p8g" maxlength="7"/></div>'),xd=k('<div class="color-picker svelte-2a5p8g"><!></div>');function Hr(e,t){ge(t,!0);let s=he(t,"value",15,"#2563eb"),r=he(t,"label",3,"");var l=xd(),i=n(l);{var v=c=>{var u=bd(),h=n(u),p=o(h),x=n(p),m=o(x,2);V(()=>A(h,`${r()??""} `)),ue(x,s),ue(m,s),f(c,u)},d=c=>{var u=kd(),h=n(u),p=o(h,2);ue(h,s),ue(p,s),f(c,u)};ne(i,c=>{r()?c(v):c(d,!1)})}f(e,l),ye()}var $d=k('<div class="settings-grid svelte-m0wld2"><div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Widget Ayarlari</h2> <div class="form-grid svelte-m0wld2"><div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Bot Adi</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Karsilama Mesaji</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Placeholder</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Pozisyon</span> <select class="select svelte-m0wld2"><option>Sag</option><option>Sol</option></select></div> <div class="form-row svelte-m0wld2"><span class="label svelte-m0wld2">Widget Aktif</span><!></div> <div class="form-row svelte-m0wld2"><span class="label svelte-m0wld2">Ses Efekti</span><!></div></div></div> <div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Gorunum</h2> <div class="form-grid svelte-m0wld2"><!> <!> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Border Radius</span><input class="input svelte-m0wld2" type="number"/></div></div></div> <div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Logo</h2> <div class="logo-upload svelte-m0wld2"><input type="file" accept="image/*"/> <!></div></div></div>'),qd=k('<div class="page-header svelte-m0wld2"><div><h1 class="svelte-m0wld2">Site Ayarlari</h1><p class="svelte-m0wld2">Widget gorunumu ve yapilandirmasi</p></div> <!></div> <!>',1);function zd(e,t){ge(t,!0);let s=B(!0),r=B(me({})),l=B(null);Ee(async()=>{try{const m=await ae.get("admin/site-config");y(r,m.config||m||{},!0)}catch(m){Y("Site ayarlari yuklenemedi: "+m.message,"error")}finally{y(s,!1)}});async function i(){try{await ae.put("admin/site-config",{config:a(r)}),Y("Kaydedildi","success")}catch(m){Y("Hata: "+m.message,"error")}}async function v(){if(a(l))try{await ae.upload("admin/site-logo",a(l)),Y("Logo yuklendi","success")}catch(m){Y("Hata: "+m.message,"error")}}var d=qd(),c=ve(d),u=o(n(c),2);ie(u,{onclick:i,variant:"primary",size:"sm",children:(m,_)=>{var b=Q("Kaydet");f(m,b)},$$slots:{default:!0}});var h=o(c,2);{var p=m=>{Ae(m,{message:"Yukleniyor..."})},x=m=>{var _=$d(),b=n(_),g=o(n(b),2),w=n(g),P=o(n(w)),j=o(w,2),C=o(n(j)),q=o(j,2),E=o(n(q)),K=o(q,2),I=o(n(K),2),T=n(I);T.value=T.__value="right";var $=o(T);$.value=$.__value="left";var H=o(K,2),L=o(n(H));Tt(L,{get checked(){return a(r).enabled},set checked(N){a(r).enabled=N}});var D=o(H,2),R=o(n(D));Tt(R,{get checked(){return a(r).soundEnabled},set checked(N){a(r).soundEnabled=N}});var U=o(b,2),F=o(n(U),2),J=n(F);Hr(J,{label:"Ana Renk",get value(){return a(r).primaryColor},set value(N){a(r).primaryColor=N}});var G=o(J,2);Hr(G,{label:"Metin Rengi",get value(){return a(r).textColor},set value(N){a(r).textColor=N}});var z=o(G,2),M=o(n(z)),Z=o(U,2),X=o(n(Z),2),S=n(X),ee=o(S,2);{let N=oe(()=>!a(l));ie(ee,{onclick:v,variant:"secondary",size:"sm",get disabled(){return a(N)},children:(W,re)=>{var le=Q("Yukle");f(W,le)},$$slots:{default:!0}})}ue(P,()=>a(r).botName,N=>a(r).botName=N),ue(C,()=>a(r).welcomeMessage,N=>a(r).welcomeMessage=N),ue(E,()=>a(r).inputPlaceholder,N=>a(r).inputPlaceholder=N),es(I,()=>a(r).position,N=>a(r).position=N),ue(M,()=>a(r).borderRadius,N=>a(r).borderRadius=N),pe("change",S,N=>{y(l,N.target.files[0],!0)}),f(m,_)};ne(h,m=>{a(s)?m(p):m(x,!1)})}f(e,d),ye()}Te(["change"]);var Sd=k('<div class="card svelte-13nqmxo"><div class="form-grid svelte-13nqmxo"><div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">App ID</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Key ID</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Secret</span><input class="input svelte-13nqmxo" type="password"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Subdomain</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Webhook URL</span><input class="input svelte-13nqmxo" readonly=""/></div> <div class="form-row svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Aktif</span><!></div></div></div>'),Ed=k('<div class="page-header svelte-13nqmxo"><div><h1 class="svelte-13nqmxo">Zendesk</h1><p class="svelte-13nqmxo">Zendesk Sunshine entegrasyonu</p></div> <div class="actions svelte-13nqmxo"><!> <!></div></div> <!>',1);function Td(e,t){ge(t,!0);let s=B(!0),r=B(me({})),l=B(!1);Ee(async()=>{try{const b=await ae.get("admin/sunshine-config");y(r,b.config||b||{},!0)}catch(b){Y("Zendesk config yuklenemedi: "+b.message,"error")}finally{y(s,!1)}});async function i(){try{await ae.put("admin/sunshine-config",{config:a(r)}),Y("Kaydedildi","success")}catch(b){Y("Hata: "+b.message,"error")}}async function v(){y(l,!0);try{await ae.post("admin/sunshine-config/test",{}),Y("Baglanti basarili","success")}catch(b){Y("Test basarisiz: "+b.message,"error")}finally{y(l,!1)}}var d=Ed(),c=ve(d),u=o(n(c),2),h=n(u);ie(h,{onclick:v,variant:"secondary",size:"sm",get disabled(){return a(l)},children:(b,g)=>{var w=Q();V(()=>A(w,a(l)?"Test ediliyor...":"Baglanti Test")),f(b,w)},$$slots:{default:!0}});var p=o(h,2);ie(p,{onclick:i,variant:"primary",size:"sm",children:(b,g)=>{var w=Q("Kaydet");f(b,w)},$$slots:{default:!0}});var x=o(c,2);{var m=b=>{Ae(b,{message:"Yukleniyor..."})},_=b=>{var g=Sd(),w=n(g),P=n(w),j=o(n(P)),C=o(P,2),q=o(n(C)),E=o(C,2),K=o(n(E)),I=o(E,2),T=o(n(I)),$=o(I,2),H=o(n($)),L=o($,2),D=o(n(L));Tt(D,{get checked(){return a(r).enabled},set checked(R){a(r).enabled=R}}),ue(j,()=>a(r).appId,R=>a(r).appId=R),ue(q,()=>a(r).keyId,R=>a(r).keyId=R),ue(K,()=>a(r).secret,R=>a(r).secret=R),ue(T,()=>a(r).subdomain,R=>a(r).subdomain=R),ue(H,()=>a(r).webhookUrl,R=>a(r).webhookUrl=R),f(b,g)};ne(x,b=>{a(s)?b(m):b(_,!1)})}f(e,d),ye()}var Ad=k('<div class="card svelte-1i3ct0m"><div class="form-grid svelte-1i3ct0m"><div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">API Token</span><input class="input svelte-1i3ct0m" type="password"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Telefon ID</span><input class="input svelte-1i3ct0m"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Verify Token</span><input class="input svelte-1i3ct0m"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Business Account ID</span><input class="input svelte-1i3ct0m"/></div> <div class="form-row svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Aktif</span><!></div></div></div>'),Pd=k('<div class="page-header svelte-1i3ct0m"><div><h1 class="svelte-1i3ct0m">WhatsApp</h1><p class="svelte-1i3ct0m">WhatsApp Business entegrasyonu</p></div> <!></div> <!>',1);function Cd(e,t){ge(t,!0);let s=B(!0),r=B(me({}));Ee(async()=>{try{const p=await ae.get("admin/whatsapp");y(r,p.config||p||{},!0)}catch(p){Y("WhatsApp config yuklenemedi: "+p.message,"error")}finally{y(s,!1)}});async function l(){try{await ae.put("admin/whatsapp",a(r)),Y("Kaydedildi","success")}catch(p){Y("Hata: "+p.message,"error")}}var i=Pd(),v=ve(i),d=o(n(v),2);ie(d,{onclick:l,variant:"primary",size:"sm",children:(p,x)=>{var m=Q("Kaydet");f(p,m)},$$slots:{default:!0}});var c=o(v,2);{var u=p=>{Ae(p,{message:"Yukleniyor..."})},h=p=>{var x=Ad(),m=n(x),_=n(m),b=o(n(_)),g=o(_,2),w=o(n(g)),P=o(g,2),j=o(n(P)),C=o(P,2),q=o(n(C)),E=o(C,2),K=o(n(E));Tt(K,{get checked(){return a(r).enabled},set checked(I){a(r).enabled=I}}),ue(b,()=>a(r).apiToken,I=>a(r).apiToken=I),ue(w,()=>a(r).phoneNumberId,I=>a(r).phoneNumberId=I),ue(j,()=>a(r).verifyToken,I=>a(r).verifyToken=I),ue(q,()=>a(r).businessAccountId,I=>a(r).businessAccountId=I),f(p,x)};ne(c,p=>{a(s)?p(u):p(h,!1)})}f(e,i),ye()}var jd=k('<tr><td class="mono svelte-13cdipi"> </td><td class="svelte-13cdipi"> </td><td class="svelte-13cdipi"><!></td><td class="actions svelte-13cdipi"><!> <!> <!></td></tr>'),Md=k('<tr><td colspan="4" class="empty-row svelte-13cdipi">Webhook yok</td></tr>'),Id=k('<div class="card svelte-13cdipi"><table class="svelte-13cdipi"><thead><tr><th class="svelte-13cdipi">URL</th><th class="svelte-13cdipi">Eventler</th><th class="svelte-13cdipi">Durum</th><th class="svelte-13cdipi"></th></tr></thead><tbody></tbody></table></div>'),Od=k('<label class="check-item svelte-13cdipi"><input type="checkbox"/> </label>'),Dd=k('<div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">URL</span><input class="input svelte-13cdipi" placeholder="https://..."/></div> <div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">Secret</span><input class="input svelte-13cdipi" placeholder="Opsiyonel"/></div> <div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">Eventler</span> <div class="event-checks svelte-13cdipi"></div></div> <div class="modal-actions svelte-13cdipi"><!> <!></div>',1),Kd=k('<div class="page-header svelte-13cdipi"><div><h1 class="svelte-13cdipi">Webhooks</h1><p class="svelte-13cdipi"> </p></div> <!></div> <!> <!>',1);function Bd(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(!1),i=B(me({url:"",events:[],secret:""})),v=B(null);const d=["ticket.created","ticket.updated","ticket.closed","conversation.started","conversation.closed","escalation.requested"];Ee(()=>c());async function c(){y(s,!0);try{const T=await ae.get("admin/webhooks");y(r,T.webhooks||T||[],!0)}catch(T){Y("Webhooks yuklenemedi: "+T.message,"error")}finally{y(s,!1)}}function u(){y(v,null),y(i,{url:"",events:[],secret:""},!0),y(l,!0)}function h(T){y(v,T.id||T._id,!0),y(i,{url:T.url,events:[...T.events||[]],secret:T.secret||""},!0),y(l,!0)}async function p(){if(a(i).url.trim())try{a(v)?await ae.put("admin/webhooks/"+a(v),a(i)):await ae.post("admin/webhooks",a(i)),Y("Kaydedildi","success"),y(l,!1),await c()}catch(T){Y("Hata: "+T.message,"error")}}async function x(T){if(await Ba({title:"Sil",message:"Bu webhook silinecek.",confirmText:"Sil",danger:!0}))try{await ae.delete("admin/webhooks/"+T),Y("Silindi","success"),await c()}catch(H){Y("Hata: "+H.message,"error")}}async function m(T){try{await ae.post("admin/webhooks/"+T+"/test",{}),Y("Test gonderildi","success")}catch($){Y("Test hatasi: "+$.message,"error")}}function _(T){a(i).events.includes(T)?a(i).events=a(i).events.filter($=>$!==T):a(i).events=[...a(i).events,T]}var b=Kd(),g=ve(b),w=n(g),P=o(n(w)),j=n(P),C=o(w,2);ie(C,{onclick:u,variant:"primary",size:"sm",children:(T,$)=>{var H=Q("+ Yeni Webhook");f(T,H)},$$slots:{default:!0}});var q=o(g,2);{var E=T=>{Ae(T,{message:"Yukleniyor..."})},K=T=>{var $=Id(),H=n($),L=o(n(H));ke(L,21,()=>a(r),qe,(D,R)=>{var U=jd(),F=n(U),J=n(F),G=o(F),z=n(G),M=o(G),Z=n(M);{let W=oe(()=>a(R).active!==!1?"green":"gray");Ke(Z,{get variant(){return a(W)},children:(re,le)=>{var fe=Q();V(()=>A(fe,a(R).active!==!1?"aktif":"pasif")),f(re,fe)},$$slots:{default:!0}})}var X=o(M),S=n(X);ie(S,{onclick:()=>m(a(R).id||a(R)._id),variant:"ghost",size:"sm",children:(W,re)=>{var le=Q("Test");f(W,le)},$$slots:{default:!0}});var ee=o(S,2);ie(ee,{onclick:()=>h(a(R)),variant:"ghost",size:"sm",children:(W,re)=>{var le=Q("Duzenle");f(W,le)},$$slots:{default:!0}});var N=o(ee,2);ie(N,{onclick:()=>x(a(R).id||a(R)._id),variant:"ghost",size:"sm",children:(W,re)=>{var le=Q("Sil");f(W,le)},$$slots:{default:!0}}),V(W=>{A(J,a(R).url),A(z,W)},[()=>(a(R).events||[]).join(", ")]),f(D,U)},D=>{var R=Md();f(D,R)}),f(T,$)};ne(q,T=>{a(s)?T(E):T(K,!1)})}var I=o(q,2);{let T=oe(()=>a(v)?"Webhook Duzenle":"Yeni Webhook");ns(I,{get title(){return a(T)},get open(){return a(l)},set open($){y(l,$,!0)},children:($,H)=>{var L=Dd(),D=ve(L),R=o(n(D)),U=o(D,2),F=o(n(U)),J=o(U,2),G=o(n(J),2);ke(G,21,()=>d,qe,(X,S)=>{var ee=Od(),N=n(ee),W=o(N);V(re=>{Ln(N,re),A(W,` ${a(S)??""}`)},[()=>a(i).events.includes(a(S))]),pe("change",N,()=>_(a(S))),f(X,ee)});var z=o(J,2),M=n(z);ie(M,{onclick:()=>y(l,!1),variant:"secondary",children:(X,S)=>{var ee=Q("Iptal");f(X,ee)},$$slots:{default:!0}});var Z=o(M,2);ie(Z,{onclick:p,variant:"primary",children:(X,S)=>{var ee=Q("Kaydet");f(X,ee)},$$slots:{default:!0}}),ue(R,()=>a(i).url,X=>a(i).url=X),ue(F,()=>a(i).secret,X=>a(i).secret=X),f($,L)},$$slots:{default:!0}})}V(()=>A(j,`${a(r).length??""} webhook`)),f(e,b),ye()}Te(["change"]);var Nd=k('<input class="input svelte-gwq0tz" type="password"/>'),Rd=k('<input class="input svelte-gwq0tz"/>'),Hd=k('<tr><td class="mono key-col svelte-gwq0tz"> </td><td class="svelte-gwq0tz"><!></td></tr>'),Ld=k('<tr><td colspan="2" class="empty-row svelte-gwq0tz">Degisken yok</td></tr>'),Fd=k('<div class="card svelte-gwq0tz"><table class="svelte-gwq0tz"><thead><tr><th class="svelte-gwq0tz">Anahtar</th><th class="svelte-gwq0tz">Deger</th></tr></thead><tbody></tbody></table></div>'),Yd=k('<div class="page-header svelte-gwq0tz"><div><h1 class="svelte-gwq0tz">Ortam Degiskenleri</h1><p class="svelte-gwq0tz">Sunucu .env degerleri</p></div> <!></div> <!>',1);function Ud(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(me({}));const i=["ADMIN_TOKEN","GOOGLE_API_KEY","ANTHROPIC_API_KEY","OPENAI_API_KEY","GROQ_API_KEY"];Ee(async()=>{try{const _=await ae.get("admin/env"),b=_.env||_.config||_||{};y(r,Object.entries(b).map(([g,w])=>({key:g,value:String(w),masked:i.includes(g)})),!0)}catch(_){Y("Ortam degiskenleri yuklenemedi: "+_.message,"error")}finally{y(s,!1)}});function v(_,b){a(l)[_]=b}async function d(){if(Object.keys(a(l)).length)try{await ae.put("admin/env",{updates:a(l)}),Y("Kaydedildi â yeniden baslama gerekebilir","success"),y(l,{},!0)}catch(_){Y("Hata: "+_.message,"error")}}var c=Yd(),u=ve(c),h=o(n(u),2);{let _=oe(()=>!Object.keys(a(l)).length);ie(h,{onclick:d,variant:"primary",size:"sm",get disabled(){return a(_)},children:(b,g)=>{var w=Q("Kaydet");f(b,w)},$$slots:{default:!0}})}var p=o(u,2);{var x=_=>{Ae(_,{message:"Yukleniyor..."})},m=_=>{var b=Fd(),g=n(b),w=o(n(g));ke(w,21,()=>a(r),qe,(P,j)=>{var C=Hd(),q=n(C),E=n(q),K=o(q),I=n(K);{var T=H=>{var L=Nd();V(()=>ar(L,a(j).value)),pe("input",L,D=>v(a(j).key,D.target.value)),f(H,L)},$=H=>{var L=Rd();V(()=>ar(L,a(j).value)),pe("input",L,D=>v(a(j).key,D.target.value)),f(H,L)};ne(I,H=>{a(j).masked?H(T):H($,!1)})}V(()=>A(E,a(j).key)),f(P,C)},P=>{var j=Ld();f(P,j)}),f(_,b)};ne(p,_=>{a(s)?_(x):_(m,!1)})}f(e,c),ye()}Te(["input"]);var Gd=k('<div><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg> <span> </span></div>'),Vd=k('<div class="empty-list svelte-sdohvc">Dosya yok</div>'),Wd=k('<div class="editor-header svelte-sdohvc"><span class="mono svelte-sdohvc"> </span></div> <textarea class="mono-editor svelte-sdohvc" spellcheck="false"></textarea>',1),Qd=k('<div class="no-file svelte-sdohvc">Bir dosya secin</div>'),Zd=k('<div class="split-layout svelte-sdohvc"><div class="file-list svelte-sdohvc"></div> <div class="editor-panel svelte-sdohvc"><!></div></div>'),Jd=k('<div class="page-header svelte-sdohvc"><div><h1 class="svelte-sdohvc">Agent Dosyalari</h1><p class="svelte-sdohvc">Bot yapilndirma dosyalari</p></div> <div class="actions svelte-sdohvc"><!> <!></div></div> <!>',1);function Xd(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=B(""),v=B(!1);Ee(async()=>{try{const P=await ae.get("admin/agent/files");y(r,P.files||P||[],!0)}catch(P){Y("Agent dosyalari yuklenemedi: "+P.message,"error")}finally{y(s,!1)}});async function d(P){y(l,P,!0);try{const j=await ae.get("admin/agent/files/"+encodeURIComponent(P));y(i,j.content||"",!0)}catch(j){Y("Dosya okunamadi: "+j.message,"error"),y(i,"")}}async function c(){if(a(l)){y(v,!0);try{await ae.put("admin/agent/files/"+encodeURIComponent(a(l)),{content:a(i)}),Y(a(l)+" kaydedildi","success")}catch(P){Y("Hata: "+P.message,"error")}finally{y(v,!1)}}}async function u(){try{await ae.post("admin/agent/reload",{}),Y("Agent dosyalari yeniden yuklendi","success")}catch(P){Y("Hata: "+P.message,"error")}}var h=Jd(),p=ve(h),x=o(n(p),2),m=n(x);ie(m,{onclick:u,variant:"secondary",size:"sm",children:(P,j)=>{var C=Q("Agent'i Yenile");f(P,C)},$$slots:{default:!0}});var _=o(m,2);{let P=oe(()=>!a(l)||a(v));ie(_,{onclick:c,variant:"primary",size:"sm",get disabled(){return a(P)},children:(j,C)=>{var q=Q();V(()=>A(q,a(v)?"Kaydediliyor...":"Kaydet")),f(j,q)},$$slots:{default:!0}})}var b=o(p,2);{var g=P=>{Ae(P,{message:"Yukleniyor..."})},w=P=>{var j=Zd(),C=n(j);ke(C,21,()=>a(r),qe,(T,$)=>{var H=Gd();let L;var D=o(n(H),2),R=n(D);V(()=>{L=Ie(H,1,"file-item svelte-sdohvc",null,L,{active:a(l)===(a($).name||a($))}),A(R,a($).name||a($))}),pe("click",H,()=>d(a($).name||a($))),f(T,H)},T=>{var $=Vd();f(T,$)});var q=o(C,2),E=n(q);{var K=T=>{var $=Wd(),H=ve($),L=n(H),D=n(L),R=o(H,2);V(()=>A(D,a(l))),ue(R,()=>a(i),U=>y(i,U)),f(T,$)},I=T=>{var $=Qd();f(T,$)};ne(E,T=>{a(l)?T(K):T(I,!1)})}f(P,j)};ne(b,P=>{a(s)?P(g):P(w,!1)})}f(e,h),ye()}Te(["click"]);var ec=k("<div> </div>"),tc=k('<div class="empty-list svelte-1tzwowi">Dosya yok</div>'),ac=k('<textarea class="mono-editor svelte-1tzwowi" spellcheck="false"></textarea>'),sc=k('<div class="no-file svelte-1tzwowi">Bir sablon secin</div>'),rc=k('<div class="split-layout svelte-1tzwowi"><div class="file-list svelte-1tzwowi"></div> <div class="editor-panel svelte-1tzwowi"><!></div></div>'),lc=k('<div class="page-header svelte-1tzwowi"><div><h1 class="svelte-1tzwowi">Bellek Sablonlari</h1><p class="svelte-1tzwowi">Hafiza dosya sablonlari</p></div> <!></div> <!>',1);function ic(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=B("");Ee(async()=>{try{const _=await ae.get("admin/agent/memory");y(r,_.files||_||[],!0)}catch(_){Y("Bellek sablonlari yuklenemedi: "+_.message,"error")}finally{y(s,!1)}});async function v(_){y(l,_,!0);try{const b=await ae.get("admin/agent/memory/"+encodeURIComponent(_));y(i,typeof b.content=="string"?b.content:JSON.stringify(b.content||b,null,2),!0)}catch(b){Y("Dosya okunamadi: "+b.message,"error"),y(i,"")}}async function d(){if(a(l))try{await ae.put("admin/agent/memory/"+encodeURIComponent(a(l)),{content:a(i)}),Y(a(l)+" kaydedildi","success")}catch(_){Y("Hata: "+_.message,"error")}}var c=lc(),u=ve(c),h=o(n(u),2);{let _=oe(()=>!a(l));ie(h,{onclick:d,variant:"primary",size:"sm",get disabled(){return a(_)},children:(b,g)=>{var w=Q("Kaydet");f(b,w)},$$slots:{default:!0}})}var p=o(u,2);{var x=_=>{Ae(_,{message:"Yukleniyor..."})},m=_=>{var b=rc(),g=n(b);ke(g,21,()=>a(r),qe,(q,E)=>{var K=ec();let I;var T=n(K);V(()=>{I=Ie(K,1,"file-item svelte-1tzwowi",null,I,{active:a(l)===(a(E).name||a(E))}),A(T,a(E).name||a(E))}),pe("click",K,()=>v(a(E).name||a(E))),f(q,K)},q=>{var E=tc();f(q,E)});var w=o(g,2),P=n(w);{var j=q=>{var E=ac();ue(E,()=>a(i),K=>y(i,K)),f(q,E)},C=q=>{var E=sc();f(q,E)};ne(P,q=>{a(l)?q(j):q(C,!1)})}f(_,b)};ne(p,_=>{a(s)?_(x):_(m,!1)})}f(e,c),ye()}Te(["click"]);var nc=k('<button role="tab"> </button>'),oc=k('<div class="tabs svelte-stk7vv" role="tablist"></div>');function vc(e,t){ge(t,!0);let s=he(t,"tabs",19,()=>[]),r=he(t,"active",15,"");function l(v){var d;r(v),(d=t.onchange)==null||d.call(t,v)}var i=oc();ke(i,21,s,qe,(v,d)=>{var c=nc();let u;var h=n(c);V(()=>{u=Ie(c,1,"tab svelte-stk7vv",null,u,{active:r()===a(d).id}),pa(c,"aria-selected",r()===a(d).id),A(h,a(d).label)}),pe("click",c,()=>l(a(d).id)),f(v,c)}),f(e,i),ye()}Te(["click"]);var dc=k('<div class="card svelte-j1tc6l"><h2 class="svelte-j1tc6l">Populer Konular</h2> <!></div>'),cc=k('<div class="kpi-grid svelte-j1tc6l"><!> <!> <!> <!></div> <!>',1),uc=k('<div class="page-header svelte-j1tc6l"><div><h1 class="svelte-j1tc6l">Analytics</h1><p class="svelte-j1tc6l">Performans analizi</p></div> <!></div> <!> <!>',1);function fc(e,t){ge(t,!0);let s=B(!0),r=B("7"),l=B(null);const i=[{id:"7",label:"7 Gun"},{id:"30",label:"30 Gun"},{id:"90",label:"90 Gun"}];Ee(()=>v());async function v(){y(s,!0);try{y(l,await ae.get("admin/analytics?range="+a(r)),!0)}catch(w){Y("Analytics yuklenemedi: "+w.message,"error")}finally{y(s,!1)}}function d(w){y(r,w,!0),v()}function c(){window.open("api/admin/analytics/export?range="+a(r)+"&token="+encodeURIComponent(ua()),"_blank")}let u=oe(()=>{var w,P;return(((w=a(l))==null?void 0:w.topTopics)||((P=a(l))==null?void 0:P.topics)||[]).slice(0,10).map(j=>({label:j.topicId||j.topic||j.name||"?",value:j.count||j.total||0}))});var h=uc(),p=ve(h),x=o(n(p),2);ie(x,{onclick:c,variant:"ghost",size:"sm",children:(w,P)=>{var j=Q("Export");f(w,j)},$$slots:{default:!0}});var m=o(p,2);vc(m,{get tabs(){return i},onchange:d,get active(){return a(r)},set active(w){y(r,w,!0)}});var _=o(m,2);{var b=w=>{Ae(w,{message:"Yukleniyor..."})},g=w=>{var P=cc(),j=ve(P),C=n(j);{let $=oe(()=>a(l).totalChats??a(l).chats??0);nt(C,{label:"Toplam Sohbet",get value(){return a($)}})}var q=o(C,2);{let $=oe(()=>a(l).totalEscalations??a(l).escalations??0);nt(q,{label:"Eskalasyon",get value(){return a($)}})}var E=o(q,2);{let $=oe(()=>(a(l).avgCsat??a(l).csatAvg??0).toFixed(1)+"/5");nt(E,{label:"Ort. CSAT",get value(){return a($)}})}var K=o(E,2);{let $=oe(()=>"%"+(a(l).resolutionRate??0));nt(K,{label:"Cozum Orani",get value(){return a($)}})}var I=o(j,2);{var T=$=>{var H=dc(),L=o(n(H),2);Ll(L,{get items(){return a(u)}}),f($,H)};ne(I,$=>{a(u).length&&$(T)})}f(w,P)};ne(_,w=>{a(s)?w(b):a(l)&&w(g,1)})}f(e,h),ye()}var hc=k('<div class="progress svelte-1untuf7"><div class="progress-bar svelte-1untuf7"></div></div>');function pc(e,t){let s=he(t,"value",3,0),r=he(t,"max",3,100),l=he(t,"color",3,"var(--accent)"),i=he(t,"height",3,"6px"),v=oe(()=>Math.min(100,Math.max(0,s()/r()*100)));var d=hc();let c;var u=n(d);let h;V(()=>{c=Ka(d,"",c,{height:i()}),h=Ka(u,"",h,{width:`${a(v)??""}%`,background:l()})}),f(e,d)}var _c=k('<div class="progress-card svelte-11979gn"><!> <p class="progress-text svelte-11979gn"> </p></div>'),mc=k('<span class="muted svelte-11979gn">-</span>'),gc=k('<tr><td class="mono svelte-11979gn"> </td><td class="svelte-11979gn"> </td><td class="svelte-11979gn"><!></td><td class="row-actions svelte-11979gn"><!> <!> <!></td></tr>'),yc=k('<tr><td colspan="4" class="empty-row svelte-11979gn">Senaryo yok</td></tr>'),wc=k('<div class="card svelte-11979gn"><table class="svelte-11979gn"><thead><tr><th class="svelte-11979gn">ID</th><th class="svelte-11979gn">Girdi</th><th class="svelte-11979gn">Son Sonuc</th><th class="svelte-11979gn"></th></tr></thead><tbody></tbody></table></div>'),bc=k('<div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">ID</span><input class="input mono svelte-11979gn" placeholder="S01"/></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Kullanici Girdisi</span><textarea class="textarea svelte-11979gn" rows="3" placeholder="Kullanicinin mesaji..."></textarea></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Beklenen Konular (virgul ile)</span><input class="input svelte-11979gn"/></div> <div class="modal-actions svelte-11979gn"><!> <!></div>',1),kc=k('<div class="page-header svelte-11979gn"><div><h1 class="svelte-11979gn">Eval Yonetimi</h1><p class="svelte-11979gn"> </p></div> <div class="actions svelte-11979gn"><!> <!> <!></div></div> <!> <!> <!>',1);function xc(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(me([])),i=B(!1),v=B(me({completed:0,total:0,text:""})),d=B(me({})),c=B(!1),u=B(me({id:"",input:"",expectedTopics:[],assertions:[]})),h=B(null),p=null;Ee(()=>x()),js(()=>p==null?void 0:p.close());async function x(){y(s,!0);try{const[z,M]=await Promise.all([ae.get("admin/eval/scenarios"),ae.get("admin/eval/history").catch(()=>({history:[]}))]);y(r,z.scenarios||z||[],!0),y(l,M.history||M||[],!0)}catch(z){Y("Eval yuklenemedi: "+z.message,"error")}finally{y(s,!1)}}function m(){y(i,!0),y(v,{completed:0,total:a(r).length,text:"Baslatiliyor..."},!0),y(d,{},!0),p=Fl("admin/eval/run-all?runs=3",{onMessage(z){z.type==="progress"&&(a(v).completed++,a(v).text=z.scenarioId+": "+(z.pass?"GECTI":"KALDI"),a(d)[z.scenarioId]=z),z.type==="done"&&(y(i,!1),p==null||p.close(),a(v).text="Tamamlandi â "+z.passed+"/"+z.total+" gecti",Y("Eval tamamlandi: "+z.passed+"/"+z.total,z.passed===z.total?"success":"warning"),x()),z.type==="error"&&(y(i,!1),p==null||p.close(),a(v).text="Hata: "+z.message,Y("Eval hatasi: "+z.message,"error"))},onError(){y(i,!1),a(v).text="Baglanti hatasi"}})}async function _(z){try{const M=await ae.post("admin/eval/run/"+z+"?runs=3",{});a(d)[z]=M,Y(z+": "+(M.pass?"GECTI":"KALDI"),M.pass?"success":"warning")}catch(M){Y("Hata: "+M.message,"error")}}function b(){y(h,null),y(u,{id:"",input:"",expectedTopics:[],assertions:[]},!0),y(c,!0)}function g(z){y(h,z.id,!0),y(u,{...z,expectedTopics:[...z.expectedTopics||[]],assertions:[...z.assertions||[]]},!0),y(c,!0)}async function w(){if(!(!a(u).id||!a(u).input))try{a(h)?await ae.put("admin/eval/scenarios/"+a(h),a(u)):await ae.post("admin/eval/scenarios",a(u)),Y("Kaydedildi","success"),y(c,!1),await x()}catch(z){Y("Hata: "+z.message,"error")}}async function P(z){if(await Ba({title:"Sil",message:"Senaryo silinecek.",confirmText:"Sil",danger:!0}))try{await ae.delete("admin/eval/scenarios/"+z),Y("Silindi","success"),await x()}catch(Z){Y("Hata: "+Z.message,"error")}}async function j(){if(await Ba({title:"Gecmisi Temizle",message:"Tum eval gecmisi silinecek.",confirmText:"Temizle",danger:!0}))try{await ae.delete("admin/eval/history"),y(l,[],!0),Y("Gecmis temizlendi","success")}catch(M){Y("Hata: "+M.message,"error")}}var C=kc(),q=ve(C),E=n(q),K=o(n(E)),I=n(K),T=o(E,2),$=n(T);ie($,{onclick:j,variant:"ghost",size:"sm",children:(z,M)=>{var Z=Q("Gecmisi Temizle");f(z,Z)},$$slots:{default:!0}});var H=o($,2);ie(H,{onclick:b,variant:"secondary",size:"sm",children:(z,M)=>{var Z=Q("+ Senaryo");f(z,Z)},$$slots:{default:!0}});var L=o(H,2);{let z=oe(()=>a(i)||!a(r).length);ie(L,{onclick:m,variant:"primary",size:"sm",get disabled(){return a(z)},children:(M,Z)=>{var X=Q();V(()=>A(X,a(i)?"Calisiyor...":"Tumu Calistir")),f(M,X)},$$slots:{default:!0}})}var D=o(q,2);{var R=z=>{var M=_c(),Z=n(M);pc(Z,{get value(){return a(v).completed},get max(){return a(v).total}});var X=o(Z,2),S=n(X);V(()=>A(S,`${a(v).completed??""}/${a(v).total??""} â ${a(v).text??""}`)),f(z,M)};ne(D,z=>{a(i)&&z(R)})}var U=o(D,2);{var F=z=>{Ae(z,{message:"Yukleniyor..."})},J=z=>{var M=wc(),Z=n(M),X=o(n(Z));ke(X,21,()=>a(r),qe,(S,ee)=>{var N=gc(),W=n(N),re=n(W),le=o(W),fe=n(le),te=o(le),de=n(te);{var se=ce=>{{let Ze=oe(()=>a(d)[a(ee).id].pass?"green":"red");Ke(ce,{get variant(){return a(Ze)},children:(Ye,_a)=>{var qt=Q();V(()=>A(qt,a(d)[a(ee).id].pass?"GECTI":"KALDI")),f(Ye,qt)},$$slots:{default:!0}})}},be=ce=>{var Ze=mc();f(ce,Ze)};ne(de,ce=>{a(d)[a(ee).id]?ce(se):ce(be,!1)})}var Se=o(te),je=n(Se);ie(je,{onclick:()=>_(a(ee).id),variant:"ghost",size:"sm",children:(ce,Ze)=>{var Ye=Q("Calistir");f(ce,Ye)},$$slots:{default:!0}});var Pe=o(je,2);ie(Pe,{onclick:()=>g(a(ee)),variant:"ghost",size:"sm",children:(ce,Ze)=>{var Ye=Q("Duzenle");f(ce,Ye)},$$slots:{default:!0}});var Fe=o(Pe,2);ie(Fe,{onclick:()=>P(a(ee).id),variant:"ghost",size:"sm",children:(ce,Ze)=>{var Ye=Q("Sil");f(ce,Ye)},$$slots:{default:!0}}),V(ce=>{A(re,a(ee).id),A(fe,ce)},[()=>{var ce;return((ce=a(ee).input)==null?void 0:ce.slice(0,60))||"-"}]),f(S,N)},S=>{var ee=yc();f(S,ee)}),f(z,M)};ne(U,z=>{a(s)?z(F):z(J,!1)})}var G=o(U,2);{let z=oe(()=>a(h)?"Senaryo Duzenle":"Yeni Senaryo");ns(G,{get title(){return a(z)},width:"600px",get open(){return a(c)},set open(M){y(c,M,!0)},children:(M,Z)=>{var X=bc(),S=ve(X),ee=o(n(S)),N=o(S,2),W=o(n(N)),re=o(N,2),le=o(n(re)),fe=o(re,2),te=n(fe);ie(te,{onclick:()=>y(c,!1),variant:"secondary",children:(se,be)=>{var Se=Q("Iptal");f(se,Se)},$$slots:{default:!0}});var de=o(te,2);ie(de,{onclick:w,variant:"primary",children:(se,be)=>{var Se=Q("Kaydet");f(se,Se)},$$slots:{default:!0}}),V(se=>{ee.disabled=!!a(h),ar(le,se)},[()=>(a(u).expectedTopics||[]).join(", ")]),ue(ee,()=>a(u).id,se=>a(u).id=se),ue(W,()=>a(u).input,se=>a(u).input=se),pe("input",le,se=>{a(u).expectedTopics=se.target.value.split(",").map(be=>be.trim()).filter(Boolean)}),f(M,X)},$$slots:{default:!0}})}V(()=>A(I,`${a(r).length??""} senaryo`)),f(e,C),ye()}Te(["input"]);var $c=k('<div class="faq-actions svelte-16g8l1g"><!> <!></div>'),qc=k('<div class="faq-card svelte-16g8l1g"><div class="faq-q svelte-16g8l1g"><strong>S:</strong> </div> <div class="faq-a svelte-16g8l1g"><strong>C:</strong> </div> <div class="faq-footer svelte-16g8l1g"><!> <!></div></div>'),zc=k('<div class="empty svelte-16g8l1g">FAQ onerisi yok</div>'),Sc=k('<div class="faq-list svelte-16g8l1g"></div>'),Ec=k('<div class="page-header svelte-16g8l1g"><div><h1 class="svelte-16g8l1g">FAQ Onerileri</h1><p class="svelte-16g8l1g">Otomatik uretilen SSS onerileri</p></div> <div class="actions svelte-16g8l1g"><!> <!></div></div> <!>',1);function Tc(e,t){ge(t,!0);let s=B(!0),r=B(me([]));Ee(()=>l());async function l(){y(s,!0);try{const g=await ae.get("admin/auto-faq");y(r,g.items||g.faqs||g||[],!0)}catch(g){Y("FAQ yuklenemedi: "+g.message,"error")}finally{y(s,!1)}}async function i(g){try{await ae.post("admin/auto-faq/"+g+"/approve"),Y("Onaylandi","success"),await l()}catch(w){Y("Hata: "+w.message,"error")}}async function v(g){try{await ae.post("admin/auto-faq/"+g+"/reject"),Y("Reddedildi","info"),await l()}catch(w){Y("Hata: "+w.message,"error")}}async function d(){try{await ae.post("admin/auto-faq/generate"),Y("FAQ uretimi basladi","info"),setTimeout(l,3e3)}catch(g){Y("Hata: "+g.message,"error")}}var c=Ec(),u=ve(c),h=o(n(u),2),p=n(h);ie(p,{onclick:d,variant:"secondary",size:"sm",children:(g,w)=>{var P=Q("Yeni Uret");f(g,P)},$$slots:{default:!0}});var x=o(p,2);ie(x,{onclick:l,variant:"ghost",size:"sm",children:(g,w)=>{var P=Q("Yenile");f(g,P)},$$slots:{default:!0}});var m=o(u,2);{var _=g=>{Ae(g,{message:"Yukleniyor..."})},b=g=>{var w=Sc();ke(w,21,()=>a(r),qe,(P,j)=>{var C=qc(),q=n(C),E=o(n(q)),K=o(q,2),I=o(n(K)),T=o(K,2),$=n(T);{let D=oe(()=>a(j).status==="approved"?"green":a(j).status==="rejected"?"red":"yellow");Ke($,{get variant(){return a(D)},children:(R,U)=>{var F=Q();V(()=>A(F,a(j).status||"bekliyor")),f(R,F)},$$slots:{default:!0}})}var H=o($,2);{var L=D=>{var R=$c(),U=n(R);ie(U,{onclick:()=>i(a(j).id||a(j)._id),variant:"primary",size:"sm",children:(J,G)=>{var z=Q("Onayla");f(J,z)},$$slots:{default:!0}});var F=o(U,2);ie(F,{onclick:()=>v(a(j).id||a(j)._id),variant:"ghost",size:"sm",children:(J,G)=>{var z=Q("Reddet");f(J,z)},$$slots:{default:!0}}),f(D,R)};ne(H,D=>{(!a(j).status||a(j).status==="pending")&&D(L)})}V(()=>{A(E,` ${a(j).question??""}`),A(I,` ${a(j).answer??""}`)}),f(P,C)},P=>{var j=zc();f(P,j)}),f(g,w)};ne(m,g=>{a(s)?g(_):g(b,!1)})}f(e,c),ye()}var Ac=k('<div class="kpi-grid svelte-vlvkti"><!> <!> <!> <!></div>'),Pc=k('<tr><td class="svelte-vlvkti"><span> </span></td><td class="svelte-vlvkti"> </td><td class="mono svelte-vlvkti"> </td></tr>'),Cc=k('<div class="card svelte-vlvkti"><h2 class="svelte-vlvkti">Son Geri Bildirimler</h2> <table class="svelte-vlvkti"><thead><tr><th class="svelte-vlvkti">Puan</th><th class="svelte-vlvkti">Yorum</th><th class="svelte-vlvkti">Oturum</th></tr></thead><tbody></tbody></table></div>'),jc=k("<!> <!>",1),Mc=k('<div class="page-header svelte-vlvkti"><div><h1 class="svelte-vlvkti">Feedback Raporu</h1><p class="svelte-vlvkti">Kullanici geri bildirimleri</p></div> <select class="select svelte-vlvkti"><option>7 Gun</option><option>30 Gun</option><option>90 Gun</option></select></div> <!>',1);function Ic(e,t){ge(t,!0);let s=B(!0),r=B(null),l=B(me([])),i=B(30);Ee(()=>v());async function v(){y(s,!0);try{const[g,w]=await Promise.all([ae.get("admin/feedback-report?days="+a(i)),ae.get("admin/feedback").catch(()=>({feedbacks:[]}))]);y(r,g,!0),y(l,w.feedbacks||w||[],!0)}catch(g){Y("Feedback yuklenemedi: "+g.message,"error")}finally{y(s,!1)}}var d=Mc(),c=ve(d),u=o(n(c),2),h=n(u);h.value=h.__value=7;var p=o(h);p.value=p.__value=30;var x=o(p);x.value=x.__value=90;var m=o(c,2);{var _=g=>{Ae(g,{message:"Yukleniyor..."})},b=g=>{var w=jc(),P=ve(w);{var j=E=>{var K=Ac(),I=n(K);{let L=oe(()=>a(r).totalFeedbacks??a(r).total??0);nt(I,{label:"Toplam Feedback",get value(){return a(L)}})}var T=o(I,2);{let L=oe(()=>(a(r).avgCsat??0).toFixed(1)+"/5");nt(T,{label:"Ort. CSAT",get value(){return a(L)}})}var $=o(T,2);{let L=oe(()=>a(r).positive??0);nt($,{label:"Pozitif",get value(){return a(L)},color:"var(--success)"})}var H=o($,2);{let L=oe(()=>a(r).negative??0);nt(H,{label:"Negatif",get value(){return a(L)},color:"var(--error)"})}f(E,K)};ne(P,E=>{a(r)&&E(j)})}var C=o(P,2);{var q=E=>{var K=Cc(),I=o(n(K),2),T=o(n(I));ke(T,21,()=>a(l).slice(0,20),qe,($,H)=>{var L=Pc(),D=n(L),R=n(D);let U;var F=n(R),J=o(D),G=n(J),z=o(J),M=n(z);V(Z=>{U=Ie(R,1,"rating svelte-vlvkti",null,U,{good:a(H).rating>=4,bad:a(H).rating<=2}),A(F,`${a(H).rating??""}/5`),A(G,a(H).comment||"-"),A(M,Z)},[()=>{var Z;return((Z=a(H).sessionId)==null?void 0:Z.slice(-8))||"-"}]),f($,L)}),f(E,K)};ne(C,E=>{a(l).length&&E(q)})}f(g,w)};ne(m,g=>{a(s)?g(_):g(b,!1)})}pe("change",u,v),es(u,()=>a(i),g=>y(i,g)),f(e,d),ye()}Te(["change"]);var Oc=k('<tr><td class="svelte-1vhi8r1"> </td><td class="svelte-1vhi8r1"> </td><td class="svelte-1vhi8r1"> </td></tr>'),Dc=k('<tr><td colspan="3" class="empty-row svelte-1vhi8r1">Content gap yok</td></tr>'),Kc=k('<div class="card svelte-1vhi8r1"><table class="svelte-1vhi8r1"><thead><tr><th class="svelte-1vhi8r1">Soru</th><th class="svelte-1vhi8r1">Sayi</th><th class="svelte-1vhi8r1">Son Gorulme</th></tr></thead><tbody></tbody></table></div>'),Bc=k('<div class="page-header svelte-1vhi8r1"><div><h1 class="svelte-1vhi8r1">Content Gaps</h1><p class="svelte-1vhi8r1">Cevaplanamayan sorular</p></div> <!></div> <!>',1);function Nc(e,t){ge(t,!0);let s=B(!0),r=B(me([]));Ee(()=>l());async function l(){y(s,!0);try{const p=await ae.get("admin/content-gaps");y(r,p.gaps||p||[],!0)}catch(p){Y("Content gaps yuklenemedi: "+p.message,"error")}finally{y(s,!1)}}var i=Bc(),v=ve(i),d=o(n(v),2);ie(d,{onclick:l,variant:"ghost",size:"sm",children:(p,x)=>{var m=Q("Yenile");f(p,m)},$$slots:{default:!0}});var c=o(v,2);{var u=p=>{Ae(p,{message:"Yukleniyor..."})},h=p=>{var x=Kc(),m=n(x),_=o(n(m));ke(_,21,()=>a(r),qe,(b,g)=>{var w=Oc(),P=n(w),j=n(P),C=o(P),q=n(C),E=o(C),K=n(E);V(I=>{A(j,I),A(q,a(g).count||a(g).frequency||0),A(K,a(g).lastSeen||"-")},[()=>is(a(g).question||a(g).query||"",80)]),f(b,w)},b=>{var g=Dc();f(b,g)}),f(p,x)};ne(c,p=>{a(s)?p(u):p(h,!1)})}f(e,i),ye()}var Rc=k('<div class="detail svelte-heq1fv"><!> <div class="version-card svelte-heq1fv"><h2 class="svelte-heq1fv"> </h2> <p class="meta svelte-heq1fv"> </p> <pre class="content-pre svelte-heq1fv"> </pre></div></div>'),Hc=k('<tr><td class="svelte-heq1fv"> </td><td class="svelte-heq1fv"><!></td><td class="svelte-heq1fv"> </td><td class="svelte-heq1fv"><!></td></tr>'),Lc=k('<tr><td colspan="4" class="empty-row svelte-heq1fv">Versiyon yok</td></tr>'),Fc=k('<div class="card svelte-heq1fv"><table class="svelte-heq1fv"><thead><tr><th class="svelte-heq1fv">Dosya</th><th class="svelte-heq1fv">Versiyon</th><th class="svelte-heq1fv">Tarih</th><th class="svelte-heq1fv"></th></tr></thead><tbody></tbody></table></div>'),Yc=k('<div class="page-header svelte-heq1fv"><div><h1 class="svelte-heq1fv">Prompt Gecmisi</h1><p class="svelte-heq1fv">Prompt versiyon gecmisi</p></div> <!></div> <!>',1);function Uc(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null);Ee(()=>i());async function i(){y(s,!0);try{const m=await ae.get("admin/prompt-versions");y(r,m.versions||m||[],!0)}catch(m){Y("Prompt versiyonlari yuklenemedi: "+m.message,"error")}finally{y(s,!1)}}var v=Yc(),d=ve(v),c=o(n(d),2);ie(c,{onclick:i,variant:"ghost",size:"sm",children:(m,_)=>{var b=Q("Yenile");f(m,b)},$$slots:{default:!0}});var u=o(d,2);{var h=m=>{Ae(m,{message:"Yukleniyor..."})},p=m=>{var _=Rc(),b=n(_);ie(b,{onclick:()=>y(l,null),variant:"ghost",size:"sm",children:(K,I)=>{var T=Q("â Geri");f(K,T)},$$slots:{default:!0}});var g=o(b,2),w=n(g),P=n(w),j=o(w,2),C=n(j),q=o(j,2),E=n(q);V(K=>{A(P,a(l).filename||a(l).file),A(C,`Versiyon: ${a(l).version??""} Â· ${K??""}`),A(E,a(l).content||"")},[()=>Ut(a(l).createdAt)]),f(m,_)},x=m=>{var _=Fc(),b=n(_),g=o(n(b));ke(g,21,()=>a(r),qe,(w,P)=>{var j=Hc(),C=n(j),q=n(C),E=o(C),K=n(E);Ke(K,{variant:"blue",children:(L,D)=>{var R=Q();V(()=>A(R,`v${a(P).version??""}`)),f(L,R)},$$slots:{default:!0}});var I=o(E),T=n(I),$=o(I),H=n($);ie(H,{onclick:()=>y(l,a(P),!0),variant:"ghost",size:"sm",children:(L,D)=>{var R=Q("Goruntule");f(L,R)},$$slots:{default:!0}}),V(L=>{A(q,a(P).filename||a(P).file),A(T,L)},[()=>Ut(a(P).createdAt)]),f(w,j)},w=>{var P=Lc();f(w,P)}),f(m,_)};ne(u,m=>{a(s)?m(h):a(l)?m(p,1):m(x,!1)})}f(e,v),ye()}var Gc=k('<div class="card svelte-r56qw2"><h2 class="svelte-r56qw2">Sistem</h2> <div class="info-rows svelte-r56qw2"><div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Durum</span><!></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Uptime</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Node</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Bellek</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">LLM</span><!></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Embedding</span><!></div></div></div>'),Vc=k('<div class="card svelte-r56qw2"><h2 class="svelte-r56qw2">SLA</h2> <div class="info-rows svelte-r56qw2"><div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Ort. Yanit Suresi</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Uptime</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Basari Orani</span><span class="svelte-r56qw2"> </span></div></div></div>'),Wc=k('<tr><td class="svelte-r56qw2"> </td><td class="svelte-r56qw2"><!></td><td class="svelte-r56qw2"> </td></tr>'),Qc=k('<div class="card audit-card svelte-r56qw2"><h2 class="svelte-r56qw2">Denetim Kaydi</h2> <table class="svelte-r56qw2"><thead><tr><th class="svelte-r56qw2">Zaman</th><th class="svelte-r56qw2">Islem</th><th class="svelte-r56qw2">Detay</th></tr></thead><tbody></tbody></table></div>'),Zc=k('<div class="status-grid svelte-r56qw2"><!> <!></div> <!>',1),Jc=k('<div class="page-header svelte-r56qw2"><div><h1 class="svelte-r56qw2">Sistem Durumu</h1><p class="svelte-r56qw2">Sistem sagligi ve denetim</p></div> <!></div> <!>',1);function Xc(e,t){ge(t,!0);let s=B(!0),r=B(null),l=B(null),i=B(me([]));Ee(()=>v());async function v(){y(s,!0);try{const[_,b,g]=await Promise.all([ae.get("admin/system"),ae.get("admin/sla").catch(()=>null),ae.get("admin/audit-log").catch(()=>({log:[]}))]);y(r,_,!0),y(l,b,!0),y(i,g.log||g||[],!0)}catch(_){Y("Sistem durumu yuklenemedi: "+_.message,"error")}finally{y(s,!1)}}async function d(){try{y(r,await ae.get("admin/system?forceCheck=1"),!0),Y("Kontrol tamamlandi","success")}catch(_){Y("Hata: "+_.message,"error")}}var c=Jc(),u=ve(c),h=o(n(u),2);ie(h,{onclick:d,variant:"secondary",size:"sm",children:(_,b)=>{var g=Q("Kontrol Et");f(_,g)},$$slots:{default:!0}});var p=o(u,2);{var x=_=>{Ae(_,{message:"Yukleniyor..."})},m=_=>{var b=Zc(),g=ve(b),w=n(g);{var P=K=>{var I=Gc(),T=o(n(I),2),$=n(T),H=o(n($));{let N=oe(()=>a(r).status==="ok"||a(r).healthy?"green":"red");Ke(H,{get variant(){return a(N)},children:(W,re)=>{var le=Q();V(()=>A(le,a(r).status||(a(r).healthy?"saglikli":"sorunlu"))),f(W,le)},$$slots:{default:!0}})}var L=o($,2),D=o(n(L)),R=n(D),U=o(L,2),F=o(n(U)),J=n(F),G=o(U,2),z=o(n(G)),M=n(z),Z=o(G,2),X=o(n(Z));{let N=oe(()=>a(r).llmStatus==="ok"?"green":"yellow");Ke(X,{get variant(){return a(N)},children:(W,re)=>{var le=Q();V(()=>A(le,a(r).llmStatus||a(r).llm||"-")),f(W,le)},$$slots:{default:!0}})}var S=o(Z,2),ee=o(n(S));{let N=oe(()=>a(r).embeddingStatus==="ok"?"green":"yellow");Ke(ee,{get variant(){return a(N)},children:(W,re)=>{var le=Q();V(()=>A(le,a(r).embeddingStatus||"-")),f(W,le)},$$slots:{default:!0}})}V(()=>{A(R,a(r).uptime||"-"),A(J,a(r).nodeVersion||"-"),A(M,a(r).memoryUsage||"-")}),f(K,I)};ne(w,K=>{a(r)&&K(P)})}var j=o(w,2);{var C=K=>{var I=Vc(),T=o(n(I),2),$=n(T),H=o(n($)),L=n(H),D=o($,2),R=o(n(D)),U=n(R),F=o(D,2),J=o(n(F)),G=n(J);V(z=>{A(L,z),A(U,a(l).uptimePercent?a(l).uptimePercent+"%":"-"),A(G,a(l).successRate?a(l).successRate+"%":"-")},[()=>a(l).avgResponseMs?(a(l).avgResponseMs/1e3).toFixed(1)+"s":"-"]),f(K,I)};ne(j,K=>{a(l)&&K(C)})}var q=o(g,2);{var E=K=>{var I=Qc(),T=o(n(I),2),$=o(n(T));ke($,21,()=>a(i).slice(0,50),qe,(H,L)=>{var D=Wc(),R=n(D),U=n(R),F=o(R),J=n(F);Ke(J,{variant:"blue",children:(M,Z)=>{var X=Q();V(()=>A(X,a(L).action||a(L).type)),f(M,X)},$$slots:{default:!0}});var G=o(F),z=n(G);V(M=>{A(U,M),A(z,a(L).detail||a(L).message||"-")},[()=>Ut(a(L).at||a(L).timestamp)]),f(H,D)}),f(K,I)};ne(q,K=>{a(i).length&&K(E)})}f(_,b)};ne(p,_=>{a(s)?_(x):_(m,!1)})}f(e,c),ye()}var eu=k('<div class="login-prompt svelte-1n46o8q"><div class="login-card svelte-1n46o8q"><h2 class="svelte-1n46o8q">Admin Giris</h2> <p class="svelte-1n46o8q">Devam etmek icin admin token girin.</p> <input type="password" class="input svelte-1n46o8q" placeholder="Admin Token"/></div></div>'),tu=k('<div class="coming-soon svelte-1n46o8q"><div class="coming-soon-icon svelte-1n46o8q"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></svg></div> <h2 class="svelte-1n46o8q">Yapilandiriliyor</h2> <p class="svelte-1n46o8q"><strong> </strong> paneli henuz hazir degil.</p></div>'),au=k("<!> <!> <!>",1);function su(e,t){ge(t,!0);let s;Ee(()=>{s=Qn()}),js(()=>{s==null||s()});let r=oe(wr);var l=au(),i=ve(l);co(i,{children:(c,u)=>{var h=Ya(),p=ve(h);{var x=S=>{var ee=eu(),N=n(ee),W=o(n(N),4);pe("change",W,re=>{bo(re.target.value),window.location.reload()}),f(S,ee)},m=oe(()=>!ua()),_=S=>{Do(S,{})},b=S=>{Xo(S,{})},g=S=>{ov(S,{})},w=S=>{gv(S,{})},P=S=>{Av(S,{})},j=S=>{Bv(S,{})},C=S=>{Qv(S,{})},q=S=>{cd(S,{})},E=S=>{md(S)},K=S=>{wd(S,{})},I=S=>{zd(S,{})},T=S=>{Td(S,{})},$=S=>{Cd(S,{})},H=S=>{Bd(S,{})},L=S=>{Ud(S,{})},D=S=>{Xd(S,{})},R=S=>{ic(S,{})},U=S=>{fc(S,{})},F=S=>{xc(S,{})},J=S=>{Tc(S,{})},G=S=>{Ic(S,{})},z=S=>{Nc(S,{})},M=S=>{Uc(S,{})},Z=S=>{Xc(S,{})},X=S=>{var ee=tu(),N=o(n(ee),4),W=n(N),re=n(W);V(()=>A(re,a(r))),f(S,ee)};ne(p,S=>{a(m)?S(x):a(r)==="dashboard"?S(_,1):a(r)==="live-chats"?S(b,2):a(r)==="closed-chats"?S(g,3):a(r)==="search"?S(w,4):a(r)==="agent-inbox"?S(P,5):a(r)==="knowledge-base"?S(j,6):a(r)==="topics"?S(C,7):a(r)==="bot-settings"?S(q,8):a(r)==="bot-test"?S(E,9):a(r)==="chat-flow"?S(K,10):a(r)==="site-settings"?S(I,11):a(r)==="zendesk"?S(T,12):a(r)==="whatsapp"?S($,13):a(r)==="webhooks"?S(H,14):a(r)==="env-vars"?S(L,15):a(r)==="agent-files"?S(D,16):a(r)==="memory-templates"?S(R,17):a(r)==="analytics"?S(U,18):a(r)==="eval"?S(F,19):a(r)==="faq-suggestions"?S(J,20):a(r)==="feedback"?S(G,21):a(r)==="content-gaps"?S(z,22):a(r)==="prompt-history"?S(M,23):a(r)==="system-status"?S(Z,24):S(X,!1)})}f(c,h)},$$slots:{default:!0}});var v=o(i,2);mo(v,{});var d=o(v,2);wo(d,{}),f(e,l),ye()}Te(["change"]);Pn(su,{target:document.getElementById("app")});
