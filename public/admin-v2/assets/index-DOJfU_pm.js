var ni=Object.defineProperty;var qr=e=>{throw TypeError(e)};var oi=(e,t,s)=>t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var gt=(e,t,s)=>oi(e,typeof t!="symbol"?t+"":t,s),Ms=(e,t,s)=>t.has(e)||qr("Cannot "+s);var O=(e,t,s)=>(Ms(e,t,"read from private field"),s?s.call(e):t.get(e)),$e=(e,t,s)=>t.has(e)?qr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),we=(e,t,s,r)=>(Ms(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),Oe=(e,t,s)=>(Ms(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const v of i.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&r(v)}).observe(document,{childList:!0,subtree:!0});function s(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=s(l);fetch(l.href,i)}})();const Bs=!1;var lr=Array.isArray,vi=Array.prototype.indexOf,Ca=Array.prototype.includes,Ts=Array.from,di=Object.defineProperty,xa=Object.getOwnPropertyDescriptor,Gr=Object.getOwnPropertyDescriptors,ci=Object.prototype,ui=Array.prototype,ir=Object.getPrototypeOf,zr=Object.isExtensible;const fi=()=>{};function hi(e){return e()}function Ns(e){for(var t=0;t<e.length;t++)e[t]()}function Vr(){var e,t,s=new Promise((r,l)=>{e=r,t=l});return{promise:s,resolve:e,reject:t}}function nr(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const s=[];for(const r of e)if(s.push(r),s.length===t)break;return s}const He=2,Ra=4,ja=8,Wr=1<<24,Vt=16,mt=32,fa=64,Rs=128,ot=512,Be=1024,Le=2048,_t=4096,st=8192,At=16384,Ha=32768,va=65536,Sr=1<<17,pi=1<<18,La=1<<19,Qr=1<<20,Et=1<<25,da=65536,Hs=1<<21,or=1<<22,Lt=1<<23,Pt=Symbol("$state"),_i=Symbol("legacy props"),mi=Symbol(""),Jt=new class extends Error{constructor(){super(...arguments);gt(this,"name","StaleReactionError");gt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var Fr;const gi=!!((Fr=globalThis.document)!=null&&Fr.contentType)&&globalThis.document.contentType.includes("xml");function Zr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function yi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function wi(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function bi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ki(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function $i(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function qi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function zi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Si(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ei(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ti(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ai=1,Pi=2,Jr=4,Ci=8,ji=16,Mi=1,Ii=2,Oi=4,Di=8,Ki=16,Bi=1,Ni=2,Ne=Symbol(),Xr="http://www.w3.org/1999/xhtml",Ri="http://www.w3.org/2000/svg",Hi="http://www.w3.org/1998/Math/MathML";function Li(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Fi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function el(e){return e===this.v}function Yi(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function tl(e){return!Yi(e,this.v)}let Fa=!1,Ui=!1;function Gi(){Fa=!0}let Ce=null;function Ma(e){Ce=e}function ge(e,t=!1,s){Ce={p:Ce,i:!1,c:null,e:null,s:e,x:null,l:Fa&&!t?{s:null,u:null,$:[]}:null}}function ye(e){var t=Ce,s=t.e;if(s!==null){t.e=null;for(var r of s)bl(r)}return t.i=!0,Ce=t.p,{}}function ds(){return!Fa||Ce!==null&&Ce.l===null}let Xt=[];function al(){var e=Xt;Xt=[],Ns(e)}function Ct(e){if(Xt.length===0&&!Ja){var t=Xt;queueMicrotask(()=>{t===Xt&&al()})}Xt.push(e)}function Vi(){for(;Xt.length>0;)al()}function sl(e){var t=ze;if(t===null)return xe.f|=Lt,e;if((t.f&Ha)===0&&(t.f&Ra)===0)throw e;Ht(e,t)}function Ht(e,t){for(;t!==null;){if((t.f&Rs)!==0){if((t.f&Ha)===0)throw e;try{t.b.error(e);return}catch(s){e=s}}t=t.parent}throw e}const Wi=-7169;function Me(e,t){e.f=e.f&Wi|t}function vr(e){(e.f&ot)!==0||e.deps===null?Me(e,Be):Me(e,_t)}function rl(e){if(e!==null)for(const t of e)(t.f&He)===0||(t.f&da)===0||(t.f^=da,rl(t.deps))}function ll(e,t,s){(e.f&Le)!==0?t.add(e):(e.f&_t)!==0&&s.add(e),rl(e.deps),Me(e,Be)}const ms=new Set;let _e=null,qs=null,Re=null,Ge=[],As=null,Ja=!1,Ia=null;var Bt,$a,aa,qa,za,Sa,Nt,yt,Ea,Qe,Ls,Fs,Ys,Us;const br=class br{constructor(){$e(this,Qe);gt(this,"current",new Map);gt(this,"previous",new Map);$e(this,Bt,new Set);$e(this,$a,new Set);$e(this,aa,0);$e(this,qa,0);$e(this,za,null);$e(this,Sa,new Set);$e(this,Nt,new Set);$e(this,yt,new Map);gt(this,"is_fork",!1);$e(this,Ea,!1)}skip_effect(t){O(this,yt).has(t)||O(this,yt).set(t,{d:[],m:[]})}unskip_effect(t){var s=O(this,yt).get(t);if(s){O(this,yt).delete(t);for(var r of s.d)Me(r,Le),ht(r);for(r of s.m)Me(r,_t),ht(r)}}process(t){var l;Ge=[],this.apply();var s=Ia=[],r=[];for(const i of t)Oe(this,Qe,Fs).call(this,i,s,r);if(Ia=null,Oe(this,Qe,Ls).call(this)){Oe(this,Qe,Ys).call(this,r),Oe(this,Qe,Ys).call(this,s);for(const[i,v]of O(this,yt))vl(i,v)}else{qs=this,_e=null;for(const i of O(this,Bt))i(this);O(this,Bt).clear(),O(this,aa)===0&&Oe(this,Qe,Us).call(this),Er(r),Er(s),O(this,Sa).clear(),O(this,Nt).clear(),qs=null,(l=O(this,za))==null||l.resolve()}Re=null}capture(t,s){s!==Ne&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&Lt)===0&&(this.current.set(t,t.v),Re==null||Re.set(t,t.v))}activate(){_e=this,this.apply()}deactivate(){_e===this&&(_e=null,Re=null)}flush(){var t;if(Ge.length>0)_e=this,il();else if(O(this,aa)===0&&!this.is_fork){for(const s of O(this,Bt))s(this);O(this,Bt).clear(),Oe(this,Qe,Us).call(this),(t=O(this,za))==null||t.resolve()}this.deactivate()}discard(){for(const t of O(this,$a))t(this);O(this,$a).clear()}increment(t){we(this,aa,O(this,aa)+1),t&&we(this,qa,O(this,qa)+1)}decrement(t){we(this,aa,O(this,aa)-1),t&&we(this,qa,O(this,qa)-1),!O(this,Ea)&&(we(this,Ea,!0),Ct(()=>{we(this,Ea,!1),Oe(this,Qe,Ls).call(this)?Ge.length>0&&this.flush():this.revive()}))}revive(){for(const t of O(this,Sa))O(this,Nt).delete(t),Me(t,Le),ht(t);for(const t of O(this,Nt))Me(t,_t),ht(t);this.flush()}oncommit(t){O(this,Bt).add(t)}ondiscard(t){O(this,$a).add(t)}settled(){return(O(this,za)??we(this,za,Vr())).promise}static ensure(){if(_e===null){const t=_e=new br;ms.add(_e),Ja||Ct(()=>{_e===t&&t.flush()})}return _e}apply(){}};Bt=new WeakMap,$a=new WeakMap,aa=new WeakMap,qa=new WeakMap,za=new WeakMap,Sa=new WeakMap,Nt=new WeakMap,yt=new WeakMap,Ea=new WeakMap,Qe=new WeakSet,Ls=function(){return this.is_fork||O(this,qa)>0},Fs=function(t,s,r){t.f^=Be;for(var l=t.first;l!==null;){var i=l.f,v=(i&(mt|fa))!==0,d=v&&(i&Be)!==0,c=d||(i&st)!==0||O(this,yt).has(l);if(!c&&l.fn!==null){v?l.f^=Be:(i&Ra)!==0?s.push(l):fs(l)&&((i&Vt)!==0&&O(this,Nt).add(l),Da(l));var u=l.first;if(u!==null){l=u;continue}}for(;l!==null;){var _=l.next;if(_!==null){l=_;break}l=l.parent}}},Ys=function(t){for(var s=0;s<t.length;s+=1)ll(t[s],O(this,Sa),O(this,Nt))},Us=function(){var i;if(ms.size>1){this.previous.clear();var t=_e,s=Re,r=!0;for(const v of ms){if(v===this){r=!1;continue}const d=[];for(const[u,_]of this.current){if(v.current.has(u))if(r&&_!==v.current.get(u))v.current.set(u,_);else continue;d.push(u)}if(d.length===0)continue;const c=[...v.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var l=Ge;Ge=[];const u=new Set,_=new Map;for(const p of d)nl(p,c,u,_);if(Ge.length>0){_e=v,v.apply();for(const p of Ge)Oe(i=v,Qe,Fs).call(i,p,[],[]);v.deactivate()}Ge=l}}_e=t,Re=s}O(this,yt).clear(),ms.delete(this)};let Ft=br;function Qi(e){var t=Ja;Ja=!0;try{for(var s;;){if(Vi(),Ge.length===0&&(_e==null||_e.flush(),Ge.length===0))return As=null,s;il()}}finally{Ja=t}}function il(){var e=null;try{for(var t=0;Ge.length>0;){var s=Ft.ensure();if(t++>1e3){var r,l;Zi()}s.process(Ge),Yt.clear()}}finally{Ge=[],As=null,Ia=null}}function Zi(){try{$i()}catch(e){Ht(e,As)}}let ct=null;function Er(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var r=e[s++];if((r.f&(At|st))===0&&fs(r)&&(ct=new Set,Da(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&ql(r),(ct==null?void 0:ct.size)>0)){Yt.clear();for(const l of ct){if((l.f&(At|st))!==0)continue;const i=[l];let v=l.parent;for(;v!==null;)ct.has(v)&&(ct.delete(v),i.push(v)),v=v.parent;for(let d=i.length-1;d>=0;d--){const c=i[d];(c.f&(At|st))===0&&Da(c)}}ct.clear()}}ct=null}}function nl(e,t,s,r){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const l of e.reactions){const i=l.f;(i&He)!==0?nl(l,t,s,r):(i&(or|Vt))!==0&&(i&Le)===0&&ol(l,t,r)&&(Me(l,Le),ht(l))}}function ol(e,t,s){const r=s.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const l of e.deps){if(Ca.call(t,l))return!0;if((l.f&He)!==0&&ol(l,t,s))return s.set(l,!0),!0}return s.set(e,!1),!1}function ht(e){var t=As=e,s=t.b;if(s!=null&&s.is_pending&&(e.f&(Ra|ja|Wr))!==0&&(e.f&Ha)===0){s.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var r=t.f;if(Ia!==null&&t===ze&&(e.f&ja)===0)return;if((r&(fa|mt))!==0){if((r&Be)===0)return;t.f^=Be}}Ge.push(t)}function vl(e,t){if(!((e.f&mt)!==0&&(e.f&Be)!==0)){(e.f&Le)!==0?t.d.push(e):(e.f&_t)!==0&&t.m.push(e),Me(e,Be);for(var s=e.first;s!==null;)vl(s,t),s=s.next}}function Ji(e){let t=0,s=ca(0),r;return()=>{ur()&&(a(s),hr(()=>(t===0&&(r=ha(()=>e(()=>Xa(s)))),t+=1,()=>{Ct(()=>{t-=1,t===0&&(r==null||r(),r=void 0,Xa(s))})})))}}var Xi=va|La;function en(e,t,s,r){new tn(e,t,s,r)}var lt,rr,wt,sa,Ue,bt,tt,ut,zt,ra,Rt,Ta,Aa,Pa,St,Ss,De,an,sn,rn,Gs,bs,ks,Vs;class tn{constructor(t,s,r,l){$e(this,De);gt(this,"parent");gt(this,"is_pending",!1);gt(this,"transform_error");$e(this,lt);$e(this,rr,null);$e(this,wt);$e(this,sa);$e(this,Ue);$e(this,bt,null);$e(this,tt,null);$e(this,ut,null);$e(this,zt,null);$e(this,ra,0);$e(this,Rt,0);$e(this,Ta,!1);$e(this,Aa,new Set);$e(this,Pa,new Set);$e(this,St,null);$e(this,Ss,Ji(()=>(we(this,St,ca(O(this,ra))),()=>{we(this,St,null)})));var i;we(this,lt,t),we(this,wt,s),we(this,sa,v=>{var d=ze;d.b=this,d.f|=Rs,r(v)}),this.parent=ze.b,this.transform_error=l??((i=this.parent)==null?void 0:i.transform_error)??(v=>v),we(this,Ue,Cs(()=>{Oe(this,De,Gs).call(this)},Xi))}defer_effect(t){ll(t,O(this,Aa),O(this,Pa))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!O(this,wt).pending}update_pending_count(t){Oe(this,De,Vs).call(this,t),we(this,ra,O(this,ra)+t),!(!O(this,St)||O(this,Ta))&&(we(this,Ta,!0),Ct(()=>{we(this,Ta,!1),O(this,St)&&Oa(O(this,St),O(this,ra))}))}get_effect_pending(){return O(this,Ss).call(this),a(O(this,St))}error(t){var s=O(this,wt).onerror;let r=O(this,wt).failed;if(!s&&!r)throw t;O(this,bt)&&(We(O(this,bt)),we(this,bt,null)),O(this,tt)&&(We(O(this,tt)),we(this,tt,null)),O(this,ut)&&(We(O(this,ut)),we(this,ut,null));var l=!1,i=!1;const v=()=>{if(l){Fi();return}l=!0,i&&Ti(),O(this,ut)!==null&&na(O(this,ut),()=>{we(this,ut,null)}),Oe(this,De,ks).call(this,()=>{Ft.ensure(),Oe(this,De,Gs).call(this)})},d=c=>{try{i=!0,s==null||s(c,v),i=!1}catch(u){Ht(u,O(this,Ue)&&O(this,Ue).parent)}r&&we(this,ut,Oe(this,De,ks).call(this,()=>{Ft.ensure();try{return it(()=>{var u=ze;u.b=this,u.f|=Rs,r(O(this,lt),()=>c,()=>v)})}catch(u){return Ht(u,O(this,Ue).parent),null}}))};Ct(()=>{var c;try{c=this.transform_error(t)}catch(u){Ht(u,O(this,Ue)&&O(this,Ue).parent);return}c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(d,u=>Ht(u,O(this,Ue)&&O(this,Ue).parent)):d(c)})}}lt=new WeakMap,rr=new WeakMap,wt=new WeakMap,sa=new WeakMap,Ue=new WeakMap,bt=new WeakMap,tt=new WeakMap,ut=new WeakMap,zt=new WeakMap,ra=new WeakMap,Rt=new WeakMap,Ta=new WeakMap,Aa=new WeakMap,Pa=new WeakMap,St=new WeakMap,Ss=new WeakMap,De=new WeakSet,an=function(){try{we(this,bt,it(()=>O(this,sa).call(this,O(this,lt))))}catch(t){this.error(t)}},sn=function(t){const s=O(this,wt).failed;s&&we(this,ut,it(()=>{s(O(this,lt),()=>t,()=>()=>{})}))},rn=function(){const t=O(this,wt).pending;t&&(this.is_pending=!0,we(this,tt,it(()=>t(O(this,lt)))),Ct(()=>{var s=we(this,zt,document.createDocumentFragment()),r=jt();s.append(r),we(this,bt,Oe(this,De,ks).call(this,()=>(Ft.ensure(),it(()=>O(this,sa).call(this,r))))),O(this,Rt)===0&&(O(this,lt).before(s),we(this,zt,null),na(O(this,tt),()=>{we(this,tt,null)}),Oe(this,De,bs).call(this))}))},Gs=function(){try{if(this.is_pending=this.has_pending_snippet(),we(this,Rt,0),we(this,ra,0),we(this,bt,it(()=>{O(this,sa).call(this,O(this,lt))})),O(this,Rt)>0){var t=we(this,zt,document.createDocumentFragment());El(O(this,bt),t);const s=O(this,wt).pending;we(this,tt,it(()=>s(O(this,lt))))}else Oe(this,De,bs).call(this)}catch(s){this.error(s)}},bs=function(){this.is_pending=!1;for(const t of O(this,Aa))Me(t,Le),ht(t);for(const t of O(this,Pa))Me(t,_t),ht(t);O(this,Aa).clear(),O(this,Pa).clear()},ks=function(t){var s=ze,r=xe,l=Ce;xt(O(this,Ue)),dt(O(this,Ue)),Ma(O(this,Ue).ctx);try{return t()}catch(i){return sl(i),null}finally{xt(s),dt(r),Ma(l)}},Vs=function(t){var s;if(!this.has_pending_snippet()){this.parent&&Oe(s=this.parent,De,Vs).call(s,t);return}we(this,Rt,O(this,Rt)+t),O(this,Rt)===0&&(Oe(this,De,bs).call(this),O(this,tt)&&na(O(this,tt),()=>{we(this,tt,null)}),O(this,zt)&&(O(this,lt).before(O(this,zt)),we(this,zt,null)))};function ln(e,t,s,r){const l=ds()?cs:dr;var i=e.filter(p=>!p.settled);if(s.length===0&&i.length===0){r(t.map(l));return}var v=ze,d=nn(),c=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(p=>p.promise)):null;function u(p){d();try{r(p)}catch(k){(v.f&At)===0&&Ht(k,v)}Ws()}if(s.length===0){c.then(()=>u(t.map(l)));return}function _(){d(),Promise.all(s.map(p=>vn(p))).then(p=>u([...t.map(l),...p])).catch(p=>Ht(p,v))}c?c.then(_):_()}function nn(){var e=ze,t=xe,s=Ce,r=_e;return function(i=!0){xt(e),dt(t),Ma(s),i&&(r==null||r.activate())}}function Ws(e=!0){xt(null),dt(null),Ma(null),e&&(_e==null||_e.deactivate())}function on(){var e=ze.b,t=_e,s=e.is_rendered();return e.update_pending_count(1),t.increment(s),()=>{e.update_pending_count(-1),t.decrement(s)}}function cs(e){var t=He|Le,s=xe!==null&&(xe.f&He)!==0?xe:null;return ze!==null&&(ze.f|=La),{ctx:Ce,deps:null,effects:null,equals:el,f:t,fn:e,reactions:null,rv:0,v:Ne,wv:0,parent:s??ze,ac:null}}function vn(e,t,s){ze===null&&yi();var l=void 0,i=ca(Ne),v=!xe,d=new Map;return kn(()=>{var k;var c=Vr();l=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).finally(Ws)}catch(m){c.reject(m),Ws()}var u=_e;if(v){var _=on();(k=d.get(u))==null||k.reject(Jt),d.delete(u),d.set(u,c)}const p=(m,h=void 0)=>{if(u.activate(),h)h!==Jt&&(i.f|=Lt,Oa(i,h));else{(i.f&Lt)!==0&&(i.f^=Lt),Oa(i,m);for(const[x,g]of d){if(d.delete(x),x===u)break;g.reject(Jt)}}_&&_()};c.promise.then(p,m=>p(null,m||"unknown"))}),fr(()=>{for(const c of d.values())c.reject(Jt)}),new Promise(c=>{function u(_){function p(){_===l?c(i):u(l)}_.then(p,p)}u(l)})}function oe(e){const t=cs(e);return Tl(t),t}function dr(e){const t=cs(e);return t.equals=tl,t}function dn(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)We(t[s])}}function cn(e){for(var t=e.parent;t!==null;){if((t.f&He)===0)return(t.f&At)===0?t:null;t=t.parent}return null}function cr(e){var t,s=ze;xt(cn(e));try{e.f&=~da,dn(e),t=jl(e)}finally{xt(s)}return t}function dl(e){var t=cr(e);if(!e.equals(t)&&(e.wv=Pl(),(!(_e!=null&&_e.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Me(e,Be);return}Gt||(Re!==null?(ur()||_e!=null&&_e.is_fork)&&Re.set(e,t):vr(e))}function un(e){var t,s;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(s=r.ac)==null||s.abort(Jt),r.teardown=fi,r.ac=null,rs(r,0),pr(r))}function cl(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&Da(t)}let Qs=new Set;const Yt=new Map;let ul=!1;function ca(e,t){var s={f:0,v:e,reactions:null,equals:el,rv:0,wv:0};return s}function B(e,t){const s=ca(e);return Tl(s),s}function fn(e,t=!1,s=!0){var l;const r=ca(e);return t||(r.equals=tl),Fa&&s&&Ce!==null&&Ce.l!==null&&((l=Ce.l).s??(l.s=[])).push(r),r}function y(e,t,s=!1){xe!==null&&(!pt||(xe.f&Sr)!==0)&&ds()&&(xe.f&(He|Vt|or|Sr))!==0&&(vt===null||!Ca.call(vt,e))&&Ei();let r=s?me(t):t;return Oa(e,r)}function Oa(e,t){if(!e.equals(t)){var s=e.v;Gt?Yt.set(e,t):Yt.set(e,s),e.v=t;var r=Ft.ensure();if(r.capture(e,s),(e.f&He)!==0){const l=e;(e.f&Le)!==0&&cr(l),vr(l)}e.wv=Pl(),fl(e,Le),ds()&&ze!==null&&(ze.f&Be)!==0&&(ze.f&(mt|fa))===0&&(rt===null?$n([e]):rt.push(e)),!r.is_fork&&Qs.size>0&&!ul&&hn()}return t}function hn(){ul=!1;for(const e of Qs)(e.f&Be)!==0&&Me(e,_t),fs(e)&&Da(e);Qs.clear()}function Xa(e){y(e,e.v+1)}function fl(e,t){var s=e.reactions;if(s!==null)for(var r=ds(),l=s.length,i=0;i<l;i++){var v=s[i],d=v.f;if(!(!r&&v===ze)){var c=(d&Le)===0;if(c&&Me(v,t),(d&He)!==0){var u=v;Re==null||Re.delete(u),(d&da)===0&&(d&ot&&(v.f|=da),fl(u,_t))}else c&&((d&Vt)!==0&&ct!==null&&ct.add(v),ht(v))}}}function me(e){if(typeof e!="object"||e===null||Pt in e)return e;const t=ir(e);if(t!==ci&&t!==ui)return e;var s=new Map,r=lr(e),l=B(0),i=oa,v=d=>{if(oa===i)return d();var c=xe,u=oa;dt(null),Cr(i);var _=d();return dt(c),Cr(u),_};return r&&s.set("length",B(e.length)),new Proxy(e,{defineProperty(d,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&zi();var _=s.get(c);return _===void 0?v(()=>{var p=B(u.value);return s.set(c,p),p}):y(_,u.value,!0),!0},deleteProperty(d,c){var u=s.get(c);if(u===void 0){if(c in d){const _=v(()=>B(Ne));s.set(c,_),Xa(l)}}else y(u,Ne),Xa(l);return!0},get(d,c,u){var m;if(c===Pt)return e;var _=s.get(c),p=c in d;if(_===void 0&&(!p||(m=xa(d,c))!=null&&m.writable)&&(_=v(()=>{var h=me(p?d[c]:Ne),x=B(h);return x}),s.set(c,_)),_!==void 0){var k=a(_);return k===Ne?void 0:k}return Reflect.get(d,c,u)},getOwnPropertyDescriptor(d,c){var u=Reflect.getOwnPropertyDescriptor(d,c);if(u&&"value"in u){var _=s.get(c);_&&(u.value=a(_))}else if(u===void 0){var p=s.get(c),k=p==null?void 0:p.v;if(p!==void 0&&k!==Ne)return{enumerable:!0,configurable:!0,value:k,writable:!0}}return u},has(d,c){var k;if(c===Pt)return!0;var u=s.get(c),_=u!==void 0&&u.v!==Ne||Reflect.has(d,c);if(u!==void 0||ze!==null&&(!_||(k=xa(d,c))!=null&&k.writable)){u===void 0&&(u=v(()=>{var m=_?me(d[c]):Ne,h=B(m);return h}),s.set(c,u));var p=a(u);if(p===Ne)return!1}return _},set(d,c,u,_){var j;var p=s.get(c),k=c in d;if(r&&c==="length")for(var m=u;m<p.v;m+=1){var h=s.get(m+"");h!==void 0?y(h,Ne):m in d&&(h=v(()=>B(Ne)),s.set(m+"",h))}if(p===void 0)(!k||(j=xa(d,c))!=null&&j.writable)&&(p=v(()=>B(void 0)),y(p,me(u)),s.set(c,p));else{k=p.v!==Ne;var x=v(()=>me(u));y(p,x)}var g=Reflect.getOwnPropertyDescriptor(d,c);if(g!=null&&g.set&&g.set.call(_,u),!k){if(r&&typeof c=="string"){var b=s.get("length"),P=Number(c);Number.isInteger(P)&&P>=b.v&&y(b,P+1)}Xa(l)}return!0},ownKeys(d){a(l);var c=Reflect.ownKeys(d).filter(p=>{var k=s.get(p);return k===void 0||k.v!==Ne});for(var[u,_]of s)_.v!==Ne&&!(u in d)&&c.push(u);return c},setPrototypeOf(){Si()}})}function Tr(e){try{if(e!==null&&typeof e=="object"&&Pt in e)return e[Pt]}catch{}return e}function pn(e,t){return Object.is(Tr(e),Tr(t))}var Zs,hl,pl,_l;function _n(){if(Zs===void 0){Zs=window,hl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;pl=xa(t,"firstChild").get,_l=xa(t,"nextSibling").get,zr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),zr(s)&&(s.__t=void 0)}}function jt(e=""){return document.createTextNode(e)}function ia(e){return pl.call(e)}function us(e){return _l.call(e)}function n(e,t){return ia(e)}function ve(e,t=!1){{var s=ia(e);return s instanceof Comment&&s.data===""?us(s):s}}function o(e,t=1,s=!1){let r=e;for(;t--;)r=us(r);return r}function mn(e){e.textContent=""}function ml(){return!1}function gl(e,t,s){return document.createElementNS(t??Xr,e,void 0)}let Ar=!1;function gn(){Ar||(Ar=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function Ps(e){var t=xe,s=ze;dt(null),xt(null);try{return e()}finally{dt(t),xt(s)}}function yl(e,t,s,r=s){e.addEventListener(t,()=>Ps(s));const l=e.__on_r;l?e.__on_r=()=>{l(),r(!0)}:e.__on_r=()=>r(!0),gn()}function wl(e){ze===null&&(xe===null&&xi(),ki()),Gt&&bi()}function yn(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function $t(e,t){var s=ze;s!==null&&(s.f&st)!==0&&(e|=st);var r={ctx:Ce,deps:null,nodes:null,f:e|Le|ot,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null},l=r;if((e&Ra)!==0)Ia!==null?Ia.push(r):ht(r);else if(t!==null){try{Da(r)}catch(v){throw We(r),v}l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&La)===0&&(l=l.first,(e&Vt)!==0&&(e&va)!==0&&l!==null&&(l.f|=va))}if(l!==null&&(l.parent=s,s!==null&&yn(l,s),xe!==null&&(xe.f&He)!==0&&(e&fa)===0)){var i=xe;(i.effects??(i.effects=[])).push(l)}return r}function ur(){return xe!==null&&!pt}function fr(e){const t=$t(ja,null);return Me(t,Be),t.teardown=e,t}function ss(e){wl();var t=ze.f,s=!xe&&(t&mt)!==0&&(t&Ha)===0;if(s){var r=Ce;(r.e??(r.e=[])).push(e)}else return bl(e)}function bl(e){return $t(Ra|Qr,e)}function wn(e){return wl(),$t(ja|Qr,e)}function bn(e){Ft.ensure();const t=$t(fa|La,e);return(s={})=>new Promise(r=>{s.outro?na(t,()=>{We(t),r(void 0)}):(We(t),r(void 0))})}function kl(e){return $t(Ra,e)}function kn(e){return $t(or|La,e)}function hr(e,t=0){return $t(ja|t,e)}function G(e,t=[],s=[],r=[]){ln(r,t,s,l=>{$t(ja,()=>e(...l.map(a)))})}function Cs(e,t=0){var s=$t(Vt|t,e);return s}function it(e){return $t(mt|La,e)}function xl(e){var t=e.teardown;if(t!==null){const s=Gt,r=xe;Pr(!0),dt(null);try{t.call(null)}finally{Pr(s),dt(r)}}}function pr(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const l=s.ac;l!==null&&Ps(()=>{l.abort(Jt)});var r=s.next;(s.f&fa)!==0?s.parent=null:We(s,t),s=r}}function xn(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&mt)===0&&We(t),t=s}}function We(e,t=!0){var s=!1;(t||(e.f&pi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&($l(e.nodes.start,e.nodes.end),s=!0),pr(e,t&&!s),rs(e,0),Me(e,At);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();xl(e);var l=e.parent;l!==null&&l.first!==null&&ql(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function $l(e,t){for(;e!==null;){var s=e===t?null:us(e);e.remove(),e=s}}function ql(e){var t=e.parent,s=e.prev,r=e.next;s!==null&&(s.next=r),r!==null&&(r.prev=s),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=s))}function na(e,t,s=!0){var r=[];zl(e,r,!0);var l=()=>{s&&We(e),t&&t()},i=r.length;if(i>0){var v=()=>--i||l();for(var d of r)d.out(v)}else l()}function zl(e,t,s){if((e.f&st)===0){e.f^=st;var r=e.nodes&&e.nodes.t;if(r!==null)for(const d of r)(d.is_global||s)&&t.push(d);for(var l=e.first;l!==null;){var i=l.next,v=(l.f&va)!==0||(l.f&mt)!==0&&(e.f&Vt)!==0;zl(l,t,v?s:!1),l=i}}}function _r(e){Sl(e,!0)}function Sl(e,t){if((e.f&st)!==0){e.f^=st,(e.f&Be)===0&&(Me(e,Le),ht(e));for(var s=e.first;s!==null;){var r=s.next,l=(s.f&va)!==0||(s.f&mt)!==0;Sl(s,l?t:!1),s=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const v of i)(v.is_global||t)&&v.in()}}function El(e,t){if(e.nodes)for(var s=e.nodes.start,r=e.nodes.end;s!==null;){var l=s===r?null:us(s);t.append(s),s=l}}let xs=!1,Gt=!1;function Pr(e){Gt=e}let xe=null,pt=!1;function dt(e){xe=e}let ze=null;function xt(e){ze=e}let vt=null;function Tl(e){xe!==null&&(vt===null?vt=[e]:vt.push(e))}let Ve=null,et=0,rt=null;function $n(e){rt=e}let Al=1,ea=0,oa=ea;function Cr(e){oa=e}function Pl(){return++Al}function fs(e){var t=e.f;if((t&Le)!==0)return!0;if(t&He&&(e.f&=~da),(t&_t)!==0){for(var s=e.deps,r=s.length,l=0;l<r;l++){var i=s[l];if(fs(i)&&dl(i),i.wv>e.wv)return!0}(t&ot)!==0&&Re===null&&Me(e,Be)}return!1}function Cl(e,t,s=!0){var r=e.reactions;if(r!==null&&!(vt!==null&&Ca.call(vt,e)))for(var l=0;l<r.length;l++){var i=r[l];(i.f&He)!==0?Cl(i,t,!1):t===i&&(s?Me(i,Le):(i.f&Be)!==0&&Me(i,_t),ht(i))}}function jl(e){var x;var t=Ve,s=et,r=rt,l=xe,i=vt,v=Ce,d=pt,c=oa,u=e.f;Ve=null,et=0,rt=null,xe=(u&(mt|fa))===0?e:null,vt=null,Ma(e.ctx),pt=!1,oa=++ea,e.ac!==null&&(Ps(()=>{e.ac.abort(Jt)}),e.ac=null);try{e.f|=Hs;var _=e.fn,p=_();e.f|=Ha;var k=e.deps,m=_e==null?void 0:_e.is_fork;if(Ve!==null){var h;if(m||rs(e,et),k!==null&&et>0)for(k.length=et+Ve.length,h=0;h<Ve.length;h++)k[et+h]=Ve[h];else e.deps=k=Ve;if(ur()&&(e.f&ot)!==0)for(h=et;h<k.length;h++)((x=k[h]).reactions??(x.reactions=[])).push(e)}else!m&&k!==null&&et<k.length&&(rs(e,et),k.length=et);if(ds()&&rt!==null&&!pt&&k!==null&&(e.f&(He|_t|Le))===0)for(h=0;h<rt.length;h++)Cl(rt[h],e);if(l!==null&&l!==e){if(ea++,l.deps!==null)for(let g=0;g<s;g+=1)l.deps[g].rv=ea;if(t!==null)for(const g of t)g.rv=ea;rt!==null&&(r===null?r=rt:r.push(...rt))}return(e.f&Lt)!==0&&(e.f^=Lt),p}catch(g){return sl(g)}finally{e.f^=Hs,Ve=t,et=s,rt=r,xe=l,vt=i,Ma(v),pt=d,oa=c}}function qn(e,t){let s=t.reactions;if(s!==null){var r=vi.call(s,e);if(r!==-1){var l=s.length-1;l===0?s=t.reactions=null:(s[r]=s[l],s.pop())}}if(s===null&&(t.f&He)!==0&&(Ve===null||!Ca.call(Ve,t))){var i=t;(i.f&ot)!==0&&(i.f^=ot,i.f&=~da),vr(i),un(i),rs(i,0)}}function rs(e,t){var s=e.deps;if(s!==null)for(var r=t;r<s.length;r++)qn(e,s[r])}function Da(e){var t=e.f;if((t&At)===0){Me(e,Be);var s=ze,r=xs;ze=e,xs=!0;try{(t&(Vt|Wr))!==0?xn(e):pr(e),xl(e);var l=jl(e);e.teardown=typeof l=="function"?l:null,e.wv=Al;var i;Bs&&Ui&&(e.f&Le)!==0&&e.deps}finally{xs=r,ze=s}}}async function zn(){await Promise.resolve(),Qi()}function a(e){var t=e.f,s=(t&He)!==0;if(xe!==null&&!pt){var r=ze!==null&&(ze.f&At)!==0;if(!r&&(vt===null||!Ca.call(vt,e))){var l=xe.deps;if((xe.f&Hs)!==0)e.rv<ea&&(e.rv=ea,Ve===null&&l!==null&&l[et]===e?et++:Ve===null?Ve=[e]:Ve.push(e));else{(xe.deps??(xe.deps=[])).push(e);var i=e.reactions;i===null?e.reactions=[xe]:Ca.call(i,xe)||i.push(xe)}}}if(Gt&&Yt.has(e))return Yt.get(e);if(s){var v=e;if(Gt){var d=v.v;return((v.f&Be)===0&&v.reactions!==null||Il(v))&&(d=cr(v)),Yt.set(v,d),d}var c=(v.f&ot)===0&&!pt&&xe!==null&&(xs||(xe.f&ot)!==0),u=(v.f&Ha)===0;fs(v)&&(c&&(v.f|=ot),dl(v)),c&&!u&&(cl(v),Ml(v))}if(Re!=null&&Re.has(e))return Re.get(e);if((e.f&Lt)!==0)throw e.v;return e.v}function Ml(e){if(e.f|=ot,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&He)!==0&&(t.f&ot)===0&&(cl(t),Ml(t))}function Il(e){if(e.v===Ne)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Yt.has(t)||(t.f&He)!==0&&Il(t))return!0;return!1}function ha(e){var t=pt;try{return pt=!0,e()}finally{pt=t}}function Sn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Pt in e)Js(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&Pt in s&&Js(s)}}}function Js(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Js(e[r],t)}catch{}const s=ir(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const r=Gr(s);for(let l in r){const i=r[l].get;if(i)try{i.call(e)}catch{}}}}}const En=["touchstart","touchmove"];function Tn(e){return En.includes(e)}const ta=Symbol("events"),Ol=new Set,Xs=new Set;function An(e,t,s,r={}){function l(i){if(r.capture||er.call(t,i),!i.cancelBubble)return Ps(()=>s==null?void 0:s.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ct(()=>{t.addEventListener(e,l,r)}):t.addEventListener(e,l,r),l}function $s(e,t,s,r,l){var i={capture:r,passive:l},v=An(e,t,s,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&fr(()=>{t.removeEventListener(e,v,i)})}function pe(e,t,s){(t[ta]??(t[ta]={}))[e]=s}function Te(e){for(var t=0;t<e.length;t++)Ol.add(e[t]);for(var s of Xs)s(e)}let jr=null;function er(e){var g,b;var t=this,s=t.ownerDocument,r=e.type,l=((g=e.composedPath)==null?void 0:g.call(e))||[],i=l[0]||e.target;jr=e;var v=0,d=jr===e&&e[ta];if(d){var c=l.indexOf(d);if(c!==-1&&(t===document||t===window)){e[ta]=t;return}var u=l.indexOf(t);if(u===-1)return;c<=u&&(v=c)}if(i=l[v]||e.target,i!==t){di(e,"currentTarget",{configurable:!0,get(){return i||s}});var _=xe,p=ze;dt(null),xt(null);try{for(var k,m=[];i!==null;){var h=i.assignedSlot||i.parentNode||i.host||null;try{var x=(b=i[ta])==null?void 0:b[r];x!=null&&(!i.disabled||e.target===i)&&x.call(i,e)}catch(P){k?m.push(P):k=P}if(e.cancelBubble||h===t||h===null)break;i=h}if(k){for(let P of m)queueMicrotask(()=>{throw P});throw k}}finally{e[ta]=t,delete e.currentTarget,dt(_),xt(p)}}}var Yr;const Is=((Yr=globalThis==null?void 0:globalThis.window)==null?void 0:Yr.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Pn(e){return(Is==null?void 0:Is.createHTML(e))??e}function Cn(e){var t=gl("template");return t.innerHTML=Pn(e.replaceAll("<!>","<!---->")),t.content}function ls(e,t){var s=ze;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function $(e,t){var s=(t&Bi)!==0,r=(t&Ni)!==0,l,i=!e.startsWith("<!>");return()=>{l===void 0&&(l=Cn(i?e:"<!>"+e),s||(l=ia(l)));var v=r||hl?document.importNode(l,!0):l.cloneNode(!0);if(s){var d=ia(v),c=v.lastChild;ls(d,c)}else ls(v,v);return v}}function V(e=""){{var t=jt(e+"");return ls(t,t),t}}function Ya(){var e=document.createDocumentFragment(),t=document.createComment(""),s=jt();return e.append(t,s),ls(t,s),e}function f(e,t){e!==null&&e.before(t)}function A(e,t){var s=t==null?"":typeof t=="object"?`${t}`:t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=`${s}`)}function jn(e,t){return Mn(e,t)}const gs=new Map;function Mn(e,{target:t,anchor:s,props:r={},events:l,context:i,intro:v=!0,transformError:d}){_n();var c=void 0,u=bn(()=>{var _=s??t.appendChild(jt());en(_,{pending:()=>{}},m=>{ge({});var h=Ce;i&&(h.c=i),l&&(r.$$events=l),c=e(m,r)||{},ye()},d);var p=new Set,k=m=>{for(var h=0;h<m.length;h++){var x=m[h];if(!p.has(x)){p.add(x);var g=Tn(x);for(const j of[t,document]){var b=gs.get(j);b===void 0&&(b=new Map,gs.set(j,b));var P=b.get(x);P===void 0?(j.addEventListener(x,er,{passive:g}),b.set(x,1)):b.set(x,P+1)}}}};return k(Ts(Ol)),Xs.add(k),()=>{var g;for(var m of p)for(const b of[t,document]){var h=gs.get(b),x=h.get(m);--x==0?(b.removeEventListener(m,er),h.delete(m),h.size===0&&gs.delete(b)):h.set(m,x)}Xs.delete(k),_!==s&&((g=_.parentNode)==null||g.removeChild(_))}});return In.set(c,u),c}let In=new WeakMap;var ft,kt,at,la,os,vs,Es;class Dl{constructor(t,s=!0){gt(this,"anchor");$e(this,ft,new Map);$e(this,kt,new Map);$e(this,at,new Map);$e(this,la,new Set);$e(this,os,!0);$e(this,vs,t=>{if(O(this,ft).has(t)){var s=O(this,ft).get(t),r=O(this,kt).get(s);if(r)_r(r),O(this,la).delete(s);else{var l=O(this,at).get(s);l&&(O(this,kt).set(s,l.effect),O(this,at).delete(s),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),r=l.effect)}for(const[i,v]of O(this,ft)){if(O(this,ft).delete(i),i===t)break;const d=O(this,at).get(v);d&&(We(d.effect),O(this,at).delete(v))}for(const[i,v]of O(this,kt)){if(i===s||O(this,la).has(i))continue;const d=()=>{if(Array.from(O(this,ft).values()).includes(i)){var u=document.createDocumentFragment();El(v,u),u.append(jt()),O(this,at).set(i,{effect:v,fragment:u})}else We(v);O(this,la).delete(i),O(this,kt).delete(i)};O(this,os)||!r?(O(this,la).add(i),na(v,d,!1)):d()}}});$e(this,Es,t=>{O(this,ft).delete(t);const s=Array.from(O(this,ft).values());for(const[r,l]of O(this,at))s.includes(r)||(We(l.effect),O(this,at).delete(r))});this.anchor=t,we(this,os,s)}ensure(t,s){var r=_e,l=ml();if(s&&!O(this,kt).has(t)&&!O(this,at).has(t))if(l){var i=document.createDocumentFragment(),v=jt();i.append(v),O(this,at).set(t,{effect:it(()=>s(v)),fragment:i})}else O(this,kt).set(t,it(()=>s(this.anchor)));if(O(this,ft).set(r,t),l){for(const[d,c]of O(this,kt))d===t?r.unskip_effect(c):r.skip_effect(c);for(const[d,c]of O(this,at))d===t?r.unskip_effect(c.effect):r.skip_effect(c.effect);r.oncommit(O(this,vs)),r.ondiscard(O(this,Es))}else O(this,vs).call(this,r)}}ft=new WeakMap,kt=new WeakMap,at=new WeakMap,la=new WeakMap,os=new WeakMap,vs=new WeakMap,Es=new WeakMap;function le(e,t,s=!1){var r=new Dl(e),l=s?va:0;function i(v,d){r.ensure(v,d)}Cs(()=>{var v=!1;t((d,c=0)=>{v=!0,i(c,d)}),v||i(!1,null)},l)}function qe(e,t){return t}function On(e,t,s){for(var r=[],l=t.length,i,v=t.length,d=0;d<l;d++){let p=t[d];na(p,()=>{if(i){if(i.pending.delete(p),i.done.add(p),i.pending.size===0){var k=e.outrogroups;tr(Ts(i.done)),k.delete(i),k.size===0&&(e.outrogroups=null)}}else v-=1},!1)}if(v===0){var c=r.length===0&&s!==null;if(c){var u=s,_=u.parentNode;mn(_),_.append(u),e.items.clear()}tr(t,!c)}else i={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(i)}function tr(e,t=!0){for(var s=0;s<e.length;s++)We(e[s],t)}var Mr;function ke(e,t,s,r,l,i=null){var v=e,d=new Map,c=(t&Jr)!==0;if(c){var u=e;v=u.appendChild(jt())}var _=null,p=dr(()=>{var b=s();return lr(b)?b:b==null?[]:Ts(b)}),k,m=!0;function h(){g.fallback=_,Dn(g,k,v,t,r),_!==null&&(k.length===0?(_.f&Et)===0?_r(_):(_.f^=Et,Za(_,null,v)):na(_,()=>{_=null}))}var x=Cs(()=>{k=a(p);for(var b=k.length,P=new Set,j=_e,C=ml(),z=0;z<b;z+=1){var E=k[z],K=r(E,z),I=m?null:d.get(K);I?(I.v&&Oa(I.v,E),I.i&&Oa(I.i,z),C&&j.unskip_effect(I.e)):(I=Kn(d,m?v:Mr??(Mr=jt()),E,K,z,l,t,s),m||(I.e.f|=Et),d.set(K,I)),P.add(K)}if(b===0&&i&&!_&&(m?_=it(()=>i(v)):(_=it(()=>i(Mr??(Mr=jt()))),_.f|=Et)),b>P.size&&wi(),!m)if(C){for(const[T,q]of d)P.has(T)||j.skip_effect(q.e);j.oncommit(h),j.ondiscard(()=>{})}else h();a(p)}),g={effect:x,items:d,outrogroups:null,fallback:_};m=!1}function Qa(e){for(;e!==null&&(e.f&mt)===0;)e=e.next;return e}function Dn(e,t,s,r,l){var q,R,H,D,N,Y,L,Z,U;var i=(r&Ci)!==0,v=t.length,d=e.items,c=Qa(e.effect.first),u,_=null,p,k=[],m=[],h,x,g,b;if(i)for(b=0;b<v;b+=1)h=t[b],x=l(h,b),g=d.get(x).e,(g.f&Et)===0&&((R=(q=g.nodes)==null?void 0:q.a)==null||R.measure(),(p??(p=new Set)).add(g));for(b=0;b<v;b+=1){if(h=t[b],x=l(h,b),g=d.get(x).e,e.outrogroups!==null)for(const S of e.outrogroups)S.pending.delete(g),S.done.delete(g);if((g.f&Et)!==0)if(g.f^=Et,g===c)Za(g,null,s);else{var P=_?_.next:c;g===e.effect.last&&(e.effect.last=g.prev),g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),Ot(e,_,g),Ot(e,g,P),Za(g,P,s),_=g,k=[],m=[],c=Qa(_.next);continue}if((g.f&st)!==0&&(_r(g),i&&((D=(H=g.nodes)==null?void 0:H.a)==null||D.unfix(),(p??(p=new Set)).delete(g))),g!==c){if(u!==void 0&&u.has(g)){if(k.length<m.length){var j=m[0],C;_=j.prev;var z=k[0],E=k[k.length-1];for(C=0;C<k.length;C+=1)Za(k[C],j,s);for(C=0;C<m.length;C+=1)u.delete(m[C]);Ot(e,z.prev,E.next),Ot(e,_,z),Ot(e,E,j),c=j,_=E,b-=1,k=[],m=[]}else u.delete(g),Za(g,c,s),Ot(e,g.prev,g.next),Ot(e,g,_===null?e.effect.first:_.next),Ot(e,_,g),_=g;continue}for(k=[],m=[];c!==null&&c!==g;)(u??(u=new Set)).add(c),m.push(c),c=Qa(c.next);if(c===null)continue}(g.f&Et)===0&&k.push(g),_=g,c=Qa(g.next)}if(e.outrogroups!==null){for(const S of e.outrogroups)S.pending.size===0&&(tr(Ts(S.done)),(N=e.outrogroups)==null||N.delete(S));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var K=[];if(u!==void 0)for(g of u)(g.f&st)===0&&K.push(g);for(;c!==null;)(c.f&st)===0&&c!==e.fallback&&K.push(c),c=Qa(c.next);var I=K.length;if(I>0){var T=(r&Jr)!==0&&v===0?s:null;if(i){for(b=0;b<I;b+=1)(L=(Y=K[b].nodes)==null?void 0:Y.a)==null||L.measure();for(b=0;b<I;b+=1)(U=(Z=K[b].nodes)==null?void 0:Z.a)==null||U.fix()}On(e,K,T)}}i&&Ct(()=>{var S,M;if(p!==void 0)for(g of p)(M=(S=g.nodes)==null?void 0:S.a)==null||M.apply()})}function Kn(e,t,s,r,l,i,v,d){var c=(v&Ai)!==0?(v&ji)===0?fn(s,!1,!1):ca(s):null,u=(v&Pi)!==0?ca(l):null;return{v:c,i:u,e:it(()=>(i(t,c??s,u??l,d),()=>{e.delete(r)}))}}function Za(e,t,s){if(e.nodes)for(var r=e.nodes.start,l=e.nodes.end,i=t&&(t.f&Et)===0?t.nodes.start:s;r!==null;){var v=us(r);if(i.before(r),r===l)return;r=v}}function Ot(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function Kl(e,t,s=!1,r=!1,l=!1){var i=e,v="";G(()=>{var d=ze;if(v!==(v=t()??"")&&(d.nodes!==null&&($l(d.nodes.start,d.nodes.end),d.nodes=null),v!=="")){var c=s?Ri:r?Hi:void 0,u=gl(s?"svg":r?"math":"template",c);u.innerHTML=v;var _=s||r?u:u.content;if(ls(ia(_),_.lastChild),s||r)for(;ia(_);)i.before(ia(_));else i.before(_)}})}function Ua(e,t,...s){var r=new Dl(e);Cs(()=>{const l=t()??null;r.ensure(l,l&&(i=>l(i,...s)))},va)}const Ir=[...` 	
\r\fÂ \v\uFEFF`];function Bn(e,t,s){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),s){for(var l of Object.keys(s))if(s[l])r=r?r+" "+l:l;else if(r.length)for(var i=l.length,v=0;(v=r.indexOf(l,v))>=0;){var d=v+i;(v===0||Ir.includes(r[v-1]))&&(d===r.length||Ir.includes(r[d]))?r=(v===0?"":r.substring(0,v))+r.substring(d+1):v=d}}return r===""?null:r}function Or(e,t=!1){var s=t?" !important;":";",r="";for(var l of Object.keys(e)){var i=e[l];i!=null&&i!==""&&(r+=" "+l+": "+i+s)}return r}function Nn(e,t){if(t){var s="",r,l;return Array.isArray(t)?(r=t[0],l=t[1]):r=t,r&&(s+=Or(r)),l&&(s+=Or(l,!0)),s=s.trim(),s===""?null:s}return String(e)}function Ie(e,t,s,r,l,i){var v=e.__className;if(v!==s||v===void 0){var d=Bn(s,r,i);d==null?e.removeAttribute("class"):e.className=d,e.__className=s}else if(i&&l!==i)for(var c in i){var u=!!i[c];(l==null||u!==!!l[c])&&e.classList.toggle(c,u)}return i}function Os(e,t={},s,r){for(var l in s){var i=s[l];t[l]!==i&&(s[l]==null?e.style.removeProperty(l):e.style.setProperty(l,i,r))}}function Ka(e,t,s,r){var l=e.__style;if(l!==t){var i=Nn(t,r);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else r&&(Array.isArray(r)?(Os(e,s==null?void 0:s[0],r[0]),Os(e,s==null?void 0:s[1],r[1],"important")):Os(e,s,r));return r}function Bl(e,t,s=!1){if(e.multiple){if(t==null)return;if(!lr(t))return Li();for(var r of e.options)r.selected=t.includes(ts(r));return}for(r of e.options){var l=ts(r);if(pn(l,t)){r.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function Rn(e){var t=new MutationObserver(()=>{Bl(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fr(()=>{t.disconnect()})}function es(e,t,s=t){var r=new WeakSet,l=!0;yl(e,"change",i=>{var v=i?"[selected]":":checked",d;if(e.multiple)d=[].map.call(e.querySelectorAll(v),ts);else{var c=e.querySelector(v)??e.querySelector("option:not([disabled])");d=c&&ts(c)}s(d),_e!==null&&r.add(_e)}),kl(()=>{var i=t();if(e===document.activeElement){var v=qs??_e;if(r.has(v))return}if(Bl(e,i,l),l&&i===void 0){var d=e.querySelector(":checked");d!==null&&(i=ts(d),s(i))}e.__value=i,l=!1}),Rn(e)}function ts(e){return"__value"in e?e.__value:e.value}const Hn=Symbol("is custom element"),Ln=Symbol("is html"),Fn=gi?"progress":"PROGRESS";function ar(e,t){var s=mr(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!==Fn)||(e.value=t??"")}function Yn(e,t){var s=mr(e);s.checked!==(s.checked=t??void 0)&&(e.checked=t)}function pa(e,t,s,r){var l=mr(e);l[t]!==(l[t]=s)&&(t==="loading"&&(e[mi]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Un(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function mr(e){return e.__attributes??(e.__attributes={[Hn]:e.nodeName.includes("-"),[Ln]:e.namespaceURI===Xr})}var Dr=new Map;function Un(e){var t=e.getAttribute("is")||e.nodeName,s=Dr.get(t);if(s)return s;Dr.set(t,s=[]);for(var r,l=e,i=Element.prototype;i!==l;){r=Gr(l);for(var v in r)r[v].set&&s.push(v);l=ir(l)}return s}function ue(e,t,s=t){var r=new WeakSet;yl(e,"input",async l=>{var i=l?e.defaultValue:e.value;if(i=Ds(e)?Ks(i):i,s(i),_e!==null&&r.add(_e),await zn(),i!==(i=t())){var v=e.selectionStart,d=e.selectionEnd,c=e.value.length;if(e.value=i??"",d!==null){var u=e.value.length;v===d&&d===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=v,e.selectionEnd=Math.min(d,u))}}}),ha(t)==null&&e.value&&(s(Ds(e)?Ks(e.value):e.value),_e!==null&&r.add(_e)),hr(()=>{var l=t();if(e===document.activeElement){var i=qs??_e;if(r.has(i))return}Ds(e)&&l===Ks(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function Ds(e){var t=e.type;return t==="number"||t==="range"}function Ks(e){return e===""?null:+e}function Kr(e,t){return e===t||(e==null?void 0:e[Pt])===t}function gr(e={},t,s,r){return kl(()=>{var l,i;return hr(()=>{l=i,i=[],ha(()=>{e!==s(...i)&&(t(e,...i),l&&Kr(s(...l),e)&&t(null,...l))})}),()=>{Ct(()=>{i&&Kr(s(...i),e)&&t(null,...i)})}}),e}function Gn(e=!1){const t=Ce,s=t.l.u;if(!s)return;let r=()=>Sn(t.s);if(e){let l=0,i={};const v=cs(()=>{let d=!1;const c=t.s;for(const u in c)c[u]!==i[u]&&(i[u]=c[u],d=!0);return d&&l++,l});r=()=>a(v)}s.b.length&&wn(()=>{Br(t,r),Ns(s.b)}),ss(()=>{const l=ha(()=>s.m.map(hi));return()=>{for(const i of l)typeof i=="function"&&i()}}),s.a.length&&ss(()=>{Br(t,r),Ns(s.a)})}function Br(e,t){if(e.l.s)for(const s of e.l.s)a(s);t()}let ys=!1;function Vn(e){var t=ys;try{return ys=!1,[e(),ys]}finally{ys=t}}function he(e,t,s,r){var j;var l=!Fa||(s&Ii)!==0,i=(s&Di)!==0,v=(s&Ki)!==0,d=r,c=!0,u=()=>(c&&(c=!1,d=v?ha(r):r),d),_;if(i){var p=Pt in e||_i in e;_=((j=xa(e,t))==null?void 0:j.set)??(p&&t in e?C=>e[t]=C:void 0)}var k,m=!1;i?[k,m]=Vn(()=>e[t]):k=e[t],k===void 0&&r!==void 0&&(k=u(),_&&(l&&qi(),_(k)));var h;if(l?h=()=>{var C=e[t];return C===void 0?u():(c=!0,C)}:h=()=>{var C=e[t];return C!==void 0&&(d=void 0),C===void 0?d:C},l&&(s&Oi)===0)return h;if(_){var x=e.$$legacy;return(function(C,z){return arguments.length>0?((!l||!z||x||m)&&_(z?h():C),C):h()})}var g=!1,b=((s&Mi)!==0?cs:dr)(()=>(g=!1,h()));i&&a(b);var P=ze;return(function(C,z){if(arguments.length>0){const E=z?a(b):l&&i?me(C):C;return y(b,E),g=!0,d!==void 0&&(d=E),C}return Gt&&g||(P.f&At)!==0?b.v:a(b)})}function Ee(e){Ce===null&&Zr(),Fa&&Ce.l!==null?Wn(Ce).m.push(e):ss(()=>{const t=ha(e);if(typeof t=="function")return t})}function js(e){Ce===null&&Zr(),Ee(()=>()=>ha(e))}function Wn(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Qn="5";var Ur;typeof window<"u"&&((Ur=window.__svelte??(window.__svelte={})).v??(Ur.v=new Set)).add(Qn);const yr=[{key:"izle",label:"Izle",items:[{id:"dashboard",label:"Dashboard",icon:"dashboard"},{id:"live-chats",label:"Canli Sohbetler",icon:"chat"},{id:"closed-chats",label:"Kapali Sohbetler",icon:"archive"},{id:"search",label:"Arama",icon:"search"}]},{key:"yonet",label:"Yonet",items:[{id:"agent-inbox",label:"Agent Inbox",icon:"inbox"},{id:"knowledge-base",label:"Bilgi Tabani",icon:"book"},{id:"topics",label:"Konular",icon:"tag"},{id:"bot-settings",label:"Bot Ayarlari",icon:"settings"},{id:"bot-test",label:"Bot Test",icon:"test"},{id:"chat-flow",label:"Sohbet Akisi",icon:"flow"}]},{key:"ayarla",label:"Ayarla",items:[{id:"site-settings",label:"Site Ayarlari",icon:"globe"},{id:"zendesk",label:"Zendesk",icon:"zendesk"},{id:"whatsapp",label:"WhatsApp",icon:"whatsapp"},{id:"webhooks",label:"Webhooks",icon:"webhook"},{id:"env-vars",label:"Ortam Degiskenleri",icon:"env"},{id:"agent-files",label:"Agent Dosyalari",icon:"file"},{id:"memory-templates",label:"Bellek Sablonlari",icon:"memory"}]},{key:"analiz",label:"Analiz Et",items:[{id:"analytics",label:"Analytics",icon:"chart"},{id:"eval",label:"Eval Yonetimi",icon:"eval"},{id:"faq-suggestions",label:"FAQ Onerileri",icon:"faq"},{id:"feedback",label:"Feedback Raporu",icon:"feedback"},{id:"content-gaps",label:"Content Gaps",icon:"gap"},{id:"prompt-history",label:"Prompt Gecmisi",icon:"history"},{id:"system-status",label:"Sistem Durumu",icon:"status"}]}],Nl={};for(const e of yr)for(const t of e.items)Nl[t.id]=t.label;const Zn="dashboard";let Rl=B(me(Hl()));function Hl(){return window.location.hash.slice(1)||Zn}function wr(){return a(Rl)}function Ll(e){window.location.hash="#"+e}function Nr(){y(Rl,Hl(),!0)}function Jn(){return window.addEventListener("hashchange",Nr),()=>window.removeEventListener("hashchange",Nr)}var Xn=$('<div class="sidebar-overlay svelte-6i9pg1"></div>'),eo=$('<a><span class="nav-icon svelte-6i9pg1"><!></span> <span class="nav-label svelte-6i9pg1"> </span></a>'),to=$('<div class="nav-group-label svelte-6i9pg1"> </div> <!>',1),ao=$('<!> <aside><div class="logo svelte-6i9pg1"><span class="logo-icon svelte-6i9pg1">Q</span> <span class="logo-text svelte-6i9pg1">Qragy</span></div> <nav class="nav svelte-6i9pg1"></nav></aside>',1);function so(e,t){ge(t,!0);let s=he(t,"mobileOpen",15,!1);const r={dashboard:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>',chat:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>',archive:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="21 8 21 21 3 21 3 8"/><rect x="1" y="3" width="22" height="5"/><line x1="10" y1="12" x2="14" y2="12"/></svg>',search:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>',inbox:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"/><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/></svg>',book:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>',tag:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>',settings:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>',test:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>',flow:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>',globe:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>',zendesk:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></svg>',whatsapp:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>',webhook:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',env:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"/><rect x="2" y="14" width="20" height="8" rx="2" ry="2"/><line x1="6" y1="6" x2="6.01" y2="6"/><line x1="6" y1="18" x2="6.01" y2="18"/></svg>',file:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>',memory:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></svg>',chart:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>',eval:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>',faq:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>',feedback:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>',gap:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>',history:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',status:'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>'};function l(p,k){p.preventDefault(),Ll(k),s(!1)}var i=ao(),v=ve(i);{var d=p=>{var k=Xn();pe("click",k,()=>s(!1)),pe("keydown",k,()=>{}),f(p,k)};le(v,p=>{s()&&p(d)})}var c=o(v,2);let u;var _=o(n(c),2);ke(_,21,()=>yr,qe,(p,k)=>{var m=to(),h=ve(m),x=n(h),g=o(h,2);ke(g,17,()=>a(k).items,qe,(b,P)=>{var j=eo();let C;var z=n(j),E=n(z);Kl(E,()=>r[a(P).icon]||"");var K=o(z,2),I=n(K);G(T=>{pa(j,"href",`#${a(P).id??""}`),C=Ie(j,1,"nav-item svelte-6i9pg1",null,C,T),A(I,a(P).label)},[()=>({active:wr()===a(P).id})]),pe("click",j,T=>l(T,a(P).id)),f(b,j)}),G(()=>A(x,a(k).label)),f(p,m)}),G(()=>u=Ie(c,1,"sidebar svelte-6i9pg1",null,u,{"mobile-open":s()})),f(e,i),ye()}Te(["click","keydown"]);const zs="qragy_admin_token";let as=B(me(localStorage.getItem(zs)||""));function ua(){return a(as)}function Rr(e){y(as,e.trim(),!0),a(as)?localStorage.setItem(zs,a(as)):localStorage.removeItem(zs)}function Fl(){y(as,""),localStorage.removeItem(zs)}var ro=$('<header class="header svelte-xjepwq"><button class="hamburger svelte-xjepwq" aria-label="Menu"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button> <div class="header-title svelte-xjepwq"> </div> <button class="header-search svelte-xjepwq"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> <span class="svelte-xjepwq">Hizli arama...</span> <kbd class="svelte-xjepwq">Cmd+K</kbd></button> <div class="header-actions svelte-xjepwq"><button class="header-btn svelte-xjepwq" title="Bildirimler"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg></button> <div class="avatar svelte-xjepwq" title="Admin">MA</div> <button class="header-btn logout-btn svelte-xjepwq" title="Cikis Yap"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></button></div></header>');function lo(e,t){ge(t,!0);let s=he(t,"onOpenCommandPalette",3,()=>{}),r=he(t,"onToggleMobile",3,()=>{}),l=oe(()=>Nl[wr()]||"Dashboard");var i=ro(),v=n(i),d=o(v,2),c=n(d),u=o(d,2),_=o(u,2),p=o(n(_),4);G(()=>A(c,a(l))),pe("click",v,function(...k){var m;(m=r())==null||m.apply(this,k)}),pe("click",u,function(...k){var m;(m=s())==null||m.apply(this,k)}),pe("click",p,()=>{Fl(),window.location.reload()}),f(e,i),ye()}Te(["click"]);var io=$('<div class="cmd-group svelte-estvwp"> </div>'),no=$("<!>  <div> </div>",1),oo=$('<div class="cmd-empty svelte-estvwp">Sonuc bulunamadi</div>'),vo=$('<div class="cmd-overlay svelte-estvwp"><div class="cmd-box svelte-estvwp" role="dialog" aria-label="Hizli arama"><input class="cmd-input svelte-estvwp" placeholder="Panel veya islem ara..."/> <div class="cmd-results svelte-estvwp"><!> <!></div></div></div>');function co(e,t){ge(t,!0);let s=he(t,"open",15,!1),r=B(""),l,i=B(0),v=yr.flatMap(h=>h.items.map(x=>({...x,group:h.label}))),d=oe(()=>a(r).trim()?v.filter(h=>h.label.toLowerCase().includes(a(r).toLowerCase())||h.id.includes(a(r).toLowerCase())):v);ss(()=>{s()&&l&&(y(r,""),y(i,0),setTimeout(()=>l==null?void 0:l.focus(),10))});function c(h){if(h.key==="Escape"){s(!1);return}h.key==="ArrowDown"&&(h.preventDefault(),y(i,(a(i)+1)%a(d).length)),h.key==="ArrowUp"&&(h.preventDefault(),y(i,(a(i)-1+a(d).length)%a(d).length)),h.key==="Enter"&&a(d)[a(i)]&&(h.preventDefault(),u(a(d)[a(i)]))}function u(h){Ll(h.id),s(!1)}function _(h){h.target===h.currentTarget&&s(!1)}var p=Ya(),k=ve(p);{var m=h=>{var x=vo(),g=n(x),b=n(g);gr(b,E=>l=E,()=>l);var P=o(b,2),j=n(P);ke(j,17,()=>a(d),qe,(E,K,I)=>{var T=no(),q=ve(T);{var R=Y=>{var L=io(),Z=n(L);G(()=>A(Z,a(K).group)),f(Y,L)};le(q,Y=>{var L;(I===0||((L=a(d)[I-1])==null?void 0:L.group)!==a(K).group)&&Y(R)})}var H=o(q,2);let D;var N=n(H);G(()=>{D=Ie(H,1,"cmd-item svelte-estvwp",null,D,{selected:I===a(i)}),A(N,a(K).label)}),pe("click",H,()=>u(a(K))),f(E,T)});var C=o(j,2);{var z=E=>{var K=oo();f(E,K)};le(C,E=>{a(d).length===0&&E(z)})}pe("click",x,_),pe("keydown",b,c),ue(b,()=>a(r),E=>y(r,E)),f(h,x)};le(k,h=>{s()&&h(m)})}f(e,p),ye()}Te(["click","keydown"]);var uo=$('<div class="shell svelte-im4zhz"><!> <div class="main svelte-im4zhz"><!> <div class="content svelte-im4zhz"><!></div></div></div> <!>',1);function fo(e,t){ge(t,!0);let s=B(!1),r=B(!1);function l(m){(m.metaKey||m.ctrlKey)&&m.key==="k"&&(m.preventDefault(),y(s,!a(s))),m.key==="Escape"&&a(s)&&y(s,!1)}Ee(()=>{window.addEventListener("keydown",l)}),js(()=>{window.removeEventListener("keydown",l)});var i=uo(),v=ve(i),d=n(v);so(d,{get mobileOpen(){return a(r)},set mobileOpen(m){y(r,m,!0)}});var c=o(d,2),u=n(c);lo(u,{onOpenCommandPalette:()=>y(s,!0),onToggleMobile:()=>y(r,!a(r))});var _=o(u,2),p=n(_);Ua(p,()=>t.children);var k=o(v,2);co(k,{get open(){return a(s)},set open(m){y(s,m,!0)}}),f(e,i),ye()}Gi();let Kt=B(me([])),ho=0;function po(){return a(Kt)}function F(e,t="info",s=3500){const r=++ho;a(Kt).push({id:r,message:e,type:t,removing:!1}),setTimeout(()=>{const l=a(Kt).findIndex(i=>i.id===r);l!==-1&&(a(Kt)[l].removing=!0,setTimeout(()=>{y(Kt,a(Kt).filter(i=>i.id!==r),!0)},300))},s)}function _o(e){y(Kt,a(Kt).filter(t=>t.id!==e),!0)}var mo=$('<div role="alert"><p class="svelte-1i7wnxu"> </p> <button class="toast-close svelte-1i7wnxu">&times;</button></div>'),go=$('<div class="toast-container svelte-1i7wnxu"></div>');function yo(e,t){ge(t,!1),Gn();var s=go();ke(s,5,po,r=>r.id,(r,l)=>{var i=mo();let v;var d=n(i),c=n(d),u=o(d,2);G(()=>{v=Ie(i,1,`toast toast-${a(l).type??""}`,"svelte-1i7wnxu",v,{removing:a(l).removing}),A(c,a(l).message)}),pe("click",u,()=>_o(a(l).id)),f(r,i)}),f(e,s),ye()}Te(["click"]);let sr=B(null);function wo(){return a(sr)}function Ba({title:e,message:t,confirmText:s="Onayla",cancelText:r="Iptal",danger:l=!1}){return new Promise(i=>{y(sr,{title:e,message:t,confirmText:s,cancelText:r,danger:l,resolve(v){y(sr,null),i(v)}},!0)})}var bo=$('<div class="confirm-overlay svelte-1h168yz"><div class="confirm-box svelte-1h168yz"><h3 class="svelte-1h168yz"> </h3> <p class="svelte-1h168yz"> </p> <div class="confirm-actions svelte-1h168yz"><button class="btn btn-secondary svelte-1h168yz"> </button> <button> </button></div></div></div>');function ko(e,t){ge(t,!0);let s=oe(wo);var r=Ya(),l=ve(r);{var i=v=>{var d=bo(),c=n(d),u=n(c),_=n(u),p=o(u,2),k=n(p),m=o(p,2),h=n(m),x=n(h),g=o(h,2);let b;var P=n(g);G(()=>{A(_,a(s).title),A(k,a(s).message),A(x,a(s).cancelText),b=Ie(g,1,"btn svelte-1h168yz",null,b,{"btn-danger":a(s).danger,"btn-primary":!a(s).danger}),A(P,a(s).confirmText)}),pe("click",d,()=>a(s).resolve(!1)),pe("click",c,j=>j.stopPropagation()),pe("click",h,()=>a(s).resolve(!1)),pe("click",g,()=>a(s).resolve(!0)),f(v,d)};le(l,v=>{a(s)&&v(i)})}f(e,r),ye()}Te(["click"]);async function ws(e,t={}){const s={"Content-Type":"application/json","Bypass-Tunnel-Reminder":"true",...t.headers||{}},r=ua();r&&(s["x-admin-token"]=r);const l=await fetch(e,{...t,headers:s});if(l.status===401)throw Fl(),window.location.hash="#login",new Error("Oturum suresi doldu");const i=await l.json().catch(()=>({}));if(!l.ok)throw new Error((i==null?void 0:i.error)||"HTTP "+l.status);return i}function ka(e){return"api/"+e}const te={get(e){return ws(ka(e))},post(e,t){return ws(ka(e),{method:"POST",body:JSON.stringify(t)})},put(e,t){return ws(ka(e),{method:"PUT",body:JSON.stringify(t)})},delete(e){return ws(ka(e),{method:"DELETE"})},async upload(e,t){const s={"Content-Type":t.type,"Bypass-Tunnel-Reminder":"true"},r=ua();r&&(s["x-admin-token"]=r);const l=await fetch(ka(e),{method:"POST",headers:s,body:t}),i=await l.json().catch(()=>({}));if(!l.ok)throw new Error((i==null?void 0:i.error)||"HTTP "+l.status);return i},async uploadForm(e,t){const s={"Bypass-Tunnel-Reminder":"true"},r=ua();r&&(s["x-admin-token"]=r);const l=await fetch(ka(e),{method:"POST",headers:s,body:t}),i=await l.json().catch(()=>({}));if(!l.ok)throw new Error((i==null?void 0:i.error)||"HTTP "+l.status);return i}};var xo=$('<span class="trend up svelte-1sgihyn">â</span>'),$o=$('<span class="trend down svelte-1sgihyn">â</span>'),qo=$('<div class="kpi-sub svelte-1sgihyn"><!> </div>'),zo=$('<div class="kpi-card svelte-1sgihyn"><div class="kpi-label svelte-1sgihyn"> </div> <div class="kpi-value svelte-1sgihyn"> </div> <!></div>');function nt(e,t){let s=he(t,"label",3,""),r=he(t,"value",3,0),l=he(t,"sub",3,""),i=he(t,"trend",3,""),v=he(t,"color",3,"var(--text)");var d=zo(),c=n(d),u=n(c),_=o(c,2);let p;var k=n(_),m=o(_,2);{var h=x=>{var g=qo(),b=n(g);{var P=z=>{var E=xo();f(z,E)},j=z=>{var E=$o();f(z,E)};le(b,z=>{i()==="up"?z(P):i()==="down"&&z(j,1)})}var C=o(b);G(()=>A(C,` ${l()??""}`)),f(x,g)};le(m,x=>{l()&&x(h)})}G(()=>{A(u,s()),p=Ka(_,"",p,{color:v()}),A(k,r())}),f(e,d)}var So=$('<div class="bar-row svelte-18m1sg8"><span class="bar-label svelte-18m1sg8"> </span> <div class="bar-track svelte-18m1sg8"><div class="bar-fill svelte-18m1sg8"></div></div> <span class="bar-value svelte-18m1sg8"> </span></div>'),Eo=$('<div class="bar-chart svelte-18m1sg8"></div>');function Yl(e,t){ge(t,!0);let s=he(t,"items",19,()=>[]),r=he(t,"color",3,"var(--accent)"),l=oe(()=>Math.max(...s().map(v=>v.value),1));var i=Eo();ke(i,21,s,qe,(v,d)=>{var c=So(),u=n(c),_=n(u),p=o(u,2),k=n(p);let m;var h=o(p,2),x=n(h);G(()=>{A(_,a(d).label),m=Ka(k,"",m,{width:`${a(d).value/a(l)*100}%`,background:a(d).color||r()}),A(x,a(d).value)}),f(v,c)}),f(e,i),ye()}var To=$('<p class="svelte-oagnpm"> </p>'),Ao=$('<div class="loading svelte-oagnpm"><div class="spinner svelte-oagnpm"></div> <!></div>');function Ae(e,t){let s=he(t,"size",3,32),r=he(t,"message",3,"");var l=Ao(),i=n(l);let v;var d=o(i,2);{var c=u=>{var _=To(),p=n(_);G(()=>A(p,r())),f(u,_)};le(d,u=>{r()&&u(c)})}G(()=>v=Ka(i,"",v,{width:`${s()??""}px`,height:`${s()??""}px`})),f(e,l)}var Po=$('<div class="error-state svelte-1udy7wi"> </div>'),Co=$('<div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi"> </span> <span class="status-val svelte-1udy7wi"> </span></div>'),jo=$('<div class="card svelte-1udy7wi"><h2 class="svelte-1udy7wi">Haftalik Populer Konular</h2> <!></div>'),Mo=$('<div class="grid-2 svelte-1udy7wi"><div class="card svelte-1udy7wi"><h2 class="svelte-1udy7wi">Ticket Durumu</h2> <div class="status-grid svelte-1udy7wi"><div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi">Toplam</span> <span class="status-val svelte-1udy7wi"> </span></div> <div class="status-item svelte-1udy7wi"><span class="status-label svelte-1udy7wi">Son 24s</span> <span class="status-val svelte-1udy7wi"> </span></div> <!></div></div> <!></div>'),Io=$('<div class="kpi-grid svelte-1udy7wi"><!> <!> <!> <!></div> <!>',1),Oo=$('<div class="page-header svelte-1udy7wi"><div><h1 class="svelte-1udy7wi">Dashboard</h1> <p class="svelte-1udy7wi">Sistem genel bakis</p></div></div> <!>',1);function Do(e,t){ge(t,!0);let s=B(!0),r=B(null),l=B(null),i=B(null);Ee(async()=>{try{const[m,h]=await Promise.all([te.get("admin/dashboard-stats").catch(()=>null),te.get("admin/summary").catch(()=>null)]);y(r,m,!0),y(l,h,!0)}catch(m){y(i,m.message,!0),F("Dashboard yuklenemedi: "+m.message,"error")}finally{y(s,!1)}});let v=oe(()=>{var m,h;return(((h=(m=a(r))==null?void 0:m.thisWeek)==null?void 0:h.topTopics)||[]).slice(0,8).map(x=>({label:x.topicId||x.topic||"?",value:x.count||0}))});function d(m){return m?m>0?"+"+m+"%":m+"%":""}var c=Oo(),u=o(ve(c),2);{var _=m=>{Ae(m,{message:"Yukleniyor..."})},p=m=>{var h=Po(),x=n(h);G(()=>A(x,`Hata: ${a(i)??""}`)),f(m,h)},k=m=>{var h=Io(),x=ve(h),g=n(x);{let E=oe(()=>{var I,T;return((T=(I=a(r))==null?void 0:I.today)==null?void 0:T.chats)??0}),K=oe(()=>{var I,T;return((T=(I=a(r))==null?void 0:I.today)==null?void 0:T.resolutionRate)??0});nt(g,{label:"Bugun Sohbet",get value(){return a(E)},get sub(){return`Cozum: %${a(K)??""}`}})}var b=o(g,2);{let E=oe(()=>{var T,q;return((q=(T=a(r))==null?void 0:T.thisWeek)==null?void 0:q.chats)??0}),K=oe(()=>{var T,q;return d((q=(T=a(r))==null?void 0:T.trends)==null?void 0:q.weeklyChats)}),I=oe(()=>{var T,q,R,H;return((q=(T=a(r))==null?void 0:T.trends)==null?void 0:q.weeklyChats)>0?"up":((H=(R=a(r))==null?void 0:R.trends)==null?void 0:H.weeklyChats)<0?"down":""});nt(b,{label:"Haftalik Sohbet",get value(){return a(E)},get sub(){return a(K)},get trend(){return a(I)}})}var P=o(b,2);{let E=oe(()=>{var T,q;return(((q=(T=a(r))==null?void 0:T.thisWeek)==null?void 0:q.csatAvg)??0).toFixed(1)+"/5"}),K=oe(()=>{var T,q;return d((q=(T=a(r))==null?void 0:T.trends)==null?void 0:q.weeklyCsat)}),I=oe(()=>{var T,q,R,H;return((q=(T=a(r))==null?void 0:T.trends)==null?void 0:q.weeklyCsat)>0?"up":((H=(R=a(r))==null?void 0:R.trends)==null?void 0:H.weeklyCsat)<0?"down":""});nt(P,{label:"Haftalik CSAT",get value(){return a(E)},get sub(){return a(K)},get trend(){return a(I)}})}var j=o(P,2);{let E=oe(()=>{var I,T;return((T=(I=a(r))==null?void 0:I.thisMonth)==null?void 0:T.resolutionRate)??0}),K=oe(()=>{var I,T;return d((T=(I=a(r))==null?void 0:I.trends)==null?void 0:T.monthlyChats)});nt(j,{label:"Aylik Cozum",get value(){return`%${a(E)??""}`},get sub(){return a(K)}})}var C=o(x,2);{var z=E=>{var K=Mo(),I=n(K),T=o(n(I),2),q=n(T),R=o(n(q),2),H=n(R),D=o(q,2),N=o(n(D),2),Y=n(N),L=o(D,2);ke(L,17,()=>Object.entries(a(l).summary.byStatus||{}),qe,(S,M)=>{var W=oe(()=>nr(a(M),2));let J=()=>a(W)[0],ie=()=>a(W)[1];var X=Co(),w=n(X),Q=n(w),re=o(w,2),se=n(re);G(fe=>{A(Q,fe),A(se,ie())},[()=>J().replace(/_/g," ")]),f(S,X)});var Z=o(I,2);{var U=S=>{var M=jo(),W=o(n(M),2);Yl(W,{get items(){return a(v)}}),f(S,M)};le(Z,S=>{a(v).length&&S(U)})}G(()=>{A(H,a(l).summary.total??0),A(Y,a(l).summary.last24h??0)}),f(E,K)};le(C,E=>{var K;(K=a(l))!=null&&K.summary&&E(z)})}f(m,h)};le(u,m=>{a(s)?m(_):a(i)?m(p,1):m(k,!1)})}f(e,c),ye()}function Ut(e){if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Na(e){if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const s=Date.now()-t.getTime(),r=Math.floor(s/6e4);if(r<1)return"az once";if(r<60)return r+" dk once";const l=Math.floor(r/60);if(l<24)return l+" saat once";const i=Math.floor(l/24);return i<30?i+" gun once":Ut(e)}function is(e,t=60){return e?e.length>t?e.slice(0,t)+"...":e:""}var Ko=$('<div class="bubble-time svelte-uewexn"> </div>'),Bo=$("<div><div> </div> <!></div>");function hs(e,t){let s=he(t,"sender",3,"bot"),r=he(t,"message",3,""),l=he(t,"timestamp",3,"");var i=Bo();let v;var d=n(i),c=n(d),u=o(d,2);{var _=p=>{var k=Ko(),m=n(k);G(()=>A(m,l())),f(p,k)};le(u,p=>{l()&&p(_)})}G(()=>{v=Ie(i,1,"bubble-wrap svelte-uewexn",null,v,{user:s()==="user"}),Ie(d,1,`bubble bubble-${s()??""}`,"svelte-uewexn"),A(c,r())}),f(e,i)}var No=$("<span><!></span>");function Ke(e,t){let s=he(t,"variant",3,"gray");var r=No(),l=n(r);Ua(l,()=>t.children),G(()=>Ie(r,1,`badge badge-${s()??""}`,"svelte-jpiuiy")),f(e,r)}var Ro=$("<button><!></button>");function ne(e,t){let s=he(t,"variant",3,"secondary"),r=he(t,"size",3,"md"),l=he(t,"disabled",3,!1),i=he(t,"type",3,"button"),v=he(t,"class",3,"");var d=Ro(),c=n(d);Ua(c,()=>t.children),G(()=>{pa(d,"type",i()),Ie(d,1,`btn btn-${s()??""} btn-${r()??""} ${v()??""}`,"svelte-er4ugn"),d.disabled=l()}),pe("click",d,function(...u){var _;(_=t.onclick)==null||_.apply(this,u)}),f(e,d)}Te(["click"]);var Ho=$('<div><div class="conv-top svelte-tmzvc9"><span class="conv-session svelte-tmzvc9"> </span> <!></div> <div class="conv-msg svelte-tmzvc9"> </div> <div class="conv-meta svelte-tmzvc9"><span> </span> <span> </span></div></div>'),Lo=$('<div class="empty-list svelte-tmzvc9">Aktif sohbet yok</div>'),Fo=$('<div class="empty-chat svelte-tmzvc9">Mesaj yok</div>'),Yo=$('<div class="chat-header svelte-tmzvc9"><strong> </strong> <span class="chat-meta svelte-tmzvc9"> </span></div> <div class="chat-body svelte-tmzvc9"></div>',1),Uo=$('<div class="no-selection svelte-tmzvc9">Bir sohbet secin</div>'),Go=$('<div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9"> </span> <span class="detail-val svelte-tmzvc9"> </span></div>'),Vo=$('<h4 class="svelte-tmzvc9">Hafiza</h4> <!>',1),Wo=$('<h3 class="svelte-tmzvc9">Detaylar</h3> <div class="detail-rows svelte-tmzvc9"><div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Oturum</span> <span class="detail-val mono svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Durum</span> <span class="detail-val svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Kaynak</span> <span class="detail-val svelte-tmzvc9"> </span></div> <div class="detail-row svelte-tmzvc9"><span class="detail-label svelte-tmzvc9">Olusturma</span> <span class="detail-val svelte-tmzvc9"> </span></div> <!></div>',1),Qo=$('<div class="no-selection-ctx svelte-tmzvc9">Detay icin sohbet secin</div>'),Zo=$('<div class="live-layout svelte-tmzvc9"><div class="conv-list svelte-tmzvc9"></div> <div class="chat-panel svelte-tmzvc9"><!></div> <div class="context-panel svelte-tmzvc9"><!></div></div>'),Jo=$('<div class="page-header svelte-tmzvc9"><div><h1 class="svelte-tmzvc9">Canli Sohbetler <!></h1> <p class="svelte-tmzvc9">Aktif ve ticketed sohbetler</p></div> <div class="header-actions svelte-tmzvc9"><!> <!></div></div> <!>',1);function Xo(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=oe(()=>a(r).find(C=>C.sessionId===a(l)));Ee(()=>v());async function v(){y(s,!0);try{const C=await te.get("admin/conversations");y(r,(C.conversations||[]).filter(z=>z.status==="active"||z.status==="ticketed"),!0)}catch(C){F("Sohbetler yuklenemedi: "+C.message,"error")}finally{y(s,!1)}}async function d(){if(await Ba({title:"Tum sohbetleri kapat",message:"Tum aktif sohbetler kapatilacak. Emin misiniz?",confirmText:"Kapat",danger:!0}))try{const z=await te.post("admin/conversations/close-all",{});F(z.closedCount+" sohbet kapatildi","success"),await v(),y(l,null)}catch(z){F("Hata: "+z.message,"error")}}var c=Jo(),u=ve(c),_=n(u),p=n(_),k=o(n(p));Ke(k,{variant:"blue",children:(C,z)=>{var E=V();G(()=>A(E,a(r).length)),f(C,E)},$$slots:{default:!0}});var m=o(_,2),h=n(m);ne(h,{onclick:v,variant:"ghost",size:"sm",children:(C,z)=>{var E=V("Yenile");f(C,E)},$$slots:{default:!0}});var x=o(h,2);{var g=C=>{ne(C,{onclick:d,variant:"danger",size:"sm",children:(z,E)=>{var K=V("Tumunu Kapat");f(z,K)},$$slots:{default:!0}})};le(x,C=>{a(r).length&&C(g)})}var b=o(u,2);{var P=C=>{Ae(C,{message:"Yukleniyor..."})},j=C=>{var z=Zo(),E=n(z);ke(E,21,()=>a(r),qe,(Y,L)=>{var Z=Ho();let U;var S=n(Z),M=n(S),W=n(M),J=o(M,2);{let ee=oe(()=>a(L).status==="active"?"green":"yellow");Ke(J,{get variant(){return a(ee)},children:(de,ae)=>{var be=V();G(()=>A(be,a(L).status)),f(de,be)},$$slots:{default:!0}})}var ie=o(S,2),X=n(ie),w=o(ie,2),Q=n(w),re=n(Q),se=o(Q,2),fe=n(se);G((ee,de)=>{U=Ie(Z,1,"conv-item svelte-tmzvc9",null,U,{active:a(l)===a(L).sessionId}),A(W,ee),A(X,a(L).lastUserMessage||"..."),A(re,`${(a(L).messageCount||0)??""} mesaj`),A(fe,de)},[()=>{var ee;return((ee=a(L).sessionId)==null?void 0:ee.slice(-8))||"?"},()=>Na(a(L).updatedAt)]),pe("click",Z,()=>y(l,a(L).sessionId,!0)),f(Y,Z)},Y=>{var L=Lo();f(Y,L)});var K=o(E,2),I=n(K);{var T=Y=>{var L=Yo(),Z=ve(L),U=n(Z),S=n(U),M=o(U,2),W=n(M),J=o(Z,2);ke(J,21,()=>a(i).chatHistory||[],qe,(ie,X)=>{{let w=oe(()=>a(X).role==="user"?"user":"bot"),Q=oe(()=>a(X).content||"");hs(ie,{get sender(){return a(w)},get message(){return a(Q)}})}},ie=>{var X=Fo();f(ie,X)}),G(ie=>{A(S,ie),A(W,`${(a(i).source||"web")??""} Â· ${a(i).messageCount??""} mesaj`)},[()=>{var ie;return(ie=a(i).sessionId)==null?void 0:ie.slice(-8)}]),f(Y,L)},q=Y=>{var L=Uo();f(Y,L)};le(I,Y=>{a(i)?Y(T):Y(q,!1)})}var R=o(K,2),H=n(R);{var D=Y=>{var L=Wo(),Z=o(ve(L),2),U=n(Z),S=o(n(U),2),M=n(S),W=o(U,2),J=o(n(W),2),ie=n(J),X=o(W,2),w=o(n(X),2),Q=n(w),re=o(X,2),se=o(n(re),2),fe=n(se),ee=o(re,2);{var de=ae=>{var be=Vo(),Se=o(ve(be),2);ke(Se,17,()=>Object.entries(a(i).memory),qe,(je,Pe)=>{var Fe=oe(()=>nr(a(Pe),2));let ce=()=>a(Fe)[0],Ze=()=>a(Fe)[1];var Ye=Ya(),_a=ve(Ye);{var qt=Mt=>{var Wt=Go(),ma=n(Wt),Qt=n(ma),Ga=o(ma,2),Va=n(Ga);G(()=>{A(Qt,ce()),A(Va,Ze())}),f(Mt,Wt)};le(_a,Mt=>{Ze()&&Mt(qt)})}f(je,Ye)}),f(ae,be)};le(ee,ae=>{a(i).memory&&ae(de)})}G((ae,be)=>{A(M,ae),A(ie,a(i).status),A(Q,a(i).source||"web"),A(fe,be)},[()=>{var ae;return(ae=a(i).sessionId)==null?void 0:ae.slice(0,16)},()=>Na(a(i).createdAt)]),f(Y,L)},N=Y=>{var L=Qo();f(Y,L)};le(H,Y=>{a(i)?Y(D):Y(N,!1)})}f(C,z)};le(b,C=>{a(s)?C(P):C(j,!1)})}f(e,c),ye()}Te(["click"]);var ev=$('<tr class="svelte-14amxqn"><td class="mono svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"> </td><td class="svelte-14amxqn"><!></td></tr>'),tv=$('<tr class="svelte-14amxqn"><td colspan="6" class="empty-row svelte-14amxqn">Kapali sohbet yok</td></tr>'),av=$('<div class="card svelte-14amxqn"><table class="svelte-14amxqn"><thead><tr><th class="svelte-14amxqn">Oturum</th><th class="svelte-14amxqn">Mesaj</th><th class="svelte-14amxqn">Kaynak</th><th class="svelte-14amxqn">Son Mesaj</th><th class="svelte-14amxqn">Kapanma</th><th class="svelte-14amxqn"></th></tr></thead><tbody></tbody></table></div>'),sv=$('<div class="memory-row svelte-14amxqn"><span class="memory-key svelte-14amxqn"> </span> <span> </span></div>'),rv=$('<div class="memory-card svelte-14amxqn"><h3 class="svelte-14amxqn">Hafiza</h3> <!></div>'),lv=$('<p class="no-msg svelte-14amxqn">Mesaj gecmisi yok</p>'),iv=$('<div class="detail-view svelte-14amxqn"><!> <div class="detail-header svelte-14amxqn"><h2 class="svelte-14amxqn"> </h2> <!></div> <div class="detail-meta svelte-14amxqn"><span> </span> <span> </span> <span> </span></div> <!> <div class="chat-card svelte-14amxqn"><h3 class="svelte-14amxqn">Mesajlar</h3> <!></div></div>'),nv=$('<div class="page-header svelte-14amxqn"><div><h1 class="svelte-14amxqn">Kapali Sohbetler <!></h1> <p class="svelte-14amxqn">Kapatilmis sohbet gecmisi</p></div> <!></div> <!>',1);function ov(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=oe(()=>a(r).find(b=>b.sessionId===a(l)));Ee(()=>v());async function v(){y(s,!0);try{const b=await te.get("admin/conversations");y(r,(b.conversations||[]).filter(P=>P.status==="closed"),!0)}catch(b){F("Kapali sohbetler yuklenemedi: "+b.message,"error")}finally{y(s,!1)}}var d=nv(),c=ve(d),u=n(c),_=n(u),p=o(n(_));Ke(p,{variant:"gray",children:(b,P)=>{var j=V();G(()=>A(j,a(r).length)),f(b,j)},$$slots:{default:!0}});var k=o(u,2);ne(k,{onclick:v,variant:"ghost",size:"sm",children:(b,P)=>{var j=V("Yenile");f(b,j)},$$slots:{default:!0}});var m=o(c,2);{var h=b=>{Ae(b,{message:"Yukleniyor..."})},x=b=>{var P=av(),j=n(P),C=o(n(j));ke(C,21,()=>a(r),qe,(z,E)=>{var K=ev(),I=n(K),T=n(I),q=o(I),R=n(q),H=o(q),D=n(H),N=o(H),Y=n(N),L=o(N),Z=n(L),U=o(L),S=n(U);ne(S,{onclick:()=>y(l,a(E).sessionId,!0),variant:"ghost",size:"sm",children:(M,W)=>{var J=V("Ac");f(M,J)},$$slots:{default:!0}}),G((M,W,J)=>{A(T,M),A(R,a(E).messageCount||0),A(D,a(E).source||"web"),A(Y,W),A(Z,J)},[()=>{var M;return((M=a(E).sessionId)==null?void 0:M.slice(-8))||"?"},()=>is(a(E).lastUserMessage||"",50),()=>Na(a(E).updatedAt)]),f(z,K)},z=>{var E=tv();f(z,E)}),f(b,P)},g=b=>{var P=iv(),j=n(P);ne(j,{onclick:()=>y(l,null),variant:"ghost",size:"sm",children:(M,W)=>{var J=V("â Listeye Don");f(M,J)},$$slots:{default:!0}});var C=o(j,2),z=n(C),E=n(z),K=o(z,2);Ke(K,{variant:"gray",children:(M,W)=>{var J=V("kapali");f(M,J)},$$slots:{default:!0}});var I=o(C,2),T=n(I),q=n(T),R=o(T,2),H=n(R),D=o(R,2),N=n(D),Y=o(I,2);{var L=M=>{var W=rv(),J=o(n(W),2);ke(J,17,()=>Object.entries(a(i).memory),qe,(ie,X)=>{var w=oe(()=>nr(a(X),2));let Q=()=>a(w)[0],re=()=>a(w)[1];var se=Ya(),fe=ve(se);{var ee=de=>{var ae=sv(),be=n(ae),Se=n(be),je=o(be,2),Pe=n(je);G(()=>{A(Se,Q()),A(Pe,re())}),f(de,ae)};le(fe,de=>{re()&&de(ee)})}f(ie,se)}),f(M,W)},Z=oe(()=>a(i).memory&&Object.keys(a(i).memory).length);le(Y,M=>{a(Z)&&M(L)})}var U=o(Y,2),S=o(n(U),2);ke(S,17,()=>a(i).chatHistory||[],qe,(M,W)=>{{let J=oe(()=>a(W).role==="user"?"user":"bot"),ie=oe(()=>a(W).content||"");hs(M,{get sender(){return a(J)},get message(){return a(ie)}})}},M=>{var W=lv();f(M,W)}),G((M,W)=>{A(E,M),A(q,`Kaynak: ${(a(i).source||"web")??""}`),A(H,`${a(i).messageCount??""} mesaj`),A(N,W)},[()=>{var M;return(M=a(i).sessionId)==null?void 0:M.slice(-8)},()=>Na(a(i).createdAt)]),f(b,P)};le(m,b=>{a(s)?b(h):a(i)?b(g,!1):b(x,1)})}f(e,d),ye()}var vv=$("<option> </option>"),dv=$('<p class="no-msg svelte-q2mz46">Mesaj yok</p>'),cv=$('<div class="note-item svelte-q2mz46"><span class="note-meta svelte-q2mz46"> </span> <p class="svelte-q2mz46"> </p></div>'),uv=$('<div class="info-card svelte-q2mz46"><h3 class="svelte-q2mz46">Notlar</h3> <!></div>'),fv=$('<div class="detail-view svelte-q2mz46"><!> <div class="detail-header svelte-q2mz46"><h2 class="svelte-q2mz46"> </h2> <!></div> <div class="detail-grid svelte-q2mz46"><div class="info-card svelte-q2mz46"><h3 class="svelte-q2mz46">Bilgiler</h3> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Sube Kodu</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Firma</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Ad Soyad</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Telefon</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Kaynak</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Oncelik</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Atanan</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Olusturma</span><span class="svelte-q2mz46"> </span></div> <div class="info-row svelte-q2mz46"><span class="svelte-q2mz46">Ozet</span><span class="svelte-q2mz46"> </span></div></div> <div class="chat-card svelte-q2mz46"><h3 class="svelte-q2mz46">Sohbet Gecmisi</h3> <!></div></div> <!></div>'),hv=$('<tr class="svelte-q2mz46"><td class="mono svelte-q2mz46"> </td><td class="svelte-q2mz46"><!></td><td class="svelte-q2mz46"><span> </span></td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"> </td><td class="svelte-q2mz46"><!></td></tr>'),pv=$('<tr class="svelte-q2mz46"><td colspan="8" class="empty-row svelte-q2mz46">Sonuc bulunamadi</td></tr>'),_v=$('<div class="card svelte-q2mz46"><table class="svelte-q2mz46"><thead><tr><th class="svelte-q2mz46">ID</th><th class="svelte-q2mz46">Durum</th><th class="svelte-q2mz46">Oncelik</th><th class="svelte-q2mz46">Sube</th><th class="svelte-q2mz46">Ozet</th><th class="svelte-q2mz46">Kaynak</th><th class="svelte-q2mz46">Tarih</th><th class="svelte-q2mz46"></th></tr></thead><tbody></tbody></table></div>'),mv=$('<div class="page-header svelte-q2mz46"><div><h1 class="svelte-q2mz46">Arama</h1> <p class="svelte-q2mz46"> </p></div> <div class="header-actions svelte-q2mz46"><!></div></div> <div class="filters svelte-q2mz46"><input class="input search-input svelte-q2mz46" type="text" placeholder="ID, isim, ozet, telefon ara..."/> <select class="select svelte-q2mz46"></select> <select class="select svelte-q2mz46"><option>Tum Kaynaklar</option><option>Web</option><option>WhatsApp</option><option>Zendesk</option></select> <select class="select svelte-q2mz46"><option>50</option><option>100</option><option>200</option><option>500</option></select></div> <!>',1);function gv(e,t){ge(t,!0);let s=B(!1),r=B(me([])),l=B(0),i=B(""),v=B(""),d=B(""),c=B("100"),u=B(null),_;const p=[{value:"",label:"Tumu"},{value:"handoff_pending",label:"Aktarim Bekleyen"},{value:"queued_after_hours",label:"Mesai Disi"},{value:"handoff_success",label:"Basarili"},{value:"handoff_failed",label:"Basarisiz"},{value:"handoff_parent_posted",label:"Parent Aktarim"},{value:"handoff_opened_no_summary",label:"Ozetsiz"}],k={handoff_pending:"yellow",queued_after_hours:"purple",handoff_success:"green",handoff_failed:"red",handoff_parent_posted:"blue",handoff_opened_no_summary:"gray"};Ee(()=>m());async function m(){y(s,!0);try{const w=new URLSearchParams;a(v)&&w.set("status",a(v)),a(c)&&w.set("limit",a(c)),a(i).trim()&&w.set("q",a(i).trim()),a(d)&&w.set("source",a(d));const Q=w.toString(),re=await te.get("admin/tickets"+(Q?"?"+Q:""));y(r,re.tickets||[],!0),y(l,re.total||0,!0)}catch(w){F("Arama hatasi: "+w.message,"error")}finally{y(s,!1)}}function h(){clearTimeout(_),_=setTimeout(m,400)}async function x(w){try{const Q=await te.get("admin/tickets/"+encodeURIComponent(w));y(u,Q.ticket||Q,!0)}catch(Q){F("Ticket yuklenemedi: "+Q.message,"error")}}function g(){const w=new URLSearchParams({format:"csv",token:ua()});a(v)&&w.set("status",a(v)),window.open("api/admin/tickets/export?"+w.toString(),"_blank")}var b=mv(),P=ve(b),j=n(P),C=o(n(j),2),z=n(C),E=o(j,2),K=n(E);ne(K,{onclick:g,variant:"ghost",size:"sm",children:(w,Q)=>{var re=V("CSV Indir");f(w,re)},$$slots:{default:!0}});var I=o(P,2),T=n(I),q=o(T,2);ke(q,21,()=>p,qe,(w,Q)=>{var re=vv(),se=n(re),fe={};G(()=>{A(se,a(Q).label),fe!==(fe=a(Q).value)&&(re.value=(re.__value=a(Q).value)??"")}),f(w,re)});var R=o(q,2),H=n(R);H.value=H.__value="";var D=o(H);D.value=D.__value="web";var N=o(D);N.value=N.__value="whatsapp";var Y=o(N);Y.value=Y.__value="zendesk";var L=o(R,2),Z=n(L);Z.value=Z.__value="50";var U=o(Z);U.value=U.__value="100";var S=o(U);S.value=S.__value="200";var M=o(S);M.value=M.__value="500";var W=o(I,2);{var J=w=>{Ae(w,{message:"AranÄ±yor..."})},ie=w=>{var Q=fv(),re=n(Q);ne(re,{onclick:()=>y(u,null),variant:"ghost",size:"sm",children:(Je,Xe)=>{var wa=V("â Listeye Don");f(Je,wa)},$$slots:{default:!0}});var se=o(re,2),fe=n(se),ee=n(fe),de=o(fe,2);{let Je=oe(()=>k[a(u).status]||"gray");Ke(de,{get variant(){return a(Je)},children:(Xe,wa)=>{var ba=V();G(It=>A(ba,It),[()=>{var It;return(It=a(u).status)==null?void 0:It.replace(/_/g," ")}]),f(Xe,ba)},$$slots:{default:!0}})}var ae=o(se,2),be=n(ae),Se=o(n(be),2),je=o(n(Se)),Pe=n(je),Fe=o(Se,2),ce=o(n(Fe)),Ze=n(ce),Ye=o(Fe,2),_a=o(n(Ye)),qt=n(_a),Mt=o(Ye,2),Wt=o(n(Mt)),ma=n(Wt),Qt=o(Mt,2),Ga=o(n(Qt)),Va=n(Ga),ps=o(Qt,2),Zt=o(n(ps)),ga=n(Zt),Wa=o(ps,2),_s=o(n(Wa)),ya=n(_s),kr=o(Wa,2),Vl=o(n(kr)),Wl=n(Vl),Ql=o(kr,2),Zl=o(n(Ql)),Jl=n(Zl),Xl=o(be,2),ei=o(n(Xl),2);ke(ei,17,()=>a(u).chatHistory||[],qe,(Je,Xe)=>{{let wa=oe(()=>a(Xe).role==="user"?"user":"bot"),ba=oe(()=>a(Xe).content||"");hs(Je,{get sender(){return a(wa)},get message(){return a(ba)}})}},Je=>{var Xe=dv();f(Je,Xe)});var ti=o(ae,2);{var ai=Je=>{var Xe=uv(),wa=o(n(Xe),2);ke(wa,17,()=>a(u).internalNotes,qe,(ba,It)=>{var xr=cv(),$r=n(xr),si=n($r),ri=o($r,2),li=n(ri);G(ii=>{A(si,`${a(It).author??""} Â· ${ii??""}`),A(li,a(It).note)},[()=>Ut(a(It).at)]),f(ba,xr)}),f(Je,Xe)};le(ti,Je=>{var Xe;(Xe=a(u).internalNotes)!=null&&Xe.length&&Je(ai)})}G(Je=>{A(ee,a(u).id),A(Pe,a(u).branchCode||"-"),A(Ze,a(u).companyName||"-"),A(qt,a(u).fullName||"-"),A(ma,a(u).phone||"-"),A(Va,a(u).source||"-"),A(ga,a(u).priority||"normal"),A(ya,a(u).assignedTo||"-"),A(Wl,Je),A(Jl,a(u).issueSummary||"-")},[()=>Ut(a(u).createdAt)]),f(w,Q)},X=w=>{var Q=_v(),re=n(Q),se=o(n(re));ke(se,21,()=>a(r),qe,(fe,ee)=>{var de=hv(),ae=n(de),be=n(ae),Se=o(ae),je=n(Se);{let Zt=oe(()=>k[a(ee).status]||"gray");Ke(je,{get variant(){return a(Zt)},children:(ga,Wa)=>{var _s=V();G(ya=>A(_s,ya),[()=>{var ya;return(ya=a(ee).status)==null?void 0:ya.replace(/_/g," ")}]),f(ga,_s)},$$slots:{default:!0}})}var Pe=o(Se),Fe=n(Pe);let ce;var Ze=n(Fe),Ye=o(Pe),_a=n(Ye),qt=o(Ye),Mt=n(qt),Wt=o(qt),ma=n(Wt),Qt=o(Wt),Ga=n(Qt),Va=o(Qt),ps=n(Va);ne(ps,{onclick:()=>x(a(ee).id),variant:"ghost",size:"sm",children:(Zt,ga)=>{var Wa=V("Ac");f(Zt,Wa)},$$slots:{default:!0}}),G((Zt,ga)=>{A(be,a(ee).id),ce=Ie(Fe,1,"priority svelte-q2mz46",null,ce,{high:a(ee).priority==="high",low:a(ee).priority==="low"}),A(Ze,a(ee).priority||"normal"),A(_a,a(ee).branchCode||"-"),A(Mt,Zt),A(ma,a(ee).source||"web"),A(Ga,ga)},[()=>is(a(ee).issueSummary||"",40),()=>Ut(a(ee).createdAt)]),f(fe,de)},fe=>{var ee=pv();f(fe,ee)}),f(w,Q)};le(W,w=>{a(s)?w(J):a(u)?w(ie,1):w(X,!1)})}G(()=>A(z,`Ticket ara ve filtrele (${a(l)??""} sonuc)`)),pe("input",T,h),ue(T,()=>a(i),w=>y(i,w)),pe("change",q,m),es(q,()=>a(v),w=>y(v,w)),pe("change",R,m),es(R,()=>a(d),w=>y(d,w)),pe("change",L,m),es(L,()=>a(c),w=>y(c,w)),f(e,b),ye()}Te(["input","change"]);function Ul(e,{onMessage:t,onEvent:s,onError:r}={}){const l=ua(),i=e.includes("?")?"&":"?",v="api/"+e+(l?i+"token="+encodeURIComponent(l):""),d=new EventSource(v);if(t&&(d.onmessage=c=>{try{const u=JSON.parse(c.data);t(u)}catch{}}),s)for(const[c,u]of Object.entries(s))d.addEventListener(c,_=>{try{const p=_.data?JSON.parse(_.data):{};u(p)}catch{u({})}});return d.onerror=()=>{r&&r(),d.close()},{close(){d.close()}}}var yv=$('<div class="chat-input svelte-vqyzz1"><textarea rows="1" class="svelte-vqyzz1"></textarea> <button class="send-btn svelte-vqyzz1" aria-label="Gonder"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></button></div>');function Gl(e,t){ge(t,!0);let s=he(t,"placeholder",3,"Mesaj yazin..."),r=he(t,"disabled",3,!1),l=B("");function i(){var p;const _=a(l).trim();_&&((p=t.onsend)==null||p.call(t,_),y(l,""))}function v(_){_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),i())}var d=yv(),c=n(d),u=o(c,2);G(_=>{pa(c,"placeholder",s()),c.disabled=r(),u.disabled=_},[()=>r()||!a(l).trim()]),pe("keydown",c,v),ue(c,()=>a(l),_=>y(l,_)),pe("click",u,i),f(e,d),ye()}Te(["keydown","click"]);var wv=$('<div><div class="qi-top svelte-1krjtqm"><span class="qi-name svelte-1krjtqm"> </span> <!></div> <div class="qi-topic svelte-1krjtqm"> </div> <div class="qi-meta svelte-1krjtqm"> </div> <!></div>'),bv=$('<div class="queue-group svelte-1krjtqm"> </div> <!>',1),kv=$('<div><div class="qi-top svelte-1krjtqm"><span class="qi-name svelte-1krjtqm"> </span> <!></div> <div class="qi-topic svelte-1krjtqm"> </div> <div class="qi-meta svelte-1krjtqm"> </div></div>'),xv=$('<div class="queue-group svelte-1krjtqm"> </div> <!>',1),$v=$('<div class="queue-empty svelte-1krjtqm">Kuyruk bos</div>'),qv=$('<div class="empty-chat svelte-1krjtqm">Mesaj yok</div>'),zv=$('<div class="chat-header svelte-1krjtqm"><div><strong> </strong> <span class="chat-meta svelte-1krjtqm"> </span></div> <!></div> <div class="chat-body svelte-1krjtqm"></div> <!>',1),Sv=$('<div class="no-selection svelte-1krjtqm">Bir talep secin</div>'),Ev=$('<div class="inbox-layout svelte-1krjtqm"><div class="queue-panel svelte-1krjtqm"><!> <!> <!></div> <div class="chat-panel svelte-1krjtqm"><!></div></div>'),Tv=$('<div class="page-header svelte-1krjtqm"><div><h1 class="svelte-1krjtqm">Agent Inbox</h1> <p class="svelte-1krjtqm">Insan temsilci kuyruÄu</p></div> <!></div> <!>',1);function Av(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(me([])),i=B(null),v=B(me([])),d=null,c=oe(()=>[...a(r),...a(l)].find(z=>z.sessionId===a(i)));Ee(()=>{u(),d=Ul("admin/inbox/stream",{onEvent:{claimed:()=>u(),released:()=>u(),message:z=>{z.sessionId===a(i)&&_(a(i))}},onError:()=>{}})}),js(()=>{d==null||d.close()});async function u(){try{const z=await te.get("admin/inbox");y(r,z.pending||[],!0),y(l,z.active||[],!0)}catch(z){F("Inbox yuklenemedi: "+z.message,"error")}finally{y(s,!1)}}async function _(z){try{const K=((await te.get("admin/conversations")).conversations||[]).find(I=>I.sessionId===z);y(v,(K==null?void 0:K.chatHistory)||[],!0)}catch{y(v,[],!0)}}async function p(z){y(i,z,!0),await _(z)}async function k(z){try{await te.post("admin/inbox/"+z+"/claim",{agentName:"admin"}),F("Talep alindi","success"),await u()}catch(E){F("Hata: "+E.message,"error")}}async function m(z){try{await te.post("admin/inbox/"+z+"/release",{}),F("Talep serbest birakildi","success"),y(i,null),await u()}catch(E){F("Hata: "+E.message,"error")}}async function h(z){if(a(c))try{await te.post("admin/inbox/"+a(c).id+"/message",{message:z}),await _(a(i))}catch(E){F("Mesaj gonderilemedi: "+E.message,"error")}}var x=Tv(),g=ve(x),b=o(n(g),2);ne(b,{onclick:u,variant:"ghost",size:"sm",children:(z,E)=>{var K=V("Yenile");f(z,K)},$$slots:{default:!0}});var P=o(g,2);{var j=z=>{Ae(z,{message:"Yukleniyor..."})},C=z=>{var E=Ev(),K=n(E),I=n(K);{var T=U=>{var S=bv(),M=ve(S),W=n(M),J=o(M,2);ke(J,17,()=>a(r),qe,(ie,X)=>{var w=wv();let Q;var re=n(w),se=n(re),fe=n(se),ee=o(se,2);Ke(ee,{variant:"yellow",children:(Pe,Fe)=>{var ce=V("bekliyor");f(Pe,ce)},$$slots:{default:!0}});var de=o(re,2),ae=n(de),be=o(de,2),Se=n(be),je=o(be,2);ne(je,{onclick:Pe=>{Pe.stopPropagation(),k(a(X).id)},variant:"primary",size:"sm",children:(Pe,Fe)=>{var ce=V("Talep Al");f(Pe,ce)},$$slots:{default:!0}}),G(Pe=>{Q=Ie(w,1,"queue-item svelte-1krjtqm",null,Q,{active:a(i)===a(X).sessionId}),A(fe,a(X).customerName||"Misafir"),A(ae,a(X).topic||a(X).summary||"..."),A(Se,Pe)},[()=>Na(a(X).createdAt)]),pe("click",w,()=>p(a(X).sessionId)),f(ie,w)}),G(()=>A(W,`Bekleyen (${a(r).length??""})`)),f(U,S)};le(I,U=>{a(r).length&&U(T)})}var q=o(I,2);{var R=U=>{var S=xv(),M=ve(S),W=n(M),J=o(M,2);ke(J,17,()=>a(l),qe,(ie,X)=>{var w=kv();let Q;var re=n(w),se=n(re),fe=n(se),ee=o(se,2);Ke(ee,{variant:"green",children:(je,Pe)=>{var Fe=V("aktif");f(je,Fe)},$$slots:{default:!0}});var de=o(re,2),ae=n(de),be=o(de,2),Se=n(be);G(je=>{Q=Ie(w,1,"queue-item svelte-1krjtqm",null,Q,{active:a(i)===a(X).sessionId}),A(fe,a(X).customerName||"Misafir"),A(ae,a(X).topic||a(X).summary||"..."),A(Se,`${(a(X).assignedTo||"admin")??""} Â· ${je??""}`)},[()=>Na(a(X).createdAt)]),pe("click",w,()=>p(a(X).sessionId)),f(ie,w)}),G(()=>A(W,`Aktif (${a(l).length??""})`)),f(U,S)};le(q,U=>{a(l).length&&U(R)})}var H=o(q,2);{var D=U=>{var S=$v();f(U,S)};le(H,U=>{!a(r).length&&!a(l).length&&U(D)})}var N=o(K,2),Y=n(N);{var L=U=>{var S=zv(),M=ve(S),W=n(M),J=n(W),ie=n(J),X=o(J,2),w=n(X),Q=o(W,2);{var re=de=>{ne(de,{onclick:()=>m(a(c).id),variant:"ghost",size:"sm",children:(ae,be)=>{var Se=V("Serbest Birak");f(ae,Se)},$$slots:{default:!0}})};le(Q,de=>{a(c).assignedTo&&de(re)})}var se=o(M,2);ke(se,21,()=>a(v),qe,(de,ae)=>{{let be=oe(()=>a(ae).role==="user"?"user":"bot"),Se=oe(()=>a(ae).content||"");hs(de,{get sender(){return a(be)},get message(){return a(Se)}})}},de=>{var ae=qv();f(de,ae)});var fe=o(se,2);{var ee=de=>{Gl(de,{onsend:h})};le(fe,de=>{a(c).assignedTo&&de(ee)})}G(()=>{A(ie,a(c).customerName||"Misafir"),A(w,a(c).topic||"")}),f(U,S)},Z=U=>{var S=Sv();f(U,S)};le(Y,U=>{a(c)?U(L):U(Z,!1)})}f(z,E)};le(P,z=>{a(s)?z(j):z(C,!1)})}f(e,x),ye()}Te(["click"]);var Pv=$('<div class="modal-overlay svelte-13rrew4"><div class="modal-box svelte-13rrew4" role="dialog"><div class="modal-header svelte-13rrew4"><h3 class="svelte-13rrew4"> </h3> <button class="modal-close svelte-13rrew4">&times;</button></div> <div class="modal-body svelte-13rrew4"><!></div></div></div>');function ns(e,t){ge(t,!0);let s=he(t,"open",15,!1),r=he(t,"title",3,""),l=he(t,"width",3,"520px");function i(_){_.target===_.currentTarget&&s(!1)}function v(_){_.key==="Escape"&&s(!1)}var d=Ya();$s("keydown",Zs,function(..._){var p;(p=s()?v:void 0)==null||p.apply(this,_)});var c=ve(d);{var u=_=>{var p=Pv(),k=n(p);let m;var h=n(k),x=n(h),g=n(x),b=o(x,2),P=o(h,2),j=n(P);Ua(j,()=>t.children),G(()=>{pa(k,"aria-label",r()),m=Ka(k,"",m,{width:l()}),A(g,r())}),pe("click",p,i),pe("click",b,()=>s(!1)),f(_,p)};le(c,_=>{s()&&_(u)})}f(e,d),ye()}Te(["click"]);var Cv=$('<div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="svelte-1ara9wo"> </p> <input type="file" hidden=""/></div>');function jv(e,t){ge(t,!0);let s=he(t,"accept",3,""),r=he(t,"multiple",3,!1),l=he(t,"label",3,"Dosya sec veya surukle"),i=B(!1),v;function d(h){var g;h.preventDefault(),y(i,!1);const x=Array.from(h.dataTransfer.files);x.length&&((g=t.onfiles)==null||g.call(t,r()?x:[x[0]]))}function c(h){var g;const x=Array.from(h.target.files);x.length&&((g=t.onfiles)==null||g.call(t,r()?x:[x[0]])),h.target.value=""}var u=Cv();let _;var p=o(n(u),2),k=n(p),m=o(p,2);gr(m,h=>v=h,()=>v),G(()=>{_=Ie(u,1,"file-upload svelte-1ara9wo",null,_,{dragging:a(i)}),A(k,l()),pa(m,"accept",s()),m.multiple=r()}),$s("dragover",u,h=>{h.preventDefault(),y(i,!0)}),$s("dragleave",u,()=>y(i,!1)),$s("drop",u,d),pe("click",u,()=>v==null?void 0:v.click()),pe("change",m,c),f(e,u),ye()}Te(["click","change"]);var Mv=$('<tr class="svelte-1mtjxiy"><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"> </td><td class="svelte-1mtjxiy"><!></td></tr>'),Iv=$('<tr class="svelte-1mtjxiy"><td colspan="4" class="empty-row svelte-1mtjxiy">Bilgi tabani bos</td></tr>'),Ov=$('<div class="card svelte-1mtjxiy"><table class="svelte-1mtjxiy"><thead><tr><th class="svelte-1mtjxiy">Soru</th><th class="svelte-1mtjxiy">Cevap</th><th class="svelte-1mtjxiy">Tarih</th><th class="svelte-1mtjxiy"></th></tr></thead><tbody></tbody></table></div>'),Dv=$('<div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Soru <input class="input svelte-1mtjxiy" placeholder="Soru..."/></label></div> <div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">Cevap <textarea class="textarea svelte-1mtjxiy" rows="4" placeholder="Cevap..."></textarea></label></div> <div class="form-group svelte-1mtjxiy"><label class="svelte-1mtjxiy">URL Import <div class="url-row svelte-1mtjxiy"><input class="input svelte-1mtjxiy" placeholder="https://..."/> <!></div></label></div> <div class="modal-actions svelte-1mtjxiy"><!> <!></div>',1),Kv=$('<div class="page-header svelte-1mtjxiy"><div><h1 class="svelte-1mtjxiy">Bilgi Tabani</h1> <p class="svelte-1mtjxiy"> </p></div> <div class="header-actions svelte-1mtjxiy"><!> <!> <!></div></div> <!> <!> <!>',1);function Bv(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(!1),i=B(!1),v=B(""),d=B(""),c=B("");Ee(()=>u());async function u(){y(s,!0);try{const D=await te.get("admin/knowledge");y(r,D.items||D.knowledge||D||[],!0),Array.isArray(a(r))||y(r,[],!0)}catch(D){F("Bilgi tabani yuklenemedi: "+D.message,"error")}finally{y(s,!1)}}async function _(){if(!(!a(v).trim()||!a(d).trim()))try{await te.post("admin/knowledge",{question:a(v).trim(),answer:a(d).trim()}),F("Eklendi","success"),y(v,""),y(d,""),y(l,!1),await u()}catch(D){F("Hata: "+D.message,"error")}}async function p(D){if(await Ba({title:"Sil",message:"Bu kayit silinecek. Emin misiniz?",confirmText:"Sil",danger:!0}))try{await te.delete("admin/knowledge/"+D),F("Silindi","success"),await u()}catch(Y){F("Hata: "+Y.message,"error")}}async function k(D){const N=new FormData;for(const Y of D)N.append("files",Y);try{await te.uploadForm("admin/knowledge/upload-batch",N),F(D.length+" dosya yuklendi","success"),y(i,!1),await u()}catch(Y){F("Yukleme hatasi: "+Y.message,"error")}}async function m(){if(a(c).trim())try{await te.post("admin/knowledge/import-url",{url:a(c).trim()}),F("URL import edildi","success"),y(c,""),await u()}catch(D){F("Import hatasi: "+D.message,"error")}}async function h(){try{await te.post("admin/knowledge/reingest",{}),F("Reingest basladi","success")}catch(D){F("Hata: "+D.message,"error")}}var x=Kv(),g=ve(x),b=n(g),P=o(n(b),2),j=n(P),C=o(b,2),z=n(C);ne(z,{onclick:h,variant:"ghost",size:"sm",children:(D,N)=>{var Y=V("Reingest");f(D,Y)},$$slots:{default:!0}});var E=o(z,2);ne(E,{onclick:()=>y(i,!0),variant:"secondary",size:"sm",children:(D,N)=>{var Y=V("Dosya Yukle");f(D,Y)},$$slots:{default:!0}});var K=o(E,2);ne(K,{onclick:()=>y(l,!0),variant:"primary",size:"sm",children:(D,N)=>{var Y=V("+ Ekle");f(D,Y)},$$slots:{default:!0}});var I=o(g,2);{var T=D=>{Ae(D,{message:"Yukleniyor..."})},q=D=>{var N=Ov(),Y=n(N),L=o(n(Y));ke(L,21,()=>a(r),qe,(Z,U)=>{var S=Mv(),M=n(S),W=n(M),J=o(M),ie=n(J),X=o(J),w=n(X),Q=o(X),re=n(Q);ne(re,{onclick:()=>p(a(U).id||a(U)._id),variant:"ghost",size:"sm",children:(se,fe)=>{var ee=V("Sil");f(se,ee)},$$slots:{default:!0}}),G((se,fe,ee)=>{A(W,se),A(ie,fe),A(w,ee)},[()=>is(a(U).question||a(U).title||"",60),()=>is(a(U).answer||a(U).content||"",80),()=>Ut(a(U).createdAt)]),f(Z,S)},Z=>{var U=Iv();f(Z,U)}),f(D,N)};le(I,D=>{a(s)?D(T):D(q,!1)})}var R=o(I,2);ns(R,{title:"Yeni Kayit",get open(){return a(l)},set open(D){y(l,D,!0)},children:(D,N)=>{var Y=Dv(),L=ve(Y),Z=n(L),U=o(n(Z)),S=o(L,2),M=n(S),W=o(n(M)),J=o(S,2),ie=n(J),X=o(n(ie)),w=n(X),Q=o(w,2);ne(Q,{onclick:m,variant:"secondary",size:"sm",children:(ee,de)=>{var ae=V("Import");f(ee,ae)},$$slots:{default:!0}});var re=o(J,2),se=n(re);ne(se,{onclick:()=>y(l,!1),variant:"secondary",children:(ee,de)=>{var ae=V("Iptal");f(ee,ae)},$$slots:{default:!0}});var fe=o(se,2);ne(fe,{onclick:_,variant:"primary",children:(ee,de)=>{var ae=V("Kaydet");f(ee,ae)},$$slots:{default:!0}}),ue(U,()=>a(v),ee=>y(v,ee)),ue(W,()=>a(d),ee=>y(d,ee)),ue(w,()=>a(c),ee=>y(c,ee)),f(D,Y)},$$slots:{default:!0}});var H=o(R,2);ns(H,{title:"Dosya Yukle",get open(){return a(i)},set open(D){y(i,D,!0)},children:(D,N)=>{jv(D,{accept:".pdf,.docx,.xlsx,.csv,.txt",multiple:!0,onfiles:k,label:"PDF, DOCX, XLSX, CSV veya TXT dosya yukleyin"})},$$slots:{default:!0}}),G(()=>A(j,`${a(r).length??""} kayit`)),f(e,x),ye()}var Nv=$('<button class="tag-remove svelte-1y0aujn">&times;</button>'),Rv=$('<span class="tag svelte-1y0aujn"><!> <!></span>');function Hr(e,t){let s=he(t,"removable",3,!1);var r=Rv(),l=n(r);Ua(l,()=>t.children);var i=o(l,2);{var v=d=>{var c=Nv();pe("click",c,function(...u){var _;(_=t.onremove)==null||_.apply(this,u)}),f(d,c)};le(i,d=>{s()&&d(v)})}f(e,r)}Te(["click"]);var Hv=$('<p class="topic-desc svelte-177izw7"> </p>'),Lv=$('<span class="more svelte-177izw7"> </span>'),Fv=$('<div class="topic-tags svelte-177izw7"><!> <!></div>'),Yv=$('<div class="topic-card svelte-177izw7"><div class="topic-header svelte-177izw7"><h3 class="svelte-177izw7"> </h3> <!></div> <!> <!> <div class="topic-actions svelte-177izw7"><!> <!></div></div>'),Uv=$('<div class="empty-state svelte-177izw7">Henuz konu yok</div>'),Gv=$('<div class="topics-grid svelte-177izw7"></div>'),Vv=$('<div class="form-group svelte-177izw7"><label class="svelte-177izw7">Baslik <input class="input svelte-177izw7" placeholder="Konu basligi"/></label></div> <div class="form-group svelte-177izw7"><label class="svelte-177izw7">Aciklama <textarea class="textarea svelte-177izw7" rows="3" placeholder="Konu aciklamasi..."></textarea></label></div> <div class="form-group svelte-177izw7"><label class="svelte-177izw7">Anahtar Kelimeler <div class="kw-input-row svelte-177izw7"><input class="input svelte-177izw7" placeholder="Kelime ekle..."/> <!> <!></div></label> <div class="kw-tags svelte-177izw7"></div></div> <div class="modal-actions svelte-177izw7"><!> <!></div>',1),Wv=$(`<div class="page-header svelte-177izw7"><div><h1 class="svelte-177izw7">Konular <!></h1> <p class="svelte-177izw7">Bot'un bilgi konulari</p></div> <!></div> <!> <!>`,1);function Qv(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(!1),i=B(me({title:"",description:"",keywords:[],enabled:!0})),v=B(null),d=B("");Ee(()=>c());async function c(){y(s,!0);try{const q=await te.get("admin/agent/topics");y(r,q.topics||q||[],!0)}catch(q){F("Konular yuklenemedi: "+q.message,"error")}finally{y(s,!1)}}function u(){y(v,null),y(i,{title:"",description:"",keywords:[],enabled:!0},!0),y(l,!0)}function _(q){y(v,q.id||q._id,!0),y(i,{title:q.title,description:q.description||"",keywords:[...q.keywords||[]],enabled:q.enabled!==!1},!0),y(l,!0)}async function p(){if(a(i).title.trim())try{a(v)?(await te.put("admin/agent/topics/"+a(v),a(i)),F("Guncellendi","success")):(await te.post("admin/agent/topics",a(i)),F("Olusturuldu","success")),y(l,!1),await c()}catch(q){F("Hata: "+q.message,"error")}}async function k(q){if(await Ba({title:"Konuyu Sil",message:"Bu konu silinecek. Emin misiniz?",confirmText:"Sil",danger:!0}))try{await te.delete("admin/agent/topics/"+q),F("Silindi","success"),await c()}catch(H){F("Hata: "+H.message,"error")}}function m(){const q=a(d).trim();q&&!a(i).keywords.includes(q)&&(a(i).keywords=[...a(i).keywords,q]),y(d,"")}function h(q){a(i).keywords=a(i).keywords.filter(R=>R!==q)}async function x(){if(a(i).title.trim())try{const R=(await te.post("admin/topics/suggest-keywords",{title:a(i).title})).keywords||[],H=[...new Set([...a(i).keywords,...R])];a(i).keywords=H,F(R.length+" keyword onerildi","info")}catch(q){F("Oneri hatasi: "+q.message,"error")}}var g=Wv(),b=ve(g),P=n(b),j=n(P),C=o(n(j));Ke(C,{variant:"blue",children:(q,R)=>{var H=V();G(()=>A(H,a(r).length)),f(q,H)},$$slots:{default:!0}});var z=o(P,2);ne(z,{onclick:u,variant:"primary",size:"sm",children:(q,R)=>{var H=V("+ Yeni Konu");f(q,H)},$$slots:{default:!0}});var E=o(b,2);{var K=q=>{Ae(q,{message:"Yukleniyor..."})},I=q=>{var R=Gv();ke(R,21,()=>a(r),qe,(H,D)=>{var N=Yv(),Y=n(N),L=n(Y),Z=n(L),U=o(L,2);{let Q=oe(()=>a(D).enabled!==!1?"green":"gray");Ke(U,{get variant(){return a(Q)},children:(re,se)=>{var fe=V();G(()=>A(fe,a(D).enabled!==!1?"aktif":"pasif")),f(re,fe)},$$slots:{default:!0}})}var S=o(Y,2);{var M=Q=>{var re=Hv(),se=n(re);G(()=>A(se,a(D).description)),f(Q,re)};le(S,Q=>{a(D).description&&Q(M)})}var W=o(S,2);{var J=Q=>{var re=Fv(),se=n(re);ke(se,17,()=>a(D).keywords.slice(0,5),qe,(de,ae)=>{Hr(de,{children:(be,Se)=>{var je=V();G(()=>A(je,a(ae))),f(be,je)},$$slots:{default:!0}})});var fe=o(se,2);{var ee=de=>{var ae=Lv(),be=n(ae);G(()=>A(be,`+${a(D).keywords.length-5}`)),f(de,ae)};le(fe,de=>{a(D).keywords.length>5&&de(ee)})}f(Q,re)};le(W,Q=>{var re;(re=a(D).keywords)!=null&&re.length&&Q(J)})}var ie=o(W,2),X=n(ie);ne(X,{onclick:()=>_(a(D)),variant:"ghost",size:"sm",children:(Q,re)=>{var se=V("Duzenle");f(Q,se)},$$slots:{default:!0}});var w=o(X,2);ne(w,{onclick:()=>k(a(D).id||a(D)._id),variant:"ghost",size:"sm",children:(Q,re)=>{var se=V("Sil");f(Q,se)},$$slots:{default:!0}}),G(()=>A(Z,a(D).title)),f(H,N)},H=>{var D=Uv();f(H,D)}),f(q,R)};le(E,q=>{a(s)?q(K):q(I,!1)})}var T=o(E,2);{let q=oe(()=>a(v)?"Konu Duzenle":"Yeni Konu");ns(T,{get title(){return a(q)},get open(){return a(l)},set open(R){y(l,R,!0)},children:(R,H)=>{var D=Vv(),N=ve(D),Y=n(N),L=o(n(Y)),Z=o(N,2),U=n(Z),S=o(n(U)),M=o(Z,2),W=n(M),J=o(n(W)),ie=n(J),X=o(ie,2);ne(X,{onclick:m,variant:"secondary",size:"sm",children:(ee,de)=>{var ae=V("Ekle");f(ee,ae)},$$slots:{default:!0}});var w=o(X,2);ne(w,{onclick:x,variant:"ghost",size:"sm",children:(ee,de)=>{var ae=V("AI Oner");f(ee,ae)},$$slots:{default:!0}});var Q=o(W,2);ke(Q,21,()=>a(i).keywords,qe,(ee,de)=>{Hr(ee,{removable:!0,onremove:()=>h(a(de)),children:(ae,be)=>{var Se=V();G(()=>A(Se,a(de))),f(ae,Se)},$$slots:{default:!0}})});var re=o(M,2),se=n(re);ne(se,{onclick:()=>y(l,!1),variant:"secondary",children:(ee,de)=>{var ae=V("Iptal");f(ee,ae)},$$slots:{default:!0}});var fe=o(se,2);ne(fe,{onclick:p,variant:"primary",children:(ee,de)=>{var ae=V("Kaydet");f(ee,ae)},$$slots:{default:!0}}),ue(L,()=>a(i).title,ee=>a(i).title=ee),ue(S,()=>a(i).description,ee=>a(i).description=ee),pe("keydown",ie,ee=>{ee.key==="Enter"&&(ee.preventDefault(),m())}),ue(ie,()=>a(d),ee=>y(d,ee)),f(R,D)},$$slots:{default:!0}})}f(e,g),ye()}Te(["keydown"]);var Zv=$('<span class="expand-icon svelte-1bxmv6d"><!></span>'),Jv=$('<div class="expand-body svelte-1bxmv6d"><!></div>'),Xv=$('<div><div class="expand-header svelte-1bxmv6d"><h3 class="svelte-1bxmv6d"><!> </h3> <svg class="expand-chevron svelte-1bxmv6d" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></div> <!></div>');function Dt(e,t){ge(t,!0);let s=he(t,"title",3,""),r=he(t,"open",15,!1),l=he(t,"icon",3,"");var i=Xv();let v;var d=n(i),c=n(d),u=n(c);{var _=h=>{var x=Zv(),g=n(x);Kl(g,l),f(h,x)};le(u,h=>{l()&&h(_)})}var p=o(u),k=o(d,2);{var m=h=>{var x=Jv(),g=n(x);Ua(g,()=>t.children),f(h,x)};le(k,h=>{r()&&h(m)})}G(()=>{v=Ie(i,1,"expand-card svelte-1bxmv6d",null,v,{open:r()}),A(p,` ${s()??""}`)}),pe("click",d,()=>r(!r())),f(e,i),ye()}Te(["click"]);var ed=$('<span role="switch" tabindex="0"></span>');function Tt(e,t){ge(t,!0);let s=he(t,"checked",15),r=he(t,"disabled",3,!1),l=oe(()=>!!s());function i(){var c;r()||(s(!a(l)),(c=t.onchange)==null||c.call(t,s()))}var v=ed();let d;G(()=>{d=Ie(v,1,"toggle svelte-eylgc7",null,d,{on:a(l),disabled:r()}),pa(v,"aria-checked",a(l))}),pe("click",v,i),pe("keydown",v,c=>{(c.key===" "||c.key==="Enter")&&(c.preventDefault(),i())}),f(e,v),ye()}Te(["click","keydown"]);var td=$('<textarea class="mono-editor svelte-1hhzm9b" rows="12"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),ad=$('<textarea class="mono-editor svelte-1hhzm9b" rows="12"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),sd=$('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),rd=$('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),ld=$('<textarea class="mono-editor svelte-1hhzm9b" rows="8"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),id=$('<textarea class="mono-editor svelte-1hhzm9b" rows="10"></textarea> <div class="card-actions svelte-1hhzm9b"><!></div>',1),nd=$('<div class="flow-grid svelte-1hhzm9b"><div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Karsilama Mesaji <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Mesai Disi Mesaji <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Otomatik Kapanis (dk) <input class="input svelte-1hhzm9b" type="number"/></label></div> <div class="form-row svelte-1hhzm9b"><label class="svelte-1hhzm9b">Karsilama Aktif <!></label></div></div> <div class="card-actions svelte-1hhzm9b"><!></div>',1),od=$('<div class="flow-grid svelte-1hhzm9b"><div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Bot Adi <input class="input svelte-1hhzm9b"/></label></div> <div class="form-group svelte-1hhzm9b"><label class="svelte-1hhzm9b">Sirket Adi <input class="input svelte-1hhzm9b"/></label></div></div>'),vd=$("<!> <!> <!> <!> <!> <!> <!> <!>",1),dd=$('<div class="page-header svelte-1hhzm9b"><div><h1 class="svelte-1hhzm9b">Bot Ayarlari</h1> <p class="svelte-1hhzm9b">Bot davranisi ve yapilandirmasi</p></div> <!></div> <!>',1);function cd(e,t){ge(t,!0);let s=B(!0),r=B(""),l=B(""),i=B(""),v=B(""),d=B(""),c=B(""),u=B(me({})),_=B(me({}));Ee(async()=>{try{const[C,z,E,K,I,T,q,R]=await Promise.all([te.get("admin/agent/files/soul.md").catch(()=>({content:""})),te.get("admin/agent/files/persona.md").catch(()=>({content:""})),te.get("admin/agent/files/domain.md").catch(()=>({content:""})),te.get("admin/agent/files/skills.md").catch(()=>({content:""})),te.get("admin/agent/files/hard-bans.md").catch(()=>({content:""})),te.get("admin/agent/files/escalation-matrix.md").catch(()=>({content:""})),te.get("admin/chat-flow").catch(()=>({})),te.get("admin/site-config").catch(()=>({}))]);y(r,C.content||"",!0),y(l,z.content||"",!0),y(i,E.content||"",!0),y(v,K.content||"",!0),y(d,I.content||"",!0),y(c,T.content||"",!0),y(u,q.config||q||{},!0),y(_,R.config||R||{},!0)}catch(C){F("Bot ayarlari yuklenemedi: "+C.message,"error")}finally{y(s,!1)}});async function p(C,z){try{await te.put("admin/agent/files/"+C,{content:z}),F(C+" kaydedildi","success")}catch(E){F("Hata: "+E.message,"error")}}async function k(){try{await te.put("admin/chat-flow",{config:a(u)}),F("Sohbet akisi kaydedildi","success")}catch(C){F("Hata: "+C.message,"error")}}async function m(){try{await te.post("admin/agent/reload",{}),F("Agent dosyalari yeniden yuklendi","success")}catch(C){F("Hata: "+C.message,"error")}}var h=dd(),x=ve(h),g=o(n(x),2);ne(g,{onclick:m,variant:"secondary",size:"sm",children:(C,z)=>{var E=V("Agent'i Yenile");f(C,E)},$$slots:{default:!0}});var b=o(x,2);{var P=C=>{Ae(C,{message:"Yukleniyor..."})},j=C=>{var z=vd(),E=ve(z);Dt(E,{title:"Kimlik (soul.md)",children:(N,Y)=>{var L=td(),Z=ve(L),U=o(Z,2),S=n(U);ne(S,{onclick:()=>p("soul.md",a(r)),variant:"primary",size:"sm",children:(M,W)=>{var J=V("Kaydet");f(M,J)},$$slots:{default:!0}}),ue(Z,()=>a(r),M=>y(r,M)),f(N,L)},$$slots:{default:!0}});var K=o(E,2);Dt(K,{title:"Persona (persona.md)",children:(N,Y)=>{var L=ad(),Z=ve(L),U=o(Z,2),S=n(U);ne(S,{onclick:()=>p("persona.md",a(l)),variant:"primary",size:"sm",children:(M,W)=>{var J=V("Kaydet");f(M,J)},$$slots:{default:!0}}),ue(Z,()=>a(l),M=>y(l,M)),f(N,L)},$$slots:{default:!0}});var I=o(K,2);Dt(I,{title:"Domain (domain.md)",children:(N,Y)=>{var L=sd(),Z=ve(L),U=o(Z,2),S=n(U);ne(S,{onclick:()=>p("domain.md",a(i)),variant:"primary",size:"sm",children:(M,W)=>{var J=V("Kaydet");f(M,J)},$$slots:{default:!0}}),ue(Z,()=>a(i),M=>y(i,M)),f(N,L)},$$slots:{default:!0}});var T=o(I,2);Dt(T,{title:"Beceriler (skills.md)",children:(N,Y)=>{var L=rd(),Z=ve(L),U=o(Z,2),S=n(U);ne(S,{onclick:()=>p("skills.md",a(v)),variant:"primary",size:"sm",children:(M,W)=>{var J=V("Kaydet");f(M,J)},$$slots:{default:!0}}),ue(Z,()=>a(v),M=>y(v,M)),f(N,L)},$$slots:{default:!0}});var q=o(T,2);Dt(q,{title:"Yasaklar (hard-bans.md)",children:(N,Y)=>{var L=ld(),Z=ve(L),U=o(Z,2),S=n(U);ne(S,{onclick:()=>p("hard-bans.md",a(d)),variant:"primary",size:"sm",children:(M,W)=>{var J=V("Kaydet");f(M,J)},$$slots:{default:!0}}),ue(Z,()=>a(d),M=>y(d,M)),f(N,L)},$$slots:{default:!0}});var R=o(q,2);Dt(R,{title:"Eskalasyon Matrisi",children:(N,Y)=>{var L=id(),Z=ve(L),U=o(Z,2),S=n(U);ne(S,{onclick:()=>p("escalation-matrix.md",a(c)),variant:"primary",size:"sm",children:(M,W)=>{var J=V("Kaydet");f(M,J)},$$slots:{default:!0}}),ue(Z,()=>a(c),M=>y(c,M)),f(N,L)},$$slots:{default:!0}});var H=o(R,2);Dt(H,{title:"Sohbet Akisi",children:(N,Y)=>{var L=nd(),Z=ve(L),U=n(Z),S=n(U),M=o(n(S)),W=o(U,2),J=n(W),ie=o(n(J)),X=o(W,2),w=n(X),Q=o(n(w)),re=o(X,2),se=n(re),fe=o(n(se));Tt(fe,{get checked(){return a(u).greetingEnabled},set checked(ae){a(u).greetingEnabled=ae}});var ee=o(Z,2),de=n(ee);ne(de,{onclick:k,variant:"primary",size:"sm",children:(ae,be)=>{var Se=V("Kaydet");f(ae,Se)},$$slots:{default:!0}}),ue(M,()=>a(u).greetingMessage,ae=>a(u).greetingMessage=ae),ue(ie,()=>a(u).offHoursMessage,ae=>a(u).offHoursMessage=ae),ue(Q,()=>a(u).autoCloseMinutes,ae=>a(u).autoCloseMinutes=ae),f(N,L)},$$slots:{default:!0}});var D=o(H,2);Dt(D,{title:"Genel Ayarlar",children:(N,Y)=>{var L=od(),Z=n(L),U=n(Z),S=o(n(U)),M=o(Z,2),W=n(M),J=o(n(W));ue(S,()=>a(_).botName,ie=>a(_).botName=ie),ue(J,()=>a(_).companyName,ie=>a(_).companyName=ie),f(N,L)},$$slots:{default:!0}}),f(C,z)};le(b,C=>{a(s)?C(P):C(j,!1)})}f(e,h),ye()}var ud=$('<div class="empty-chat svelte-cy08up">Henuz mesaj yok</div>'),fd=$('<div class="chat-thread svelte-cy08up"></div>');function hd(e,t){ge(t,!0);let s=he(t,"messages",19,()=>[]),r;function l(){r&&(r.scrollTop=r.scrollHeight)}Ee(l),ss(()=>{s().length,setTimeout(l,50)});var i=fd();ke(i,21,s,qe,(v,d)=>{{let c=oe(()=>a(d).sender||a(d).role),u=oe(()=>a(d).text||a(d).content||a(d).message),_=oe(()=>a(d).timestamp||"");hs(v,{get sender(){return a(c)},get message(){return a(u)},get timestamp(){return a(_)}})}},v=>{var d=ud();f(v,d)}),gr(i,v=>r=v,()=>r),f(e,i),ye()}var pd=$('<div class="test-card svelte-3882be"><div class="test-header svelte-3882be"><span class="test-label svelte-3882be"> </span> <div class="test-actions svelte-3882be"><!> <!></div></div> <!> <!></div>'),_d=$('<div class="page-header svelte-3882be"><div><h1 class="svelte-3882be">Bot Test</h1> <p class="svelte-3882be">Canli bot testi â multi-session</p></div> <!></div> <div></div>',1);function md(e){let t=B(me([{id:1,messages:[],sessionId:crypto.randomUUID()}])),s=2;function r(){a(t).length>=4||y(t,[...a(t),{id:s++,messages:[],sessionId:crypto.randomUUID()}],!0)}function l(k){y(t,a(t).filter(m=>m.id!==k),!0)}async function i(k,m){k.messages=[...k.messages,{role:"user",content:m,sender:"user"}];try{const x=await(await fetch("api/chat",{method:"POST",headers:{"Content-Type":"application/json","Bypass-Tunnel-Reminder":"true"},body:JSON.stringify({message:m,sessionId:k.sessionId})})).json();k.messages=[...k.messages,{role:"assistant",content:x.reply||x.message||"...",sender:"bot"}]}catch{k.messages=[...k.messages,{role:"assistant",content:"Hata olustu",sender:"system"}]}}function v(k){k.messages=[],k.sessionId=crypto.randomUUID()}var d=_d(),c=ve(d),u=o(n(c),2);{let k=oe(()=>a(t).length>=4);ne(u,{onclick:r,variant:"primary",size:"sm",get disabled(){return a(k)},children:(m,h)=>{var x=V("+ Oturum Ekle");f(m,x)},$$slots:{default:!0}})}var _=o(c,2);let p;ke(_,21,()=>a(t),k=>k.id,(k,m)=>{var h=pd(),x=n(h),g=n(x),b=n(g),P=o(g,2),j=n(P);ne(j,{onclick:()=>v(a(m)),variant:"ghost",size:"sm",children:(I,T)=>{var q=V("Temizle");f(I,q)},$$slots:{default:!0}});var C=o(j,2);{var z=I=>{ne(I,{onclick:()=>l(a(m).id),variant:"ghost",size:"sm",children:(T,q)=>{var R=V("Kapat");f(T,R)},$$slots:{default:!0}})};le(C,I=>{a(t).length>1&&I(z)})}var E=o(x,2);hd(E,{get messages(){return a(m).messages}});var K=o(E,2);Gl(K,{onsend:I=>i(a(m),I)}),G(()=>A(b,`Oturum #${a(m).id??""}`)),f(k,h)}),G(()=>p=Ie(_,1,"test-grid svelte-3882be",null,p,{single:a(t).length===1,double:a(t).length===2})),f(e,d)}var gd=$('<div class="flow-sections svelte-16lqas5"><div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Karsilama</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Aktif <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Mesaji <textarea class="textarea svelte-16lqas5" rows="3"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Karsilama Gecikmesi (ms) <input class="input svelte-16lqas5" type="number"/></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Zamanlama</h2> <div class="form-grid svelte-16lqas5"><div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Mesai Disi Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Otomatik Kapanis (dk) <input class="input svelte-16lqas5" type="number"/></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Inaktiflik Uyarisi (dk) <input class="input svelte-16lqas5" type="number"/></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Algilama</h2> <div class="form-grid svelte-16lqas5"><div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Konu Algilama Aktif <!></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">Duygu Analizi <!></label></div> <div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Maks Klarifikasyon <input class="input svelte-16lqas5" type="number"/></label></div></div></div> <div class="card svelte-16lqas5"><h2 class="svelte-16lqas5">Kapanis</h2> <div class="form-grid svelte-16lqas5"><div class="form-group svelte-16lqas5"><label class="svelte-16lqas5">Kapanis Mesaji <textarea class="textarea svelte-16lqas5" rows="2"></textarea></label></div> <div class="form-row svelte-16lqas5"><label class="svelte-16lqas5">CSAT Anketi <!></label></div></div></div></div>'),yd=$('<div class="page-header svelte-16lqas5"><div><h1 class="svelte-16lqas5">Sohbet Akisi</h1> <p class="svelte-16lqas5">Karsilama, zamanlama, algilama, kapanis ayarlari</p></div> <!></div> <!>',1);function wd(e,t){ge(t,!0);let s=B(!0),r=B(me({}));Ee(async()=>{try{const p=await te.get("admin/chat-flow");y(r,p.config||p||{},!0)}catch(p){F("Sohbet akisi yuklenemedi: "+p.message,"error")}finally{y(s,!1)}});async function l(){try{await te.put("admin/chat-flow",{config:a(r)}),F("Kaydedildi","success")}catch(p){F("Hata: "+p.message,"error")}}var i=yd(),v=ve(i),d=o(n(v),2);ne(d,{onclick:l,variant:"primary",size:"sm",children:(p,k)=>{var m=V("Kaydet");f(p,m)},$$slots:{default:!0}});var c=o(v,2);{var u=p=>{Ae(p,{message:"Yukleniyor..."})},_=p=>{var k=gd(),m=n(k),h=o(n(m),2),x=n(h),g=n(x),b=o(n(g));Tt(b,{get checked(){return a(r).greetingEnabled},set checked(ce){a(r).greetingEnabled=ce}});var P=o(x,2),j=n(P),C=o(n(j)),z=o(P,2),E=n(z),K=o(n(E)),I=o(m,2),T=o(n(I),2),q=n(T),R=n(q),H=o(n(R)),D=o(q,2),N=n(D),Y=o(n(N)),L=o(D,2),Z=n(L),U=o(n(Z)),S=o(I,2),M=o(n(S),2),W=n(M),J=n(W),ie=o(n(J));Tt(ie,{get checked(){return a(r).topicDetectionEnabled},set checked(ce){a(r).topicDetectionEnabled=ce}});var X=o(W,2),w=n(X),Q=o(n(w));Tt(Q,{get checked(){return a(r).sentimentEnabled},set checked(ce){a(r).sentimentEnabled=ce}});var re=o(X,2),se=n(re),fe=o(n(se)),ee=o(S,2),de=o(n(ee),2),ae=n(de),be=n(ae),Se=o(n(be)),je=o(ae,2),Pe=n(je),Fe=o(n(Pe));Tt(Fe,{get checked(){return a(r).csatEnabled},set checked(ce){a(r).csatEnabled=ce}}),ue(C,()=>a(r).greetingMessage,ce=>a(r).greetingMessage=ce),ue(K,()=>a(r).greetingDelay,ce=>a(r).greetingDelay=ce),ue(H,()=>a(r).offHoursMessage,ce=>a(r).offHoursMessage=ce),ue(Y,()=>a(r).autoCloseMinutes,ce=>a(r).autoCloseMinutes=ce),ue(U,()=>a(r).inactivityWarningMinutes,ce=>a(r).inactivityWarningMinutes=ce),ue(fe,()=>a(r).maxClarifications,ce=>a(r).maxClarifications=ce),ue(Se,()=>a(r).closingMessage,ce=>a(r).closingMessage=ce),f(p,k)};le(c,p=>{a(s)?p(u):p(_,!1)})}f(e,i),ye()}var bd=$('<label class="color-label svelte-2a5p8g"> <div class="color-row svelte-2a5p8g"><input type="color" class="color-input svelte-2a5p8g"/> <input type="text" class="color-text svelte-2a5p8g" maxlength="7"/></div></label>'),kd=$('<div class="color-row svelte-2a5p8g"><input type="color" class="color-input svelte-2a5p8g"/> <input type="text" class="color-text svelte-2a5p8g" maxlength="7"/></div>'),xd=$('<div class="color-picker svelte-2a5p8g"><!></div>');function Lr(e,t){ge(t,!0);let s=he(t,"value",15,"#2563eb"),r=he(t,"label",3,"");var l=xd(),i=n(l);{var v=c=>{var u=bd(),_=n(u),p=o(_),k=n(p),m=o(k,2);G(()=>A(_,`${r()??""} `)),ue(k,s),ue(m,s),f(c,u)},d=c=>{var u=kd(),_=n(u),p=o(_,2);ue(_,s),ue(p,s),f(c,u)};le(i,c=>{r()?c(v):c(d,!1)})}f(e,l),ye()}var $d=$('<div class="settings-grid svelte-m0wld2"><div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Widget Ayarlari</h2> <div class="form-grid svelte-m0wld2"><div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Bot Adi</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Karsilama Mesaji</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Placeholder</span><input class="input svelte-m0wld2"/></div> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Pozisyon</span> <select class="select svelte-m0wld2"><option>Sag</option><option>Sol</option></select></div> <div class="form-row svelte-m0wld2"><span class="label svelte-m0wld2">Widget Aktif</span><!></div> <div class="form-row svelte-m0wld2"><span class="label svelte-m0wld2">Ses Efekti</span><!></div></div></div> <div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Gorunum</h2> <div class="form-grid svelte-m0wld2"><!> <!> <div class="form-group svelte-m0wld2"><span class="label svelte-m0wld2">Border Radius</span><input class="input svelte-m0wld2" type="number"/></div></div></div> <div class="card svelte-m0wld2"><h2 class="svelte-m0wld2">Logo</h2> <div class="logo-upload svelte-m0wld2"><input type="file" accept="image/*"/> <!></div></div></div>'),qd=$('<div class="page-header svelte-m0wld2"><div><h1 class="svelte-m0wld2">Site Ayarlari</h1><p class="svelte-m0wld2">Widget gorunumu ve yapilandirmasi</p></div> <!></div> <!>',1);function zd(e,t){ge(t,!0);let s=B(!0),r=B(me({})),l=B(null);Ee(async()=>{try{const m=await te.get("admin/site-config");y(r,m.config||m||{},!0)}catch(m){F("Site ayarlari yuklenemedi: "+m.message,"error")}finally{y(s,!1)}});async function i(){try{await te.put("admin/site-config",{config:a(r)}),F("Kaydedildi","success")}catch(m){F("Hata: "+m.message,"error")}}async function v(){if(a(l))try{await te.upload("admin/site-logo",a(l)),F("Logo yuklendi","success")}catch(m){F("Hata: "+m.message,"error")}}var d=qd(),c=ve(d),u=o(n(c),2);ne(u,{onclick:i,variant:"primary",size:"sm",children:(m,h)=>{var x=V("Kaydet");f(m,x)},$$slots:{default:!0}});var _=o(c,2);{var p=m=>{Ae(m,{message:"Yukleniyor..."})},k=m=>{var h=$d(),x=n(h),g=o(n(x),2),b=n(g),P=o(n(b)),j=o(b,2),C=o(n(j)),z=o(j,2),E=o(n(z)),K=o(z,2),I=o(n(K),2),T=n(I);T.value=T.__value="right";var q=o(T);q.value=q.__value="left";var R=o(K,2),H=o(n(R));Tt(H,{get checked(){return a(r).enabled},set checked(w){a(r).enabled=w}});var D=o(R,2),N=o(n(D));Tt(N,{get checked(){return a(r).soundEnabled},set checked(w){a(r).soundEnabled=w}});var Y=o(x,2),L=o(n(Y),2),Z=n(L);Lr(Z,{label:"Ana Renk",get value(){return a(r).primaryColor},set value(w){a(r).primaryColor=w}});var U=o(Z,2);Lr(U,{label:"Metin Rengi",get value(){return a(r).textColor},set value(w){a(r).textColor=w}});var S=o(U,2),M=o(n(S)),W=o(Y,2),J=o(n(W),2),ie=n(J),X=o(ie,2);{let w=oe(()=>!a(l));ne(X,{onclick:v,variant:"secondary",size:"sm",get disabled(){return a(w)},children:(Q,re)=>{var se=V("Yukle");f(Q,se)},$$slots:{default:!0}})}ue(P,()=>a(r).botName,w=>a(r).botName=w),ue(C,()=>a(r).welcomeMessage,w=>a(r).welcomeMessage=w),ue(E,()=>a(r).inputPlaceholder,w=>a(r).inputPlaceholder=w),es(I,()=>a(r).position,w=>a(r).position=w),ue(M,()=>a(r).borderRadius,w=>a(r).borderRadius=w),pe("change",ie,w=>{y(l,w.target.files[0],!0)}),f(m,h)};le(_,m=>{a(s)?m(p):m(k,!1)})}f(e,d),ye()}Te(["change"]);var Sd=$('<div class="card svelte-13nqmxo"><div class="form-grid svelte-13nqmxo"><div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">App ID</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Key ID</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Secret</span><input class="input svelte-13nqmxo" type="password"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Subdomain</span><input class="input svelte-13nqmxo"/></div> <div class="form-group svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Webhook URL</span><input class="input svelte-13nqmxo" readonly=""/></div> <div class="form-row svelte-13nqmxo"><span class="lbl svelte-13nqmxo">Aktif</span><!></div></div></div>'),Ed=$('<div class="page-header svelte-13nqmxo"><div><h1 class="svelte-13nqmxo">Zendesk</h1><p class="svelte-13nqmxo">Zendesk Sunshine entegrasyonu</p></div> <div class="actions svelte-13nqmxo"><!> <!></div></div> <!>',1);function Td(e,t){ge(t,!0);let s=B(!0),r=B(me({})),l=B(!1);Ee(async()=>{try{const x=await te.get("admin/sunshine-config");y(r,x.config||x||{},!0)}catch(x){F("Zendesk config yuklenemedi: "+x.message,"error")}finally{y(s,!1)}});async function i(){try{await te.put("admin/sunshine-config",{config:a(r)}),F("Kaydedildi","success")}catch(x){F("Hata: "+x.message,"error")}}async function v(){y(l,!0);try{await te.post("admin/sunshine-config/test",{}),F("Baglanti basarili","success")}catch(x){F("Test basarisiz: "+x.message,"error")}finally{y(l,!1)}}var d=Ed(),c=ve(d),u=o(n(c),2),_=n(u);ne(_,{onclick:v,variant:"secondary",size:"sm",get disabled(){return a(l)},children:(x,g)=>{var b=V();G(()=>A(b,a(l)?"Test ediliyor...":"Baglanti Test")),f(x,b)},$$slots:{default:!0}});var p=o(_,2);ne(p,{onclick:i,variant:"primary",size:"sm",children:(x,g)=>{var b=V("Kaydet");f(x,b)},$$slots:{default:!0}});var k=o(c,2);{var m=x=>{Ae(x,{message:"Yukleniyor..."})},h=x=>{var g=Sd(),b=n(g),P=n(b),j=o(n(P)),C=o(P,2),z=o(n(C)),E=o(C,2),K=o(n(E)),I=o(E,2),T=o(n(I)),q=o(I,2),R=o(n(q)),H=o(q,2),D=o(n(H));Tt(D,{get checked(){return a(r).enabled},set checked(N){a(r).enabled=N}}),ue(j,()=>a(r).appId,N=>a(r).appId=N),ue(z,()=>a(r).keyId,N=>a(r).keyId=N),ue(K,()=>a(r).secret,N=>a(r).secret=N),ue(T,()=>a(r).subdomain,N=>a(r).subdomain=N),ue(R,()=>a(r).webhookUrl,N=>a(r).webhookUrl=N),f(x,g)};le(k,x=>{a(s)?x(m):x(h,!1)})}f(e,d),ye()}var Ad=$('<div class="card svelte-1i3ct0m"><div class="form-grid svelte-1i3ct0m"><div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">API Token</span><input class="input svelte-1i3ct0m" type="password"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Telefon ID</span><input class="input svelte-1i3ct0m"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Verify Token</span><input class="input svelte-1i3ct0m"/></div> <div class="form-group svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Business Account ID</span><input class="input svelte-1i3ct0m"/></div> <div class="form-row svelte-1i3ct0m"><span class="lbl svelte-1i3ct0m">Aktif</span><!></div></div></div>'),Pd=$('<div class="page-header svelte-1i3ct0m"><div><h1 class="svelte-1i3ct0m">WhatsApp</h1><p class="svelte-1i3ct0m">WhatsApp Business entegrasyonu</p></div> <!></div> <!>',1);function Cd(e,t){ge(t,!0);let s=B(!0),r=B(me({}));Ee(async()=>{try{const p=await te.get("admin/whatsapp");y(r,p.config||p||{},!0)}catch(p){F("WhatsApp config yuklenemedi: "+p.message,"error")}finally{y(s,!1)}});async function l(){try{await te.put("admin/whatsapp",a(r)),F("Kaydedildi","success")}catch(p){F("Hata: "+p.message,"error")}}var i=Pd(),v=ve(i),d=o(n(v),2);ne(d,{onclick:l,variant:"primary",size:"sm",children:(p,k)=>{var m=V("Kaydet");f(p,m)},$$slots:{default:!0}});var c=o(v,2);{var u=p=>{Ae(p,{message:"Yukleniyor..."})},_=p=>{var k=Ad(),m=n(k),h=n(m),x=o(n(h)),g=o(h,2),b=o(n(g)),P=o(g,2),j=o(n(P)),C=o(P,2),z=o(n(C)),E=o(C,2),K=o(n(E));Tt(K,{get checked(){return a(r).enabled},set checked(I){a(r).enabled=I}}),ue(x,()=>a(r).apiToken,I=>a(r).apiToken=I),ue(b,()=>a(r).phoneNumberId,I=>a(r).phoneNumberId=I),ue(j,()=>a(r).verifyToken,I=>a(r).verifyToken=I),ue(z,()=>a(r).businessAccountId,I=>a(r).businessAccountId=I),f(p,k)};le(c,p=>{a(s)?p(u):p(_,!1)})}f(e,i),ye()}var jd=$('<tr><td class="mono svelte-13cdipi"> </td><td class="svelte-13cdipi"> </td><td class="svelte-13cdipi"><!></td><td class="actions svelte-13cdipi"><!> <!> <!></td></tr>'),Md=$('<tr><td colspan="4" class="empty-row svelte-13cdipi">Webhook yok</td></tr>'),Id=$('<div class="card svelte-13cdipi"><table class="svelte-13cdipi"><thead><tr><th class="svelte-13cdipi">URL</th><th class="svelte-13cdipi">Eventler</th><th class="svelte-13cdipi">Durum</th><th class="svelte-13cdipi"></th></tr></thead><tbody></tbody></table></div>'),Od=$('<label class="check-item svelte-13cdipi"><input type="checkbox"/> </label>'),Dd=$('<div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">URL</span><input class="input svelte-13cdipi" placeholder="https://..."/></div> <div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">Secret</span><input class="input svelte-13cdipi" placeholder="Opsiyonel"/></div> <div class="form-group svelte-13cdipi"><span class="lbl svelte-13cdipi">Eventler</span> <div class="event-checks svelte-13cdipi"></div></div> <div class="modal-actions svelte-13cdipi"><!> <!></div>',1),Kd=$('<div class="page-header svelte-13cdipi"><div><h1 class="svelte-13cdipi">Webhooks</h1><p class="svelte-13cdipi"> </p></div> <!></div> <!> <!>',1);function Bd(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(!1),i=B(me({url:"",events:[],secret:""})),v=B(null);const d=["ticket.created","ticket.updated","ticket.closed","conversation.started","conversation.closed","escalation.requested"];Ee(()=>c());async function c(){y(s,!0);try{const T=await te.get("admin/webhooks");y(r,T.webhooks||T||[],!0)}catch(T){F("Webhooks yuklenemedi: "+T.message,"error")}finally{y(s,!1)}}function u(){y(v,null),y(i,{url:"",events:[],secret:""},!0),y(l,!0)}function _(T){y(v,T.id||T._id,!0),y(i,{url:T.url,events:[...T.events||[]],secret:T.secret||""},!0),y(l,!0)}async function p(){if(a(i).url.trim())try{a(v)?await te.put("admin/webhooks/"+a(v),a(i)):await te.post("admin/webhooks",a(i)),F("Kaydedildi","success"),y(l,!1),await c()}catch(T){F("Hata: "+T.message,"error")}}async function k(T){if(await Ba({title:"Sil",message:"Bu webhook silinecek.",confirmText:"Sil",danger:!0}))try{await te.delete("admin/webhooks/"+T),F("Silindi","success"),await c()}catch(R){F("Hata: "+R.message,"error")}}async function m(T){try{await te.post("admin/webhooks/"+T+"/test",{}),F("Test gonderildi","success")}catch(q){F("Test hatasi: "+q.message,"error")}}function h(T){a(i).events.includes(T)?a(i).events=a(i).events.filter(q=>q!==T):a(i).events=[...a(i).events,T]}var x=Kd(),g=ve(x),b=n(g),P=o(n(b)),j=n(P),C=o(b,2);ne(C,{onclick:u,variant:"primary",size:"sm",children:(T,q)=>{var R=V("+ Yeni Webhook");f(T,R)},$$slots:{default:!0}});var z=o(g,2);{var E=T=>{Ae(T,{message:"Yukleniyor..."})},K=T=>{var q=Id(),R=n(q),H=o(n(R));ke(H,21,()=>a(r),qe,(D,N)=>{var Y=jd(),L=n(Y),Z=n(L),U=o(L),S=n(U),M=o(U),W=n(M);{let Q=oe(()=>a(N).active!==!1?"green":"gray");Ke(W,{get variant(){return a(Q)},children:(re,se)=>{var fe=V();G(()=>A(fe,a(N).active!==!1?"aktif":"pasif")),f(re,fe)},$$slots:{default:!0}})}var J=o(M),ie=n(J);ne(ie,{onclick:()=>m(a(N).id||a(N)._id),variant:"ghost",size:"sm",children:(Q,re)=>{var se=V("Test");f(Q,se)},$$slots:{default:!0}});var X=o(ie,2);ne(X,{onclick:()=>_(a(N)),variant:"ghost",size:"sm",children:(Q,re)=>{var se=V("Duzenle");f(Q,se)},$$slots:{default:!0}});var w=o(X,2);ne(w,{onclick:()=>k(a(N).id||a(N)._id),variant:"ghost",size:"sm",children:(Q,re)=>{var se=V("Sil");f(Q,se)},$$slots:{default:!0}}),G(Q=>{A(Z,a(N).url),A(S,Q)},[()=>(a(N).events||[]).join(", ")]),f(D,Y)},D=>{var N=Md();f(D,N)}),f(T,q)};le(z,T=>{a(s)?T(E):T(K,!1)})}var I=o(z,2);{let T=oe(()=>a(v)?"Webhook Duzenle":"Yeni Webhook");ns(I,{get title(){return a(T)},get open(){return a(l)},set open(q){y(l,q,!0)},children:(q,R)=>{var H=Dd(),D=ve(H),N=o(n(D)),Y=o(D,2),L=o(n(Y)),Z=o(Y,2),U=o(n(Z),2);ke(U,21,()=>d,qe,(J,ie)=>{var X=Od(),w=n(X),Q=o(w);G(re=>{Yn(w,re),A(Q,` ${a(ie)??""}`)},[()=>a(i).events.includes(a(ie))]),pe("change",w,()=>h(a(ie))),f(J,X)});var S=o(Z,2),M=n(S);ne(M,{onclick:()=>y(l,!1),variant:"secondary",children:(J,ie)=>{var X=V("Iptal");f(J,X)},$$slots:{default:!0}});var W=o(M,2);ne(W,{onclick:p,variant:"primary",children:(J,ie)=>{var X=V("Kaydet");f(J,X)},$$slots:{default:!0}}),ue(N,()=>a(i).url,J=>a(i).url=J),ue(L,()=>a(i).secret,J=>a(i).secret=J),f(q,H)},$$slots:{default:!0}})}G(()=>A(j,`${a(r).length??""} webhook`)),f(e,x),ye()}Te(["change"]);var Nd=$('<input class="input svelte-gwq0tz" type="password"/>'),Rd=$('<input class="input svelte-gwq0tz"/>'),Hd=$('<tr><td class="mono key-col svelte-gwq0tz"> </td><td class="svelte-gwq0tz"><!></td></tr>'),Ld=$('<tr><td colspan="2" class="empty-row svelte-gwq0tz">Degisken yok</td></tr>'),Fd=$('<div class="card svelte-gwq0tz"><table class="svelte-gwq0tz"><thead><tr><th class="svelte-gwq0tz">Anahtar</th><th class="svelte-gwq0tz">Deger</th></tr></thead><tbody></tbody></table></div>'),Yd=$('<div class="page-header svelte-gwq0tz"><div><h1 class="svelte-gwq0tz">Ortam Degiskenleri</h1><p class="svelte-gwq0tz">Sunucu .env degerleri</p></div> <!></div> <!>',1);function Ud(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(me({}));const i=["ADMIN_TOKEN","GOOGLE_API_KEY","ANTHROPIC_API_KEY","OPENAI_API_KEY","GROQ_API_KEY"];Ee(async()=>{try{const h=await te.get("admin/env"),x=h.env||h.config||h||{};y(r,Object.entries(x).map(([g,b])=>({key:g,value:String(b),masked:i.includes(g)})),!0)}catch(h){F("Ortam degiskenleri yuklenemedi: "+h.message,"error")}finally{y(s,!1)}});function v(h,x){a(l)[h]=x}async function d(){if(Object.keys(a(l)).length)try{await te.put("admin/env",{updates:a(l)}),F("Kaydedildi â yeniden baslama gerekebilir","success"),y(l,{},!0)}catch(h){F("Hata: "+h.message,"error")}}var c=Yd(),u=ve(c),_=o(n(u),2);{let h=oe(()=>!Object.keys(a(l)).length);ne(_,{onclick:d,variant:"primary",size:"sm",get disabled(){return a(h)},children:(x,g)=>{var b=V("Kaydet");f(x,b)},$$slots:{default:!0}})}var p=o(u,2);{var k=h=>{Ae(h,{message:"Yukleniyor..."})},m=h=>{var x=Fd(),g=n(x),b=o(n(g));ke(b,21,()=>a(r),qe,(P,j)=>{var C=Hd(),z=n(C),E=n(z),K=o(z),I=n(K);{var T=R=>{var H=Nd();G(()=>ar(H,a(j).value)),pe("input",H,D=>v(a(j).key,D.target.value)),f(R,H)},q=R=>{var H=Rd();G(()=>ar(H,a(j).value)),pe("input",H,D=>v(a(j).key,D.target.value)),f(R,H)};le(I,R=>{a(j).masked?R(T):R(q,!1)})}G(()=>A(E,a(j).key)),f(P,C)},P=>{var j=Ld();f(P,j)}),f(h,x)};le(p,h=>{a(s)?h(k):h(m,!1)})}f(e,c),ye()}Te(["input"]);var Gd=$('<div><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg> <span> </span></div>'),Vd=$('<div class="empty-list svelte-sdohvc">Dosya yok</div>'),Wd=$('<div class="editor-header svelte-sdohvc"><span class="mono svelte-sdohvc"> </span></div> <textarea class="mono-editor svelte-sdohvc" spellcheck="false"></textarea>',1),Qd=$('<div class="no-file svelte-sdohvc">Bir dosya secin</div>'),Zd=$('<div class="split-layout svelte-sdohvc"><div class="file-list svelte-sdohvc"></div> <div class="editor-panel svelte-sdohvc"><!></div></div>'),Jd=$('<div class="page-header svelte-sdohvc"><div><h1 class="svelte-sdohvc">Agent Dosyalari</h1><p class="svelte-sdohvc">Bot yapilndirma dosyalari</p></div> <div class="actions svelte-sdohvc"><!> <!></div></div> <!>',1);function Xd(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=B(""),v=B(!1);Ee(async()=>{try{const P=await te.get("admin/agent/files");y(r,P.files||P||[],!0)}catch(P){F("Agent dosyalari yuklenemedi: "+P.message,"error")}finally{y(s,!1)}});async function d(P){y(l,P,!0);try{const j=await te.get("admin/agent/files/"+encodeURIComponent(P));y(i,j.content||"",!0)}catch(j){F("Dosya okunamadi: "+j.message,"error"),y(i,"")}}async function c(){if(a(l)){y(v,!0);try{await te.put("admin/agent/files/"+encodeURIComponent(a(l)),{content:a(i)}),F(a(l)+" kaydedildi","success")}catch(P){F("Hata: "+P.message,"error")}finally{y(v,!1)}}}async function u(){try{await te.post("admin/agent/reload",{}),F("Agent dosyalari yeniden yuklendi","success")}catch(P){F("Hata: "+P.message,"error")}}var _=Jd(),p=ve(_),k=o(n(p),2),m=n(k);ne(m,{onclick:u,variant:"secondary",size:"sm",children:(P,j)=>{var C=V("Agent'i Yenile");f(P,C)},$$slots:{default:!0}});var h=o(m,2);{let P=oe(()=>!a(l)||a(v));ne(h,{onclick:c,variant:"primary",size:"sm",get disabled(){return a(P)},children:(j,C)=>{var z=V();G(()=>A(z,a(v)?"Kaydediliyor...":"Kaydet")),f(j,z)},$$slots:{default:!0}})}var x=o(p,2);{var g=P=>{Ae(P,{message:"Yukleniyor..."})},b=P=>{var j=Zd(),C=n(j);ke(C,21,()=>a(r),qe,(T,q)=>{var R=Gd();let H;var D=o(n(R),2),N=n(D);G(()=>{H=Ie(R,1,"file-item svelte-sdohvc",null,H,{active:a(l)===(a(q).name||a(q))}),A(N,a(q).name||a(q))}),pe("click",R,()=>d(a(q).name||a(q))),f(T,R)},T=>{var q=Vd();f(T,q)});var z=o(C,2),E=n(z);{var K=T=>{var q=Wd(),R=ve(q),H=n(R),D=n(H),N=o(R,2);G(()=>A(D,a(l))),ue(N,()=>a(i),Y=>y(i,Y)),f(T,q)},I=T=>{var q=Qd();f(T,q)};le(E,T=>{a(l)?T(K):T(I,!1)})}f(P,j)};le(x,P=>{a(s)?P(g):P(b,!1)})}f(e,_),ye()}Te(["click"]);var ec=$("<div> </div>"),tc=$('<div class="empty-list svelte-1tzwowi">Dosya yok</div>'),ac=$('<textarea class="mono-editor svelte-1tzwowi" spellcheck="false"></textarea>'),sc=$('<div class="no-file svelte-1tzwowi">Bir sablon secin</div>'),rc=$('<div class="split-layout svelte-1tzwowi"><div class="file-list svelte-1tzwowi"></div> <div class="editor-panel svelte-1tzwowi"><!></div></div>'),lc=$('<div class="page-header svelte-1tzwowi"><div><h1 class="svelte-1tzwowi">Bellek Sablonlari</h1><p class="svelte-1tzwowi">Hafiza dosya sablonlari</p></div> <!></div> <!>',1);function ic(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null),i=B("");Ee(async()=>{try{const h=await te.get("admin/agent/memory");y(r,h.files||h||[],!0)}catch(h){F("Bellek sablonlari yuklenemedi: "+h.message,"error")}finally{y(s,!1)}});async function v(h){y(l,h,!0);try{const x=await te.get("admin/agent/memory/"+encodeURIComponent(h));y(i,typeof x.content=="string"?x.content:JSON.stringify(x.content||x,null,2),!0)}catch(x){F("Dosya okunamadi: "+x.message,"error"),y(i,"")}}async function d(){if(a(l))try{await te.put("admin/agent/memory/"+encodeURIComponent(a(l)),{content:a(i)}),F(a(l)+" kaydedildi","success")}catch(h){F("Hata: "+h.message,"error")}}var c=lc(),u=ve(c),_=o(n(u),2);{let h=oe(()=>!a(l));ne(_,{onclick:d,variant:"primary",size:"sm",get disabled(){return a(h)},children:(x,g)=>{var b=V("Kaydet");f(x,b)},$$slots:{default:!0}})}var p=o(u,2);{var k=h=>{Ae(h,{message:"Yukleniyor..."})},m=h=>{var x=rc(),g=n(x);ke(g,21,()=>a(r),qe,(z,E)=>{var K=ec();let I;var T=n(K);G(()=>{I=Ie(K,1,"file-item svelte-1tzwowi",null,I,{active:a(l)===(a(E).name||a(E))}),A(T,a(E).name||a(E))}),pe("click",K,()=>v(a(E).name||a(E))),f(z,K)},z=>{var E=tc();f(z,E)});var b=o(g,2),P=n(b);{var j=z=>{var E=ac();ue(E,()=>a(i),K=>y(i,K)),f(z,E)},C=z=>{var E=sc();f(z,E)};le(P,z=>{a(l)?z(j):z(C,!1)})}f(h,x)};le(p,h=>{a(s)?h(k):h(m,!1)})}f(e,c),ye()}Te(["click"]);var nc=$('<button role="tab"> </button>'),oc=$('<div class="tabs svelte-stk7vv" role="tablist"></div>');function vc(e,t){ge(t,!0);let s=he(t,"tabs",19,()=>[]),r=he(t,"active",15,"");function l(v){var d;r(v),(d=t.onchange)==null||d.call(t,v)}var i=oc();ke(i,21,s,qe,(v,d)=>{var c=nc();let u;var _=n(c);G(()=>{u=Ie(c,1,"tab svelte-stk7vv",null,u,{active:r()===a(d).id}),pa(c,"aria-selected",r()===a(d).id),A(_,a(d).label)}),pe("click",c,()=>l(a(d).id)),f(v,c)}),f(e,i),ye()}Te(["click"]);var dc=$('<div class="card svelte-j1tc6l"><h2 class="svelte-j1tc6l">Populer Konular</h2> <!></div>'),cc=$('<div class="kpi-grid svelte-j1tc6l"><!> <!> <!> <!></div> <!>',1),uc=$('<div class="page-header svelte-j1tc6l"><div><h1 class="svelte-j1tc6l">Analytics</h1><p class="svelte-j1tc6l">Performans analizi</p></div> <!></div> <!> <!>',1);function fc(e,t){ge(t,!0);let s=B(!0),r=B("7"),l=B(null);const i=[{id:"7",label:"7 Gun"},{id:"30",label:"30 Gun"},{id:"90",label:"90 Gun"}];Ee(()=>v());async function v(){y(s,!0);try{y(l,await te.get("admin/analytics?range="+a(r)),!0)}catch(b){F("Analytics yuklenemedi: "+b.message,"error")}finally{y(s,!1)}}function d(b){y(r,b,!0),v()}function c(){window.open("api/admin/analytics/export?range="+a(r)+"&token="+encodeURIComponent(ua()),"_blank")}let u=oe(()=>{var b,P;return(((b=a(l))==null?void 0:b.topTopics)||((P=a(l))==null?void 0:P.topics)||[]).slice(0,10).map(j=>({label:j.topicId||j.topic||j.name||"?",value:j.count||j.total||0}))});var _=uc(),p=ve(_),k=o(n(p),2);ne(k,{onclick:c,variant:"ghost",size:"sm",children:(b,P)=>{var j=V("Export");f(b,j)},$$slots:{default:!0}});var m=o(p,2);vc(m,{get tabs(){return i},onchange:d,get active(){return a(r)},set active(b){y(r,b,!0)}});var h=o(m,2);{var x=b=>{Ae(b,{message:"Yukleniyor..."})},g=b=>{var P=cc(),j=ve(P),C=n(j);{let q=oe(()=>a(l).totalChats??a(l).chats??0);nt(C,{label:"Toplam Sohbet",get value(){return a(q)}})}var z=o(C,2);{let q=oe(()=>a(l).totalEscalations??a(l).escalations??0);nt(z,{label:"Eskalasyon",get value(){return a(q)}})}var E=o(z,2);{let q=oe(()=>(a(l).avgCsat??a(l).csatAvg??0).toFixed(1)+"/5");nt(E,{label:"Ort. CSAT",get value(){return a(q)}})}var K=o(E,2);{let q=oe(()=>"%"+(a(l).resolutionRate??0));nt(K,{label:"Cozum Orani",get value(){return a(q)}})}var I=o(j,2);{var T=q=>{var R=dc(),H=o(n(R),2);Yl(H,{get items(){return a(u)}}),f(q,R)};le(I,q=>{a(u).length&&q(T)})}f(b,P)};le(h,b=>{a(s)?b(x):a(l)&&b(g,1)})}f(e,_),ye()}var hc=$('<div class="progress svelte-1untuf7"><div class="progress-bar svelte-1untuf7"></div></div>');function pc(e,t){let s=he(t,"value",3,0),r=he(t,"max",3,100),l=he(t,"color",3,"var(--accent)"),i=he(t,"height",3,"6px"),v=oe(()=>Math.min(100,Math.max(0,s()/r()*100)));var d=hc();let c;var u=n(d);let _;G(()=>{c=Ka(d,"",c,{height:i()}),_=Ka(u,"",_,{width:`${a(v)??""}%`,background:l()})}),f(e,d)}var _c=$('<div class="progress-card svelte-11979gn"><!> <p class="progress-text svelte-11979gn"> </p></div>'),mc=$('<span class="muted svelte-11979gn">-</span>'),gc=$('<tr><td class="mono svelte-11979gn"> </td><td class="svelte-11979gn"> </td><td class="svelte-11979gn"><!></td><td class="row-actions svelte-11979gn"><!> <!> <!></td></tr>'),yc=$('<tr><td colspan="4" class="empty-row svelte-11979gn">Senaryo yok</td></tr>'),wc=$('<div class="card svelte-11979gn"><table class="svelte-11979gn"><thead><tr><th class="svelte-11979gn">ID</th><th class="svelte-11979gn">Girdi</th><th class="svelte-11979gn">Son Sonuc</th><th class="svelte-11979gn"></th></tr></thead><tbody></tbody></table></div>'),bc=$('<div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">ID</span><input class="input mono svelte-11979gn" placeholder="S01"/></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Kullanici Girdisi</span><textarea class="textarea svelte-11979gn" rows="3" placeholder="Kullanicinin mesaji..."></textarea></div> <div class="form-group svelte-11979gn"><span class="lbl svelte-11979gn">Beklenen Konular (virgul ile)</span><input class="input svelte-11979gn"/></div> <div class="modal-actions svelte-11979gn"><!> <!></div>',1),kc=$('<div class="page-header svelte-11979gn"><div><h1 class="svelte-11979gn">Eval Yonetimi</h1><p class="svelte-11979gn"> </p></div> <div class="actions svelte-11979gn"><!> <!> <!></div></div> <!> <!> <!>',1);function xc(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(me([])),i=B(!1),v=B(me({completed:0,total:0,text:""})),d=B(me({})),c=B(!1),u=B(me({id:"",input:"",expectedTopics:[],assertions:[]})),_=B(null),p=null;Ee(()=>k()),js(()=>p==null?void 0:p.close());async function k(){y(s,!0);try{const[S,M]=await Promise.all([te.get("admin/eval/scenarios"),te.get("admin/eval/history").catch(()=>({history:[]}))]);y(r,S.scenarios||S||[],!0),y(l,M.history||M||[],!0)}catch(S){F("Eval yuklenemedi: "+S.message,"error")}finally{y(s,!1)}}function m(){y(i,!0),y(v,{completed:0,total:a(r).length,text:"Baslatiliyor..."},!0),y(d,{},!0),p=Ul("admin/eval/run-all?runs=3",{onMessage(S){S.type==="progress"&&(a(v).completed++,a(v).text=S.scenarioId+": "+(S.pass?"GECTI":"KALDI"),a(d)[S.scenarioId]=S),S.type==="done"&&(y(i,!1),p==null||p.close(),a(v).text="Tamamlandi â "+S.passed+"/"+S.total+" gecti",F("Eval tamamlandi: "+S.passed+"/"+S.total,S.passed===S.total?"success":"warning"),k()),S.type==="error"&&(y(i,!1),p==null||p.close(),a(v).text="Hata: "+S.message,F("Eval hatasi: "+S.message,"error"))},onError(){y(i,!1),a(v).text="Baglanti hatasi"}})}async function h(S){try{const M=await te.post("admin/eval/run/"+S+"?runs=3",{});a(d)[S]=M,F(S+": "+(M.pass?"GECTI":"KALDI"),M.pass?"success":"warning")}catch(M){F("Hata: "+M.message,"error")}}function x(){y(_,null),y(u,{id:"",input:"",expectedTopics:[],assertions:[]},!0),y(c,!0)}function g(S){y(_,S.id,!0),y(u,{...S,expectedTopics:[...S.expectedTopics||[]],assertions:[...S.assertions||[]]},!0),y(c,!0)}async function b(){if(!(!a(u).id||!a(u).input))try{a(_)?await te.put("admin/eval/scenarios/"+a(_),a(u)):await te.post("admin/eval/scenarios",a(u)),F("Kaydedildi","success"),y(c,!1),await k()}catch(S){F("Hata: "+S.message,"error")}}async function P(S){if(await Ba({title:"Sil",message:"Senaryo silinecek.",confirmText:"Sil",danger:!0}))try{await te.delete("admin/eval/scenarios/"+S),F("Silindi","success"),await k()}catch(W){F("Hata: "+W.message,"error")}}async function j(){if(await Ba({title:"Gecmisi Temizle",message:"Tum eval gecmisi silinecek.",confirmText:"Temizle",danger:!0}))try{await te.delete("admin/eval/history"),y(l,[],!0),F("Gecmis temizlendi","success")}catch(M){F("Hata: "+M.message,"error")}}var C=kc(),z=ve(C),E=n(z),K=o(n(E)),I=n(K),T=o(E,2),q=n(T);ne(q,{onclick:j,variant:"ghost",size:"sm",children:(S,M)=>{var W=V("Gecmisi Temizle");f(S,W)},$$slots:{default:!0}});var R=o(q,2);ne(R,{onclick:x,variant:"secondary",size:"sm",children:(S,M)=>{var W=V("+ Senaryo");f(S,W)},$$slots:{default:!0}});var H=o(R,2);{let S=oe(()=>a(i)||!a(r).length);ne(H,{onclick:m,variant:"primary",size:"sm",get disabled(){return a(S)},children:(M,W)=>{var J=V();G(()=>A(J,a(i)?"Calisiyor...":"Tumu Calistir")),f(M,J)},$$slots:{default:!0}})}var D=o(z,2);{var N=S=>{var M=_c(),W=n(M);pc(W,{get value(){return a(v).completed},get max(){return a(v).total}});var J=o(W,2),ie=n(J);G(()=>A(ie,`${a(v).completed??""}/${a(v).total??""} â ${a(v).text??""}`)),f(S,M)};le(D,S=>{a(i)&&S(N)})}var Y=o(D,2);{var L=S=>{Ae(S,{message:"Yukleniyor..."})},Z=S=>{var M=wc(),W=n(M),J=o(n(W));ke(J,21,()=>a(r),qe,(ie,X)=>{var w=gc(),Q=n(w),re=n(Q),se=o(Q),fe=n(se),ee=o(se),de=n(ee);{var ae=ce=>{{let Ze=oe(()=>a(d)[a(X).id].pass?"green":"red");Ke(ce,{get variant(){return a(Ze)},children:(Ye,_a)=>{var qt=V();G(()=>A(qt,a(d)[a(X).id].pass?"GECTI":"KALDI")),f(Ye,qt)},$$slots:{default:!0}})}},be=ce=>{var Ze=mc();f(ce,Ze)};le(de,ce=>{a(d)[a(X).id]?ce(ae):ce(be,!1)})}var Se=o(ee),je=n(Se);ne(je,{onclick:()=>h(a(X).id),variant:"ghost",size:"sm",children:(ce,Ze)=>{var Ye=V("Calistir");f(ce,Ye)},$$slots:{default:!0}});var Pe=o(je,2);ne(Pe,{onclick:()=>g(a(X)),variant:"ghost",size:"sm",children:(ce,Ze)=>{var Ye=V("Duzenle");f(ce,Ye)},$$slots:{default:!0}});var Fe=o(Pe,2);ne(Fe,{onclick:()=>P(a(X).id),variant:"ghost",size:"sm",children:(ce,Ze)=>{var Ye=V("Sil");f(ce,Ye)},$$slots:{default:!0}}),G(ce=>{A(re,a(X).id),A(fe,ce)},[()=>{var ce;return((ce=a(X).input)==null?void 0:ce.slice(0,60))||"-"}]),f(ie,w)},ie=>{var X=yc();f(ie,X)}),f(S,M)};le(Y,S=>{a(s)?S(L):S(Z,!1)})}var U=o(Y,2);{let S=oe(()=>a(_)?"Senaryo Duzenle":"Yeni Senaryo");ns(U,{get title(){return a(S)},width:"600px",get open(){return a(c)},set open(M){y(c,M,!0)},children:(M,W)=>{var J=bc(),ie=ve(J),X=o(n(ie)),w=o(ie,2),Q=o(n(w)),re=o(w,2),se=o(n(re)),fe=o(re,2),ee=n(fe);ne(ee,{onclick:()=>y(c,!1),variant:"secondary",children:(ae,be)=>{var Se=V("Iptal");f(ae,Se)},$$slots:{default:!0}});var de=o(ee,2);ne(de,{onclick:b,variant:"primary",children:(ae,be)=>{var Se=V("Kaydet");f(ae,Se)},$$slots:{default:!0}}),G(ae=>{X.disabled=!!a(_),ar(se,ae)},[()=>(a(u).expectedTopics||[]).join(", ")]),ue(X,()=>a(u).id,ae=>a(u).id=ae),ue(Q,()=>a(u).input,ae=>a(u).input=ae),pe("input",se,ae=>{a(u).expectedTopics=ae.target.value.split(",").map(be=>be.trim()).filter(Boolean)}),f(M,J)},$$slots:{default:!0}})}G(()=>A(I,`${a(r).length??""} senaryo`)),f(e,C),ye()}Te(["input"]);var $c=$('<div class="faq-actions svelte-16g8l1g"><!> <!></div>'),qc=$('<div class="faq-card svelte-16g8l1g"><div class="faq-q svelte-16g8l1g"><strong>S:</strong> </div> <div class="faq-a svelte-16g8l1g"><strong>C:</strong> </div> <div class="faq-footer svelte-16g8l1g"><!> <!></div></div>'),zc=$('<div class="empty svelte-16g8l1g">FAQ onerisi yok</div>'),Sc=$('<div class="faq-list svelte-16g8l1g"></div>'),Ec=$('<div class="page-header svelte-16g8l1g"><div><h1 class="svelte-16g8l1g">FAQ Onerileri</h1><p class="svelte-16g8l1g">Otomatik uretilen SSS onerileri</p></div> <div class="actions svelte-16g8l1g"><!> <!></div></div> <!>',1);function Tc(e,t){ge(t,!0);let s=B(!0),r=B(me([]));Ee(()=>l());async function l(){y(s,!0);try{const g=await te.get("admin/auto-faq");y(r,g.items||g.faqs||g||[],!0)}catch(g){F("FAQ yuklenemedi: "+g.message,"error")}finally{y(s,!1)}}async function i(g){try{await te.post("admin/auto-faq/"+g+"/approve"),F("Onaylandi","success"),await l()}catch(b){F("Hata: "+b.message,"error")}}async function v(g){try{await te.post("admin/auto-faq/"+g+"/reject"),F("Reddedildi","info"),await l()}catch(b){F("Hata: "+b.message,"error")}}async function d(){try{await te.post("admin/auto-faq/generate"),F("FAQ uretimi basladi","info"),setTimeout(l,3e3)}catch(g){F("Hata: "+g.message,"error")}}var c=Ec(),u=ve(c),_=o(n(u),2),p=n(_);ne(p,{onclick:d,variant:"secondary",size:"sm",children:(g,b)=>{var P=V("Yeni Uret");f(g,P)},$$slots:{default:!0}});var k=o(p,2);ne(k,{onclick:l,variant:"ghost",size:"sm",children:(g,b)=>{var P=V("Yenile");f(g,P)},$$slots:{default:!0}});var m=o(u,2);{var h=g=>{Ae(g,{message:"Yukleniyor..."})},x=g=>{var b=Sc();ke(b,21,()=>a(r),qe,(P,j)=>{var C=qc(),z=n(C),E=o(n(z)),K=o(z,2),I=o(n(K)),T=o(K,2),q=n(T);{let D=oe(()=>a(j).status==="approved"?"green":a(j).status==="rejected"?"red":"yellow");Ke(q,{get variant(){return a(D)},children:(N,Y)=>{var L=V();G(()=>A(L,a(j).status||"bekliyor")),f(N,L)},$$slots:{default:!0}})}var R=o(q,2);{var H=D=>{var N=$c(),Y=n(N);ne(Y,{onclick:()=>i(a(j).id||a(j)._id),variant:"primary",size:"sm",children:(Z,U)=>{var S=V("Onayla");f(Z,S)},$$slots:{default:!0}});var L=o(Y,2);ne(L,{onclick:()=>v(a(j).id||a(j)._id),variant:"ghost",size:"sm",children:(Z,U)=>{var S=V("Reddet");f(Z,S)},$$slots:{default:!0}}),f(D,N)};le(R,D=>{(!a(j).status||a(j).status==="pending")&&D(H)})}G(()=>{A(E,` ${a(j).question??""}`),A(I,` ${a(j).answer??""}`)}),f(P,C)},P=>{var j=zc();f(P,j)}),f(g,b)};le(m,g=>{a(s)?g(h):g(x,!1)})}f(e,c),ye()}var Ac=$('<div class="kpi-grid svelte-vlvkti"><!> <!> <!> <!></div>'),Pc=$('<tr><td class="svelte-vlvkti"><span> </span></td><td class="svelte-vlvkti"> </td><td class="mono svelte-vlvkti"> </td></tr>'),Cc=$('<div class="card svelte-vlvkti"><h2 class="svelte-vlvkti">Son Geri Bildirimler</h2> <table class="svelte-vlvkti"><thead><tr><th class="svelte-vlvkti">Puan</th><th class="svelte-vlvkti">Yorum</th><th class="svelte-vlvkti">Oturum</th></tr></thead><tbody></tbody></table></div>'),jc=$("<!> <!>",1),Mc=$('<div class="page-header svelte-vlvkti"><div><h1 class="svelte-vlvkti">Feedback Raporu</h1><p class="svelte-vlvkti">Kullanici geri bildirimleri</p></div> <select class="select svelte-vlvkti"><option>7 Gun</option><option>30 Gun</option><option>90 Gun</option></select></div> <!>',1);function Ic(e,t){ge(t,!0);let s=B(!0),r=B(null),l=B(me([])),i=B(30);Ee(()=>v());async function v(){y(s,!0);try{const[g,b]=await Promise.all([te.get("admin/feedback-report?days="+a(i)),te.get("admin/feedback").catch(()=>({feedbacks:[]}))]);y(r,g,!0),y(l,b.feedbacks||b||[],!0)}catch(g){F("Feedback yuklenemedi: "+g.message,"error")}finally{y(s,!1)}}var d=Mc(),c=ve(d),u=o(n(c),2),_=n(u);_.value=_.__value=7;var p=o(_);p.value=p.__value=30;var k=o(p);k.value=k.__value=90;var m=o(c,2);{var h=g=>{Ae(g,{message:"Yukleniyor..."})},x=g=>{var b=jc(),P=ve(b);{var j=E=>{var K=Ac(),I=n(K);{let H=oe(()=>a(r).totalFeedbacks??a(r).total??0);nt(I,{label:"Toplam Feedback",get value(){return a(H)}})}var T=o(I,2);{let H=oe(()=>(a(r).avgCsat??0).toFixed(1)+"/5");nt(T,{label:"Ort. CSAT",get value(){return a(H)}})}var q=o(T,2);{let H=oe(()=>a(r).positive??0);nt(q,{label:"Pozitif",get value(){return a(H)},color:"var(--success)"})}var R=o(q,2);{let H=oe(()=>a(r).negative??0);nt(R,{label:"Negatif",get value(){return a(H)},color:"var(--error)"})}f(E,K)};le(P,E=>{a(r)&&E(j)})}var C=o(P,2);{var z=E=>{var K=Cc(),I=o(n(K),2),T=o(n(I));ke(T,21,()=>a(l).slice(0,20),qe,(q,R)=>{var H=Pc(),D=n(H),N=n(D);let Y;var L=n(N),Z=o(D),U=n(Z),S=o(Z),M=n(S);G(W=>{Y=Ie(N,1,"rating svelte-vlvkti",null,Y,{good:a(R).rating>=4,bad:a(R).rating<=2}),A(L,`${a(R).rating??""}/5`),A(U,a(R).comment||"-"),A(M,W)},[()=>{var W;return((W=a(R).sessionId)==null?void 0:W.slice(-8))||"-"}]),f(q,H)}),f(E,K)};le(C,E=>{a(l).length&&E(z)})}f(g,b)};le(m,g=>{a(s)?g(h):g(x,!1)})}pe("change",u,v),es(u,()=>a(i),g=>y(i,g)),f(e,d),ye()}Te(["change"]);var Oc=$('<tr><td class="svelte-1vhi8r1"> </td><td class="svelte-1vhi8r1"> </td><td class="svelte-1vhi8r1"> </td></tr>'),Dc=$('<tr><td colspan="3" class="empty-row svelte-1vhi8r1">Content gap yok</td></tr>'),Kc=$('<div class="card svelte-1vhi8r1"><table class="svelte-1vhi8r1"><thead><tr><th class="svelte-1vhi8r1">Soru</th><th class="svelte-1vhi8r1">Sayi</th><th class="svelte-1vhi8r1">Son Gorulme</th></tr></thead><tbody></tbody></table></div>'),Bc=$('<div class="page-header svelte-1vhi8r1"><div><h1 class="svelte-1vhi8r1">Content Gaps</h1><p class="svelte-1vhi8r1">Cevaplanamayan sorular</p></div> <!></div> <!>',1);function Nc(e,t){ge(t,!0);let s=B(!0),r=B(me([]));Ee(()=>l());async function l(){y(s,!0);try{const p=await te.get("admin/content-gaps");y(r,p.gaps||p||[],!0)}catch(p){F("Content gaps yuklenemedi: "+p.message,"error")}finally{y(s,!1)}}var i=Bc(),v=ve(i),d=o(n(v),2);ne(d,{onclick:l,variant:"ghost",size:"sm",children:(p,k)=>{var m=V("Yenile");f(p,m)},$$slots:{default:!0}});var c=o(v,2);{var u=p=>{Ae(p,{message:"Yukleniyor..."})},_=p=>{var k=Kc(),m=n(k),h=o(n(m));ke(h,21,()=>a(r),qe,(x,g)=>{var b=Oc(),P=n(b),j=n(P),C=o(P),z=n(C),E=o(C),K=n(E);G(I=>{A(j,I),A(z,a(g).count||a(g).frequency||0),A(K,a(g).lastSeen||"-")},[()=>is(a(g).question||a(g).query||"",80)]),f(x,b)},x=>{var g=Dc();f(x,g)}),f(p,k)};le(c,p=>{a(s)?p(u):p(_,!1)})}f(e,i),ye()}var Rc=$('<div class="detail svelte-heq1fv"><!> <div class="version-card svelte-heq1fv"><h2 class="svelte-heq1fv"> </h2> <p class="meta svelte-heq1fv"> </p> <pre class="content-pre svelte-heq1fv"> </pre></div></div>'),Hc=$('<tr><td class="svelte-heq1fv"> </td><td class="svelte-heq1fv"><!></td><td class="svelte-heq1fv"> </td><td class="svelte-heq1fv"><!></td></tr>'),Lc=$('<tr><td colspan="4" class="empty-row svelte-heq1fv">Versiyon yok</td></tr>'),Fc=$('<div class="card svelte-heq1fv"><table class="svelte-heq1fv"><thead><tr><th class="svelte-heq1fv">Dosya</th><th class="svelte-heq1fv">Versiyon</th><th class="svelte-heq1fv">Tarih</th><th class="svelte-heq1fv"></th></tr></thead><tbody></tbody></table></div>'),Yc=$('<div class="page-header svelte-heq1fv"><div><h1 class="svelte-heq1fv">Prompt Gecmisi</h1><p class="svelte-heq1fv">Prompt versiyon gecmisi</p></div> <!></div> <!>',1);function Uc(e,t){ge(t,!0);let s=B(!0),r=B(me([])),l=B(null);Ee(()=>i());async function i(){y(s,!0);try{const m=await te.get("admin/prompt-versions");y(r,m.versions||m||[],!0)}catch(m){F("Prompt versiyonlari yuklenemedi: "+m.message,"error")}finally{y(s,!1)}}var v=Yc(),d=ve(v),c=o(n(d),2);ne(c,{onclick:i,variant:"ghost",size:"sm",children:(m,h)=>{var x=V("Yenile");f(m,x)},$$slots:{default:!0}});var u=o(d,2);{var _=m=>{Ae(m,{message:"Yukleniyor..."})},p=m=>{var h=Rc(),x=n(h);ne(x,{onclick:()=>y(l,null),variant:"ghost",size:"sm",children:(K,I)=>{var T=V("â Geri");f(K,T)},$$slots:{default:!0}});var g=o(x,2),b=n(g),P=n(b),j=o(b,2),C=n(j),z=o(j,2),E=n(z);G(K=>{A(P,a(l).filename||a(l).file),A(C,`Versiyon: ${a(l).version??""} Â· ${K??""}`),A(E,a(l).content||"")},[()=>Ut(a(l).createdAt)]),f(m,h)},k=m=>{var h=Fc(),x=n(h),g=o(n(x));ke(g,21,()=>a(r),qe,(b,P)=>{var j=Hc(),C=n(j),z=n(C),E=o(C),K=n(E);Ke(K,{variant:"blue",children:(H,D)=>{var N=V();G(()=>A(N,`v${a(P).version??""}`)),f(H,N)},$$slots:{default:!0}});var I=o(E),T=n(I),q=o(I),R=n(q);ne(R,{onclick:()=>y(l,a(P),!0),variant:"ghost",size:"sm",children:(H,D)=>{var N=V("Goruntule");f(H,N)},$$slots:{default:!0}}),G(H=>{A(z,a(P).filename||a(P).file),A(T,H)},[()=>Ut(a(P).createdAt)]),f(b,j)},b=>{var P=Lc();f(b,P)}),f(m,h)};le(u,m=>{a(s)?m(_):a(l)?m(p,1):m(k,!1)})}f(e,v),ye()}var Gc=$('<div class="card svelte-r56qw2"><h2 class="svelte-r56qw2">Sistem</h2> <div class="info-rows svelte-r56qw2"><div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Durum</span><!></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Uptime</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Node</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Bellek</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">LLM</span><!></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Embedding</span><!></div></div></div>'),Vc=$('<div class="card svelte-r56qw2"><h2 class="svelte-r56qw2">SLA</h2> <div class="info-rows svelte-r56qw2"><div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Ort. Yanit Suresi</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Uptime</span><span class="svelte-r56qw2"> </span></div> <div class="info-row svelte-r56qw2"><span class="svelte-r56qw2">Basari Orani</span><span class="svelte-r56qw2"> </span></div></div></div>'),Wc=$('<tr><td class="svelte-r56qw2"> </td><td class="svelte-r56qw2"><!></td><td class="svelte-r56qw2"> </td></tr>'),Qc=$('<div class="card audit-card svelte-r56qw2"><h2 class="svelte-r56qw2">Denetim Kaydi</h2> <table class="svelte-r56qw2"><thead><tr><th class="svelte-r56qw2">Zaman</th><th class="svelte-r56qw2">Islem</th><th class="svelte-r56qw2">Detay</th></tr></thead><tbody></tbody></table></div>'),Zc=$('<div class="status-grid svelte-r56qw2"><!> <!></div> <!>',1),Jc=$('<div class="page-header svelte-r56qw2"><div><h1 class="svelte-r56qw2">Sistem Durumu</h1><p class="svelte-r56qw2">Sistem sagligi ve denetim</p></div> <!></div> <!>',1);function Xc(e,t){ge(t,!0);let s=B(!0),r=B(null),l=B(null),i=B(me([]));Ee(()=>v());async function v(){y(s,!0);try{const[h,x,g]=await Promise.all([te.get("admin/system"),te.get("admin/sla").catch(()=>null),te.get("admin/audit-log").catch(()=>({log:[]}))]);y(r,h,!0),y(l,x,!0),y(i,g.log||g||[],!0)}catch(h){F("Sistem durumu yuklenemedi: "+h.message,"error")}finally{y(s,!1)}}async function d(){try{y(r,await te.get("admin/system?forceCheck=1"),!0),F("Kontrol tamamlandi","success")}catch(h){F("Hata: "+h.message,"error")}}var c=Jc(),u=ve(c),_=o(n(u),2);ne(_,{onclick:d,variant:"secondary",size:"sm",children:(h,x)=>{var g=V("Kontrol Et");f(h,g)},$$slots:{default:!0}});var p=o(u,2);{var k=h=>{Ae(h,{message:"Yukleniyor..."})},m=h=>{var x=Zc(),g=ve(x),b=n(g);{var P=K=>{var I=Gc(),T=o(n(I),2),q=n(T),R=o(n(q));{let w=oe(()=>a(r).status==="ok"||a(r).healthy?"green":"red");Ke(R,{get variant(){return a(w)},children:(Q,re)=>{var se=V();G(()=>A(se,a(r).status||(a(r).healthy?"saglikli":"sorunlu"))),f(Q,se)},$$slots:{default:!0}})}var H=o(q,2),D=o(n(H)),N=n(D),Y=o(H,2),L=o(n(Y)),Z=n(L),U=o(Y,2),S=o(n(U)),M=n(S),W=o(U,2),J=o(n(W));{let w=oe(()=>a(r).llmStatus==="ok"?"green":"yellow");Ke(J,{get variant(){return a(w)},children:(Q,re)=>{var se=V();G(()=>A(se,a(r).llmStatus||a(r).llm||"-")),f(Q,se)},$$slots:{default:!0}})}var ie=o(W,2),X=o(n(ie));{let w=oe(()=>a(r).embeddingStatus==="ok"?"green":"yellow");Ke(X,{get variant(){return a(w)},children:(Q,re)=>{var se=V();G(()=>A(se,a(r).embeddingStatus||"-")),f(Q,se)},$$slots:{default:!0}})}G(()=>{A(N,a(r).uptime||"-"),A(Z,a(r).nodeVersion||"-"),A(M,a(r).memoryUsage||"-")}),f(K,I)};le(b,K=>{a(r)&&K(P)})}var j=o(b,2);{var C=K=>{var I=Vc(),T=o(n(I),2),q=n(T),R=o(n(q)),H=n(R),D=o(q,2),N=o(n(D)),Y=n(N),L=o(D,2),Z=o(n(L)),U=n(Z);G(S=>{A(H,S),A(Y,a(l).uptimePercent?a(l).uptimePercent+"%":"-"),A(U,a(l).successRate?a(l).successRate+"%":"-")},[()=>a(l).avgResponseMs?(a(l).avgResponseMs/1e3).toFixed(1)+"s":"-"]),f(K,I)};le(j,K=>{a(l)&&K(C)})}var z=o(g,2);{var E=K=>{var I=Qc(),T=o(n(I),2),q=o(n(T));ke(q,21,()=>a(i).slice(0,50),qe,(R,H)=>{var D=Wc(),N=n(D),Y=n(N),L=o(N),Z=n(L);Ke(Z,{variant:"blue",children:(M,W)=>{var J=V();G(()=>A(J,a(H).action||a(H).type)),f(M,J)},$$slots:{default:!0}});var U=o(L),S=n(U);G(M=>{A(Y,M),A(S,a(H).detail||a(H).message||"-")},[()=>Ut(a(H).at||a(H).timestamp)]),f(R,D)}),f(K,I)};le(z,K=>{a(i).length&&K(E)})}f(h,x)};le(p,h=>{a(s)?h(k):h(m,!1)})}f(e,c),ye()}var eu=$('<div class="login-page svelte-1n46o8q"><div class="login-card svelte-1n46o8q"><div class="login-logo svelte-1n46o8q">Q</div> <h2 class="svelte-1n46o8q">Qragy Admin</h2> <p class="svelte-1n46o8q">Devam etmek icin admin token girin.</p> <input type="password" class="login-input svelte-1n46o8q" placeholder="Admin Token"/> <button class="login-btn svelte-1n46o8q">Giris Yap</button></div></div>'),tu=$('<div class="coming-soon svelte-1n46o8q"><div class="coming-soon-icon svelte-1n46o8q"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></svg></div> <h2 class="svelte-1n46o8q">Yapilandiriliyor</h2> <p class="svelte-1n46o8q"><strong> </strong> paneli henuz hazir degil.</p></div>'),au=$("<!> <!> <!>",1);function su(e,t){ge(t,!0);let s;Ee(()=>{s=Jn()}),js(()=>{s==null||s()});let r=oe(wr);var l=au(),i=ve(l);{var v=p=>{var k=eu(),m=n(k),h=o(n(m),6),x=o(h,2);pe("keydown",h,g=>{g.key==="Enter"&&g.target.value.trim()&&(Rr(g.target.value),window.location.reload())}),pe("click",x,()=>{const g=document.querySelector(".login-input");g!=null&&g.value.trim()&&(Rr(g.value),window.location.reload())}),f(p,k)},d=oe(()=>!ua()),c=p=>{fo(p,{children:(k,m)=>{var h=Ya(),x=ve(h);{var g=w=>{Do(w,{})},b=w=>{Xo(w,{})},P=w=>{ov(w,{})},j=w=>{gv(w,{})},C=w=>{Av(w,{})},z=w=>{Bv(w,{})},E=w=>{Qv(w,{})},K=w=>{cd(w,{})},I=w=>{md(w)},T=w=>{wd(w,{})},q=w=>{zd(w,{})},R=w=>{Td(w,{})},H=w=>{Cd(w,{})},D=w=>{Bd(w,{})},N=w=>{Ud(w,{})},Y=w=>{Xd(w,{})},L=w=>{ic(w,{})},Z=w=>{fc(w,{})},U=w=>{xc(w,{})},S=w=>{Tc(w,{})},M=w=>{Ic(w,{})},W=w=>{Nc(w,{})},J=w=>{Uc(w,{})},ie=w=>{Xc(w,{})},X=w=>{var Q=tu(),re=o(n(Q),4),se=n(re),fe=n(se);G(()=>A(fe,a(r))),f(w,Q)};le(x,w=>{a(r)==="dashboard"?w(g):a(r)==="live-chats"?w(b,1):a(r)==="closed-chats"?w(P,2):a(r)==="search"?w(j,3):a(r)==="agent-inbox"?w(C,4):a(r)==="knowledge-base"?w(z,5):a(r)==="topics"?w(E,6):a(r)==="bot-settings"?w(K,7):a(r)==="bot-test"?w(I,8):a(r)==="chat-flow"?w(T,9):a(r)==="site-settings"?w(q,10):a(r)==="zendesk"?w(R,11):a(r)==="whatsapp"?w(H,12):a(r)==="webhooks"?w(D,13):a(r)==="env-vars"?w(N,14):a(r)==="agent-files"?w(Y,15):a(r)==="memory-templates"?w(L,16):a(r)==="analytics"?w(Z,17):a(r)==="eval"?w(U,18):a(r)==="faq-suggestions"?w(S,19):a(r)==="feedback"?w(M,20):a(r)==="content-gaps"?w(W,21):a(r)==="prompt-history"?w(J,22):a(r)==="system-status"?w(ie,23):w(X,!1)})}f(k,h)},$$slots:{default:!0}})};le(i,p=>{a(d)?p(v):p(c,!1)})}var u=o(i,2);yo(u,{});var _=o(u,2);ko(_,{}),f(e,l),ye()}Te(["keydown","click"]);jn(su,{target:document.getElementById("app")});
